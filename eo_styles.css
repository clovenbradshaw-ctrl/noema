/**
 * Noema - Data Workbench Styles
 * Airtable-inspired data management interface with EO sync principles
 */

/* ===== Reset & Base ===== */
*, *::before, *::after {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}

:root {
  /* Primary Colors */
  --primary-50: #eff6ff;
  --primary-100: #dbeafe;
  --primary-200: #bfdbfe;
  --primary-300: #93c5fd;
  --primary-400: #60a5fa;
  --primary-500: #3b82f6;
  --primary-600: #2563eb;
  --primary-700: #1d4ed8;
  --primary-800: #1e40af;
  --primary-900: #1e3a8a;

  /* Neutral Colors */
  --gray-50: #f9fafb;
  --gray-100: #f3f4f6;
  --gray-200: #e5e7eb;
  --gray-300: #d1d5db;
  --gray-400: #9ca3af;
  --gray-500: #6b7280;
  --gray-600: #4b5563;
  --gray-700: #374151;
  --gray-800: #1f2937;
  --gray-900: #111827;

  /* Semantic Colors */
  --success-50: #ecfdf5;
  --success-100: #d1fae5;
  --success-500: #10b981;
  --success-600: #059669;
  --success-700: #047857;

  --warning-50: #fffbeb;
  --warning-100: #fef3c7;
  --warning-500: #f59e0b;
  --warning-600: #d97706;
  --warning-700: #b45309;

  --danger-50: #fef2f2;
  --danger-100: #fee2e2;
  --danger-500: #ef4444;
  --danger-600: #dc2626;
  --danger-700: #b91c1c;

  --info-50: #eff6ff;
  --info-100: #dbeafe;
  --info-500: #3b82f6;
  --info-700: #1d4ed8;

  /* EO Colors - Enhanced for GIVEN vs MEANT visibility */
  --given-color: #10b981;
  --given-bg: rgba(16, 185, 129, 0.1);
  --given-bg-panel: rgba(16, 185, 129, 0.04);
  --given-border: rgba(16, 185, 129, 0.25);
  --meant-color: #8b5cf6;
  --meant-bg: rgba(139, 92, 246, 0.1);
  --meant-bg-panel: rgba(139, 92, 246, 0.04);
  --meant-border: rgba(139, 92, 246, 0.25);

  /* Architecture Chain Colors */
  --chain-source: #10b981;
  --chain-set: #3b82f6;
  --chain-lens: #f59e0b;
  --chain-view: #8b5cf6;

  /* Field Type Colors */
  --field-text: #6b7280;
  --field-number: #3b82f6;
  --field-date: #f59e0b;
  --field-select: #8b5cf6;
  --field-checkbox: #10b981;
  --field-link: #ec4899;
  --field-formula: #06b6d4;
  --field-attachment: #f97316;

  /* Dark Theme */
  --bg-primary: #0f172a;
  --bg-secondary: #1e293b;
  --bg-tertiary: #334155;
  --bg-elevated: #475569;
  --bg-hover: rgba(255, 255, 255, 0.05);
  --bg-active: rgba(255, 255, 255, 0.1);

  --text-primary: #f1f5f9;
  --text-secondary: #cbd5e1;
  --text-muted: #94a3b8;
  --text-disabled: #6b7b8f;

  --border-primary: #334155;
  --border-secondary: #475569;
  --border-subtle: rgba(255, 255, 255, 0.1);
  --border-focus: var(--primary-500);

  /* Sizing */
  --sidebar-width: 300px;
  --sidebar-collapsed: 64px;
  --header-height: 52px;
  --status-bar-height: 32px;
  --detail-panel-width: 380px;

  /* Table */
  --row-height: 36px;
  --header-height-table: 36px;
  --cell-padding: 8px 12px;
  --row-number-width: 60px;

  /* Typography */
  --font-sans: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
  --font-mono: 'SF Mono', 'Fira Code', 'Consolas', monospace;

  /* Transitions */
  --transition-fast: 0.1s ease;
  --transition-normal: 0.2s ease;
  --transition-slow: 0.3s ease;

  /* Shadows */
  --shadow-sm: 0 1px 2px rgba(0, 0, 0, 0.3);
  --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.3), 0 2px 4px -2px rgba(0, 0, 0, 0.3);
  --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.3), 0 4px 6px -4px rgba(0, 0, 0, 0.3);
  --shadow-xl: 0 20px 25px -5px rgba(0, 0, 0, 0.3), 0 8px 10px -6px rgba(0, 0, 0, 0.3);

  /* Radius */
  --radius-sm: 4px;
  --radius-md: 6px;
  --radius-lg: 8px;
  --radius-xl: 12px;
}

/* Light theme - applied via class for user preference persistence */
/* Improved for WCAG AA accessibility compliance */
html.light-theme,
html.light-theme :root {
    --bg-primary: #ffffff;
    --bg-secondary: #f8fafc;
    --bg-tertiary: #f1f5f9;
    --bg-elevated: #ffffff;
    --bg-hover: rgba(0, 0, 0, 0.06);
    --bg-active: rgba(0, 0, 0, 0.12);

    --text-primary: #0f172a;
    --text-secondary: #334155;
    --text-muted: #475569;
    --text-disabled: #64748b;

    --border-primary: #cbd5e1;
    --border-secondary: #94a3b8;
    --border-subtle: rgba(0, 0, 0, 0.08);

    --shadow-sm: 0 1px 2px rgba(0, 0, 0, 0.08);
    --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.12), 0 2px 4px -2px rgba(0, 0, 0, 0.08);
    --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.12), 0 4px 6px -4px rgba(0, 0, 0, 0.08);
    --shadow-xl: 0 20px 25px -5px rgba(0, 0, 0, 0.12), 0 8px 10px -6px rgba(0, 0, 0, 0.08);
}

/* Also support system preference as fallback when no user preference is saved */
/* Uses same improved contrast values as .light-theme class */
@media (prefers-color-scheme: light) {
  html:not(.dark-theme):not(.light-theme) {
    --bg-primary: #ffffff;
    --bg-secondary: #f8fafc;
    --bg-tertiary: #f1f5f9;
    --bg-elevated: #ffffff;
    --bg-hover: rgba(0, 0, 0, 0.06);
    --bg-active: rgba(0, 0, 0, 0.12);

    --text-primary: #0f172a;
    --text-secondary: #334155;
    --text-muted: #475569;
    --text-disabled: #64748b;

    --border-primary: #cbd5e1;
    --border-secondary: #94a3b8;
    --border-subtle: rgba(0, 0, 0, 0.08);

    --shadow-sm: 0 1px 2px rgba(0, 0, 0, 0.08);
    --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.12), 0 2px 4px -2px rgba(0, 0, 0, 0.08);
    --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.12), 0 4px 6px -4px rgba(0, 0, 0, 0.08);
    --shadow-xl: 0 20px 25px -5px rgba(0, 0, 0, 0.12), 0 8px 10px -6px rgba(0, 0, 0, 0.08);
  }
}

html, body {
  height: 100%;
  font-family: var(--font-sans);
  font-size: 14px;
  line-height: 1.5;
  background: var(--bg-primary);
  color: var(--text-primary);
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

/* ===== App Layout ===== */
.app-container {
  display: flex;
  height: 100vh;
  overflow: hidden;
}

/* ===== Sidebar ===== */
.sidebar {
  width: var(--sidebar-width);
  background: var(--bg-secondary);
  border-right: 1px solid var(--border-primary);
  display: flex;
  flex-direction: column;
  flex-shrink: 0;
  transition: width var(--transition-normal);
  z-index: 100;
}

.sidebar.collapsed {
  width: var(--sidebar-collapsed);
}

.sidebar.collapsed .logo-text,
.sidebar.collapsed .nav-section-title,
.sidebar.collapsed .nav-item span:not(.nav-item-icon),
.sidebar.collapsed .sidebar-search,
.sidebar.collapsed .nav-section-action {
  display: none;
}

.sidebar-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 12px 16px;
  border-bottom: 1px solid var(--border-primary);
  min-height: 56px;
}

.logo {
  display: flex;
  align-items: center;
  gap: 10px;
}

.logo-icon {
  width: 32px;
  height: 32px;
  background: linear-gradient(135deg, var(--primary-500), var(--meant-color));
  border-radius: var(--radius-md);
  display: flex;
  align-items: center;
  justify-content: center;
  color: white;
  font-size: 16px;
}

.logo-text {
  font-size: 16px;
  font-weight: 600;
  color: var(--text-primary);
}

.sidebar-collapse-btn {
  width: 28px;
  height: 28px;
  border: none;
  background: transparent;
  color: var(--text-muted);
  border-radius: var(--radius-sm);
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: var(--transition-fast);
}

.sidebar-collapse-btn:hover {
  background: var(--bg-hover);
  color: var(--text-primary);
}

.sidebar.collapsed .sidebar-collapse-btn i {
  transform: rotate(180deg);
}

.sidebar-search {
  padding: 12px 16px;
}

.search-input-wrapper {
  display: flex;
  align-items: center;
  gap: 8px;
  background: var(--bg-tertiary);
  border: 1px solid var(--border-primary);
  border-radius: var(--radius-md);
  padding: 8px 12px;
  transition: var(--transition-fast);
}

.search-input-wrapper:focus-within {
  border-color: var(--primary-500);
  box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.15);
}

.search-input-wrapper i {
  color: var(--text-muted);
  font-size: 14px;
}

.search-input-wrapper input {
  flex: 1;
  background: none;
  border: none;
  color: var(--text-primary);
  font-size: 13px;
  outline: none;
}

.search-input-wrapper input::placeholder {
  color: var(--text-muted);
}

.sidebar-nav {
  flex: 1;
  overflow-y: auto;
  padding: 8px 0;
}

.nav-section {
  margin-bottom: 8px;
}

.nav-section-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 8px 16px;
}

.nav-section-title {
  font-size: 11px;
  font-weight: 600;
  color: var(--text-muted);
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.nav-section-action {
  width: 20px;
  height: 20px;
  border: none;
  background: transparent;
  color: var(--text-muted);
  border-radius: var(--radius-sm);
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  opacity: 0;
  transition: var(--transition-fast);
}

.nav-section:hover .nav-section-action {
  opacity: 1;
}

.nav-section-action:hover {
  background: var(--bg-hover);
  color: var(--text-primary);
}

.nav-items {
  padding: 0 8px;
}

.nav-item {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 8px 12px;
  border-radius: var(--radius-md);
  color: var(--text-secondary);
  cursor: pointer;
  transition: var(--transition-fast);
  font-size: 13px;
}

.nav-item:hover {
  background: var(--bg-hover);
  color: var(--text-primary);
}

.nav-item.active {
  background: var(--primary-500);
  color: white;
}

.nav-item i {
  font-size: 16px;
  width: 20px;
  text-align: center;
}

.nav-item .nav-item-icon {
  width: 20px;
  height: 20px;
  border-radius: var(--radius-sm);
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 12px;
}

.nav-item-count {
  margin-left: auto;
  font-size: 11px;
  color: var(--text-muted);
  background: var(--bg-tertiary);
  padding: 2px 6px;
  border-radius: 10px;
}

/* Sources Tree Navigation */
.sources-section {
  margin-bottom: 12px;
}

.sources-tree {
  padding: 0 4px;
}

.source-group {
  margin-bottom: 2px;
}

.source-header {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 6px 8px;
  border-radius: var(--radius-md);
  color: var(--text-secondary);
  cursor: pointer;
  font-size: 12px;
  font-weight: 500;
  transition: var(--transition-fast);
}

.source-header:hover {
  background: var(--bg-hover);
  color: var(--text-primary);
}

.source-toggle {
  font-size: 12px;
  transition: transform 0.15s ease;
  color: var(--text-muted);
}

.source-group.expanded .source-toggle {
  transform: rotate(90deg);
}

.source-icon {
  font-size: 14px;
  color: var(--text-muted);
}

.source-name {
  flex: 1;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.source-count {
  font-size: 10px;
  color: var(--text-muted);
  background: var(--bg-tertiary);
  padding: 1px 5px;
  border-radius: 8px;
}

.source-children {
  display: none;
  padding-left: 8px;
}

.source-group.expanded .source-children {
  display: block;
}

.source-set-item {
  padding: 5px 8px 5px 4px;
  margin-left: 12px;
  font-size: 12px;
}

.source-set-item .tree-line {
  font-size: 12px;
  color: var(--border-secondary);
  margin-right: -4px;
}

.source-set-item i:not(.tree-line) {
  font-size: 14px;
}

.source-set-item .nav-item-count {
  font-size: 10px;
  padding: 1px 4px;
}

/* ===== Three-Panel Sidebar Navigation ===== */
.nav-panel {
  border-bottom: 1px solid var(--border-primary);
}

.nav-panel:last-child {
  border-bottom: none;
  flex: 1;
  display: flex;
  flex-direction: column;
  min-height: 0;
}

.nav-panel-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 10px 12px 6px 12px;
  position: sticky;
  top: 0;
  background: var(--bg-secondary);
  z-index: 1;
}

.nav-panel-title {
  display: flex;
  align-items: center;
  gap: 8px;
  font-size: 11px;
  font-weight: 600;
  color: var(--text-muted);
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.nav-panel-title > i {
  font-size: 14px;
}

.nav-panel-badge {
  font-size: 9px;
  font-weight: 600;
  padding: 2px 5px;
  border-radius: 3px;
  letter-spacing: 0.3px;
}

.nav-panel-badge.given-badge {
  background: var(--given-bg);
  color: var(--given-color);
}

.nav-panel-badge.schema-badge {
  background: rgba(59, 130, 246, 0.15);
  color: var(--primary-500);
}

.nav-panel-badge.meant-badge {
  background: var(--meant-bg);
  color: var(--meant-color);
}

.nav-panel-badge.dictionary-badge {
  background: rgba(168, 85, 247, 0.15);
  color: rgb(168, 85, 247);
}

.nav-panel-badge.export-badge {
  background: rgba(34, 197, 94, 0.15);
  color: rgb(34, 197, 94);
}

.nav-panel-badge.project-badge {
  background: rgba(251, 146, 60, 0.15);
  color: rgb(251, 146, 60);
}

/* ===== GIVEN vs MEANT Visual Encoding ===== */
/* GIVEN panels: darker, muted, locked feel */
.nav-panel.given-panel {
  background: var(--given-bg-panel);
  border-left: 3px solid var(--given-border);
}

.nav-panel.given-panel .nav-panel-header {
  background: var(--given-bg-panel);
}

.nav-panel.given-panel .nav-panel-title::after {
  content: '';
  display: inline-flex;
  width: 12px;
  height: 12px;
  margin-left: 4px;
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 256 256' fill='%2310b981'%3E%3Cpath d='M208,80H176V56a48,48,0,0,0-96,0V80H48A16,16,0,0,0,32,96V208a16,16,0,0,0,16,16H208a16,16,0,0,0,16-16V96A16,16,0,0,0,208,80ZM96,56a32,32,0,0,1,64,0V80H96ZM208,208H48V96H208V208Z'/%3E%3C/svg%3E");
  background-size: contain;
  background-repeat: no-repeat;
  opacity: 0.7;
}

/* MEANT panels: lighter, editable, configurable feel */
.nav-panel.meant-panel {
  background: var(--meant-bg-panel);
  border-left: 3px solid var(--meant-border);
}

.nav-panel.meant-panel .nav-panel-header {
  background: var(--meant-bg-panel);
}

.nav-panel.meant-panel .nav-panel-title::after {
  content: '';
  display: inline-flex;
  width: 12px;
  height: 12px;
  margin-left: 4px;
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 256 256' fill='%238b5cf6'%3E%3Cpath d='M227.31,73.37,182.63,28.69a16,16,0,0,0-22.63,0L36.69,152A15.86,15.86,0,0,0,32,163.31V208a16,16,0,0,0,16,16H92.69A15.86,15.86,0,0,0,104,219.31L227.31,96a16,16,0,0,0,0-22.63ZM92.69,208H48V163.31l88-88L180.69,120ZM192,108.69,147.31,64l24-24L216,84.69Z'/%3E%3C/svg%3E");
  background-size: contain;
  background-repeat: no-repeat;
  opacity: 0.7;
}

/* Hybrid panels: GIVEN structure + MEANT interpretation */
.nav-panel.hybrid-panel {
  background: linear-gradient(90deg, var(--given-bg-panel) 0%, var(--meant-bg-panel) 100%);
  border-left: 3px solid;
  border-image: linear-gradient(180deg, var(--given-border) 0%, var(--meant-border) 100%) 1;
}

.nav-panel.hybrid-panel .nav-panel-header {
  background: transparent;
}

/* Epistemic status indicator in sidebar items */
.nav-item-epistemic {
  display: inline-flex;
  align-items: center;
  gap: 2px;
  margin-left: auto;
  font-size: 9px;
  opacity: 0.6;
}

.nav-item-epistemic.given {
  color: var(--given-color);
}

.nav-item-epistemic.meant {
  color: var(--meant-color);
}

/* Read-only indicator tooltip */
.nav-panel.given-panel .nav-item:hover::after {
  content: 'Read-only';
  position: absolute;
  right: 8px;
  top: 50%;
  transform: translateY(-50%);
  font-size: 9px;
  color: var(--given-color);
  opacity: 0.7;
  pointer-events: none;
}

/* Editable indicator tooltip */
.nav-panel.meant-panel .nav-item:hover::after {
  content: 'Editable';
  position: absolute;
  right: 8px;
  top: 50%;
  transform: translateY(-50%);
  font-size: 9px;
  color: var(--meant-color);
  opacity: 0.7;
  pointer-events: none;
}

/* Project context indicator - shows which project items belong to */
.nav-panel-project-context {
  display: flex;
  padding: 4px 12px 8px 12px;
  font-size: 11px;
}

.project-context-badge {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  padding: 4px 8px 4px 10px;
  background: var(--bg-tertiary);
  border-radius: 4px;
  border-left: 3px solid var(--accent);
  color: var(--text-secondary);
  font-size: 11px;
}

.project-context-badge.all-items {
  border-left-color: var(--text-muted);
}

.project-context-badge i {
  font-size: 12px;
  color: var(--text-muted);
}

.project-context-name {
  font-weight: 500;
  max-width: 100px;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.project-context-count {
  background: var(--bg-secondary);
  padding: 1px 5px;
  border-radius: 3px;
  font-size: 10px;
  font-weight: 600;
  color: var(--text-muted);
}

/* Collapsible panel styles for progressive disclosure */
.nav-panel-collapse-icon {
  font-size: 10px;
  color: var(--text-muted);
  transition: transform 0.15s ease;
  flex-shrink: 0;
}

.nav-panel.expanded .nav-panel-collapse-icon {
  transform: rotate(90deg);
}

.nav-panel[data-collapsible="true"] .nav-panel-header {
  cursor: pointer;
}

.nav-panel[data-collapsible="true"] .nav-panel-header:hover {
  background: var(--bg-hover);
}

.nav-panel.collapsed .nav-panel-content {
  display: none;
}

.nav-panel.collapsed {
  border-bottom: 1px solid var(--border-primary);
}

/* Count badge for collapsed panels */
.nav-panel-count-badge {
  font-size: 10px;
  font-weight: 600;
  padding: 1px 6px;
  border-radius: 8px;
  background: var(--bg-tertiary);
  color: var(--text-muted);
  margin-left: auto;
}

.nav-panel.collapsed .nav-panel-count-badge {
  display: inline-flex !important;
}

/* Hide collapse icon when panel has items and is expanded */
.nav-panel.expanded .nav-panel-count-badge {
  display: none !important;
}

/* Projects panel styles */
.projects-panel {
  border-bottom: 1px solid var(--border-primary);
}

.project-item {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 8px 12px;
  cursor: pointer;
  border-radius: var(--radius-md);
  transition: background 0.15s ease;
}

.project-item:hover {
  background: var(--bg-hover);
}

.project-item.active {
  background: var(--bg-active);
  color: var(--primary-500);
}

.project-item .project-icon {
  font-size: 16px;
  color: var(--text-muted);
  flex-shrink: 0;
}

.project-item.active .project-icon {
  color: var(--primary-500);
}

.project-item .project-color-dot {
  width: 8px;
  height: 8px;
  border-radius: 50%;
  flex-shrink: 0;
}

.project-item .project-info {
  flex: 1;
  min-width: 0;
  display: flex;
  flex-direction: column;
  gap: 1px;
}

.project-item .project-name {
  font-size: 13px;
  font-weight: 500;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.project-item .project-meta-inline {
  font-size: 10px;
  color: var(--text-muted);
}

.project-item .nav-item-count {
  font-size: 11px;
  color: var(--text-muted);
  background: var(--bg-tertiary);
  padding: 2px 6px;
  border-radius: var(--radius-sm);
}

.project-item-container {
  margin-bottom: 2px;
}

.project-item-container.expanded > .project-contents {
  display: block;
}

.project-contents {
  display: none;
  margin-left: 8px;
  padding-left: 12px;
  border-left: 1px solid var(--border-secondary);
}

.project-section {
  padding: 4px 0;
}

.project-section-label {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 4px 8px;
  font-size: 10px;
  font-weight: 600;
  color: var(--text-muted);
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.project-section-count {
  font-size: 10px;
  color: var(--text-tertiary);
  font-weight: 400;
}

.project-child-item {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 4px 8px;
  font-size: 12px;
  color: var(--text-secondary);
  cursor: pointer;
  border-radius: var(--radius-sm);
}

.project-child-item:hover {
  background: var(--bg-hover);
  color: var(--text-primary);
}

.project-child-item i {
  font-size: 12px;
  color: var(--text-muted);
}

/* All Projects view (when no project selected) */
.all-projects-item {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 6px 12px;
  cursor: pointer;
  border-radius: var(--radius-md);
  font-size: 12px;
  color: var(--text-secondary);
  margin-bottom: 4px;
  border-bottom: 1px solid var(--border-secondary);
}

.all-projects-item:hover {
  background: var(--bg-hover);
}

.all-projects-item.active {
  background: var(--bg-active);
  color: var(--primary-500);
}

.all-projects-item i {
  font-size: 14px;
}

/* --------------------------------------------------------------------------
   Project Tree - Nested Navigation Structure
   All content (Sources, Sets, Definitions, Exports) nested under projects
   -------------------------------------------------------------------------- */

/* Project Tree Item (container for project + nested content) */
.project-tree-item {
  margin-bottom: 2px;
}

.project-tree-item.active > .project-tree-header {
  background: var(--bg-active);
  color: var(--primary-500);
}

/* Project Tree Header (clickable project row) */
.project-tree-header {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 6px 8px;
  cursor: pointer;
  border-radius: var(--radius-md);
  font-size: 13px;
  color: var(--text-primary);
  transition: background 0.15s ease;
}

.project-tree-header:hover {
  background: var(--bg-hover);
}

.project-tree-header .project-expand-icon {
  width: 16px;
  height: 16px;
  display: flex;
  align-items: center;
  justify-content: center;
  color: var(--text-muted);
  transition: transform 0.15s ease;
}

.project-tree-item.expanded > .project-tree-header .project-expand-icon i {
  transform: rotate(90deg);
}

.project-tree-header .project-color-dot {
  width: 8px;
  height: 8px;
  border-radius: 50%;
  flex-shrink: 0;
}

.project-tree-header .project-icon {
  font-size: 14px;
  color: var(--text-muted);
  flex-shrink: 0;
}

.project-tree-header .project-name {
  flex: 1;
  font-weight: 500;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.project-tree-header .project-item-count {
  font-size: 11px;
  color: var(--text-muted);
  background: var(--bg-tertiary);
  padding: 1px 6px;
  border-radius: 10px;
  flex-shrink: 0;
}

/* Project Tree Content (nested sections) */
.project-tree-content {
  display: none;
  margin-left: 12px;
  padding-left: 12px;
  border-left: 1px solid var(--border-secondary);
  margin-top: 2px;
  margin-bottom: 4px;
}

.project-tree-item.expanded > .project-tree-content {
  display: block;
}

/* Project Section (Sources, Sets, Definitions, Exports) */
.project-section {
  margin-bottom: 2px;
}

.project-section-header {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 4px 6px;
  cursor: pointer;
  border-radius: var(--radius-sm);
  font-size: 11px;
  font-weight: 600;
  color: var(--text-muted);
  text-transform: uppercase;
  letter-spacing: 0.3px;
  transition: background 0.15s ease;
}

.project-section-header:hover {
  background: var(--bg-hover);
  color: var(--text-secondary);
}

.project-section-header .section-expand-icon {
  font-size: 10px;
  transition: transform 0.15s ease;
}

.project-section.expanded > .project-section-header .section-expand-icon {
  transform: rotate(90deg);
}

.project-section-header .section-icon {
  font-size: 12px;
}

.project-section-header .section-title {
  flex: 1;
}

.project-section-header .section-badge {
  font-size: 9px;
  padding: 1px 5px;
  border-radius: 3px;
  font-weight: 600;
  text-transform: uppercase;
}

.project-section-header .section-count {
  font-size: 10px;
  color: var(--text-tertiary);
  background: var(--bg-tertiary);
  padding: 1px 5px;
  border-radius: 8px;
}

/* Section Content (list of items) */
.project-section-content {
  display: none;
  padding-left: 4px;
  margin-top: 2px;
}

.project-section.expanded > .project-section-content {
  display: block;
}

/* Nested Nav Item (source, definition, export items) */
.nested-nav-item {
  display: flex;
  align-items: center;
  flex-wrap: wrap;
  gap: 6px;
  padding: 5px 8px;
  cursor: pointer;
  border-radius: var(--radius-sm);
  font-size: 12px;
  color: var(--text-secondary);
  transition: background 0.15s ease;
}

.nested-nav-item:hover {
  background: var(--bg-hover);
  color: var(--text-primary);
}

.nested-nav-item.active {
  background: var(--bg-active);
  color: var(--primary-500);
}

.nested-nav-item i {
  font-size: 13px;
  color: var(--text-muted);
  flex-shrink: 0;
}

.nested-nav-item.active i {
  color: var(--primary-500);
}

.nested-nav-item .nested-item-name {
  flex: 1;
  min-width: 0;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.nested-nav-item .nested-item-count,
.nested-nav-item .nested-item-date {
  font-size: 10px;
  color: var(--text-muted);
  flex-shrink: 0;
}

/* Epistemic Mini Badges (small badges on nested items) */
.epistemic-mini-badge {
  font-size: 8px;
  padding: 1px 4px;
  border-radius: 3px;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.3px;
  flex-shrink: 0;
}

.epistemic-mini-badge.given-mini {
  background: var(--accent-blue-bg, rgba(59, 130, 246, 0.15));
  color: var(--accent-blue, #3B82F6);
}

.epistemic-mini-badge.meant-mini {
  background: var(--accent-purple-bg, rgba(139, 92, 246, 0.15));
  color: var(--accent-purple, #8B5CF6);
}

.epistemic-mini-badge.schema-mini {
  background: var(--accent-green-bg, rgba(34, 197, 94, 0.15));
  color: var(--accent-green, #22C55E);
}

/* Meaning Health Badge (shows semantic binding coverage per Set) */
.meaning-health-badge {
  display: inline-flex;
  align-items: center;
  gap: 3px;
  font-size: 9px;
  padding: 2px 5px;
  border-radius: 4px;
  font-weight: 500;
  flex-shrink: 0;
  margin-left: auto;
  margin-right: 4px;
}

.meaning-health-badge i {
  font-size: 10px;
}

.meaning-health-badge.complete {
  background: var(--accent-green-bg, rgba(34, 197, 94, 0.15));
  color: var(--accent-green, #22C55E);
}

.meaning-health-badge.partial {
  background: var(--accent-yellow-bg, rgba(234, 179, 8, 0.15));
  color: var(--accent-yellow, #EAB308);
}

.meaning-health-badge.low {
  background: var(--accent-orange-bg, rgba(249, 115, 22, 0.1));
  color: var(--accent-orange, #F97316);
}

/* Schema Item Content (shows structure + bindings info) */
.schema-item-content {
  display: flex;
  flex-direction: column;
  gap: 0;
  flex: 1;
  min-width: 0;
}

.schema-item-label {
  font-size: 12px;
}

.schema-bindings-hint {
  font-size: 9px;
  color: var(--accent-purple, #8B5CF6);
  opacity: 0.8;
}

/* Definition Linked Fields (shows fieldâ†’definition mappings) */
.definition-linked-fields {
  display: flex;
  flex-wrap: wrap;
  gap: 4px;
  width: 100%;
  padding-left: 20px;
  margin-top: 2px;
}

.linked-field-badge {
  font-size: 9px;
  padding: 1px 5px;
  background: var(--bg-tertiary);
  border: 1px solid var(--border-secondary);
  border-radius: 3px;
  color: var(--text-muted);
  cursor: help;
}

.linked-field-badge:hover {
  background: var(--bg-hover);
  color: var(--text-secondary);
}

/* Definition Local/URI Badge (sidebar indicators) */
.definition-local-badge,
.definition-uri-badge {
  display: inline-flex;
  align-items: center;
  margin-left: auto;
  margin-right: 4px;
  font-size: 12px;
}

.definition-uri-badge {
  color: var(--accent-green, #22C55E);
}

.definition-local-badge {
  color: var(--accent-orange, #F97316);
}

.definition-nested-item.local-only {
  opacity: 0.85;
}

.definition-nested-item.local-only:hover {
  opacity: 1;
}

/* Nested Set Item in project tree */
.set-item-container.nested-set {
  margin-left: 0;
  margin-bottom: 2px;
}

.set-item-container.nested-set > .set-item-header {
  padding: 4px 6px;
  font-size: 12px;
}

.set-item-container.nested-set .set-views-list {
  padding-left: 16px;
  margin-left: 6px;
  border-left: 1px solid var(--border-tertiary);
}

/* Color picker for project creation */
.color-picker-grid {
  display: flex;
  gap: 8px;
  flex-wrap: wrap;
}

.color-picker-item {
  width: 28px;
  height: 28px;
  border-radius: 50%;
  border: 2px solid transparent;
  cursor: pointer;
  transition: transform 0.15s ease, border-color 0.15s ease;
}

.color-picker-item:hover {
  transform: scale(1.1);
}

/* Sample Data Badge */
.sample-badge {
  font-size: 9px;
  padding: 1px 5px;
  background: var(--accent-purple-bg, rgba(139, 92, 246, 0.15));
  color: var(--accent-purple, #8B5CF6);
  border-radius: 3px;
  font-weight: 500;
  flex-shrink: 0;
  margin-left: 4px;
}

.sample-project > .project-tree-header {
  border-left: 2px solid var(--accent-purple, #8B5CF6);
}

/* Archive Section */
.archive-section {
  margin-top: 12px;
  border-top: 1px solid var(--border-tertiary);
  padding-top: 8px;
}

.archive-section-header {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 6px 8px;
  color: var(--text-muted);
  cursor: pointer;
  border-radius: var(--radius-sm);
  font-size: 12px;
  transition: background 0.15s ease;
}

.archive-section-header:hover {
  background: var(--bg-hover);
  color: var(--text-secondary);
}

.archive-section-header .section-expand-icon {
  transition: transform 0.15s ease;
  font-size: 10px;
}

.archive-section.expanded .section-expand-icon {
  transform: rotate(90deg);
}

.archive-count {
  margin-left: auto;
  font-size: 10px;
  background: var(--bg-tertiary);
  padding: 1px 5px;
  border-radius: 8px;
}

.archive-section-content {
  display: none;
  padding-left: 8px;
}

.archive-section.expanded .archive-section-content {
  display: block;
}

.archived-item {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 5px 8px;
  margin: 2px 0;
  color: var(--text-muted);
  font-size: 12px;
  cursor: pointer;
  border-radius: var(--radius-sm);
  opacity: 0.7;
  transition: all 0.15s ease;
}

.archived-item:hover {
  background: var(--bg-hover);
  opacity: 1;
  color: var(--text-primary);
}

.archived-item i {
  font-size: 12px;
  color: var(--text-muted);
}

.archived-item-name {
  flex: 1;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.archived-item-type {
  font-size: 9px;
  color: var(--text-muted);
  background: var(--bg-tertiary);
  padding: 1px 4px;
  border-radius: 3px;
}

/* Nested/Sub-projects */
.nested-project {
  border-left: 1px solid var(--border-tertiary);
}

.nested-project > .project-tree-header {
  padding-left: 12px;
}

.subprojects-section {
  margin-top: 4px;
}

.subprojects-section .project-section-header {
  padding: 4px 8px;
  font-size: 11px;
}

.subprojects-content {
  padding-left: 4px;
}

.subprojects-content .project-tree-item {
  margin-left: 4px;
  font-size: 12px;
}

.subprojects-content .project-tree-header {
  padding: 4px 6px;
}

.subprojects-content .project-name {
  font-size: 11px;
}

.subprojects-content .project-item-count {
  font-size: 9px;
}

/* Form hint text */
.form-hint {
  display: block;
  margin-top: 4px;
  font-size: 11px;
  color: var(--text-muted);
}

.color-picker-item.selected {
  border-color: var(--text-primary);
  box-shadow: 0 0 0 2px var(--bg-primary), 0 0 0 4px var(--text-muted);
}

.nav-panel-action {
  width: 22px;
  height: 22px;
  border: none;
  background: transparent;
  color: var(--text-muted);
  border-radius: var(--radius-sm);
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  opacity: 0;
  transition: var(--transition-fast);
}

.nav-panel:hover .nav-panel-action {
  opacity: 1;
}

.nav-panel-action:hover {
  background: var(--bg-hover);
  color: var(--text-primary);
}

.nav-panel-content {
  padding: 0 8px 8px 8px;
  overflow-y: auto;
}

.views-panel .nav-panel-content {
  flex: 1;
  overflow-y: auto;
}

/* ========================================
   Sets Tree Layout Rules
   Prevent layout shifts and maintain stability
   ======================================== */

/* Sets panel layout constraints */
.sets-panel {
  min-width: 200px;
  max-width: 100%;
  contain: layout style;
}

.sets-panel .nav-panel-content {
  min-height: 0;
  overflow-x: hidden;
  overflow-y: auto;
  scrollbar-gutter: stable;
}

/* Set container layout rules */
.set-item-container {
  contain: layout;
  min-width: 0;
  max-width: 100%;
}

/* Set header layout stability */
.set-item-header {
  min-height: 32px;
  max-height: 32px;
  min-width: 0;
  box-sizing: border-box;
}

/* Fixed-width elements prevent reflow */
.set-item-expand {
  flex-shrink: 0;
  min-width: 16px;
  max-width: 16px;
}

.set-item-icon {
  flex-shrink: 0;
  min-width: 14px;
  max-width: 14px;
}

.set-item-count {
  flex-shrink: 0;
  min-width: 24px;
  text-align: right;
}

.set-item-actions {
  flex-shrink: 0;
  min-width: 22px;
}

/* Operator badge fixed width */
.set-item-header .op-badge-mini {
  flex-shrink: 0;
  min-width: 18px;
  text-align: center;
}

/* Views list layout stability */
.set-views-list {
  contain: layout;
  min-width: 0;
  max-width: 100%;
}

/* View item layout rules */
.set-view-item {
  min-height: 26px;
  min-width: 0;
  box-sizing: border-box;
}

.set-view-item i {
  flex-shrink: 0;
  min-width: 13px;
  max-width: 13px;
}

.view-item-count {
  flex-shrink: 0;
  min-width: 20px;
  text-align: right;
}

/* Add view button layout */
.set-add-view-btn {
  min-height: 24px;
  min-width: 0;
  box-sizing: border-box;
}

/* Prevent text from causing layout shifts */
.set-item-name,
.set-view-item span,
.workspace-name {
  flex: 1 1 0;
  min-width: 0;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

/* Nav panel header fixed height */
.nav-panel-header {
  min-height: 36px;
  box-sizing: border-box;
}

/* Stable badge sizing */
.nav-panel-badge {
  flex-shrink: 0;
  white-space: nowrap;
}

/* Workspace in Views panel */
.workspace-group {
  margin-bottom: 4px;
}

.workspace-header {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 6px 8px;
  border-radius: var(--radius-md);
  color: var(--text-secondary);
  cursor: pointer;
  font-size: 12px;
  font-weight: 500;
  transition: var(--transition-fast);
}

.workspace-header:hover {
  background: var(--bg-hover);
  color: var(--text-primary);
}

.workspace-header.active {
  background: var(--meant-bg);
  color: var(--meant-color);
}

.workspace-toggle {
  font-size: 10px;
  transition: transform 0.15s ease;
  color: var(--text-muted);
}

.workspace-group.expanded .workspace-toggle {
  transform: rotate(90deg);
}

.workspace-icon {
  font-size: 14px;
}

.workspace-name {
  flex: 1;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.workspace-children {
  display: none;
  padding-left: 12px;
}

.workspace-group.expanded .workspace-children {
  display: block;
}

/* Lens items in workspace */
.lens-item {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 5px 8px;
  border-radius: var(--radius-sm);
  color: var(--text-secondary);
  cursor: pointer;
  font-size: 12px;
  transition: var(--transition-fast);
}

.lens-item:hover {
  background: var(--bg-hover);
  color: var(--text-primary);
}

.lens-item.active {
  background: var(--primary-500);
  color: white;
}

.lens-item i {
  font-size: 13px;
  width: 16px;
}

/* Focus items nested under lens */
.focus-children {
  padding-left: 16px;
  margin-top: 2px;
}

.focus-item {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 4px 8px;
  border-radius: var(--radius-sm);
  color: var(--text-muted);
  cursor: pointer;
  font-size: 11px;
  transition: var(--transition-fast);
}

.focus-item:hover {
  background: var(--bg-hover);
  color: var(--text-secondary);
}

.focus-item.active {
  background: rgba(139, 92, 246, 0.2);
  color: var(--meant-color);
}

.focus-item i {
  font-size: 11px;
}

.focus-restriction {
  margin-left: auto;
  font-size: 10px;
  color: var(--text-muted);
  opacity: 0.7;
}

/* ===== Prefix-Based Search ===== */
.search-prefix-hint {
  font-size: 11px;
  font-weight: 500;
  padding: 2px 6px;
  border-radius: 3px;
  display: none;
}

.search-prefix-hint.active {
  display: inline-block;
}

.search-prefix-hint[data-prefix="@"] {
  background: rgba(59, 130, 246, 0.15);
  color: var(--primary-500);
}

.search-prefix-hint[data-prefix="#"] {
  background: rgba(139, 92, 246, 0.15);
  color: var(--meant-color);
}

.search-prefix-hint[data-prefix="/"] {
  background: rgba(249, 115, 22, 0.15);
  color: #f97316;
}

.search-prefix-hint[data-prefix="?"] {
  background: var(--given-bg);
  color: var(--given-color);
}

.search-prefix-hint[data-prefix=">"] {
  background: rgba(236, 72, 153, 0.15);
  color: #ec4899;
}

.search-prefix-hint[data-prefix="!"] {
  background: rgba(234, 179, 8, 0.15);
  color: #eab308;
}

.search-prefix-legend {
  display: none;
  flex-wrap: wrap;
  gap: 4px;
  padding: 6px 0 0 0;
  font-size: 10px;
}

.sidebar-search:focus-within .search-prefix-legend {
  display: flex;
}

.prefix-item {
  color: var(--text-muted);
  cursor: pointer;
  padding: 2px 4px;
  border-radius: 3px;
  transition: var(--transition-fast);
}

.prefix-item:hover {
  background: var(--bg-hover);
  color: var(--text-secondary);
}

.prefix-item.active {
  background: var(--bg-active);
  color: var(--text-primary);
}

/* Search results grouped by type */
.search-results-group {
  margin-bottom: 8px;
}

.search-results-group-header {
  font-size: 10px;
  font-weight: 600;
  color: var(--text-muted);
  text-transform: uppercase;
  letter-spacing: 0.5px;
  padding: 6px 12px 4px 12px;
  display: flex;
  align-items: center;
  gap: 6px;
}

.search-results-group-header i {
  font-size: 12px;
}

.search-result-path {
  font-size: 10px;
  color: var(--text-muted);
  margin-top: 2px;
}

/* Provenance column styles */
.provenance-cell {
  display: flex;
  align-items: center;
  gap: 6px;
  font-size: 12px;
}

.provenance-icon {
  width: 18px;
  height: 18px;
  border-radius: 3px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 11px;
}

.provenance-icon.given {
  background: var(--given-bg);
  color: var(--given-color);
}

.provenance-icon.derived {
  background: rgba(249, 115, 22, 0.15);
  color: #f97316;
}

.provenance-icon.api {
  background: rgba(59, 130, 246, 0.15);
  color: var(--primary-500);
}

.provenance-source-name {
  color: var(--text-secondary);
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.provenance-source-name:hover {
  color: var(--text-primary);
  text-decoration: underline;
  cursor: pointer;
}

.sidebar-footer {
  padding: 0;
  border-top: 1px solid var(--border-primary);
}

/* Collapsible sidebar footer header */
.sidebar-footer-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 8px 12px;
  cursor: pointer;
  transition: var(--transition-fast);
}

.sidebar-footer-header:hover {
  background: var(--bg-hover);
}

.sidebar-footer-title {
  display: flex;
  align-items: center;
  gap: 6px;
  font-size: 11px;
  font-weight: 600;
  color: var(--text-muted);
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.sidebar-footer-caret {
  font-size: 12px;
  transition: transform var(--transition-fast);
}

.sidebar-footer.collapsed .sidebar-footer-caret {
  transform: rotate(-90deg);
}

/* Sidebar footer content */
.sidebar-footer-content {
  padding: 0 8px 8px 8px;
  overflow: hidden;
  transition: max-height 0.2s ease, opacity 0.2s ease;
  max-height: 500px;
  opacity: 1;
}

.sidebar-footer.collapsed .sidebar-footer-content {
  max-height: 0;
  opacity: 0;
  padding-top: 0;
  padding-bottom: 0;
}

.sync-badge {
  margin-left: auto;
  width: 20px;
  height: 20px;
  display: flex;
  align-items: center;
  justify-content: center;
}

.sync-badge.synced {
  color: var(--success-500);
}

.sync-badge.syncing {
  color: var(--warning-500);
  animation: spin 1s linear infinite;
}

.sync-badge.error {
  color: var(--danger-500);
}

@keyframes spin {
  from { transform: rotate(0deg); }
  to { transform: rotate(360deg); }
}

/* ===== Main Content ===== */
.main-content {
  flex: 1;
  display: flex;
  flex-direction: column;
  min-width: 0;
  overflow: hidden;
}

/* ===== Header ===== */
.header {
  height: var(--header-height);
  background: var(--bg-secondary);
  border-bottom: 1px solid var(--border-primary);
  display: flex;
  align-items: center;
  padding: 0 16px;
  gap: 16px;
  flex-shrink: 0;
}

.header-left {
  display: flex;
  align-items: center;
  gap: 12px;
}

.header-btn {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 6px 12px;
  background: transparent;
  border: 1px solid transparent;
  border-radius: var(--radius-md);
  color: var(--text-secondary);
  font-size: 13px;
  cursor: pointer;
  transition: var(--transition-fast);
}

.header-btn:hover {
  background: var(--bg-hover);
  color: var(--text-primary);
}

.header-btn.primary {
  background: var(--primary-500);
  color: white;
  border-color: var(--primary-500);
}

.header-btn.primary:hover {
  background: var(--primary-600);
  border-color: var(--primary-600);
}

.header-btn i {
  font-size: 16px;
}

.header-btn.mobile-menu {
  display: none;
}

.breadcrumb {
  display: flex;
  align-items: center;
  gap: 8px;
  font-size: 14px;
}

.breadcrumb i {
  font-size: 12px;
  color: var(--text-muted);
}

.breadcrumb-item {
  color: var(--text-secondary);
}

.breadcrumb-item.active {
  color: var(--text-primary);
  font-weight: 500;
}

/* ===== Architecture Chain Header ===== */
/* Hidden: Redundant with breadcrumb and shows confusing "No Source/No Set" labels */
.architecture-chain {
  display: none;
}

.chain-step {
  display: flex;
  align-items: center;
  gap: 4px;
  padding: 4px 8px;
  border-radius: 4px;
  background: var(--bg-secondary);
  color: var(--text-muted);
  cursor: pointer;
  transition: all var(--transition-fast);
  white-space: nowrap;
}

.chain-step:hover {
  background: var(--bg-hover);
}

.chain-step.active {
  font-weight: 600;
}

.chain-step.source {
  border-left: 2px solid var(--chain-source);
}

.chain-step.source.active {
  background: rgba(16, 185, 129, 0.1);
  color: var(--chain-source);
}

.chain-step.set {
  border-left: 2px solid var(--chain-set);
}

.chain-step.set.active {
  background: rgba(59, 130, 246, 0.1);
  color: var(--chain-set);
}

.chain-step.lens {
  border-left: 2px solid var(--chain-lens);
}

.chain-step.lens.active {
  background: rgba(245, 158, 11, 0.1);
  color: var(--chain-lens);
}

.chain-step.view {
  border-left: 2px solid var(--chain-view);
}

.chain-step.view.active {
  background: rgba(139, 92, 246, 0.1);
  color: var(--chain-view);
}

.chain-arrow {
  color: var(--text-disabled);
  font-size: 10px;
}

.chain-step-label {
  font-size: 9px;
  text-transform: uppercase;
  letter-spacing: 0.3px;
  opacity: 0.7;
}

.chain-step-name {
  max-width: 120px;
  overflow: hidden;
  text-overflow: ellipsis;
}

/* ===== Work Zone Indicators ===== */
.work-zone-banner {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 8px 16px;
  font-size: 12px;
  border-bottom: 1px solid var(--border-primary);
}

.work-zone-banner.structural {
  background: var(--given-bg);
  color: var(--given-color);
}

.work-zone-banner.editable {
  background: var(--meant-bg);
  color: var(--meant-color);
}

.work-zone-banner i {
  font-size: 14px;
}

.work-zone-banner .work-zone-action {
  margin-left: auto;
  padding: 4px 8px;
  border: 1px solid currentColor;
  border-radius: 4px;
  background: transparent;
  color: inherit;
  font-size: 11px;
  cursor: pointer;
  transition: all var(--transition-fast);
}

.work-zone-banner .work-zone-action:hover {
  background: rgba(255, 255, 255, 0.1);
}

.header-center {
  flex: 1;
  display: flex;
  justify-content: center;
}

.view-switcher {
  display: flex;
  gap: 2px;
  background: var(--bg-tertiary);
  padding: 4px;
  border-radius: var(--radius-lg);
}

.view-switch-btn {
  width: 36px;
  height: 28px;
  border: none;
  background: transparent;
  border-radius: var(--radius-md);
  color: var(--text-muted);
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: var(--transition-fast);
}

.view-switch-btn:hover {
  color: var(--text-primary);
  background: var(--bg-hover);
}

.view-switch-btn.active {
  background: var(--bg-secondary);
  color: var(--text-primary);
  box-shadow: var(--shadow-sm);
}

.view-switch-btn i {
  font-size: 16px;
}

.header-right {
  display: flex;
  align-items: center;
}

.header-actions {
  display: flex;
  align-items: center;
  gap: 4px;
}

.header-divider {
  width: 1px;
  height: 24px;
  background: var(--border-primary);
  margin: 0 8px;
}

.btn-label {
  display: inline;
}

/* ===== Simplified Header Enhancements ===== */
.header-simplified {
  padding: 0 12px;
}

/* Set Tag Selector (compact center element) */
.set-tag-selector {
  position: relative;
}

.set-tag-btn {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 6px 12px;
  background: var(--bg-tertiary);
  border: 1px solid var(--border-primary);
  border-radius: var(--radius-md);
  color: var(--text-secondary);
  font-size: 13px;
  cursor: pointer;
  transition: var(--transition-fast);
}

.set-tag-btn:hover {
  background: var(--bg-hover);
  border-color: var(--border-secondary);
  color: var(--text-primary);
}

.set-tag-btn i:first-child {
  font-size: 14px;
  color: var(--text-muted);
}

.set-tag-btn i:last-child {
  font-size: 10px;
  color: var(--text-muted);
}

.set-tag-dropdown {
  position: absolute;
  top: 100%;
  left: 50%;
  transform: translateX(-50%);
  margin-top: 4px;
  min-width: 160px;
  background: var(--bg-secondary);
  border: 1px solid var(--border-primary);
  border-radius: var(--radius-md);
  box-shadow: var(--shadow-lg);
  z-index: 100;
  padding: 4px;
}

.set-tag-option {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 8px 12px;
  font-size: 13px;
  color: var(--text-secondary);
  border-radius: var(--radius-sm);
  cursor: pointer;
  transition: var(--transition-fast);
}

.set-tag-option:hover {
  background: var(--bg-hover);
  color: var(--text-primary);
}

.set-tag-option.active {
  background: var(--primary-500);
  color: white;
}

/* Tools Dropdown */
.tools-dropdown-container {
  position: relative;
}

.tools-dropdown {
  position: absolute;
  top: 100%;
  right: 0;
  margin-top: 4px;
  min-width: 180px;
  background: var(--bg-secondary);
  border: 1px solid var(--border-primary);
  border-radius: var(--radius-md);
  box-shadow: var(--shadow-lg);
  z-index: 100;
  padding: 4px;
}

.tools-dropdown-item {
  display: flex;
  align-items: center;
  gap: 10px;
  width: 100%;
  padding: 8px 12px;
  background: none;
  border: none;
  font-size: 13px;
  color: var(--text-secondary);
  border-radius: var(--radius-sm);
  cursor: pointer;
  transition: var(--transition-fast);
  text-align: left;
}

.tools-dropdown-item:hover {
  background: var(--bg-hover);
  color: var(--text-primary);
}

.tools-dropdown-item i {
  font-size: 16px;
  width: 18px;
  text-align: center;
}

.tools-dropdown-item span:last-child.shortcut-hint {
  margin-left: auto;
  font-size: 11px;
  color: var(--text-muted);
  font-family: inherit;
}

.tools-dropdown-divider {
  height: 1px;
  background: var(--border-primary);
  margin: 4px 0;
}

/* ===== Sidebar Sets with Nested Views ===== */
.set-item-container {
  margin-bottom: 2px;
}

.set-item-header {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 6px 8px;
  border-radius: 3px;
  color: var(--text-secondary);
  cursor: pointer;
  font-size: 13px;
  transition: var(--transition-fast);
}

.set-item-header:hover {
  background: rgba(255, 255, 255, 0.06);
  color: var(--text-primary);
}

.set-item-header.active {
  background: rgba(59, 130, 246, 0.15);
  color: var(--text-primary);
}

.set-item-expand {
  width: 16px;
  height: 16px;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: transform 0.15s ease;
}

.set-item-expand i {
  font-size: 10px;
  color: var(--text-muted);
}

.set-item-container.expanded .set-item-expand {
  transform: rotate(90deg);
}

.set-item-icon {
  font-size: 14px;
  color: var(--text-muted);
}

.set-item-name {
  flex: 1;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.set-item-count {
  font-size: 11px;
  color: var(--text-muted);
  padding: 0;
  background: transparent;
}

.set-item-actions {
  display: flex;
  gap: 2px;
  opacity: 0;
  transition: opacity 0.15s ease;
}

.set-item-header:hover .set-item-actions {
  opacity: 1;
}

.set-item-action-btn {
  width: 20px;
  height: 20px;
  border: none;
  background: transparent;
  color: var(--text-muted);
  border-radius: var(--radius-sm);
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
}

.set-item-action-btn:hover {
  background: var(--bg-hover);
  color: var(--text-primary);
}

.set-item-action-btn i {
  font-size: 12px;
}

/* Nested Views List - Modern Minimal Style */
.set-views-list {
  display: none;
  padding-left: 28px;
  padding-bottom: 4px;
}

.set-item-container.expanded .set-views-list {
  display: block;
}

.set-view-item {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 4px 8px;
  border-radius: 3px;
  color: var(--text-muted);
  cursor: pointer;
  font-size: 12px;
  transition: var(--transition-fast);
}

.set-view-item:hover {
  background: rgba(255, 255, 255, 0.06);
  color: var(--text-primary);
}

.set-view-item.active {
  background: rgba(59, 130, 246, 0.12);
  color: var(--text-primary);
}

.set-view-item i {
  font-size: 13px;
  color: var(--text-muted);
}

.set-view-item span {
  flex: 1;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

/* Record count badge for type-filtered views - File Explorer Style */
.view-item-count {
  font-size: 10px;
  color: var(--text-muted);
  padding: 0;
  background: transparent;
  flex-shrink: 0;
}

.set-view-item.active .view-item-count {
  color: var(--text-secondary);
}

/* Type-filtered view styling (legacy) */
.set-view-item.type-filtered-view {
  padding-left: 12px;
}

.set-view-item.type-filtered-view::before {
  content: '';
  position: absolute;
  left: 14px;
  top: 50%;
  width: 4px;
  height: 4px;
  border-radius: 50%;
  background: var(--border-color);
  transform: translateY(-50%);
}

/* Record Type View styling - File Explorer Style */
.set-view-item.record-type-view {
  /* No special styling - keep consistent with other items */
}

.set-view-item.record-type-view:hover {
  background: rgba(255, 255, 255, 0.06);
}

.set-view-item.record-type-view.active {
  background: rgba(59, 130, 246, 0.12);
}

/* Regular view styling */
.set-view-item.regular-view {
  /* Default styling */
}

/* Fields item styling - File Explorer Style */
.set-view-item.set-fields-item {
  border-bottom: 1px solid var(--border-primary);
  margin-bottom: 4px;
  padding-bottom: 6px;
  font-weight: 500;
  color: var(--text-secondary);
}

.set-view-item.set-fields-item:hover {
  background: rgba(255, 255, 255, 0.06);
  color: var(--text-primary);
}

.set-view-item.set-fields-item.active {
  background: rgba(59, 130, 246, 0.12);
  color: var(--text-primary);
}

.set-view-item.set-fields-item i {
  color: var(--text-muted);
}

/* ========================================
   Lens Items (Sub-objects of Sets)
   ======================================== */

.set-lens-container {
  margin: 4px 0;
}

.set-lens-header {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 4px 8px;
  border-radius: 3px;
  color: var(--text-secondary);
  cursor: pointer;
  font-size: 12px;
  font-weight: 500;
  transition: var(--transition-fast);
  background: rgba(139, 92, 246, 0.08);
  border-left: 2px solid rgba(139, 92, 246, 0.3);
}

.set-lens-header:hover {
  background: rgba(139, 92, 246, 0.15);
  color: var(--text-primary);
}

.set-lens-header.active {
  background: rgba(139, 92, 246, 0.2);
  color: var(--text-primary);
  border-left-color: rgba(139, 92, 246, 0.6);
}

.set-lens-header i {
  font-size: 13px;
  color: #8b5cf6;
}

.lens-expand-icon {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 14px;
  height: 14px;
  flex-shrink: 0;
  transition: transform 0.15s ease;
}

.lens-expand-icon i {
  font-size: 10px;
  color: var(--text-muted);
}

.set-lens-container.expanded .lens-expand-icon {
  transform: rotate(90deg);
}

.lens-item-count {
  font-size: 10px;
  color: var(--text-muted);
  margin-left: auto;
  flex-shrink: 0;
}

.lens-views-list {
  display: none;
  padding-left: 16px;
  margin-top: 2px;
}

.set-lens-container.expanded .lens-views-list {
  display: block;
}

.lens-view-item {
  padding-left: 12px;
}

.lens-view-item i {
  color: #a78bfa;
}

/* ========================================
   Definition Items (Master-level like Sets)
   ======================================== */

.definition-item-container {
  margin-bottom: 2px;
}

.definition-item-header {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 6px 8px;
  border-radius: 3px;
  color: var(--text-secondary);
  cursor: pointer;
  font-size: 13px;
  transition: var(--transition-fast);
}

.definition-item-header:hover {
  background: rgba(255, 255, 255, 0.06);
  color: var(--text-primary);
}

.definition-item-header.active {
  background: rgba(59, 130, 246, 0.15);
  color: var(--text-primary);
}

/* Definition status colors */
.definition-item-header.verified .definition-status-icon {
  color: #16a34a;
}

.definition-item-header.complete .definition-status-icon {
  color: #3b82f6;
}

.definition-item-header.partial .definition-status-icon {
  color: #f59e0b;
}

.definition-item-header.stub .definition-status-icon {
  color: var(--text-muted);
}

.definition-item-header.local .definition-status-icon {
  color: #8b5cf6;
}

.definition-item-expand {
  width: 16px;
  height: 16px;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: transform 0.15s ease;
  flex-shrink: 0;
}

.definition-item-expand i {
  font-size: 10px;
  color: var(--text-muted);
}

.definition-item-expand-spacer {
  width: 16px;
  flex-shrink: 0;
}

.definition-item-container.expanded .definition-item-expand {
  transform: rotate(90deg);
}

.definition-status-icon {
  font-size: 14px;
  flex-shrink: 0;
}

.definition-item-name {
  flex: 1;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.definition-authority-badge {
  font-size: 9px;
  padding: 1px 4px;
  background: rgba(59, 130, 246, 0.15);
  color: #3b82f6;
  border-radius: 3px;
  font-weight: 500;
  flex-shrink: 0;
}

.definition-item-count {
  font-size: 11px;
  color: var(--text-muted);
  padding: 0;
  background: transparent;
  flex-shrink: 0;
}

/* Definition Fields List (nested under definition) */
.definition-fields-list {
  display: none;
  padding-left: 28px;
  padding-bottom: 4px;
}

.definition-item-container.expanded .definition-fields-list {
  display: block;
}

.definition-field-item {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 3px 8px;
  border-radius: 3px;
  color: var(--text-muted);
  cursor: pointer;
  font-size: 11px;
  transition: var(--transition-fast);
}

.definition-field-item:hover {
  background: rgba(255, 255, 255, 0.06);
  color: var(--text-primary);
}

.definition-field-item i {
  font-size: 12px;
  flex-shrink: 0;
}

.definition-field-item.bound i {
  color: #16a34a;
}

.definition-field-item.unbound i {
  color: var(--text-muted);
}

.definition-field-item .field-set-name {
  color: var(--text-muted);
  font-size: 10px;
  flex-shrink: 0;
}

.definition-field-item .field-name {
  flex: 1;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

/* MEANT badge for definitions section */
.section-badge.meant-badge {
  background: rgba(139, 92, 246, 0.15);
  color: #a78bfa;
}

/* ========================================
   Set Dashboard View (Horizontal Layout)
   ======================================== */

.set-dashboard {
  padding: 24px;
  width: 100%;
  overflow-y: auto;
}

/* Dashboard Header */
.set-dashboard-header {
  display: flex;
  align-items: flex-start;
  justify-content: space-between;
  margin-bottom: 24px;
  padding-bottom: 20px;
  border-bottom: 1px solid var(--border-primary);
}

.set-dashboard-title-section {
  flex: 1;
}

.set-dashboard-title-row {
  display: flex;
  align-items: center;
  gap: 12px;
  margin-bottom: 8px;
}

.set-dashboard-title-row i {
  font-size: 28px;
  color: var(--primary-500);
}

.set-dashboard-title-row h2 {
  font-size: 24px;
  font-weight: 600;
  color: var(--text-primary);
  margin: 0;
}

.set-dashboard-title-row .op-badge {
  margin-left: 8px;
}

.set-dashboard-meta {
  display: flex;
  align-items: center;
  gap: 16px;
  font-size: 13px;
  color: var(--text-secondary);
}

.set-dashboard-meta-item {
  display: flex;
  align-items: center;
  gap: 6px;
}

.set-dashboard-meta-item i {
  font-size: 14px;
  color: var(--text-tertiary);
}

.set-dashboard-meta-divider {
  width: 1px;
  height: 16px;
  background: var(--border-primary);
}

.set-dashboard-actions {
  display: flex;
  gap: 8px;
}

.set-dashboard-action-btn {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 8px 14px;
  font-size: 13px;
  font-weight: 500;
  border: 1px solid var(--border-primary);
  border-radius: 6px;
  background: var(--surface-primary);
  color: var(--text-primary);
  cursor: pointer;
  transition: all 0.15s ease;
}

.set-dashboard-action-btn:hover {
  background: var(--surface-secondary);
  border-color: var(--border-secondary);
}

.set-dashboard-action-btn.primary {
  background: var(--primary-500);
  border-color: var(--primary-500);
  color: white;
}

.set-dashboard-action-btn.primary:hover {
  background: var(--primary-600);
}

.set-dashboard-action-btn.danger {
  color: var(--danger-500);
}

.set-dashboard-action-btn.danger:hover {
  background: rgba(239, 68, 68, 0.1);
  border-color: var(--danger-500);
}

/* Main Grid Layout */
.set-dashboard-grid {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 16px;
  margin-bottom: 16px;
}

/* Dashboard Cards */
.set-dashboard-card {
  background: var(--surface-primary);
  border: 1px solid var(--border-primary);
  border-radius: 12px;
  overflow: hidden;
}

.set-dashboard-card-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 14px 16px;
  background: var(--surface-secondary);
  border-bottom: 1px solid var(--border-primary);
}

.set-dashboard-card-title {
  display: flex;
  align-items: center;
  gap: 8px;
  font-size: 13px;
  font-weight: 600;
  color: var(--text-primary);
  text-transform: uppercase;
  letter-spacing: 0.3px;
}

.set-dashboard-card-title i {
  font-size: 16px;
}

.set-dashboard-card-action {
  padding: 4px 8px;
  font-size: 11px;
  font-weight: 500;
  color: var(--primary-500);
  background: transparent;
  border: none;
  border-radius: 4px;
  cursor: pointer;
  transition: background 0.15s ease;
}

.set-dashboard-card-action:hover {
  background: rgba(59, 130, 246, 0.1);
}

.set-dashboard-card-content {
  padding: 16px;
}

/* Data Overview Card */
.set-dashboard-card.overview .set-dashboard-card-title i {
  color: var(--primary-500);
}

.set-dashboard-stats-grid {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 12px;
}

.set-dashboard-stat {
  padding: 12px;
  background: var(--surface-secondary);
  border-radius: 8px;
}

.set-dashboard-stat-value {
  font-size: 20px;
  font-weight: 600;
  color: var(--text-primary);
  margin-bottom: 2px;
}

.set-dashboard-stat-label {
  font-size: 11px;
  color: var(--text-tertiary);
  text-transform: uppercase;
  letter-spacing: 0.3px;
}

.set-dashboard-stat.highlight .set-dashboard-stat-value {
  color: var(--primary-500);
}

.set-dashboard-completeness {
  margin-top: 12px;
  padding-top: 12px;
  border-top: 1px solid var(--border-primary);
}

.set-dashboard-completeness-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 6px;
}

.set-dashboard-completeness-label {
  font-size: 12px;
  color: var(--text-secondary);
}

.set-dashboard-completeness-value {
  font-size: 12px;
  font-weight: 600;
  color: var(--success-500);
}

.set-dashboard-completeness-bar {
  height: 6px;
  background: var(--surface-secondary);
  border-radius: 3px;
  overflow: hidden;
}

.set-dashboard-completeness-fill {
  height: 100%;
  background: var(--success-500);
  border-radius: 3px;
  transition: width 0.3s ease;
}

/* Source Card */
.set-dashboard-card.source .set-dashboard-card-title i {
  color: var(--success-500);
}

.set-dashboard-source-item {
  display: flex;
  align-items: flex-start;
  gap: 12px;
  padding: 12px;
  background: var(--surface-secondary);
  border-radius: 8px;
  margin-bottom: 8px;
}

.set-dashboard-source-item:last-child {
  margin-bottom: 0;
}

.set-dashboard-source-icon {
  width: 36px;
  height: 36px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: var(--primary-100);
  border-radius: 8px;
  color: var(--primary-600);
  font-size: 18px;
}

.set-dashboard-source-details {
  flex: 1;
  min-width: 0;
}

.set-dashboard-source-name {
  font-size: 13px;
  font-weight: 500;
  color: var(--text-primary);
  margin-bottom: 2px;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.set-dashboard-source-meta {
  display: flex;
  align-items: center;
  gap: 8px;
  font-size: 11px;
  color: var(--text-tertiary);
}

.set-dashboard-source-badge {
  padding: 2px 6px;
  background: var(--surface-primary);
  border-radius: 4px;
  font-size: 10px;
  font-weight: 500;
  text-transform: uppercase;
}

.set-dashboard-empty {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 24px;
  color: var(--text-tertiary);
  text-align: center;
}

.set-dashboard-empty i {
  font-size: 24px;
  margin-bottom: 8px;
  opacity: 0.5;
}

.set-dashboard-empty span {
  font-size: 12px;
}

/* Transformations Card */
.set-dashboard-card.transforms .set-dashboard-card-title i {
  color: var(--warning-500);
}

.set-dashboard-transform-list {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.set-dashboard-transform-item {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 10px 12px;
  background: var(--surface-secondary);
  border-radius: 6px;
}

.set-dashboard-transform-item .op-badge {
  flex-shrink: 0;
}

.set-dashboard-transform-text {
  flex: 1;
  font-size: 12px;
  color: var(--text-primary);
}

.set-dashboard-transform-text small {
  display: block;
  color: var(--text-tertiary);
  margin-top: 2px;
}

.set-dashboard-schema-link {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-top: 12px;
  padding-top: 12px;
  border-top: 1px solid var(--border-primary);
}

.set-dashboard-schema-info {
  font-size: 12px;
  color: var(--text-secondary);
}

.set-dashboard-schema-info strong {
  color: var(--text-primary);
}

/* Fields Overview Card (Full Width) */
.set-dashboard-fields-row {
  margin-bottom: 16px;
}

.set-dashboard-card.fields {
  grid-column: 1 / -1;
}

.set-dashboard-card.fields .set-dashboard-card-title i {
  color: var(--primary-500);
}

.set-dashboard-fields-grid {
  display: flex;
  gap: 8px;
  overflow-x: auto;
  padding-bottom: 4px;
}

.set-dashboard-field-item {
  flex: 0 0 auto;
  min-width: 120px;
  max-width: 160px;
  padding: 12px;
  background: var(--surface-secondary);
  border: 1px solid var(--border-primary);
  border-radius: 8px;
  cursor: pointer;
  transition: all 0.15s ease;
}

.set-dashboard-field-item:hover {
  border-color: var(--primary-300);
  background: var(--bg-hover);
}

.set-dashboard-field-name {
  font-size: 12px;
  font-weight: 500;
  color: var(--text-primary);
  margin-bottom: 4px;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.set-dashboard-field-type {
  display: flex;
  align-items: center;
  gap: 4px;
  font-size: 10px;
  color: var(--text-tertiary);
  margin-bottom: 8px;
}

.set-dashboard-field-type i {
  font-size: 12px;
}

.set-dashboard-field-completeness {
  height: 4px;
  background: var(--surface-primary);
  border-radius: 2px;
  overflow: hidden;
}

.set-dashboard-field-completeness-fill {
  height: 100%;
  background: var(--success-500);
  border-radius: 2px;
}

.set-dashboard-field-completeness-fill.warning {
  background: var(--warning-500);
}

.set-dashboard-field-completeness-fill.danger {
  background: var(--danger-500);
}

.set-dashboard-field-more {
  flex: 0 0 auto;
  min-width: 80px;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 12px;
  background: transparent;
  border: 1px dashed var(--border-primary);
  border-radius: 8px;
  color: var(--text-tertiary);
  font-size: 12px;
  cursor: pointer;
  transition: all 0.15s ease;
}

.set-dashboard-field-more:hover {
  border-color: var(--primary-500);
  color: var(--primary-500);
}

/* Bottom Row - Exports and Derived Sets */
.set-dashboard-bottom-grid {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 16px;
  margin-bottom: 16px;
}

.set-dashboard-card.exports .set-dashboard-card-title i {
  color: var(--primary-500);
}

.set-dashboard-card.derived .set-dashboard-card-title i {
  color: #8b5cf6;
}

.set-dashboard-list {
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.set-dashboard-list-item {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 10px 12px;
  background: var(--surface-secondary);
  border-radius: 6px;
  cursor: pointer;
  transition: background 0.15s ease;
}

.set-dashboard-list-item:hover {
  background: var(--bg-hover);
}

.set-dashboard-list-item i {
  font-size: 16px;
  color: var(--text-tertiary);
}

.set-dashboard-list-item-info {
  flex: 1;
  min-width: 0;
}

.set-dashboard-list-item-name {
  font-size: 12px;
  font-weight: 500;
  color: var(--text-primary);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.set-dashboard-list-item-meta {
  font-size: 10px;
  color: var(--text-tertiary);
}

.set-dashboard-add-btn {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 6px;
  width: 100%;
  padding: 10px;
  margin-top: 8px;
  font-size: 12px;
  font-weight: 500;
  color: var(--text-secondary);
  background: transparent;
  border: 1px dashed var(--border-primary);
  border-radius: 6px;
  cursor: pointer;
  transition: all 0.15s ease;
}

.set-dashboard-add-btn:hover {
  color: var(--primary-500);
  border-color: var(--primary-500);
  background: rgba(59, 130, 246, 0.05);
}

/* Record Types Section */
.set-dashboard-card.record-types .set-dashboard-card-title i {
  color: #8b5cf6;
}

.set-dashboard-record-types-info {
  font-size: 12px;
  color: var(--text-secondary);
  margin-bottom: 12px;
}

.set-dashboard-record-types-info code {
  background: var(--surface-secondary);
  padding: 2px 6px;
  border-radius: 4px;
  font-size: 11px;
  color: var(--primary-500);
}

.set-dashboard-record-types-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
  gap: 8px;
}

.set-dashboard-record-type-item {
  padding: 12px;
  background: var(--surface-secondary);
  border: 1px solid var(--border-primary);
  border-radius: 8px;
  text-align: center;
  cursor: pointer;
  transition: all 0.15s ease;
}

.set-dashboard-record-type-item:hover {
  border-color: var(--primary-300);
  background: var(--bg-hover);
}

.set-dashboard-record-type-name {
  font-size: 13px;
  font-weight: 500;
  color: var(--text-primary);
  margin-bottom: 4px;
}

.set-dashboard-record-type-count {
  font-size: 11px;
  color: var(--text-tertiary);
}

.set-dashboard-record-type-btn {
  display: inline-flex;
  align-items: center;
  gap: 4px;
  margin-top: 8px;
  padding: 4px 10px;
  font-size: 11px;
  font-weight: 500;
  color: var(--primary-500);
  background: rgba(59, 130, 246, 0.1);
  border: none;
  border-radius: 4px;
  cursor: pointer;
  transition: background 0.15s ease;
}

.set-dashboard-record-type-btn:hover {
  background: rgba(59, 130, 246, 0.2);
}

/* Operator badges */
.op-badge {
  display: inline-flex;
  align-items: center;
  padding: 2px 8px;
  font-size: 11px;
  font-weight: 600;
  border-radius: 4px;
  font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, monospace;
}

.op-badge.seg {
  background: rgba(168, 85, 247, 0.15);
  color: #a855f7;
}

.op-badge.con {
  background: rgba(59, 130, 246, 0.15);
  color: #3b82f6;
}

.op-badge.alt {
  background: rgba(34, 197, 94, 0.15);
  color: #22c55e;
}

.op-badge.query {
  background: rgba(249, 115, 22, 0.15);
  color: #f97316;
}

.op-badge.computed {
  background: rgba(236, 72, 153, 0.15);
  color: #ec4899;
}

.op-badge.direct {
  background: rgba(107, 114, 128, 0.15);
  color: #6b7280;
}

/* ========================================
   Fields Panel (Airtable-style Manage Fields)
   ======================================== */

.fields-panel-container {
  max-width: none;
  margin: 0;
  padding: 0;
  height: 100%;
  display: flex;
  flex-direction: column;
  overflow: hidden;
}

.fields-panel-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 12px 20px;
  border-bottom: 1px solid var(--border-subtle);
  background: var(--bg-primary);
  flex-shrink: 0;
}

.fields-panel-header-left {
  display: flex;
  align-items: center;
  gap: 12px;
}

.fields-panel-back-btn {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 6px 10px;
  background: transparent;
  border: none;
  color: var(--text-secondary);
  font-size: 13px;
  cursor: pointer;
  border-radius: var(--radius-sm);
  transition: var(--transition-fast);
}

.fields-panel-back-btn:hover {
  background: var(--bg-hover);
  color: var(--text-primary);
}

.fields-panel-title {
  display: flex;
  align-items: center;
  gap: 8px;
  font-size: 14px;
  font-weight: 500;
  color: var(--text-primary);
}

.fields-panel-title-set {
  color: var(--text-muted);
}

.fields-panel-title-divider {
  color: var(--text-muted);
}

.fields-panel-header-right {
  display: flex;
  align-items: center;
  gap: 8px;
}

.fields-panel-count {
  font-size: 12px;
  color: var(--text-muted);
  padding: 4px 8px;
  background: var(--bg-tertiary);
  border-radius: 10px;
}

.fields-panel-toolbar {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 10px 20px;
  border-bottom: 1px solid var(--border-subtle);
  background: var(--bg-secondary);
  flex-shrink: 0;
}

.fields-panel-add-btn {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 8px 16px;
  background: var(--primary-500);
  color: white;
  border: none;
  border-radius: var(--radius-md);
  font-size: 13px;
  font-weight: 500;
  cursor: pointer;
  transition: var(--transition-fast);
}

.fields-panel-add-btn:hover {
  background: var(--primary-600);
}

.fields-panel-search {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 6px 12px;
  background: var(--bg-primary);
  border: 1px solid var(--border-primary);
  border-radius: var(--radius-md);
  width: 200px;
}

.fields-panel-search i {
  color: var(--text-muted);
  font-size: 14px;
}

.fields-panel-search input {
  border: none;
  background: transparent;
  color: var(--text-primary);
  font-size: 13px;
  outline: none;
  width: 100%;
}

.fields-panel-search input::placeholder {
  color: var(--text-muted);
}

/* Filter dropdowns */
.fields-panel-filters {
  display: flex;
  align-items: center;
  gap: 8px;
  margin-left: auto;
}

.fields-panel-filter {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 6px 10px;
  background: var(--bg-primary);
  border: 1px solid var(--border-primary);
  border-radius: var(--radius-md);
  font-size: 12px;
  color: var(--text-secondary);
  cursor: pointer;
  transition: var(--transition-fast);
}

.fields-panel-filter:hover {
  border-color: var(--border-hover);
  color: var(--text-primary);
}

.fields-panel-filter.active {
  background: var(--primary-50);
  border-color: var(--primary-300);
  color: var(--primary-600);
}

.fields-panel-filter i {
  font-size: 12px;
}

/* Bulk actions bar */
.fields-panel-bulk-bar {
  display: none;
  align-items: center;
  gap: 12px;
  padding: 8px 20px;
  background: var(--primary-50);
  border-bottom: 1px solid var(--primary-200);
  flex-shrink: 0;
}

.fields-panel-bulk-bar.visible {
  display: flex;
}

.fields-panel-bulk-count {
  font-size: 13px;
  font-weight: 500;
  color: var(--primary-700);
}

.fields-panel-bulk-actions {
  display: flex;
  align-items: center;
  gap: 8px;
}

.fields-panel-bulk-btn {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 5px 10px;
  background: transparent;
  border: 1px solid var(--primary-300);
  border-radius: var(--radius-sm);
  font-size: 12px;
  color: var(--primary-700);
  cursor: pointer;
  transition: var(--transition-fast);
}

.fields-panel-bulk-btn:hover {
  background: var(--primary-100);
}

.fields-panel-bulk-btn.danger {
  border-color: var(--danger-300);
  color: var(--danger-600);
}

.fields-panel-bulk-btn.danger:hover {
  background: var(--danger-50);
}

/* Table wrapper */
.fields-panel-table-wrapper {
  flex: 1;
  overflow: auto;
}

/* Full-width table */
.fields-panel-table {
  width: 100%;
  border-collapse: collapse;
  font-size: 13px;
}

.fields-panel-table th,
.fields-panel-table td {
  padding: 10px 16px;
  text-align: left;
  border-bottom: 1px solid var(--border-subtle);
  white-space: nowrap;
}

.fields-panel-table th {
  position: sticky;
  top: 0;
  background: var(--bg-secondary);
  font-weight: 500;
  font-size: 12px;
  color: var(--text-muted);
  text-transform: none;
  z-index: 10;
  user-select: none;
}

.fields-panel-table th.sortable {
  cursor: pointer;
}

.fields-panel-table th.sortable:hover {
  color: var(--text-primary);
}

.fields-panel-table th .sort-icon {
  margin-left: 4px;
  font-size: 10px;
  opacity: 0.5;
}

.fields-panel-table th.sorted .sort-icon {
  opacity: 1;
}

.fields-panel-table tbody tr {
  cursor: pointer;
  transition: var(--transition-fast);
}

.fields-panel-table tbody tr:hover {
  background: var(--bg-hover);
}

.fields-panel-table tbody tr.selected {
  background: var(--primary-50);
}

/* Column widths */
.fields-panel-table .col-checkbox { width: 40px; }
.fields-panel-table .col-name { min-width: 200px; }
.fields-panel-table .col-type { width: 150px; }
.fields-panel-table .col-description { min-width: 200px; max-width: 300px; }
.fields-panel-table .col-definition { width: 150px; }
.fields-panel-table .col-field-id { width: 140px; }
.fields-panel-table .col-used-by { width: 140px; }
.fields-panel-table .col-modified { width: 130px; }
.fields-panel-table .col-actions { width: 50px; }

/* Checkbox cell */
.field-checkbox {
  width: 16px;
  height: 16px;
  cursor: pointer;
  accent-color: var(--primary-500);
}

/* Name cell */
.field-name-cell {
  display: flex;
  align-items: center;
  gap: 10px;
}

.field-type-icon {
  width: 28px;
  height: 28px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: var(--bg-tertiary);
  border-radius: var(--radius-sm);
  color: var(--text-secondary);
  font-size: 14px;
  flex-shrink: 0;
}

.field-name-text {
  font-weight: 500;
  color: var(--text-primary);
  overflow: hidden;
  text-overflow: ellipsis;
}

.field-primary-badge {
  font-size: 9px;
  padding: 2px 5px;
  background: var(--warning-500);
  color: white;
  border-radius: 3px;
  text-transform: uppercase;
  font-weight: 600;
  flex-shrink: 0;
}

/* Type cell */
.field-type-cell {
  display: flex;
  align-items: center;
  gap: 6px;
  color: var(--text-secondary);
}

.field-type-cell i {
  font-size: 14px;
  color: var(--text-muted);
}

/* Description cell */
.field-description-cell {
  color: var(--text-muted);
  overflow: hidden;
  text-overflow: ellipsis;
  max-width: 300px;
}

.field-description-cell.empty {
  font-style: italic;
  opacity: 0.5;
}

.field-description-cell:hover .add-description {
  opacity: 1;
}

.add-description {
  opacity: 0;
  color: var(--primary-500);
  font-size: 12px;
  cursor: pointer;
  transition: var(--transition-fast);
}

/* Definition cell */
.field-definition-cell {
  display: flex;
  align-items: center;
  gap: 6px;
}

.field-definition-badge {
  display: inline-flex;
  align-items: center;
  gap: 4px;
  padding: 3px 8px;
  background: var(--bg-tertiary);
  border-radius: var(--radius-sm);
  font-size: 11px;
  color: var(--text-secondary);
  cursor: pointer;
  transition: var(--transition-fast);
}

.field-definition-badge:hover {
  background: var(--bg-hover);
  color: var(--text-primary);
}

.field-definition-badge i {
  font-size: 12px;
}

.field-definition-badge.linked {
  background: var(--success-50);
  color: var(--success-700);
}

.field-definition-badge.out-of-sync {
  background: var(--warning-50);
  color: var(--warning-700);
}

.link-definition-btn {
  opacity: 0;
  padding: 4px 8px;
  background: transparent;
  border: 1px dashed var(--border-primary);
  border-radius: var(--radius-sm);
  font-size: 11px;
  color: var(--text-muted);
  cursor: pointer;
  transition: var(--transition-fast);
}

tr:hover .link-definition-btn {
  opacity: 1;
}

.link-definition-btn:hover {
  border-color: var(--primary-400);
  color: var(--primary-500);
  background: var(--primary-50);
}

/* Field ID cell */
.field-id-cell {
  display: flex;
  align-items: center;
  gap: 6px;
  font-family: var(--font-mono);
  font-size: 11px;
  color: var(--text-muted);
}

.field-id-copy {
  opacity: 0;
  padding: 2px;
  background: transparent;
  border: none;
  color: var(--text-muted);
  cursor: pointer;
  border-radius: 3px;
  transition: var(--transition-fast);
}

tr:hover .field-id-copy {
  opacity: 1;
}

.field-id-copy:hover {
  background: var(--bg-hover);
  color: var(--text-primary);
}

/* Used by cell */
.field-used-by-cell {
  display: flex;
  align-items: center;
  gap: 6px;
  flex-wrap: wrap;
}

.usage-badge {
  display: inline-flex;
  align-items: center;
  gap: 4px;
  padding: 2px 6px;
  background: var(--bg-tertiary);
  border-radius: 4px;
  font-size: 11px;
  color: var(--text-muted);
  cursor: pointer;
  transition: var(--transition-fast);
}

.usage-badge:hover {
  background: var(--bg-hover);
  color: var(--text-secondary);
}

.usage-badge i {
  font-size: 10px;
}

/* Modified cell */
.field-modified-cell {
  display: flex;
  flex-direction: column;
  gap: 2px;
}

.modified-time {
  font-size: 12px;
  color: var(--text-secondary);
}

.modified-actor {
  font-size: 11px;
  color: var(--text-muted);
}

/* Actions cell */
.field-actions-cell {
  text-align: center;
}

.field-actions-menu-btn {
  width: 28px;
  height: 28px;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  background: transparent;
  border: none;
  color: var(--text-muted);
  border-radius: var(--radius-sm);
  cursor: pointer;
  opacity: 0;
  transition: var(--transition-fast);
}

tr:hover .field-actions-menu-btn {
  opacity: 1;
}

.field-actions-menu-btn:hover {
  background: var(--bg-hover);
  color: var(--text-primary);
}

/* Actions dropdown menu */
.field-actions-dropdown {
  position: fixed;
  min-width: 180px;
  background: var(--bg-primary);
  border: 1px solid var(--border-primary);
  border-radius: var(--radius-md);
  box-shadow: var(--shadow-lg);
  z-index: 1000;
  padding: 4px;
  display: none;
}

.field-actions-dropdown.visible {
  display: block;
}

.field-action-item {
  display: flex;
  align-items: center;
  gap: 10px;
  width: 100%;
  padding: 8px 12px;
  background: transparent;
  border: none;
  font-size: 13px;
  color: var(--text-secondary);
  cursor: pointer;
  border-radius: var(--radius-sm);
  transition: var(--transition-fast);
  text-align: left;
}

.field-action-item:hover {
  background: var(--bg-hover);
  color: var(--text-primary);
}

.field-action-item i {
  font-size: 14px;
  width: 16px;
  color: var(--text-muted);
}

.field-action-item.danger {
  color: var(--danger-500);
}

.field-action-item.danger i {
  color: var(--danger-500);
}

.field-action-item.danger:hover {
  background: var(--danger-50);
}

.field-action-divider {
  height: 1px;
  background: var(--border-subtle);
  margin: 4px 0;
}

/* ========================================
   Field History Panel (Slide-out)
   ======================================== */

.field-history-panel {
  position: fixed;
  top: 0;
  right: -450px;
  width: 450px;
  height: 100vh;
  background: var(--bg-primary);
  border-left: 1px solid var(--border-primary);
  box-shadow: var(--shadow-xl);
  z-index: 1001;
  display: flex;
  flex-direction: column;
  transition: right 0.25s ease-out;
}

.field-history-panel.visible {
  right: 0;
}

.field-history-overlay {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(0, 0, 0, 0.3);
  z-index: 1000;
  opacity: 0;
  pointer-events: none;
  transition: opacity 0.25s ease-out;
}

.field-history-overlay.visible {
  opacity: 1;
  pointer-events: auto;
}

.field-history-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 16px 20px;
  border-bottom: 1px solid var(--border-subtle);
  flex-shrink: 0;
}

.field-history-header-left {
  display: flex;
  align-items: center;
  gap: 12px;
}

.field-history-back-btn {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 32px;
  height: 32px;
  background: transparent;
  border: none;
  color: var(--text-secondary);
  border-radius: var(--radius-sm);
  cursor: pointer;
  transition: var(--transition-fast);
}

.field-history-back-btn:hover {
  background: var(--bg-hover);
  color: var(--text-primary);
}

.field-history-title {
  font-size: 15px;
  font-weight: 600;
  color: var(--text-primary);
}

.field-history-subtitle {
  font-size: 12px;
  color: var(--text-muted);
  margin-top: 2px;
}

.field-history-close-btn {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 32px;
  height: 32px;
  background: transparent;
  border: none;
  color: var(--text-muted);
  border-radius: var(--radius-sm);
  cursor: pointer;
  transition: var(--transition-fast);
}

.field-history-close-btn:hover {
  background: var(--bg-hover);
  color: var(--text-primary);
}

.field-history-toolbar {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 12px 20px;
  border-bottom: 1px solid var(--border-subtle);
  flex-shrink: 0;
}

.field-history-filter {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 5px 10px;
  background: var(--bg-secondary);
  border: 1px solid var(--border-primary);
  border-radius: var(--radius-sm);
  font-size: 12px;
  color: var(--text-secondary);
  cursor: pointer;
  transition: var(--transition-fast);
}

.field-history-filter:hover {
  border-color: var(--border-hover);
}

.field-history-filter.active {
  background: var(--primary-50);
  border-color: var(--primary-300);
  color: var(--primary-600);
}

.field-history-content {
  flex: 1;
  overflow-y: auto;
  padding: 0;
}

/* Timeline styling */
.history-timeline {
  position: relative;
  padding: 16px 20px;
}

.history-date-group {
  margin-bottom: 24px;
}

.history-date-header {
  display: flex;
  align-items: center;
  gap: 8px;
  margin-bottom: 12px;
  position: sticky;
  top: 0;
  background: var(--bg-primary);
  padding: 4px 0;
  z-index: 1;
}

.history-date-dot {
  width: 10px;
  height: 10px;
  background: var(--bg-tertiary);
  border: 2px solid var(--border-primary);
  border-radius: 50%;
}

.history-date-text {
  font-size: 12px;
  font-weight: 600;
  color: var(--text-secondary);
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.history-events {
  position: relative;
  padding-left: 24px;
  border-left: 2px solid var(--border-subtle);
  margin-left: 4px;
}

.history-event {
  position: relative;
  padding: 12px 16px;
  margin-bottom: 8px;
  background: var(--bg-secondary);
  border: 1px solid var(--border-subtle);
  border-radius: var(--radius-md);
  transition: var(--transition-fast);
}

.history-event:hover {
  border-color: var(--border-primary);
  background: var(--bg-hover);
}

.history-event::before {
  content: '';
  position: absolute;
  left: -20px;
  top: 18px;
  width: 12px;
  height: 2px;
  background: var(--border-subtle);
}

.history-event-header {
  display: flex;
  align-items: center;
  gap: 8px;
  margin-bottom: 6px;
}

.history-event-icon {
  width: 24px;
  height: 24px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: var(--bg-tertiary);
  border-radius: var(--radius-sm);
  font-size: 12px;
  flex-shrink: 0;
}

.history-event-icon.created { color: var(--success-500); background: var(--success-50); }
.history-event-icon.renamed { color: var(--primary-500); background: var(--primary-50); }
.history-event-icon.type-changed { color: var(--warning-500); background: var(--warning-50); }
.history-event-icon.deleted { color: var(--danger-500); background: var(--danger-50); }
.history-event-icon.restored { color: var(--success-500); background: var(--success-50); }
.history-event-icon.definition { color: var(--purple-500); background: var(--purple-50); }
.history-event-icon.options { color: var(--text-secondary); background: var(--bg-tertiary); }

.history-event-type {
  font-size: 13px;
  font-weight: 500;
  color: var(--text-primary);
}

.history-event-time {
  font-size: 11px;
  color: var(--text-muted);
  margin-left: auto;
}

.history-event-actor {
  font-size: 12px;
  color: var(--text-muted);
  margin-bottom: 8px;
}

.history-event-changes {
  background: var(--bg-tertiary);
  border-radius: var(--radius-sm);
  padding: 10px 12px;
  font-size: 12px;
}

.history-change-row {
  display: flex;
  align-items: flex-start;
  gap: 8px;
  margin-bottom: 6px;
}

.history-change-row:last-child {
  margin-bottom: 0;
}

.history-change-label {
  color: var(--text-muted);
  min-width: 60px;
  flex-shrink: 0;
}

.history-change-from {
  color: var(--danger-500);
  text-decoration: line-through;
  opacity: 0.8;
}

.history-change-arrow {
  color: var(--text-muted);
  flex-shrink: 0;
}

.history-change-to {
  color: var(--success-600);
  font-weight: 500;
}

.history-empty {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 48px 24px;
  text-align: center;
  color: var(--text-muted);
}

.history-empty i {
  font-size: 48px;
  margin-bottom: 12px;
  opacity: 0.5;
}

.history-empty p {
  margin: 0;
  font-size: 14px;
}

/* ========================================
   Definition Linking Modal
   ======================================== */

.definition-link-modal {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  display: none;
  align-items: center;
  justify-content: center;
  z-index: 1002;
}

.definition-link-modal.visible {
  display: flex;
}

.definition-link-modal-overlay {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(0, 0, 0, 0.5);
}

.definition-link-modal-content {
  position: relative;
  width: 560px;
  max-height: 80vh;
  background: var(--bg-primary);
  border-radius: var(--radius-lg);
  box-shadow: var(--shadow-xl);
  display: flex;
  flex-direction: column;
  overflow: hidden;
}

.definition-link-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 16px 20px;
  border-bottom: 1px solid var(--border-subtle);
}

.definition-link-title {
  font-size: 16px;
  font-weight: 600;
  color: var(--text-primary);
}

.definition-link-close {
  width: 32px;
  height: 32px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: transparent;
  border: none;
  color: var(--text-muted);
  border-radius: var(--radius-sm);
  cursor: pointer;
  transition: var(--transition-fast);
}

.definition-link-close:hover {
  background: var(--bg-hover);
  color: var(--text-primary);
}

.definition-link-search {
  padding: 12px 20px;
  border-bottom: 1px solid var(--border-subtle);
}

.definition-link-search input {
  width: 100%;
  padding: 10px 14px;
  background: var(--bg-secondary);
  border: 1px solid var(--border-primary);
  border-radius: var(--radius-md);
  font-size: 14px;
  color: var(--text-primary);
  outline: none;
  transition: var(--transition-fast);
}

.definition-link-search input:focus {
  border-color: var(--primary-400);
  box-shadow: 0 0 0 3px var(--primary-100);
}

.definition-link-search input::placeholder {
  color: var(--text-muted);
}

.definition-link-list {
  flex: 1;
  overflow-y: auto;
  padding: 8px;
}

.definition-link-section {
  margin-bottom: 16px;
}

.definition-link-section-title {
  font-size: 11px;
  font-weight: 600;
  color: var(--text-muted);
  text-transform: uppercase;
  letter-spacing: 0.5px;
  padding: 8px 12px;
}

.definition-link-item {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 10px 12px;
  border-radius: var(--radius-sm);
  cursor: pointer;
  transition: var(--transition-fast);
}

.definition-link-item:hover {
  background: var(--bg-hover);
}

.definition-link-item.selected {
  background: var(--primary-50);
}

.definition-link-item-icon {
  width: 32px;
  height: 32px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: var(--bg-tertiary);
  border-radius: var(--radius-sm);
  color: var(--text-secondary);
  font-size: 14px;
}

.definition-link-item-info {
  flex: 1;
  min-width: 0;
}

.definition-link-item-name {
  font-size: 13px;
  font-weight: 500;
  color: var(--text-primary);
  margin-bottom: 2px;
}

.definition-link-item-meta {
  font-size: 11px;
  color: var(--text-muted);
}

.definition-link-item-uri {
  font-size: 10px;
  color: var(--text-muted);
  font-family: var(--font-mono);
  overflow: hidden;
  text-overflow: ellipsis;
}

.definition-link-empty {
  padding: 32px 20px;
  text-align: center;
  color: var(--text-muted);
}

.definition-link-empty i {
  font-size: 36px;
  margin-bottom: 8px;
  opacity: 0.5;
}

.definition-link-footer {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 12px 20px;
  border-top: 1px solid var(--border-subtle);
  background: var(--bg-secondary);
}

.definition-link-footer-left {
  display: flex;
  align-items: center;
  gap: 8px;
}

.definition-link-unlink-btn {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 8px 12px;
  background: transparent;
  border: 1px solid var(--danger-300);
  border-radius: var(--radius-sm);
  font-size: 13px;
  color: var(--danger-500);
  cursor: pointer;
  transition: var(--transition-fast);
}

.definition-link-unlink-btn:hover {
  background: var(--danger-50);
}

.definition-link-footer-right {
  display: flex;
  align-items: center;
  gap: 8px;
}

.definition-link-cancel-btn {
  padding: 8px 16px;
  background: transparent;
  border: 1px solid var(--border-primary);
  border-radius: var(--radius-sm);
  font-size: 13px;
  color: var(--text-secondary);
  cursor: pointer;
  transition: var(--transition-fast);
}

.definition-link-cancel-btn:hover {
  background: var(--bg-hover);
  color: var(--text-primary);
}

.definition-link-save-btn {
  padding: 8px 16px;
  background: var(--primary-500);
  border: none;
  border-radius: var(--radius-sm);
  font-size: 13px;
  color: white;
  cursor: pointer;
  transition: var(--transition-fast);
}

.definition-link-save-btn:hover {
  background: var(--primary-600);
}

.definition-link-save-btn:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

/* ===== Definition Source Display ===== */
.definition-source-section {
  margin: 24px 0;
  padding: 0;
}

.definition-source-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
  gap: 16px;
  margin-bottom: 16px;
}

.definition-source-card {
  background: var(--bg-primary);
  border: 1px solid var(--border-primary);
  border-radius: var(--radius-md);
  overflow: hidden;
}

.definition-source-card-header {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 12px 16px;
  background: var(--bg-secondary);
  border-bottom: 1px solid var(--border-primary);
  font-size: 13px;
  font-weight: 600;
  color: var(--text-primary);
}

.definition-source-card-header i {
  color: var(--primary-500);
  font-size: 16px;
}

.definition-source-card-content {
  padding: 12px 16px;
}

.definition-source-field {
  display: flex;
  flex-direction: column;
  gap: 2px;
  margin-bottom: 12px;
}

.definition-source-field:last-child {
  margin-bottom: 0;
}

.definition-source-field .field-label {
  font-size: 11px;
  font-weight: 500;
  color: var(--text-tertiary);
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.definition-source-field .field-value {
  font-size: 13px;
  color: var(--text-primary);
  line-height: 1.5;
}

.definition-source-field .field-value code {
  background: var(--bg-secondary);
  padding: 2px 6px;
  border-radius: var(--radius-sm);
  font-family: var(--font-mono);
  font-size: 12px;
  color: var(--primary-600);
}

.definition-source-badge {
  display: inline-block;
  padding: 2px 8px;
  background: var(--primary-50);
  color: var(--primary-600);
  border-radius: 12px;
  font-size: 11px;
  font-weight: 500;
}

.definition-source-link {
  color: var(--primary-500);
  text-decoration: none;
  font-size: 12px;
  display: inline-flex;
  align-items: center;
  gap: 4px;
}

.definition-source-link:hover {
  color: var(--primary-600);
  text-decoration: underline;
}

.definition-source-status {
  margin-left: auto;
  padding: 2px 10px;
  border-radius: 12px;
  font-size: 11px;
  font-weight: 500;
}

.definition-source-status.status-current {
  background: var(--success-100);
  color: var(--success-700);
}

.definition-source-status.status-superseded {
  background: var(--warning-100);
  color: var(--warning-700);
}

.definition-source-tag {
  display: inline-block;
  padding: 2px 8px;
  background: var(--gray-100);
  color: var(--gray-600);
  border-radius: 4px;
  font-size: 12px;
  margin-right: 4px;
  margin-bottom: 4px;
}

.definition-source-categories {
  background: var(--bg-primary);
  border: 1px solid var(--border-primary);
  border-radius: var(--radius-md);
  overflow: hidden;
}

.definition-source-categories .definition-source-card-header {
  border-bottom: 1px solid var(--border-primary);
}

.definition-source-category-list {
  padding: 12px 16px 12px 32px;
  margin: 0;
  list-style-type: disc;
}

.definition-source-category-list li {
  font-size: 13px;
  color: var(--text-secondary);
  margin-bottom: 6px;
  line-height: 1.5;
}

.definition-source-category-list li:last-child {
  margin-bottom: 0;
}

/* Filter dropdown */
.filter-dropdown {
  position: fixed;
  min-width: 180px;
  background: var(--bg-primary);
  border: 1px solid var(--border-primary);
  border-radius: var(--radius-md);
  box-shadow: var(--shadow-lg);
  z-index: 1003;
  padding: 4px;
  display: none;
}

.filter-dropdown.visible {
  display: block;
}

.filter-dropdown-item {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 8px 12px;
  font-size: 13px;
  color: var(--text-secondary);
  cursor: pointer;
  border-radius: var(--radius-sm);
  transition: var(--transition-fast);
}

.filter-dropdown-item:hover {
  background: var(--bg-hover);
  color: var(--text-primary);
}

.filter-dropdown-item.selected {
  color: var(--primary-600);
}

.filter-dropdown-item.selected i.ph-check {
  visibility: visible;
}

.filter-dropdown-item i.ph-check {
  visibility: hidden;
  margin-left: auto;
}

/* Usage popover */
.usage-popover {
  position: fixed;
  width: 280px;
  background: var(--bg-primary);
  border: 1px solid var(--border-primary);
  border-radius: var(--radius-md);
  box-shadow: var(--shadow-lg);
  z-index: 1002;
  display: none;
}

.usage-popover.visible {
  display: block;
}

.usage-popover-header {
  padding: 12px 16px;
  border-bottom: 1px solid var(--border-subtle);
  font-size: 13px;
  font-weight: 500;
  color: var(--text-primary);
}

.usage-popover-content {
  padding: 8px;
  max-height: 300px;
  overflow-y: auto;
}

.usage-popover-section {
  margin-bottom: 8px;
}

.usage-popover-section:last-child {
  margin-bottom: 0;
}

.usage-popover-section-title {
  font-size: 11px;
  font-weight: 500;
  color: var(--text-muted);
  padding: 4px 8px;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.usage-popover-item {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 6px 8px;
  font-size: 12px;
  color: var(--text-secondary);
  border-radius: var(--radius-sm);
}

.usage-popover-item:hover {
  background: var(--bg-hover);
}

.usage-popover-item i {
  font-size: 12px;
  color: var(--text-muted);
}

/* Legacy styles maintained for compatibility */
.fields-panel-list {
  display: none;
}

.fields-panel-row {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 12px 16px;
  background: var(--bg-secondary);
  border: 1px solid var(--border-subtle);
  border-radius: var(--radius-md);
  cursor: pointer;
  transition: var(--transition-fast);
}

.fields-panel-row:hover {
  background: var(--bg-hover);
  border-color: var(--border-primary);
}

.fields-panel-drag-handle {
  color: var(--text-muted);
  cursor: grab;
  padding: 4px;
  opacity: 0.5;
  transition: var(--transition-fast);
}

.fields-panel-row:hover .fields-panel-drag-handle {
  opacity: 1;
}

.fields-panel-icon {
  width: 32px;
  height: 32px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: var(--bg-tertiary);
  border-radius: var(--radius-sm);
  color: var(--text-secondary);
  font-size: 16px;
}

.fields-panel-info {
  flex: 1;
  min-width: 0;
}

.fields-panel-name {
  font-weight: 500;
  color: var(--text-primary);
  display: flex;
  align-items: center;
  gap: 8px;
}

.fields-panel-primary-badge {
  font-size: 10px;
  padding: 2px 6px;
  background: var(--warning-500);
  color: white;
  border-radius: 4px;
  text-transform: uppercase;
  font-weight: 600;
}

.fields-panel-meta {
  display: flex;
  align-items: center;
  gap: 12px;
  margin-top: 4px;
}

.fields-panel-type {
  font-size: 12px;
  color: var(--text-muted);
}

.fields-panel-usage {
  font-size: 11px;
  color: var(--text-muted);
  padding: 2px 6px;
  background: var(--bg-tertiary);
  border-radius: 4px;
}

.fields-panel-actions {
  display: flex;
  align-items: center;
  gap: 4px;
  opacity: 0;
  transition: var(--transition-fast);
}

.fields-panel-row:hover .fields-panel-actions {
  opacity: 1;
}

.fields-panel-action-btn {
  width: 28px;
  height: 28px;
  display: flex;
  align-items: center;
  justify-content: center;
  border: none;
  background: transparent;
  color: var(--text-muted);
  border-radius: var(--radius-sm);
  cursor: pointer;
  transition: var(--transition-fast);
}

.fields-panel-action-btn:hover {
  background: var(--bg-hover);
  color: var(--text-primary);
}

.fields-panel-delete-btn:hover {
  background: rgba(239, 68, 68, 0.1);
  color: var(--danger-500);
}

.fields-panel-empty {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 48px;
  text-align: center;
  color: var(--text-muted);
}

.fields-panel-empty i {
  font-size: 48px;
  margin-bottom: 16px;
  opacity: 0.5;
}

.fields-panel-empty p {
  margin: 0 0 16px 0;
  font-size: 14px;
}

.fields-panel-empty-add-btn {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 10px 20px;
  background: var(--primary-500);
  color: white;
  border: none;
  border-radius: var(--radius-md);
  font-size: 14px;
  font-weight: 500;
  cursor: pointer;
  transition: var(--transition-fast);
}

.fields-panel-empty-add-btn:hover {
  background: var(--primary-600);
}

.fields-panel-footer {
  margin-top: 24px;
  padding-top: 16px;
  border-top: 1px solid var(--border-subtle);
}

.fields-panel-help {
  display: flex;
  align-items: flex-start;
  gap: 8px;
  padding: 12px 16px;
  background: var(--bg-tertiary);
  border-radius: var(--radius-md);
  color: var(--text-muted);
  font-size: 13px;
}

.fields-panel-help i {
  font-size: 16px;
  flex-shrink: 0;
  margin-top: 1px;
}

/* Add View Button */
.set-add-view-btn {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 4px 8px;
  margin-top: 2px;
  border: none;
  background: transparent;
  color: var(--text-muted);
  font-size: 11px;
  cursor: pointer;
  border-radius: var(--radius-sm);
  transition: var(--transition-fast);
}

.set-add-view-btn:hover {
  background: var(--bg-hover);
  color: var(--text-primary);
}

.set-add-view-btn i {
  font-size: 12px;
}

/* View Type Picker Dropdown */
.view-type-picker-dropdown {
  position: absolute;
  left: 100%;
  top: 0;
  margin-left: 4px;
  min-width: 160px;
  background: var(--bg-secondary);
  border: 1px solid var(--border-primary);
  border-radius: var(--radius-md);
  box-shadow: var(--shadow-lg);
  z-index: 101;
  padding: 4px;
}

.view-type-option {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 6px 10px;
  font-size: 12px;
  color: var(--text-secondary);
  border-radius: var(--radius-sm);
  cursor: pointer;
  transition: var(--transition-fast);
}

.view-type-option:hover {
  background: var(--bg-hover);
  color: var(--text-primary);
}

.view-type-option i {
  font-size: 14px;
  width: 18px;
  text-align: center;
}

/* Hide old view switcher in header */
.header-simplified .view-switcher {
  display: none;
}

/* Hide old view disclosure panel - views are now in sidebar */
.header-simplified ~ .view-disclosure,
body:has(.header-simplified) .view-disclosure {
  display: none !important;
}

/* Operator badge styling for sidebar sets */
.op-badge-mini {
  font-size: 9px;
  font-weight: 600;
  padding: 1px 4px;
  border-radius: 3px;
  margin-right: 2px;
}

.op-badge-mini.op-purple {
  background: rgba(139, 92, 246, 0.15);
  color: #a78bfa;
}

.op-badge-mini.op-blue {
  background: rgba(59, 130, 246, 0.15);
  color: #60a5fa;
}

.op-badge-mini.op-green {
  background: rgba(34, 197, 94, 0.15);
  color: #4ade80;
}

.op-badge-mini.op-orange {
  background: rgba(251, 146, 60, 0.15);
  color: #fb923c;
}

.op-badge-mini.op-gray {
  background: rgba(156, 163, 175, 0.15);
  color: #9ca3af;
}

/* ===== Content Area ===== */
.content-area {
  flex: 1;
  overflow-y: auto;
  position: relative;
  display: flex;
  flex-direction: column;
  min-width: 0;
  width: 100%;
}

/* ===== View Tabs Header (Airtable-style) ===== */
.view-tabs-header {
  display: flex;
  align-items: center;
  gap: 4px;
  padding: 8px 16px;
  background: var(--bg-secondary);
  border-bottom: 1px solid var(--border-primary);
  flex-shrink: 0;
}

.view-tabs-scroll {
  display: flex;
  align-items: center;
  gap: 4px;
  overflow-x: auto;
  flex: 1;
  scrollbar-width: none;
  -ms-overflow-style: none;
}

.view-tabs-scroll::-webkit-scrollbar {
  display: none;
}

.view-tab {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 6px 12px;
  border: none;
  background: transparent;
  color: var(--text-secondary);
  font-size: 13px;
  font-weight: 500;
  border-radius: 6px;
  cursor: pointer;
  white-space: nowrap;
  transition: var(--transition-fast);
}

.view-tab:hover {
  background: var(--bg-hover);
  color: var(--text-primary);
}

.view-tab.active {
  background: var(--primary-500);
  color: white;
}

.view-tab.active i {
  color: rgba(255, 255, 255, 0.9);
}

.view-tab i {
  font-size: 14px;
  color: var(--text-muted);
}

.view-tab:hover i {
  color: var(--text-secondary);
}

.view-tab-name {
  max-width: 120px;
  overflow: hidden;
  text-overflow: ellipsis;
}

.view-tab-close {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 16px;
  height: 16px;
  border-radius: 4px;
  margin-left: 2px;
  opacity: 0;
  transition: opacity 0.15s ease, background 0.15s ease;
}

.view-tab-close i {
  font-size: 10px;
  color: var(--text-muted);
}

.view-tab:hover .view-tab-close {
  opacity: 1;
}

.view-tab-close:hover {
  background: rgba(0, 0, 0, 0.1);
}

.view-tab-close:hover i {
  color: var(--text-primary);
}

.view-tab.active .view-tab-close:hover {
  background: rgba(255, 255, 255, 0.2);
}

.view-tab.active .view-tab-close i {
  color: rgba(255, 255, 255, 0.7);
}

.view-tab.active .view-tab-close:hover i {
  color: white;
}

.view-tabs-add {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 28px;
  height: 28px;
  border: 1px dashed var(--border-secondary);
  background: transparent;
  color: var(--text-muted);
  border-radius: 6px;
  cursor: pointer;
  transition: var(--transition-fast);
  flex-shrink: 0;
}

.view-tabs-add:hover {
  border-color: var(--primary-400);
  background: var(--primary-50);
  color: var(--primary-600);
}

.view-tabs-add i {
  font-size: 14px;
}

.view-tabs-divider {
  width: 1px;
  height: 20px;
  background: var(--border-secondary);
  margin: 0 8px;
  flex-shrink: 0;
}

.view-tabs-add-field {
  display: flex;
  align-items: center;
  gap: 4px;
  padding: 4px 10px;
  border: 1px solid var(--border-secondary);
  background: var(--bg-secondary);
  color: var(--text-secondary);
  border-radius: 6px;
  cursor: pointer;
  transition: var(--transition-fast);
  flex-shrink: 0;
  font-size: 13px;
  font-weight: 500;
}

.view-tabs-add-field:hover {
  border-color: var(--primary-400);
  background: var(--primary-50);
  color: var(--primary-600);
}

.view-tabs-add-field i {
  font-size: 14px;
}

/* ===== View Search ===== */
.view-search-container {
  display: flex;
  align-items: center;
  gap: 4px;
  padding: 4px 10px;
  background: var(--bg-primary);
  border: 1px solid var(--border-secondary);
  border-radius: 6px;
  margin-left: 12px;
  flex-shrink: 0;
  min-width: 180px;
  max-width: 280px;
  transition: var(--transition-fast);
}

.view-search-container:focus-within {
  border-color: var(--primary-400);
  box-shadow: 0 0 0 2px var(--primary-100);
}

.view-search-icon {
  color: var(--text-muted);
  font-size: 14px;
  flex-shrink: 0;
}

.view-search-input {
  flex: 1;
  border: none;
  background: transparent;
  font-size: 13px;
  color: var(--text-primary);
  outline: none;
  min-width: 0;
}

.view-search-input::placeholder {
  color: var(--text-muted);
}

.view-search-clear {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 18px;
  height: 18px;
  border: none;
  background: var(--bg-tertiary);
  color: var(--text-muted);
  border-radius: 50%;
  cursor: pointer;
  flex-shrink: 0;
  transition: var(--transition-fast);
}

.view-search-clear:hover {
  background: var(--danger-100);
  color: var(--danger-600);
}

.view-search-clear i {
  font-size: 10px;
}

/* ===== Search Highlight ===== */
.search-highlight,
mark.search-highlight {
  background: var(--warning-200);
  color: var(--warning-900);
  padding: 0 2px;
  border-radius: 2px;
  font-weight: 500;
}

/* ===== Search No Results ===== */
.search-no-results {
  text-align: center;
  padding: 40px 20px;
}

.search-no-results-content {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 12px;
  color: var(--text-muted);
}

.search-no-results-content i {
  font-size: 32px;
  color: var(--text-muted);
}

.search-no-results-content span {
  font-size: 14px;
}

.search-no-results-state {
  padding: 60px 20px;
}

.search-no-results-state h3 {
  margin-bottom: 8px;
  color: var(--text-secondary);
}

.search-no-results-state p {
  margin-bottom: 16px;
  color: var(--text-muted);
}

/* ===== Status Bar ===== */
.status-bar {
  height: var(--status-bar-height);
  background: var(--bg-tertiary);
  border-top: 1px solid var(--border-primary);
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 0 16px;
  font-size: 12px;
  color: var(--text-muted);
  flex-shrink: 0;
}

.status-left,
.status-center,
.status-right {
  display: flex;
  align-items: center;
  gap: 8px;
}

.status-item {
  display: flex;
  align-items: center;
  gap: 4px;
}

.status-divider {
  width: 1px;
  height: 12px;
  background: var(--border-primary);
}

.eo-indicator {
  display: flex;
  align-items: center;
  gap: 6px;
}

.eo-dot {
  width: 8px;
  height: 8px;
  border-radius: 50%;
}

.eo-dot.given {
  background: var(--given-color);
}

.eo-dot.meant {
  background: var(--meant-color);
}

/* ===== Detail Panel ===== */
.detail-panel {
  width: 0;
  background: var(--bg-secondary);
  border-left: 1px solid var(--border-primary);
  overflow: hidden;
  transition: width var(--transition-normal);
  flex-shrink: 0;
}

.detail-panel.open {
  width: var(--detail-panel-width);
}

.detail-panel-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 12px 16px;
  border-bottom: 1px solid var(--border-primary);
}

.detail-panel-header h3 {
  font-size: 14px;
  font-weight: 600;
}

.detail-panel-close {
  width: 28px;
  height: 28px;
  border: none;
  background: transparent;
  color: var(--text-muted);
  border-radius: var(--radius-sm);
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
}

.detail-panel-close:hover {
  background: var(--bg-hover);
  color: var(--text-primary);
}

.detail-panel-body {
  padding: 16px;
  overflow-y: auto;
  height: calc(100% - 52px);
}

/* ===== Pipeline Panel ===== */
.pipeline-panel {
  width: 0;
  background: var(--bg-secondary);
  border-left: 1px solid var(--border-primary);
  overflow: hidden;
  transition: width var(--transition-normal);
  flex-shrink: 0;
  display: flex;
  flex-direction: column;
}

.pipeline-panel.open {
  width: 380px;
}

.pipeline-panel-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 12px 16px;
  border-bottom: 1px solid var(--border-primary);
  flex-shrink: 0;
}

.pipeline-header-title {
  display: flex;
  align-items: center;
  gap: 8px;
}

.pipeline-header-title i {
  color: var(--primary-500);
  font-size: 18px;
}

.pipeline-header-title h3 {
  font-size: 14px;
  font-weight: 600;
  margin: 0;
}

.pipeline-header-actions {
  display: flex;
  align-items: center;
  gap: 4px;
}

.pipeline-action-btn {
  width: 28px;
  height: 28px;
  border: none;
  background: transparent;
  color: var(--text-muted);
  border-radius: var(--radius-sm);
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
}

.pipeline-action-btn:hover {
  background: var(--bg-hover);
  color: var(--primary-500);
}

.pipeline-panel-close {
  width: 28px;
  height: 28px;
  border: none;
  background: transparent;
  color: var(--text-muted);
  border-radius: var(--radius-sm);
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
}

.pipeline-panel-close:hover {
  background: var(--bg-hover);
  color: var(--text-primary);
}

.pipeline-panel-body {
  padding: 16px;
  overflow-y: auto;
  flex: 1;
}

.pipeline-panel-footer {
  padding: 12px 16px;
  border-top: 1px solid var(--border-primary);
  display: flex;
  gap: 8px;
  flex-shrink: 0;
}

/* Pipeline Steps List */
.pipeline-steps {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.pipeline-step {
  background: var(--bg-tertiary);
  border: 1px solid var(--border-primary);
  border-radius: var(--radius-md);
  padding: 12px;
  cursor: grab;
  transition: all var(--transition-fast);
}

.pipeline-step:hover {
  border-color: var(--primary-400);
  box-shadow: 0 2px 8px var(--shadow-color);
}

.pipeline-step.disabled {
  opacity: 0.5;
}

.pipeline-step.dragging {
  opacity: 0.7;
  transform: scale(1.02);
  cursor: grabbing;
}

.pipeline-step-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 8px;
}

.pipeline-step-type {
  display: flex;
  align-items: center;
  gap: 6px;
  font-size: 12px;
  font-weight: 600;
  color: var(--text-primary);
}

.pipeline-step-type i {
  font-size: 14px;
}

.pipeline-step-type.source { color: var(--given-color); }
.pipeline-step-type.merge { color: var(--primary-500); }
.pipeline-step-type.filter { color: var(--purple-500); }
.pipeline-step-type.transform { color: var(--orange-500); }
.pipeline-step-type.dedupe { color: var(--teal-500); }

.pipeline-step-actions {
  display: flex;
  gap: 4px;
  opacity: 0;
  transition: opacity var(--transition-fast);
}

.pipeline-step:hover .pipeline-step-actions {
  opacity: 1;
}

.pipeline-step-action {
  width: 24px;
  height: 24px;
  border: none;
  background: transparent;
  color: var(--text-muted);
  border-radius: var(--radius-sm);
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 12px;
}

.pipeline-step-action:hover {
  background: var(--bg-hover);
  color: var(--text-primary);
}

.pipeline-step-action.danger:hover {
  color: var(--error-color);
}

.pipeline-step-content {
  font-size: 12px;
  color: var(--text-secondary);
}

.pipeline-step-summary {
  display: flex;
  flex-wrap: wrap;
  gap: 4px 8px;
}

.pipeline-step-tag {
  background: var(--bg-primary);
  padding: 2px 6px;
  border-radius: var(--radius-xs);
  font-size: 11px;
}

/* Pipeline Step Arrow Connector */
.pipeline-connector {
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 4px 0;
  color: var(--text-muted);
}

.pipeline-connector i {
  font-size: 12px;
}

/* Pipeline Step Stats */
.pipeline-step-stats {
  margin-top: 8px;
  padding-top: 8px;
  border-top: 1px dashed var(--border-primary);
  font-size: 11px;
  color: var(--text-muted);
  display: flex;
  gap: 12px;
}

.pipeline-step-stat {
  display: flex;
  align-items: center;
  gap: 4px;
}

.pipeline-step-stat i {
  font-size: 12px;
}

/* Add Step Modal Options */
.pipeline-step-options {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 12px;
  margin-top: 16px;
}

.pipeline-step-option {
  padding: 16px;
  background: var(--bg-tertiary);
  border: 1px solid var(--border-primary);
  border-radius: var(--radius-md);
  cursor: pointer;
  transition: all var(--transition-fast);
  text-align: center;
}

.pipeline-step-option:hover {
  border-color: var(--primary-400);
  background: var(--bg-hover);
}

.pipeline-step-option i {
  font-size: 24px;
  color: var(--primary-500);
  margin-bottom: 8px;
}

.pipeline-step-option-name {
  font-size: 13px;
  font-weight: 600;
  color: var(--text-primary);
  margin-bottom: 4px;
}

.pipeline-step-option-desc {
  font-size: 11px;
  color: var(--text-muted);
}

/* Merge Strategy Selector */
.merge-strategy-grid {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 8px;
  margin-top: 8px;
}

.merge-strategy-item {
  padding: 8px 12px;
  background: var(--bg-tertiary);
  border: 1px solid var(--border-primary);
  border-radius: var(--radius-sm);
  cursor: pointer;
  transition: all var(--transition-fast);
}

.merge-strategy-item:hover,
.merge-strategy-item.selected {
  border-color: var(--primary-400);
  background: var(--primary-50);
}

.merge-strategy-item.selected {
  border-width: 2px;
}

/* Pipeline History Panel */
.pipeline-history {
  max-height: 300px;
  overflow-y: auto;
}

.pipeline-history-entry {
  padding: 12px;
  border-bottom: 1px solid var(--border-primary);
}

.pipeline-history-entry:last-child {
  border-bottom: none;
}

.pipeline-history-time {
  font-size: 11px;
  color: var(--text-muted);
  margin-bottom: 4px;
}

.pipeline-history-stats {
  display: flex;
  gap: 16px;
  font-size: 12px;
}

.pipeline-history-stat {
  display: flex;
  align-items: center;
  gap: 4px;
}

/* ===== Data Table ===== */
/*
 * TABLE RENDERING RULES - CSS Safeguards
 * These rules ensure consistent borders and layout regardless of data issues:
 *
 * 1. table-layout: fixed - Widths come from th, not content
 * 2. border-collapse: collapse - No double borders
 * 3. min-width on th - Prevents columns from disappearing
 * 4. Explicit borders on all cells - No missing lines
 * 5. Empty cells still get borders via ::before fallback
 */

.data-table-container {
  flex: 1;
  overflow: auto;
  position: relative;
  width: 100%;
  min-width: 0;
}

.data-table {
  min-width: 100%;
  border-collapse: collapse;
}

.data-table th,
.data-table td {
  height: var(--row-height);
  min-height: var(--row-height);
  max-height: var(--row-height);
  min-width: 80px; /* SAFEGUARD: Minimum width prevents invisible columns */
  padding: var(--cell-padding);
  border-bottom: 1px solid var(--border-primary);
  border-right: 1px solid var(--border-primary);
  text-align: left;
  vertical-align: middle;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  box-sizing: border-box;
}

/* SAFEGUARD: Ensure empty cells are visible and have proper borders */
.data-table td:empty::before {
  content: '\200B'; /* Zero-width space to maintain cell height */
  display: inline-block;
}

/* Table Header */
.data-table thead {
  position: sticky;
  top: 0;
  z-index: 10;
}

.data-table th {
  background: var(--bg-tertiary);
  font-weight: 500;
  font-size: 12px;
  color: var(--text-secondary);
  user-select: none;
}

.data-table th:hover {
  background: var(--bg-elevated);
}

.th-content {
  display: flex;
  align-items: center;
  gap: 6px;
}

.th-content i {
  font-size: 14px;
  color: var(--text-muted);
}

.th-content .field-name {
  flex: 1;
  overflow: hidden;
  text-overflow: ellipsis;
}

.th-resize-handle {
  position: absolute;
  right: 0;
  top: 0;
  bottom: 0;
  width: 8px;
  cursor: col-resize;
  background: transparent;
  z-index: 10;
}

.th-resize-handle:hover,
.th-resize-handle.resizing {
  background: var(--primary-500);
}

.th-dropdown {
  width: 20px;
  height: 20px;
  border: none;
  background: transparent;
  color: var(--text-muted);
  border-radius: var(--radius-sm);
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  opacity: 0;
  transition: var(--transition-fast);
}

.data-table th:hover .th-dropdown {
  opacity: 1;
}

.th-dropdown:hover {
  background: var(--bg-active);
  color: var(--text-primary);
}

/* Row Number Column */
.col-row-number {
  width: var(--row-number-width);
  min-width: var(--row-number-width);
  max-width: var(--row-number-width);
  text-align: center !important;
  color: var(--text-muted);
  font-size: 11px;
  background: var(--bg-tertiary);
  position: sticky;
  left: 0;
  z-index: 5;
}

.data-table th.col-row-number {
  z-index: 15;
}

.row-checkbox {
  width: 16px;
  height: 16px;
  cursor: pointer;
  accent-color: var(--primary-500);
}

/* Source/Provenance Column */
.col-source {
  width: 120px;
  min-width: 100px;
  max-width: 150px;
}

.col-source .th-content {
  gap: 6px;
}

.col-source .provenance-cell {
  display: flex;
  align-items: center;
  gap: 6px;
  font-size: 12px;
  height: 100%;
}

.col-source .provenance-icon {
  font-size: 12px;
  flex-shrink: 0;
}

.col-source .provenance-icon.given {
  color: var(--given-color);
}

.col-source .provenance-icon.derived {
  color: #f97316;
}

.col-source .provenance-icon.manual {
  color: var(--text-muted);
}

.col-source .provenance-source-name {
  color: var(--text-secondary);
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
  cursor: pointer;
  transition: color 0.15s ease;
}

.col-source .provenance-source-name:hover {
  color: var(--primary-500);
  text-decoration: underline;
}

/* Search result kbd style */
.search-result-kbd {
  font-size: 10px;
  padding: 2px 6px;
  background: var(--bg-tertiary);
  border: 1px solid var(--border-primary);
  border-radius: 3px;
  color: var(--text-muted);
  font-family: var(--font-mono);
  margin-left: auto;
}

/* Add Column Button */
.col-add {
  width: auto;
  min-width: 100px;
  text-align: center !important;
  cursor: pointer;
  border-left: 1px dashed var(--border-primary);
}

.col-add:hover {
  background: var(--primary-50);
  border-left-color: var(--primary-400);
}

.col-add:hover .add-column-content {
  color: var(--primary-500);
}

.add-column-content {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 6px;
  padding: 0 12px;
  color: var(--text-muted);
  transition: color 0.15s ease;
}

.add-column-content i {
  font-size: 16px;
}

.add-column-label {
  font-size: 12px;
  font-weight: 500;
  white-space: nowrap;
}

/* Table Body */
.data-table tbody tr {
  /* No transition - immediate feedback like spreadsheets */
}

.data-table tbody tr:hover {
  /* Minimal row hover - let cell selection be the focus */
}

.data-table tbody tr.selected {
  background: var(--primary-500);
}

.data-table tbody tr.selected td {
  background: transparent;
  color: white;
}

/* Cell Types */
.data-table td {
  font-size: 13px;
  color: var(--text-primary);
  cursor: default;
}

.data-table td.cell-editable {
  cursor: text;
}

.data-table td.cell-editable:hover {
  /* Subtle hover - no background change like spreadsheets */
}

.data-table td.cell-editing {
  padding: 0;
  background: var(--bg-primary);
  box-shadow: inset 0 0 0 2px var(--primary-500);
  position: relative;
  overflow: visible;
}

/* Editing hint tooltip */
.data-table td.cell-editing::after {
  content: "Enter to save â€¢ Esc to cancel";
  position: absolute;
  bottom: -24px;
  left: 0;
  padding: 3px 8px;
  font-size: 10px;
  color: var(--text-secondary);
  background: var(--bg-tertiary);
  border-radius: 4px;
  white-space: nowrap;
  z-index: 10;
  pointer-events: none;
  opacity: 0;
  animation: editHintFadeIn 0.3s ease-out 0.5s forwards;
}

@keyframes editHintFadeIn {
  from {
    opacity: 0;
    transform: translateY(-4px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.cell-input {
  width: 100%;
  height: var(--row-height);
  min-height: var(--row-height);
  max-height: var(--row-height);
  padding: var(--cell-padding);
  border: none;
  background: transparent;
  color: var(--text-primary);
  font-size: 13px;
  font-family: inherit;
  outline: none;
  box-sizing: border-box;
  resize: none;
  animation: cellInputFadeIn 0.1s ease-out;
}

@keyframes cellInputFadeIn {
  from {
    opacity: 0.7;
  }
  to {
    opacity: 1;
  }
}

/* Edit cancel animation */
.cell-edit-cancelled {
  animation: cellEditCancelled 0.2s ease-out;
}

@keyframes cellEditCancelled {
  0% {
    background: var(--warning-50);
  }
  100% {
    background: transparent;
  }
}

/* Edit saved animation */
.cell-edit-saved {
  animation: cellEditSaved 0.3s ease-out;
}

@keyframes cellEditSaved {
  0% {
    background: var(--success-50);
  }
  100% {
    background: transparent;
  }
}

/* Cell Value Display */
.cell-value {
  display: flex;
  align-items: center;
  gap: 4px;
  height: 100%;
  max-height: var(--row-height);
  overflow: hidden;
  box-sizing: border-box;
}

.cell-empty {
  color: var(--text-muted);
  font-style: italic;
  display: block;
  line-height: calc(var(--row-height) - 16px);
}

/* Number Field */
/* Target span inside td, not td itself - td needs display:table-cell for proper column layout */
.data-table td span.cell-number {
  font-family: var(--font-mono);
  text-align: right;
  display: block;
  line-height: calc(var(--row-height) - 16px);
}

/* Ensure NUMBER type td cells have right-aligned text */
.data-table td.cell-number {
  text-align: right;
}

/* Checkbox Field */
/* Target div inside td, not td itself - td needs display:table-cell for proper column layout */
.data-table td div.cell-checkbox {
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  height: 100%;
  width: 100%;
}

.cell-checkbox i {
  font-size: 18px;
  transition: color 0.1s ease, transform 0.1s ease;
}

.cell-checkbox:hover i {
  transform: scale(1.1);
}

.cell-checkbox:active i {
  transform: scale(0.95);
}

.cell-checkbox .checked {
  color: var(--success-500);
}

.cell-checkbox .unchecked {
  color: var(--text-muted);
}

/* Select Field */
/* Target div wrapper inside td (for MULTI_SELECT), not td itself - td needs display:table-cell for proper column layout */
.data-table td div.cell-select {
  display: flex;
  flex-wrap: nowrap;
  gap: 4px;
  overflow: hidden;
  align-items: center;
  height: 100%;
  max-height: calc(var(--row-height) - 16px);
}

.select-tag {
  display: inline-flex;
  align-items: center;
  gap: 4px;
  padding: 2px 8px;
  border-radius: 12px;
  font-size: 12px;
  font-weight: 500;
  flex-shrink: 0;
  white-space: nowrap;
  max-height: 20px;
  line-height: 1;
}

.select-tag.color-blue { background: #dbeafe; color: #1e40af; }
.select-tag.color-green { background: #dcfce7; color: #166534; }
.select-tag.color-yellow { background: #fef9c3; color: #854d0e; }
.select-tag.color-red { background: #fee2e2; color: #991b1b; }
.select-tag.color-purple { background: #f3e8ff; color: #6b21a8; }
.select-tag.color-pink { background: #fce7f3; color: #9d174d; }
.select-tag.color-orange { background: #ffedd5; color: #9a3412; }
.select-tag.color-gray { background: #e5e7eb; color: #1f2937; }

/* Select Field Modal */
.select-modal-overlay {
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.4);
  backdrop-filter: blur(2px);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 1000;
  animation: selectModalFadeIn 0.15s ease-out;
}

@keyframes selectModalFadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}

.select-modal {
  background: var(--bg-primary);
  border: 1px solid var(--border-color);
  border-radius: var(--radius-lg);
  width: 320px;
  max-width: 90vw;
  max-height: 400px;
  display: flex;
  flex-direction: column;
  box-shadow: var(--shadow-xl);
  animation: selectModalSlideIn 0.15s ease-out;
}

@keyframes selectModalSlideIn {
  from {
    opacity: 0;
    transform: scale(0.95) translateY(-10px);
  }
  to {
    opacity: 1;
    transform: scale(1) translateY(0);
  }
}

.select-modal-header {
  padding: 12px;
  border-bottom: 1px solid var(--border-color);
}

.select-modal-search {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 8px 12px;
  background: var(--bg-secondary);
  border: 1px solid var(--border-color);
  border-radius: var(--radius-md);
}

.select-modal-search i {
  color: var(--text-muted);
  font-size: 14px;
}

.select-modal-input {
  flex: 1;
  border: none;
  background: transparent;
  color: var(--text-primary);
  font-size: 13px;
  outline: none;
}

.select-modal-input::placeholder {
  color: var(--text-muted);
}

.select-modal-options {
  overflow-y: auto;
  max-height: 320px;
  padding: 6px;
}

.select-modal-option {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 10px 12px;
  border-radius: var(--radius-md);
  cursor: pointer;
  transition: var(--transition-fast);
}

.select-modal-option:hover {
  background: var(--bg-tertiary);
}

.select-modal-option.selected {
  background: var(--primary-50);
}

.select-modal-option.select-modal-clear {
  color: var(--text-secondary);
  border-bottom: 1px solid var(--border-color);
  border-radius: 0;
  margin-bottom: 4px;
}

.select-modal-option.select-modal-clear:hover {
  background: var(--bg-tertiary);
}

.select-modal-option.select-modal-clear .select-modal-check {
  color: var(--text-muted);
}

.select-modal-check {
  width: 18px;
  height: 18px;
  display: flex;
  align-items: center;
  justify-content: center;
  color: var(--primary-500);
  font-size: 14px;
}

.select-modal-label {
  font-size: 13px;
  color: var(--text-secondary);
}

.select-modal-empty {
  padding: 24px;
  text-align: center;
  color: var(--text-muted);
  font-size: 13px;
}

/* Date Field */
/* Target span inside td, not td itself - td needs display:table-cell for proper column layout */
.data-table td span.cell-date {
  color: var(--text-secondary);
  display: block;
  line-height: calc(var(--row-height) - 16px);
}

/* Long Text Field - Expandable */
.cell-longtext-wrapper {
  display: flex;
  align-items: center;
  gap: 6px;
  width: 100%;
  height: 100%;
  position: relative;
}

.cell-longtext-content {
  flex: 1;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
  line-height: calc(var(--row-height) - 16px);
}

.cell-expand-btn {
  flex-shrink: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  width: 22px;
  height: 22px;
  padding: 0;
  border: none;
  background: var(--bg-tertiary);
  border-radius: var(--radius-sm);
  color: var(--text-muted);
  cursor: pointer;
  opacity: 0;
  transition: var(--transition-fast);
}

.cell-longtext-wrapper:hover .cell-expand-btn {
  opacity: 1;
}

.cell-expand-btn:hover {
  background: var(--primary-100);
  color: var(--primary-500);
}

.cell-expand-btn:active {
  transform: scale(0.95);
}

.cell-expand-btn i {
  font-size: 14px;
}

/* Long Text Modal Content */
.longtext-modal-content {
  padding: 8px 0;
}

.longtext-modal-text {
  font-size: 14px;
  line-height: 1.6;
  color: var(--text-primary);
  white-space: pre-wrap;
  word-wrap: break-word;
  max-height: 60vh;
  overflow-y: auto;
  padding: 16px;
  background: var(--bg-secondary);
  border-radius: var(--radius-md);
  border: 1px solid var(--border-light);
}

/* Source Long Text Modal - Read-only notice */
.source-longtext-modal .source-longtext-modal-notice {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 8px 12px;
  background: var(--bg-tertiary);
  border-radius: var(--radius-sm);
  font-size: 12px;
  color: var(--text-secondary);
  margin-bottom: 12px;
}

.source-longtext-modal .source-longtext-modal-notice i {
  font-size: 14px;
  color: var(--text-tertiary);
}

/* Source Cell Long Text Wrapper and Expand Button */
.source-cell-longtext-wrapper {
  display: flex;
  align-items: center;
  gap: 4px;
  max-width: 100%;
  cursor: pointer;
}

.source-cell-longtext-content {
  flex: 1;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.source-cell-expand-btn {
  flex-shrink: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  width: 20px;
  height: 20px;
  padding: 0;
  border: none;
  background: var(--bg-tertiary);
  border-radius: var(--radius-sm);
  color: var(--text-tertiary);
  cursor: pointer;
  opacity: 0;
  transition: var(--transition-fast);
}

.source-cell:hover .source-cell-expand-btn,
.source-cell-longtext-wrapper:hover .source-cell-expand-btn {
  opacity: 1;
}

.source-cell-expand-btn:hover {
  background: var(--primary-100);
  color: var(--primary-500);
}

.source-cell-expand-btn:active {
  transform: scale(0.95);
}

.source-cell-expand-btn i {
  font-size: 12px;
}

/* Link Field */
/* Target div wrapper inside td, not td itself - td needs display:table-cell for proper column layout */
.data-table td div.cell-link {
  display: flex;
  gap: 4px;
  flex-wrap: nowrap;
  overflow: hidden;
  align-items: center;
  height: 100%;
  max-height: calc(var(--row-height) - 16px);
}

.link-chip {
  display: inline-flex;
  align-items: center;
  gap: 4px;
  padding: 2px 8px;
  background: var(--bg-tertiary);
  border-radius: var(--radius-sm);
  font-size: 12px;
  color: var(--primary-500);
  cursor: pointer;
  transition: var(--transition-fast);
  flex-shrink: 0;
  white-space: nowrap;
  max-height: 20px;
  line-height: 1;
}

.link-chip:hover {
  background: var(--primary-100);
}

.link-chip i {
  font-size: 12px;
}

/* Attachment Chip */
.attachment-chip {
  display: inline-flex;
  align-items: center;
  gap: 4px;
  padding: 2px 8px;
  background: var(--bg-tertiary);
  border-radius: var(--radius-sm);
  font-size: 12px;
  color: var(--text-secondary);
  cursor: pointer;
  transition: var(--transition-fast);
}

.attachment-chip:hover {
  background: var(--bg-hover);
}

.attachment-chip i {
  font-size: 12px;
  color: var(--text-muted);
}

/* Link Dropdown Editor */
.link-dropdown {
  position: absolute;
  top: 100%;
  left: 0;
  min-width: 280px;
  max-width: 400px;
  max-height: 320px;
  background: var(--bg-primary);
  border: 1px solid var(--border-color);
  border-radius: var(--radius-md);
  box-shadow: var(--shadow-lg);
  z-index: 100;
  display: flex;
  flex-direction: column;
}

.link-dropdown-header {
  padding: 8px 12px;
  border-bottom: 1px solid var(--border-color);
  background: var(--bg-secondary);
}

.link-dropdown-title {
  font-size: 12px;
  font-weight: 500;
  color: var(--text-muted);
}

.link-dropdown-search {
  padding: 8px;
  border-bottom: 1px solid var(--border-color);
}

.link-search-input {
  width: 100%;
  padding: 6px 10px;
  border: 1px solid var(--border-color);
  border-radius: var(--radius-sm);
  font-size: 13px;
  outline: none;
}

.link-search-input:focus {
  border-color: var(--primary-500);
}

.link-dropdown-options {
  overflow-y: auto;
  max-height: 220px;
  padding: 4px;
}

.link-option {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 8px 10px;
  border-radius: var(--radius-sm);
  cursor: pointer;
  transition: var(--transition-fast);
}

.link-option:hover {
  background: var(--bg-tertiary);
}

.link-option.selected {
  background: var(--primary-50);
}

.link-option-check {
  width: 16px;
  height: 16px;
  display: flex;
  align-items: center;
  justify-content: center;
  color: var(--primary-500);
}

.link-option-name {
  font-size: 13px;
  color: var(--text-primary);
}

.link-option-empty {
  padding: 16px;
  text-align: center;
  color: var(--text-muted);
  font-size: 13px;
}

.link-editor-error {
  padding: 8px;
  color: var(--danger-500);
  font-size: 12px;
}

/* Edge Data Indicator */
.edge-indicator {
  margin-left: 4px;
  font-size: 10px;
  color: var(--primary-400);
}

.link-chip.has-edge-data {
  background: var(--primary-50);
  border: 1px solid var(--primary-200);
}

.link-chip.has-edge-data:hover {
  background: var(--primary-100);
}

/* Edge Badge in Link Dropdown */
.edge-badge {
  margin-left: 6px;
  color: var(--primary-500);
  font-size: 12px;
}

/* Edge Button in Link Options */
.link-option-edge {
  margin-left: auto;
  padding: 4px 6px;
  border-radius: var(--radius-sm);
  color: var(--text-muted);
  cursor: pointer;
  transition: var(--transition-fast);
}

.link-option-edge:hover {
  background: var(--primary-100);
  color: var(--primary-500);
}

.link-option-edge.has-data {
  color: var(--primary-500);
}

.link-option-edge.has-data::after {
  content: '';
  display: inline-block;
  width: 4px;
  height: 4px;
  background: var(--primary-500);
  border-radius: 50%;
  margin-left: 2px;
  vertical-align: middle;
}

/* Edge Lens Panel */
.edge-lens-panel {
  padding: 0;
}

.edge-lens-header {
  margin-bottom: 16px;
}

.edge-lens-connection {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 12px;
  background: var(--bg-secondary);
  border-radius: var(--radius-md);
  border: 1px solid var(--border-color);
}

.edge-lens-node {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 6px 10px;
  background: var(--bg-primary);
  border-radius: var(--radius-sm);
  font-size: 13px;
  color: var(--text-primary);
  cursor: pointer;
  transition: var(--transition-fast);
}

.edge-lens-node:hover {
  background: var(--primary-50);
}

.edge-lens-node i {
  font-size: 10px;
}

.edge-lens-arrow {
  display: flex;
  flex-direction: column;
  align-items: center;
  color: var(--text-muted);
  flex-shrink: 0;
}

.edge-lens-arrow i {
  font-size: 16px;
}

.edge-lens-field-name {
  font-size: 10px;
  color: var(--text-muted);
  max-width: 80px;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.edge-lens-divider {
  height: 1px;
  background: var(--border-color);
  margin: 16px 0;
}

.edge-lens-fields {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.edge-lens-section-title {
  display: flex;
  align-items: center;
  gap: 6px;
  font-size: 12px;
  font-weight: 500;
  color: var(--text-muted);
  text-transform: uppercase;
  letter-spacing: 0.5px;
  margin-bottom: 4px;
}

.edge-lens-section-title i {
  font-size: 14px;
}

.edge-lens-empty {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 16px;
  background: var(--bg-secondary);
  border-radius: var(--radius-sm);
  font-size: 12px;
  color: var(--text-muted);
}

.edge-lens-field-group {
  display: flex;
  flex-direction: column;
  gap: 4px;
}

.edge-lens-field-label {
  display: flex;
  align-items: center;
  gap: 6px;
  font-size: 11px;
  font-weight: 500;
  color: var(--text-muted);
}

.edge-lens-field-label i {
  font-size: 12px;
  color: var(--text-muted);
}

.edge-lens-field-value {
  padding: 8px 10px;
  background: var(--bg-secondary);
  border: 1px solid var(--border-color);
  border-radius: var(--radius-sm);
  font-size: 13px;
  color: var(--text-primary);
  min-height: 36px;
  display: flex;
  align-items: center;
}

.edge-lens-field-value.editable {
  cursor: pointer;
  transition: var(--transition-fast);
}

.edge-lens-field-value.editable:hover {
  border-color: var(--primary-300);
  background: var(--primary-50);
}

.edge-lens-field-value.editing {
  padding: 0;
  background: var(--bg-primary);
}

.edge-lens-input {
  width: 100%;
  padding: 8px 10px;
  border: none;
  border-radius: var(--radius-sm);
  font-size: 13px;
  outline: none;
  background: transparent;
}

.edge-lens-input:focus {
  box-shadow: 0 0 0 2px var(--primary-200);
}

/* Edge Lens Select Dropdown */
.edge-lens-select-dropdown {
  position: absolute;
  top: 100%;
  left: 0;
  right: 0;
  background: var(--bg-primary);
  border: 1px solid var(--border-color);
  border-radius: var(--radius-sm);
  box-shadow: var(--shadow-md);
  z-index: 100;
  max-height: 200px;
  overflow-y: auto;
}

.edge-lens-select-option {
  padding: 8px 10px;
  cursor: pointer;
  transition: var(--transition-fast);
}

.edge-lens-select-option:hover {
  background: var(--bg-tertiary);
}

.edge-lens-select-option.selected {
  background: var(--primary-50);
}

/* Graph Edge with Data */
.cy-edge.has-edge-data {
  width: 3px;
}

/* Edge Field Configuration UI */
.edge-field-item {
  display: flex;
  align-items: center;
  gap: 8px;
}

.edge-field-item .edge-field-name {
  flex: 1;
  padding: 6px 10px;
  border: 1px solid var(--border-color);
  border-radius: var(--radius-sm);
  font-size: 13px;
}

.edge-field-item .edge-field-type {
  width: 100px;
  padding: 6px 8px;
  border: 1px solid var(--border-color);
  border-radius: var(--radius-sm);
  font-size: 12px;
  background: var(--bg-primary);
}

.edge-field-item .edge-field-remove {
  padding: 4px 6px;
  color: var(--text-muted);
}

.edge-field-item .edge-field-remove:hover {
  color: var(--danger-500);
  background: var(--danger-50);
}

/* Multi-Select Dropdown Editor */
.multiselect-dropdown {
  position: absolute;
  top: 100%;
  left: 0;
  min-width: 240px;
  max-width: 360px;
  max-height: 320px;
  background: var(--bg-primary);
  border: 1px solid var(--border-color);
  border-radius: var(--radius-md);
  box-shadow: var(--shadow-lg);
  z-index: 100;
  display: flex;
  flex-direction: column;
}

.multiselect-dropdown-search {
  padding: 8px;
  border-bottom: 1px solid var(--border-color);
}

.multiselect-search-input {
  width: 100%;
  padding: 6px 10px;
  border: 1px solid var(--border-color);
  border-radius: var(--radius-sm);
  font-size: 13px;
  outline: none;
  background: var(--bg-primary);
  color: var(--text-primary);
}

.multiselect-search-input:focus {
  border-color: var(--primary-500);
}

.multiselect-dropdown-options {
  overflow-y: auto;
  max-height: 200px;
  padding: 4px;
}

.multiselect-option {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 8px 10px;
  border-radius: var(--radius-sm);
  cursor: pointer;
  transition: var(--transition-fast);
}

.multiselect-option:hover {
  background: var(--bg-tertiary);
}

.multiselect-option.selected {
  background: var(--primary-50);
}

.multiselect-option-check {
  width: 16px;
  height: 16px;
  display: flex;
  align-items: center;
  justify-content: center;
  color: var(--primary-500);
}

.multiselect-option-empty {
  padding: 16px;
  text-align: center;
  color: var(--text-muted);
  font-size: 13px;
}

.multiselect-dropdown-footer {
  padding: 8px;
  border-top: 1px solid var(--border-color);
  display: flex;
  justify-content: flex-end;
}

.multiselect-done-btn {
  padding: 6px 12px;
  background: var(--primary-500);
  color: white;
  border: none;
  border-radius: var(--radius-sm);
  font-size: 12px;
  font-weight: 500;
  cursor: pointer;
  transition: var(--transition-fast);
}

.multiselect-done-btn:hover {
  background: var(--primary-600);
}

/* Select Dropdown Editor (single select in grid) */
.select-dropdown {
  position: absolute;
  top: 100%;
  left: 0;
  min-width: 180px;
  max-width: 300px;
  max-height: 280px;
  background: var(--bg-primary);
  border: 1px solid var(--border-color);
  border-radius: var(--radius-md);
  box-shadow: var(--shadow-lg);
  z-index: 100;
  overflow-y: auto;
  padding: 4px;
}

.select-option {
  display: flex;
  align-items: center;
  padding: 8px 10px;
  border-radius: var(--radius-sm);
  cursor: pointer;
  transition: var(--transition-fast);
}

.select-option:hover {
  background: var(--bg-tertiary);
}

.select-option.selected {
  background: var(--primary-50);
}

/* URL Field */
/* Target span inside td, not td itself - td needs display:table-cell for proper column layout */
.data-table td span.cell-url {
  display: block;
  line-height: calc(var(--row-height) - 16px);
  overflow: hidden;
  text-overflow: ellipsis;
}

.cell-url a {
  color: var(--primary-500);
  text-decoration: none;
}

.cell-url a:hover {
  text-decoration: underline;
}

/* Attachment Field */
/* Target div wrapper inside td, not td itself - td needs display:table-cell for proper column layout */
.data-table td div.cell-attachment {
  display: flex;
  gap: 4px;
  flex-wrap: nowrap;
  overflow: hidden;
  align-items: center;
  height: 100%;
}

.attachment-preview {
  width: 24px;
  height: 24px;
  border-radius: var(--radius-sm);
  background: var(--bg-tertiary);
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
}

.attachment-preview i {
  font-size: 12px;
  color: var(--text-muted);
}

.attachment-preview img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  border-radius: var(--radius-sm);
}

/* Formula Field */
.cell-formula {
  font-family: var(--font-mono);
  color: var(--field-formula);
}

/* ===== Nested Data Display ===== */

/* Container for nested tables */
.nested-table-container {
  position: relative;
  max-width: 100%;
  overflow: hidden;
}

.nested-table {
  width: 100%;
  border-collapse: collapse;
  font-size: 11px;
  background: var(--bg-tertiary);
  border-radius: var(--radius-sm);
  overflow: hidden;
}

.nested-table th,
.nested-table td {
  padding: 4px 8px;
  text-align: left;
  border-bottom: 1px solid var(--border-secondary);
  border-right: 1px solid var(--border-secondary); /* TABLE RULE 4: Consistent borders */
  min-width: 50px; /* Smaller min-width for nested tables */
  max-width: 150px;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.nested-table th:last-child,
.nested-table td:last-child {
  border-right: none; /* No right border on last cell */
}

.nested-table th {
  background: var(--bg-quaternary);
  font-weight: 500;
  color: var(--text-secondary);
  font-size: 10px;
  text-transform: uppercase;
  letter-spacing: 0.02em;
}

.nested-table tbody tr:last-child td {
  border-bottom: none;
}

.nested-table tbody tr:hover {
  background: var(--bg-hover);
}

.nested-more-col,
.nested-more-row td {
  color: var(--text-muted);
  font-style: italic;
  text-align: center;
}

/* Nested object display */
.nested-object-container {
  position: relative;
}

.nested-object-grid {
  display: flex;
  flex-direction: column;
  gap: 2px;
  font-size: 11px;
}

.nested-object-row {
  display: flex;
  gap: 6px;
  align-items: baseline;
}

.nested-object-inline {
  font-size: 12px;
}

.nested-kv {
  display: inline-flex;
  gap: 4px;
  margin-right: 8px;
}

.nested-key {
  color: var(--text-muted);
  font-weight: 500;
  font-size: 10px;
}

.nested-val {
  color: var(--text-primary);
}

.nested-object-more {
  color: var(--text-muted);
  font-size: 10px;
  font-style: italic;
  padding-top: 2px;
}

/* Array badges for primitive arrays */
.nested-array-badges {
  display: flex;
  flex-wrap: wrap;
  gap: 4px;
}

.nested-badge {
  display: inline-block;
  padding: 2px 6px;
  background: var(--bg-tertiary);
  border: 1px solid var(--border-secondary);
  border-radius: var(--radius-sm);
  font-size: 11px;
  color: var(--text-secondary);
  max-width: 120px;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.nested-more {
  background: transparent;
  color: var(--text-muted);
  font-style: italic;
  border-style: dashed;
}

/* Expand button for full view */
.nested-expand-btn {
  position: absolute;
  top: 2px;
  right: 2px;
  width: 20px;
  height: 20px;
  padding: 0;
  border: none;
  background: var(--bg-secondary);
  border-radius: var(--radius-sm);
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  opacity: 0;
  transition: opacity 0.15s, background 0.15s;
  z-index: 5;
}

.nested-table-container:hover .nested-expand-btn,
.nested-object-container:hover .nested-expand-btn {
  opacity: 1;
}

.nested-expand-btn:hover {
  background: var(--bg-hover);
}

.nested-expand-btn i {
  font-size: 12px;
  color: var(--text-secondary);
}

/* JSON preview for deeply nested or complex data */
.nested-json-preview {
  font-family: var(--font-mono);
  font-size: 10px;
  color: var(--text-muted);
  background: var(--bg-tertiary);
  padding: 2px 4px;
  border-radius: var(--radius-sm);
  max-width: 200px;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
  display: inline-block;
}

/* Modal view for full nested data */
.nested-data-modal {
  max-height: 60vh;
  overflow: auto;
}

.nested-modal-table-wrapper {
  overflow-x: auto;
}

.nested-modal-table {
  width: 100%;
  border-collapse: collapse;
  font-size: 13px;
}

.nested-modal-table th,
.nested-modal-table td {
  padding: 8px 12px;
  text-align: left;
  border: 1px solid var(--border-secondary);
  vertical-align: top;
}

.nested-modal-table th {
  background: var(--bg-tertiary);
  font-weight: 600;
  color: var(--text-primary);
  position: sticky;
  top: 0;
}

.nested-modal-table tbody tr:hover {
  background: var(--bg-hover);
}

.nested-modal-object {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.nested-modal-field {
  display: flex;
  flex-direction: column;
  gap: 4px;
}

.nested-modal-key {
  font-weight: 600;
  color: var(--text-secondary);
  font-size: 12px;
  text-transform: uppercase;
  letter-spacing: 0.02em;
}

.nested-modal-value {
  color: var(--text-primary);
  padding-left: 12px;
  border-left: 2px solid var(--border-secondary);
}

/* Make cells with nested content expand more */
.data-table td:has(.nested-table-container),
.data-table td:has(.nested-object-container) {
  min-width: 250px;
  vertical-align: top;
  padding: 6px 8px;
}

/* ===== JSON Field Type Styles ===== */
.json-kv-wrapper {
  position: relative;
}

.json-kv-container {
  display: flex;
  flex-direction: column;
  gap: 4px;
}

.json-kv-row {
  display: flex;
  align-items: baseline;
  gap: 8px;
  line-height: 1.4;
}

.json-key {
  font-size: 11px;
  font-weight: 600;
  color: var(--accent-primary);
  flex-shrink: 0;
  min-width: 60px;
}

.json-key::after {
  content: ':';
}

.json-val {
  font-size: 12px;
  color: var(--text-primary);
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.json-kv-more {
  color: var(--text-muted);
  font-size: 10px;
  font-style: italic;
  padding-top: 2px;
}

/* JSON primitive type styling */
.json-bool {
  display: inline-flex;
  align-items: center;
  gap: 4px;
}

.json-bool i {
  font-size: 12px;
}

.json-bool i.ph-check-circle {
  color: var(--color-green);
}

.json-bool i.ph-x-circle {
  color: var(--color-red);
}

.json-number {
  font-family: var(--font-mono);
  color: var(--color-blue);
}

.json-string {
  color: var(--text-primary);
}

.json-null,
.json-undefined {
  color: var(--text-muted);
  font-style: italic;
}

.json-array,
.json-object {
  font-family: var(--font-mono);
  color: var(--text-secondary);
  font-size: 10px;
  background: var(--bg-tertiary);
  padding: 1px 4px;
  border-radius: var(--radius-sm);
}

.json-array-preview {
  font-family: var(--font-mono);
  font-size: 11px;
  color: var(--text-secondary);
}

.json-empty {
  color: var(--text-muted);
}

/* Raw JSON display */
.cell-json-raw {
  font-family: var(--font-mono);
  font-size: 11px;
  color: var(--text-secondary);
  background: var(--bg-tertiary);
  padding: 2px 6px;
  border-radius: var(--radius-sm);
  display: inline-block;
  max-width: 100%;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

/* JSON Editor */
.json-editor-wrapper {
  position: relative;
  width: 100%;
  min-height: 80px;
}

.cell-json-editor {
  width: 100%;
  min-height: 80px;
  max-height: 200px;
  font-family: var(--font-mono);
  font-size: 12px;
  line-height: 1.4;
  padding: 8px;
  padding-right: 30px;
  resize: vertical;
  background: var(--bg-primary);
  border: 2px solid var(--accent-primary);
  border-radius: var(--radius-sm);
  color: var(--text-primary);
}

.cell-json-editor:focus {
  outline: none;
  box-shadow: 0 0 0 3px rgba(var(--accent-rgb), 0.15);
}

.json-validation-indicator {
  position: absolute;
  top: 8px;
  right: 8px;
  font-size: 14px;
  transition: color 0.15s;
}

.json-validation-indicator.valid {
  color: var(--color-green);
}

.json-validation-indicator.invalid {
  color: var(--color-red);
}

/* JSON field cells with content */
.data-table td:has(.json-kv-container),
.data-table td:has(.json-kv-wrapper) {
  min-width: 180px;
  vertical-align: top;
  padding: 6px 8px;
}

/* Show expand button on JSON cell hover */
.json-kv-wrapper:hover .nested-expand-btn {
  opacity: 1;
}

/* ===== JSON Table Editor ===== */
.json-editor-wrapper.json-editor-table-mode,
.json-editor-wrapper.json-editor-raw-mode {
  width: 100%;
  min-width: 320px;
  background: var(--bg-primary);
  border: 2px solid var(--accent-primary);
  border-radius: var(--radius-md);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
}

.json-editor-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 8px 12px;
  border-bottom: 1px solid var(--border-secondary);
  background: var(--bg-tertiary);
  border-radius: var(--radius-md) var(--radius-md) 0 0;
}

.json-editor-toggle-group {
  display: flex;
  gap: 4px;
  background: var(--bg-secondary);
  border-radius: var(--radius-sm);
  padding: 2px;
}

.json-editor-toggle {
  display: flex;
  align-items: center;
  gap: 4px;
  padding: 4px 10px;
  background: transparent;
  border: none;
  border-radius: var(--radius-sm);
  font-size: 12px;
  color: var(--text-secondary);
  cursor: pointer;
  transition: all 0.15s;
}

.json-editor-toggle:hover {
  color: var(--text-primary);
}

.json-editor-toggle.active {
  background: var(--accent-primary);
  color: white;
}

.json-editor-toggle i {
  font-size: 14px;
}

.json-editor-content {
  padding: 12px;
  max-height: 300px;
  overflow-y: auto;
}

.json-table-editor {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.json-table-rows {
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.json-table-row {
  display: flex;
  align-items: center;
  gap: 8px;
}

.json-row-key {
  flex: 0 0 120px;
  padding: 6px 10px;
  background: var(--bg-tertiary);
  border: 1px solid var(--border-secondary);
  border-radius: var(--radius-sm);
  font-size: 12px;
  font-weight: 500;
  color: var(--accent-primary);
}

.json-row-key:focus {
  outline: none;
  border-color: var(--accent-primary);
  background: var(--bg-primary);
}

.json-row-key::placeholder {
  color: var(--text-muted);
  font-weight: normal;
}

.json-row-value {
  flex: 1;
  padding: 6px 10px;
  background: var(--bg-secondary);
  border: 1px solid var(--border-secondary);
  border-radius: var(--radius-sm);
  font-size: 12px;
  color: var(--text-primary);
}

.json-row-value:focus {
  outline: none;
  border-color: var(--accent-primary);
  background: var(--bg-primary);
}

.json-row-value::placeholder {
  color: var(--text-muted);
}

.json-row-delete {
  flex: 0 0 28px;
  height: 28px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: transparent;
  border: none;
  border-radius: var(--radius-sm);
  color: var(--text-muted);
  cursor: pointer;
  transition: all 0.15s;
}

.json-row-delete:hover {
  background: var(--color-red-dim);
  color: var(--color-red);
}

.json-add-row {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 6px;
  padding: 8px 12px;
  background: transparent;
  border: 1px dashed var(--border-secondary);
  border-radius: var(--radius-sm);
  font-size: 12px;
  color: var(--text-muted);
  cursor: pointer;
  transition: all 0.15s;
  margin-top: 4px;
}

.json-add-row:hover {
  border-color: var(--accent-primary);
  color: var(--accent-primary);
  background: var(--bg-tertiary);
}

.json-raw-view {
  position: relative;
}

.json-raw-view.hidden,
.json-table-editor.hidden {
  display: none;
}

.json-editor-footer {
  display: flex;
  align-items: center;
  justify-content: flex-end;
  gap: 8px;
  padding: 8px 12px;
  border-top: 1px solid var(--border-secondary);
  background: var(--bg-tertiary);
  border-radius: 0 0 var(--radius-md) var(--radius-md);
}

.json-editor-save {
  display: flex;
  align-items: center;
  gap: 4px;
  padding: 6px 14px;
  background: var(--accent-primary);
  border: none;
  border-radius: var(--radius-sm);
  font-size: 12px;
  font-weight: 500;
  color: white;
  cursor: pointer;
  transition: all 0.15s;
}

.json-editor-save:hover {
  background: var(--accent-hover);
}

.json-editor-cancel {
  padding: 6px 14px;
  background: transparent;
  border: 1px solid var(--border-secondary);
  border-radius: var(--radius-sm);
  font-size: 12px;
  color: var(--text-secondary);
  cursor: pointer;
  transition: all 0.15s;
}

.json-editor-cancel:hover {
  background: var(--bg-secondary);
  color: var(--text-primary);
}

/* JSON cell with table editor open */
.data-table td:has(.json-editor-table-mode),
.data-table td:has(.json-editor-raw-mode) {
  overflow: visible;
  position: relative;
  z-index: 100;
}

.json-editor-wrapper.json-editor-table-mode .cell-json-editor,
.json-editor-wrapper.json-editor-raw-mode .cell-json-editor {
  width: 100%;
  min-height: 100px;
  max-height: 200px;
  padding-right: 10px;
}

/* Add Row */
.add-row-cell {
  border-bottom: none;
  color: var(--text-muted);
  cursor: pointer;
}

.add-row-cell:hover {
  background: var(--bg-hover);
  color: var(--text-primary);
}

.add-row-content {
  display: flex;
  align-items: center;
  gap: 6px;
}

.add-row-content i {
  font-size: 14px;
}

/* ===== Card View ===== */
.card-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
  gap: 16px;
  padding: 16px;
  flex: 1;
  overflow: auto;
  align-content: start;
}

.record-card {
  background: var(--bg-secondary);
  border: 1px solid var(--border-primary);
  border-radius: var(--radius-lg);
  padding: 16px;
  cursor: pointer;
  transition: var(--transition-fast);
}

.record-card:hover {
  border-color: var(--border-secondary);
  box-shadow: var(--shadow-md);
}

.record-card.selected {
  border-color: var(--primary-500);
  box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.15);
}

.card-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 12px;
}

.card-title {
  font-size: 15px;
  font-weight: 600;
  color: var(--text-primary);
}

.card-menu {
  width: 24px;
  height: 24px;
  border: none;
  background: transparent;
  color: var(--text-muted);
  border-radius: var(--radius-sm);
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  opacity: 0;
  transition: var(--transition-fast);
}

.record-card:hover .card-menu {
  opacity: 1;
}

.card-menu:hover {
  background: var(--bg-hover);
}

.card-body {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.card-field {
  display: flex;
  align-items: flex-start;
  gap: 8px;
}

.card-field-label {
  font-size: 11px;
  color: var(--text-muted);
  min-width: 80px;
}

.card-field-value {
  font-size: 13px;
  color: var(--text-primary);
  flex: 1;
}

/* ===== Kanban View ===== */
.kanban-container {
  display: flex;
  gap: 16px;
  padding: 16px;
  overflow-x: auto;
  flex: 1;
}

.kanban-column {
  min-width: 300px;
  width: 300px;
  background: var(--bg-secondary);
  border-radius: var(--radius-lg);
  display: flex;
  flex-direction: column;
  max-height: 100%;
}

.kanban-column-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 12px 16px;
  border-bottom: 1px solid var(--border-primary);
}

.kanban-column-title {
  display: flex;
  align-items: center;
  gap: 8px;
  font-weight: 600;
  font-size: 14px;
}

.kanban-column-count {
  font-size: 12px;
  color: var(--text-muted);
  font-weight: 400;
}

.kanban-column-body {
  flex: 1;
  padding: 12px;
  overflow-y: auto;
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.kanban-column-body.drag-over {
  background: rgba(59, 130, 246, 0.05);
}

.kanban-card {
  background: var(--bg-primary);
  border: 1px solid var(--border-primary);
  border-radius: var(--radius-md);
  padding: 12px;
  cursor: grab;
  transition: var(--transition-fast);
}

.kanban-card:hover {
  border-color: var(--border-secondary);
  box-shadow: var(--shadow-sm);
}

.kanban-card.dragging {
  opacity: 0.5;
  cursor: grabbing;
}

.kanban-card-title {
  font-weight: 500;
  margin-bottom: 8px;
}

.kanban-card-fields {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
}

.kanban-add-card {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 8px 12px;
  color: var(--text-muted);
  cursor: pointer;
  border-radius: var(--radius-md);
  transition: var(--transition-fast);
}

.kanban-add-card:hover {
  background: var(--bg-hover);
  color: var(--text-primary);
}

.kanban-column-edit {
  padding: 4px 8px;
  background: transparent;
  border: none;
  color: var(--text-muted);
  cursor: pointer;
  border-radius: var(--radius-sm);
  opacity: 0;
  transition: var(--transition-fast);
}

.kanban-column-header:hover .kanban-column-edit {
  opacity: 1;
}

.kanban-column-edit:hover {
  background: var(--bg-hover);
  color: var(--text-primary);
}

.kanban-add-column {
  min-width: 280px;
  display: flex;
  align-items: flex-start;
  padding: 12px;
}

.kanban-add-status-btn {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 12px 16px;
  background: var(--bg-tertiary);
  border: 2px dashed var(--border-secondary);
  border-radius: var(--radius-lg);
  color: var(--text-muted);
  cursor: pointer;
  transition: var(--transition-fast);
  width: 100%;
}

.kanban-add-status-btn:hover {
  background: var(--bg-hover);
  border-color: var(--primary-500);
  color: var(--text-primary);
}

/* Color Picker */
.color-picker {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
}

.color-option {
  width: 28px;
  height: 28px;
  border-radius: 50%;
  border: 2px solid transparent;
  cursor: pointer;
  transition: var(--transition-fast);
}

.color-option:hover {
  transform: scale(1.1);
}

.color-option.selected {
  border-color: var(--text-primary);
  box-shadow: 0 0 0 2px var(--bg-primary), 0 0 0 4px var(--text-primary);
}

.color-option.color-gray { background: var(--gray-500); }
.color-option.color-red { background: var(--danger-500); }
.color-option.color-orange { background: var(--warning-500); }
.color-option.color-yellow { background: #eab308; }
.color-option.color-green { background: var(--success-500); }
.color-option.color-blue { background: var(--primary-500); }
.color-option.color-purple { background: #8b5cf6; }
.color-option.color-pink { background: #ec4899; }

/* ===== Date Picker ===== */
.date-picker {
  background: var(--bg-secondary);
  border: 1px solid var(--border-primary);
  border-radius: var(--radius-lg);
  padding: 12px;
  width: 280px;
  box-shadow: var(--shadow-lg);
}

.dp-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 12px;
}

.dp-nav {
  width: 28px;
  height: 28px;
  border: none;
  background: transparent;
  border-radius: var(--radius-sm);
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  color: var(--text-secondary);
}

.dp-nav:hover {
  background: var(--bg-hover);
  color: var(--text-primary);
}

.dp-title {
  font-weight: 600;
  font-size: 14px;
  color: var(--text-primary);
}

.dp-weekdays {
  display: grid;
  grid-template-columns: repeat(7, 1fr);
  gap: 2px;
  margin-bottom: 8px;
}

.dp-weekday {
  text-align: center;
  font-size: 11px;
  color: var(--text-muted);
  padding: 4px;
}

.dp-days {
  display: grid;
  grid-template-columns: repeat(7, 1fr);
  gap: 2px;
}

.dp-day {
  text-align: center;
  padding: 8px;
  font-size: 13px;
  border-radius: var(--radius-sm);
  cursor: pointer;
  transition: var(--transition-fast);
}

.dp-day:not(.empty):hover {
  background: var(--bg-hover);
}

.dp-day.empty {
  cursor: default;
}

.dp-day.today {
  background: var(--primary-100);
  color: var(--primary-600);
  font-weight: 600;
}

.dp-day.selected {
  background: var(--primary-500);
  color: white;
}

.dp-time {
  display: flex;
  align-items: center;
  gap: 8px;
  margin-top: 12px;
  padding-top: 12px;
  border-top: 1px solid var(--border-primary);
}

.dp-time label {
  font-size: 12px;
  color: var(--text-secondary);
}

.dp-time-input {
  flex: 1;
  padding: 6px 8px;
  background: var(--bg-tertiary);
  border: 1px solid var(--border-primary);
  border-radius: var(--radius-sm);
  color: var(--text-primary);
  font-size: 13px;
}

.dp-footer {
  display: flex;
  gap: 8px;
  margin-top: 12px;
  padding-top: 12px;
  border-top: 1px solid var(--border-primary);
}

.dp-btn {
  flex: 1;
  padding: 8px;
  border: 1px solid var(--border-primary);
  background: var(--bg-tertiary);
  border-radius: var(--radius-sm);
  color: var(--text-secondary);
  font-size: 12px;
  cursor: pointer;
  transition: var(--transition-fast);
}

.dp-btn:hover {
  background: var(--bg-hover);
  color: var(--text-primary);
}

.dp-btn.dp-today {
  background: var(--primary-500);
  border-color: var(--primary-500);
  color: white;
}

.dp-btn.dp-today:hover {
  background: var(--primary-600);
}

.detail-field-value.date-picker-open {
  padding: 0;
  background: transparent;
  border: none;
  box-shadow: none;
}

/* ===== Calendar View ===== */
.calendar-container {
  flex: 1;
  padding: 16px;
  overflow: auto;
}

.calendar-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 16px;
}

.calendar-nav {
  display: flex;
  align-items: center;
  gap: 8px;
}

.calendar-nav-btn {
  width: 32px;
  height: 32px;
  border: 1px solid var(--border-primary);
  background: var(--bg-secondary);
  border-radius: var(--radius-md);
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  color: var(--text-secondary);
}

.calendar-nav-btn:hover {
  background: var(--bg-hover);
  color: var(--text-primary);
}

.calendar-title {
  font-size: 18px;
  font-weight: 600;
}

.calendar-grid {
  display: grid;
  grid-template-columns: repeat(7, 1fr);
  gap: 1px;
  background: var(--border-primary);
  border: 1px solid var(--border-primary);
  border-radius: var(--radius-lg);
  overflow: hidden;
}

.calendar-day-header {
  background: var(--bg-tertiary);
  padding: 8px;
  text-align: center;
  font-size: 12px;
  font-weight: 600;
  color: var(--text-muted);
}

.calendar-day {
  background: var(--bg-secondary);
  min-height: 100px;
  padding: 8px;
  cursor: pointer;
  transition: var(--transition-fast);
  overflow: hidden;
  min-width: 0;
}

.calendar-day:hover {
  background: var(--bg-hover);
}

.calendar-day-number {
  font-size: 13px;
  font-weight: 500;
  margin-bottom: 4px;
}

.calendar-day.other-month .calendar-day-number {
  color: var(--text-muted);
}

.calendar-day.today .calendar-day-number {
  background: var(--primary-500);
  color: white;
  width: 24px;
  height: 24px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
}

.calendar-event {
  font-size: 11px;
  padding: 2px 6px;
  background: var(--primary-100);
  color: var(--primary-700);
  border-radius: var(--radius-sm);
  margin-bottom: 2px;
  cursor: pointer;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
  max-width: 100%;
  box-sizing: border-box;
}

/* ===== Graph View ===== */
.graph-container {
  flex: 1;
  display: flex;
  flex-direction: column;
  position: relative;
  overflow: hidden;
}

.graph-toolbar {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 12px 16px;
  background: var(--bg-secondary);
  border-bottom: 1px solid var(--border-primary);
}

.graph-info {
  display: flex;
  align-items: center;
  gap: 8px;
  font-size: 13px;
  color: var(--text-secondary);
}

.graph-info i {
  font-size: 16px;
  color: var(--primary-500);
}

.graph-controls-inline {
  display: flex;
  gap: 4px;
}

.graph-canvas-wrapper {
  flex: 1;
  position: relative;
  overflow: hidden;
  background: var(--bg-primary);
  /* Cytoscape.js container needs explicit dimensions */
  min-height: 400px;
}

/* Cytoscape container styling */
#cy-workbench-container {
  width: 100%;
  height: 100%;
  background: var(--bg-primary);
}

/* Legacy SVG support (if needed) */
.graph-svg {
  width: 100%;
  height: 100%;
  transition: transform 0.2s ease;
  transform-origin: center;
}

.graph-node circle {
  transition: all 0.2s ease;
}

.graph-node:hover circle {
  fill: var(--primary-600);
  filter: drop-shadow(0 2px 8px rgba(59, 130, 246, 0.4));
}

.graph-edge {
  stroke-opacity: 0.6;
}

/* Cytoscape Legend Overlay */
.cy-legend {
  position: absolute;
  bottom: 12px;
  left: 12px;
  background: rgba(15, 20, 25, 0.9);
  border-radius: 6px;
  padding: 10px 14px;
  font-size: 11px;
  z-index: 10;
  pointer-events: none;
}

.graph-hint {
  position: absolute;
  bottom: 16px;
  left: 50%;
  transform: translateX(-50%);
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 10px 16px;
  background: var(--bg-tertiary);
  border: 1px solid var(--border-primary);
  border-radius: var(--radius-md);
  font-size: 13px;
  color: var(--text-secondary);
}

.graph-hint i {
  color: var(--primary-500);
}

/* Actionable graph hint with button */
.graph-hint-actionable {
  flex-direction: column;
  gap: 12px;
  padding: 16px 20px;
  max-width: 360px;
  text-align: center;
  pointer-events: auto;
}

.graph-hint-content {
  display: flex;
  align-items: flex-start;
  gap: 12px;
  text-align: left;
}

.graph-hint-content > i {
  font-size: 24px;
  color: var(--field-link);
  flex-shrink: 0;
  margin-top: 2px;
}

.graph-hint-text {
  display: flex;
  flex-direction: column;
  gap: 4px;
}

.graph-hint-text strong {
  font-weight: 600;
  color: var(--text-primary);
  font-size: 14px;
}

.graph-hint-text p {
  margin: 0;
  font-size: 12px;
  line-height: 1.4;
  color: var(--text-secondary);
}

.graph-hint-action {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 6px;
  width: 100%;
  padding: 8px 16px;
  background: var(--primary-500);
  color: white;
  border: none;
  border-radius: var(--radius-sm);
  font-size: 13px;
  font-weight: 500;
  cursor: pointer;
  transition: background 0.15s ease;
}

.graph-hint-action:hover {
  background: var(--primary-600);
}

.graph-hint-action i {
  color: white;
  font-size: 14px;
}

.graph-canvas {
  width: 100%;
  height: 100%;
}

.graph-controls {
  position: absolute;
  bottom: 16px;
  right: 16px;
  display: flex;
  flex-direction: column;
  gap: 4px;
  background: var(--bg-secondary);
  border: 1px solid var(--border-primary);
  border-radius: var(--radius-lg);
  padding: 4px;
  box-shadow: var(--shadow-md);
}

.graph-control-btn {
  width: 32px;
  height: 32px;
  border: none;
  background: transparent;
  border-radius: var(--radius-md);
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  color: var(--text-secondary);
}

.graph-control-btn:hover {
  background: var(--bg-hover);
  color: var(--text-primary);
}

/* Graph Control Groups */
.graph-control-group {
  display: flex;
  align-items: center;
  gap: 6px;
  margin-right: 8px;
}

.graph-control-label {
  font-size: 11px;
  color: var(--text-tertiary);
  font-weight: 500;
  text-transform: uppercase;
  letter-spacing: 0.3px;
}

.graph-select {
  padding: 4px 8px;
  font-size: 12px;
  border: 1px solid var(--border-primary);
  border-radius: var(--radius-sm);
  background: var(--bg-primary);
  color: var(--text-primary);
  cursor: pointer;
  min-width: 80px;
}

.graph-select:hover {
  border-color: var(--primary-500);
}

.graph-select:focus {
  outline: none;
  border-color: var(--primary-500);
  box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.2);
}

.graph-control-divider {
  width: 1px;
  height: 24px;
  background: var(--border-primary);
  margin: 0 8px;
}

/* Node label styles */
.node-label-outside {
  pointer-events: none;
  user-select: none;
}

.node-label-inside {
  pointer-events: none;
  user-select: none;
}

.graph-node:hover .node-circle {
  filter: drop-shadow(0 2px 12px rgba(59, 130, 246, 0.5));
  stroke-width: 3px;
}

/* ===== Modal ===== */
.modal-overlay {
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.5);
  backdrop-filter: blur(4px);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 1000;
  opacity: 0;
  visibility: hidden;
  transition: var(--transition-normal);
}

.modal-overlay.active {
  opacity: 1;
  visibility: visible;
}

.modal {
  background: var(--bg-secondary);
  border: 1px solid var(--border-primary);
  border-radius: var(--radius-xl);
  width: 90%;
  max-width: 720px;
  max-height: 90vh;
  display: flex;
  flex-direction: column;
  box-shadow: var(--shadow-xl);
  transform: scale(0.95) translateY(10px);
  transition: var(--transition-normal);
}

.modal-overlay.active .modal {
  transform: scale(1) translateY(0);
}

.modal-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 16px 20px;
  border-bottom: 1px solid var(--border-primary);
}

.modal-title {
  font-size: 16px;
  font-weight: 600;
}

.modal-close {
  width: 32px;
  height: 32px;
  border: none;
  background: transparent;
  color: var(--text-muted);
  border-radius: var(--radius-md);
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
}

.modal-close:hover {
  background: var(--bg-hover);
  color: var(--text-primary);
}

.modal-body {
  padding: 20px;
  overflow-y: auto;
  flex: 1;
}

.modal-footer {
  display: flex;
  justify-content: flex-end;
  gap: 8px;
  padding: 16px 20px;
  border-top: 1px solid var(--border-primary);
}

/* ===== Buttons ===== */
.btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 6px;
  padding: 8px 16px;
  border: 1px solid transparent;
  border-radius: var(--radius-md);
  font-size: 13px;
  font-weight: 500;
  cursor: pointer;
  transition: var(--transition-fast);
}

.btn-primary {
  background: var(--primary-500);
  color: white;
  border-color: var(--primary-500);
}

.btn-primary:hover {
  background: var(--primary-600);
  border-color: var(--primary-600);
}

.btn-secondary {
  background: transparent;
  color: var(--text-secondary);
  border-color: var(--border-primary);
}

.btn-secondary:hover {
  background: var(--bg-hover);
  color: var(--text-primary);
}

.btn-danger {
  background: var(--danger-500);
  color: white;
  border-color: var(--danger-500);
}

.btn-danger:hover {
  background: var(--danger-600);
  border-color: var(--danger-600);
}

.btn-ghost {
  background: transparent;
  color: var(--text-secondary);
}

.btn-ghost:hover {
  background: var(--bg-hover);
  color: var(--text-primary);
}

/* Button disabled states - accessible contrast */
.btn:disabled,
.btn[disabled],
button:disabled {
  opacity: 0.6;
  cursor: not-allowed;
  pointer-events: none;
}

.btn-primary:disabled,
.btn-primary[disabled] {
  background: var(--gray-500);
  border-color: var(--gray-500);
  color: var(--gray-300);
}

.btn-secondary:disabled,
.btn-secondary[disabled],
.btn-ghost:disabled,
.btn-ghost[disabled] {
  color: var(--text-disabled);
  border-color: var(--border-primary);
}

/* ===== Confirmation Dialog ===== */
.confirm-dialog-overlay {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(0, 0, 0, 0.6);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 10000;
  animation: fadeIn 0.15s ease-out;
}

.confirm-dialog {
  background: var(--bg-secondary);
  border: 1px solid var(--border-primary);
  border-radius: var(--radius-xl);
  box-shadow: var(--shadow-xl);
  width: 100%;
  max-width: 420px;
  animation: slideUp 0.2s ease-out;
}

@keyframes slideUp {
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.confirm-dialog-header {
  padding: 20px 24px 0;
}

.confirm-dialog-header h3 {
  margin: 0;
  font-size: 18px;
  font-weight: 600;
  color: var(--text-primary);
}

.confirm-dialog-body {
  padding: 16px 24px 24px;
}

.confirm-dialog-body p {
  margin: 0;
  font-size: 14px;
  line-height: 1.6;
  color: var(--text-secondary);
}

.confirm-dialog-footer {
  display: flex;
  justify-content: flex-end;
  gap: 12px;
  padding: 16px 24px;
  border-top: 1px solid var(--border-primary);
  background: var(--bg-tertiary);
  border-radius: 0 0 var(--radius-xl) var(--radius-xl);
}

.confirm-dialog-footer button {
  padding: 8px 16px;
  border-radius: var(--radius-md);
  font-size: 14px;
  font-weight: 500;
  cursor: pointer;
  transition: var(--transition-fast);
}

/* Delete button styling in sources table */
.sources-table-delete-btn:hover {
  color: var(--danger-500) !important;
}

/* ===== Form Elements ===== */
.form-group {
  margin-bottom: 16px;
}

.form-label {
  display: block;
  font-size: 12px;
  font-weight: 500;
  color: var(--text-secondary);
  margin-bottom: 6px;
}

.form-input,
.form-select,
.form-textarea {
  width: 100%;
  padding: 10px 12px;
  background: var(--bg-tertiary);
  border: 1px solid var(--border-primary);
  border-radius: var(--radius-md);
  color: var(--text-primary);
  font-size: 14px;
  transition: var(--transition-fast);
}

.form-input:focus,
.form-select:focus,
.form-textarea:focus {
  outline: none;
  border-color: var(--primary-500);
  box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.15);
}

.form-textarea {
  min-height: 100px;
  resize: vertical;
}

/* ===== Context Menu ===== */
.context-menu {
  position: fixed;
  background: var(--bg-secondary);
  border: 1px solid var(--border-primary);
  border-radius: var(--radius-lg);
  padding: 4px;
  min-width: 180px;
  box-shadow: var(--shadow-lg);
  z-index: 1000;
  display: none;
}

.context-menu.active {
  display: block;
}

.context-menu-item {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 8px 12px;
  border-radius: var(--radius-md);
  font-size: 13px;
  color: var(--text-primary);
  cursor: pointer;
  transition: var(--transition-fast);
}

.context-menu-item:hover {
  background: var(--bg-hover);
}

.context-menu-item i {
  font-size: 16px;
  color: var(--text-muted);
  width: 20px;
  text-align: center;
}

.context-menu-item.danger {
  color: var(--danger-500);
}

.context-menu-item.danger i {
  color: var(--danger-500);
}

.context-menu-item.warning {
  color: var(--warning-500);
}

.context-menu-item.warning i {
  color: var(--warning-500);
}

.context-menu-divider {
  height: 1px;
  background: var(--border-primary);
  margin: 4px 0;
}

/* ===== Field Type Picker ===== */
.field-type-picker {
  position: fixed;
  background: var(--bg-secondary);
  border: 1px solid var(--border-primary);
  border-radius: var(--radius-lg);
  padding: 8px;
  width: 240px;
  max-height: 400px;
  overflow-y: auto;
  box-shadow: var(--shadow-lg);
  z-index: 1000;
  display: none;
}

.field-type-picker.active {
  display: block;
}

.field-type-item {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 8px 12px;
  border-radius: var(--radius-md);
  cursor: pointer;
  transition: var(--transition-fast);
}

.field-type-item:hover {
  background: var(--bg-hover);
}

.field-type-item i {
  font-size: 16px;
  color: var(--text-muted);
  width: 20px;
  text-align: center;
}

.field-type-item span {
  font-size: 13px;
  color: var(--text-primary);
}

/* ===== Empty States ===== */
.empty-state {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 48px 24px;
  text-align: center;
}

.empty-state i {
  font-size: 48px;
  color: var(--text-muted);
  margin-bottom: 16px;
}

.empty-state h3 {
  font-size: 16px;
  font-weight: 600;
  color: var(--text-primary);
  margin-bottom: 8px;
}

.empty-state p {
  font-size: 14px;
  color: var(--text-muted);
  margin-bottom: 16px;
}

.empty-state-small {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 8px;
  padding: 24px;
  color: var(--text-muted);
  font-size: 13px;
}

.empty-state-small i {
  font-size: 24px;
}

/* ===== Filter/Sort Dropdowns ===== */
.filter-dropdown,
.sort-dropdown {
  position: fixed;
  background: var(--bg-secondary);
  border: 1px solid var(--border-primary);
  border-radius: var(--radius-lg);
  padding: 16px;
  min-width: 320px;
  box-shadow: var(--shadow-lg);
  z-index: 100;
  display: none;
}

.filter-dropdown.active,
.sort-dropdown.active {
  display: block;
}

.filter-row,
.sort-row {
  display: flex;
  gap: 8px;
  margin-bottom: 8px;
  align-items: center;
}

.filter-row select,
.sort-row select {
  flex: 1;
  padding: 8px 10px;
  background: var(--bg-tertiary);
  border: 1px solid var(--border-primary);
  border-radius: var(--radius-md);
  color: var(--text-primary);
  font-size: 13px;
}

.filter-row input {
  flex: 1;
}

.filter-remove,
.sort-remove {
  width: 28px;
  height: 28px;
  border: none;
  background: transparent;
  color: var(--text-muted);
  border-radius: var(--radius-sm);
  cursor: pointer;
}

.filter-remove:hover,
.sort-remove:hover {
  background: var(--bg-hover);
  color: var(--danger-500);
}

.add-filter-btn,
.add-sort-btn {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 8px 0;
  color: var(--primary-500);
  cursor: pointer;
  font-size: 13px;
}

.add-filter-btn:hover,
.add-sort-btn:hover {
  text-decoration: underline;
}

/* ===== Responsive ===== */
@media (max-width: 768px) {
  .sidebar {
    position: fixed;
    left: -100%;
    height: 100%;
    z-index: 200;
    transition: left var(--transition-normal);
  }

  .sidebar.mobile-open {
    left: 0;
  }

  .main-content {
    margin-left: 0;
  }

  .header-btn.mobile-menu {
    display: flex;
  }

  .btn-label {
    display: none;
  }

  .breadcrumb {
    display: none;
  }

  /* Mobile header improvements */
  .header {
    padding: 8px 12px;
  }

  .header-btn {
    min-width: 40px;
    min-height: 40px;
    padding: 8px;
  }

  .header-actions {
    gap: 4px;
  }

  .view-switcher {
    gap: 0;
    padding: 2px;
  }

  .view-switch-btn {
    min-width: 36px;
    min-height: 36px;
    padding: 6px;
  }

  /* Hide less important header elements on mobile */
  .header-divider,
  .sync-indicator,
  .header-right .header-btn:not(.mobile-menu):not(:first-child) {
    display: none;
  }

  .detail-panel {
    position: fixed;
    right: -100%;
    height: 100%;
    width: 100%;
    z-index: 200;
    transition: right var(--transition-normal);
  }

  .detail-panel.open {
    right: 0;
    width: 100%;
  }

  .card-grid {
    grid-template-columns: 1fr;
  }

  .kanban-container {
    padding: 8px;
    gap: 8px;
  }

  .kanban-column {
    min-width: 280px;
    width: 280px;
  }
}

/* ===== Mobile Panel Backdrop ===== */
.mobile-panel-backdrop {
  display: none;
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.5);
  z-index: 199;
  opacity: 0;
  transition: opacity var(--transition-normal);
  -webkit-backdrop-filter: blur(2px);
  backdrop-filter: blur(2px);
}

.mobile-panel-backdrop.active {
  opacity: 1;
}

@media (max-width: 768px) {
  .mobile-panel-backdrop {
    display: block;
    pointer-events: none;
  }

  .mobile-panel-backdrop.active {
    pointer-events: auto;
  }

  /* Fix sidebar mobile z-index */
  .sidebar {
    z-index: 201;
    width: var(--sidebar-width);
    max-width: 85vw;
  }

  .sidebar.collapsed {
    width: var(--sidebar-width);
    left: -100%;
  }

  .sidebar.collapsed.mobile-open {
    left: 0;
  }

  .sidebar.collapsed .logo-text,
  .sidebar.collapsed .nav-section-title,
  .sidebar.collapsed .nav-item span:not(.nav-item-icon),
  .sidebar.collapsed .sidebar-search,
  .sidebar.collapsed .nav-section-action {
    display: block;
  }

  /* Fix detail panel z-index and transition */
  .detail-panel {
    z-index: 201;
    width: 100% !important;
    max-width: 100vw;
    right: -100%;
    transition: right var(--transition-normal), transform var(--transition-normal);
  }

  .detail-panel.open {
    right: 0;
  }

  /* Mobile close button enhancement */
  .detail-panel-close {
    width: 36px;
    height: 36px;
    font-size: 20px;
  }

  .sidebar-collapse-btn {
    display: none;
  }
}

/* Smaller mobile devices */
@media (max-width: 480px) {
  .sidebar {
    width: 100%;
    max-width: 100vw;
  }

  .detail-panel-header {
    padding: 16px;
  }

  .detail-panel-header h3 {
    font-size: 16px;
  }

  .detail-panel-body {
    padding: 12px;
  }

  /* Make table scrollable with better touch targets */
  .data-table td,
  .data-table th {
    padding: 12px 8px;
    min-height: 48px;
  }

  /* Improve tab bar for mobile */
  .view-tabs {
    overflow-x: auto;
    -webkit-overflow-scrolling: touch;
    scrollbar-width: none;
  }

  .view-tabs::-webkit-scrollbar {
    display: none;
  }

  .view-tab {
    flex-shrink: 0;
    padding: 8px 12px;
  }
}

/* ===== Scrollbar ===== */
::-webkit-scrollbar {
  width: 12px;
  height: 12px;
}

::-webkit-scrollbar-track {
  background: var(--bg-secondary);
  border-radius: 6px;
}

::-webkit-scrollbar-thumb {
  background: var(--border-secondary);
  border-radius: 6px;
  border: 2px solid var(--bg-secondary);
}

::-webkit-scrollbar-thumb:hover {
  background: var(--text-muted);
}

/* ===== Selection ===== */
::selection {
  background: var(--primary-200);
  color: var(--primary-900);
}

/* ===== Focus Visible ===== */
:focus-visible {
  outline: 2px solid var(--primary-400);
  outline-offset: 2px;
}

/* Enhanced focus for buttons */
.btn:focus-visible,
button:focus-visible {
  outline: 2px solid var(--primary-400);
  outline-offset: 2px;
  box-shadow: 0 0 0 4px rgba(59, 130, 246, 0.3);
}

/* Focus ring for links and interactive elements */
a:focus-visible,
[role="button"]:focus-visible,
[tabindex]:focus-visible {
  outline: 2px solid var(--primary-400);
  outline-offset: 2px;
}

/* ===== Animations ===== */
@keyframes fadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}

@keyframes slideUp {
  from { transform: translateY(10px); opacity: 0; }
  to { transform: translateY(0); opacity: 1; }
}

@keyframes pulse {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.5; }
}

.animate-fade-in {
  animation: fadeIn var(--transition-normal);
}

.animate-slide-up {
  animation: slideUp var(--transition-normal);
}

.animate-pulse {
  animation: pulse 2s infinite;
}

/* ===== Principles Transparency Panel ===== */

.principles-panel {
  position: fixed;
  bottom: 20px;
  right: 20px;
  z-index: 1000;
  font-family: inherit;
}

.principles-toggle {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 10px 16px;
  background: var(--bg-secondary);
  border: 1px solid var(--border-primary);
  border-radius: 8px;
  color: var(--text-primary);
  cursor: pointer;
  font-size: 13px;
  font-weight: 500;
  transition: all var(--transition-fast);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
}

.principles-toggle:hover {
  background: var(--bg-tertiary);
  border-color: var(--border-secondary);
}

.principles-toggle.open {
  border-radius: 8px 8px 0 0;
  border-bottom: none;
}

.principles-toggle .toggle-status {
  margin-left: 4px;
}

.principles-toggle.compliant .toggle-status {
  color: var(--success-500);
}

.principles-toggle.violation .toggle-status {
  color: var(--danger-500);
}

.principles-toggle i {
  font-size: 16px;
}

.principles-panel-content {
  position: absolute;
  bottom: 100%;
  right: 0;
  width: 600px;
  max-height: 70vh;
  background: var(--bg-secondary);
  border: 1px solid var(--border-primary);
  border-radius: 12px 12px 0 0;
  box-shadow: 0 -8px 32px rgba(0, 0, 0, 0.4);
  display: flex;
  flex-direction: column;
  overflow: hidden;
}

.principles-panel-header {
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  padding: 16px 20px;
  border-bottom: 1px solid var(--border-primary);
  background: linear-gradient(135deg, var(--bg-tertiary), var(--bg-secondary));
}

.principles-panel-header-content {
  flex: 1;
}

.principles-panel-close {
  width: 32px;
  height: 32px;
  background: transparent;
  border: none;
  border-radius: var(--radius-sm);
  color: var(--text-muted);
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 18px;
  transition: all 0.15s ease;
  flex-shrink: 0;
}

.principles-panel-close:hover {
  background: var(--bg-hover);
  color: var(--text-primary);
}

.principles-panel-header h2 {
  display: flex;
  align-items: center;
  gap: 10px;
  font-size: 16px;
  font-weight: 600;
  color: var(--text-primary);
  margin-bottom: 4px;
}

.principles-panel-header h2 i {
  color: var(--primary-400);
}

.principles-subtitle {
  font-size: 12px;
  color: var(--text-muted);
  font-style: italic;
}

.principles-tabs {
  display: flex;
  gap: 2px;
  padding: 8px 12px;
  background: var(--bg-primary);
  border-bottom: 1px solid var(--border-primary);
}

.principles-tab {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 8px 14px;
  background: transparent;
  border: none;
  border-radius: 6px;
  color: var(--text-secondary);
  font-size: 12px;
  font-weight: 500;
  cursor: pointer;
  transition: all var(--transition-fast);
}

.principles-tab:hover {
  background: var(--bg-hover);
  color: var(--text-primary);
}

.principles-tab.active {
  background: var(--bg-tertiary);
  color: var(--text-primary);
}

.principles-tab i {
  font-size: 14px;
}

.principles-tab-content {
  flex: 1;
  overflow-y: auto;
  padding: 16px;
  max-height: 50vh;
}

.principles-panel-footer {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 10px 16px;
  background: var(--bg-primary);
  border-top: 1px solid var(--border-primary);
}

.principles-panel-footer .btn-sm {
  padding: 6px 12px;
  font-size: 12px;
  background: var(--bg-tertiary);
  border: 1px solid var(--border-secondary);
  border-radius: 6px;
  color: var(--text-primary);
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 6px;
}

.principles-panel-footer .btn-sm:hover {
  background: var(--bg-elevated);
}

.principles-panel-footer .last-check {
  font-size: 11px;
  color: var(--text-muted);
}

/* Principles Tab - Rule Cards */
.principles-part {
  margin-bottom: 20px;
}

.part-header {
  padding: 10px 14px;
  margin-bottom: 12px;
  background: var(--bg-primary);
  border-radius: 8px;
  border-left: 4px solid;
}

.part-number {
  font-size: 10px;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 1px;
  color: var(--text-muted);
}

.part-name {
  font-size: 14px;
  font-weight: 600;
  color: var(--text-primary);
  margin: 2px 0;
}

.part-subtitle {
  font-size: 11px;
  color: var(--text-secondary);
  font-style: italic;
}

.rules-grid {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 10px;
}

.rule-card {
  background: var(--bg-primary);
  border: 1px solid var(--border-primary);
  border-radius: 8px;
  padding: 12px;
  cursor: pointer;
  transition: all var(--transition-fast);
  position: relative;
  overflow: hidden;
}

.rule-card:hover {
  border-color: var(--border-secondary);
  transform: translateY(-2px);
}

.rule-card.passed {
  border-left: 3px solid var(--success-500);
}

.rule-card.failed {
  border-left: 3px solid var(--danger-500);
  background: rgba(239, 68, 68, 0.05);
}

.rule-card.touched {
  animation: ruleTouched 0.5s ease;
}

@keyframes ruleTouched {
  0%, 100% { box-shadow: 0 0 0 0 transparent; }
  50% { box-shadow: 0 0 12px 2px var(--primary-400); }
}

.rule-header {
  display: flex;
  align-items: center;
  gap: 8px;
  margin-bottom: 8px;
}

.rule-number {
  width: 22px;
  height: 22px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: var(--bg-tertiary);
  border-radius: 50%;
  font-size: 11px;
  font-weight: 700;
  color: var(--text-primary);
}

.rule-icon {
  color: var(--text-muted);
  font-size: 14px;
}

.rule-status {
  margin-left: auto;
  font-size: 14px;
}

.rule-card.passed .rule-status {
  color: var(--success-500);
}

.rule-card.failed .rule-status {
  color: var(--danger-500);
}

.rule-name {
  font-size: 12px;
  font-weight: 600;
  color: var(--text-primary);
  margin-bottom: 4px;
}

.rule-axiom {
  font-size: 10px;
  font-family: 'JetBrains Mono', monospace;
  color: var(--primary-400);
  margin-bottom: 6px;
  padding: 3px 6px;
  background: rgba(59, 130, 246, 0.1);
  border-radius: 4px;
  display: inline-block;
}

.rule-principle {
  font-size: 10px;
  color: var(--text-secondary);
  line-height: 1.4;
  display: none;
}

.rule-card.expanded .rule-principle {
  display: block;
}

.rule-footer {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-top: 8px;
  padding-top: 8px;
  border-top: 1px solid var(--border-primary);
}

.rule-violation-label {
  font-size: 9px;
  color: var(--text-muted);
}

.rule-violation-label strong {
  color: var(--warning-500);
}

.rule-touch-count {
  font-size: 10px;
  color: var(--text-muted);
  background: var(--bg-tertiary);
  padding: 2px 6px;
  border-radius: 10px;
}

.rule-violations {
  margin-top: 8px;
  padding: 8px;
  background: rgba(239, 68, 68, 0.1);
  border-radius: 6px;
  font-size: 10px;
}

.rule-violations strong {
  color: var(--danger-500);
  display: block;
  margin-bottom: 4px;
}

.violation-item {
  color: var(--text-secondary);
  padding: 2px 0;
}

/* Operations Tab */
.empty-operations,
.empty-provenance,
.empty-log {
  text-align: center;
  padding: 40px 20px;
  color: var(--text-muted);
}

.empty-operations i,
.empty-provenance i,
.empty-log i {
  font-size: 48px;
  margin-bottom: 12px;
  opacity: 0.5;
}

.empty-operations .hint,
.empty-provenance .hint,
.empty-log .hint {
  font-size: 11px;
  margin-top: 8px;
  color: var(--text-muted);
}

.operations-list {
  display: flex;
  flex-direction: column;
  gap: 10px;
}

.operation-item {
  background: var(--bg-primary);
  border: 1px solid var(--border-primary);
  border-radius: 8px;
  padding: 12px;
}

.operation-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 6px;
}

.operation-name {
  font-size: 13px;
  font-weight: 600;
  color: var(--text-primary);
}

.operation-time {
  font-size: 10px;
  color: var(--text-muted);
}

.operation-description {
  font-size: 11px;
  color: var(--text-secondary);
  margin-bottom: 10px;
}

.operation-rules {
  display: flex;
  flex-wrap: wrap;
  gap: 6px;
  align-items: center;
}

.rules-label {
  font-size: 10px;
  color: var(--text-muted);
  margin-right: 4px;
}

.rule-badge {
  font-size: 10px;
  padding: 3px 8px;
  border-radius: 12px;
  font-weight: 500;
}

.operation-explanations {
  margin-top: 10px;
  padding-top: 10px;
  border-top: 1px solid var(--border-primary);
}

.explanation-item {
  font-size: 10px;
  color: var(--text-secondary);
  padding: 3px 0;
}

.explanation-rule {
  font-weight: 600;
  color: var(--text-muted);
  margin-right: 6px;
}

/* Provenance Tab */
.provenance-intro {
  margin-bottom: 16px;
  padding: 12px;
  background: var(--bg-primary);
  border-radius: 8px;
  font-size: 12px;
  color: var(--text-secondary);
}

.provenance-intro strong {
  color: var(--primary-400);
}

.provenance-chains {
  display: flex;
  flex-direction: column;
  gap: 16px;
}

.provenance-chain {
  background: var(--bg-primary);
  border: 1px solid var(--border-primary);
  border-radius: 8px;
  padding: 14px;
}

.chain-meant,
.chain-given {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 8px 12px;
  border-radius: 6px;
}

.chain-meant {
  background: var(--meant-bg);
  border-left: 3px solid var(--meant-color);
}

.chain-given {
  background: var(--given-bg);
  border-left: 3px solid var(--given-color);
}

.event-type {
  font-size: 9px;
  font-weight: 700;
  text-transform: uppercase;
  padding: 2px 6px;
  border-radius: 4px;
}

.event-type.given {
  background: var(--given-color);
  color: white;
}

.event-type.meant {
  background: var(--meant-color);
  color: white;
}

.event-purpose,
.event-mode {
  font-size: 11px;
  color: var(--text-secondary);
}

.event-id {
  font-size: 10px;
  font-family: 'JetBrains Mono', monospace;
  color: var(--text-muted);
  margin-left: auto;
}

.chain-arrow {
  display: flex;
  flex-direction: column;
  align-items: center;
  padding: 8px 0;
  color: var(--text-muted);
}

.chain-arrow i {
  font-size: 18px;
}

.arrow-label {
  font-size: 9px;
  text-transform: uppercase;
  letter-spacing: 1px;
}

.chain-given-list {
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.chain-warning {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 8px 12px;
  background: rgba(239, 68, 68, 0.1);
  border-left: 3px solid var(--danger-500);
  border-radius: 6px;
  font-size: 11px;
  color: var(--danger-500);
}

/* Event Log Tab */
.log-intro {
  margin-bottom: 16px;
  padding: 12px;
  background: var(--bg-primary);
  border-radius: 8px;
  font-size: 12px;
  color: var(--text-secondary);
}

.log-intro strong {
  color: var(--primary-400);
}

.event-log-list {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.log-event {
  background: var(--bg-primary);
  border: 1px solid var(--border-primary);
  border-radius: 6px;
  padding: 10px 12px;
  transition: all var(--transition-fast);
}

.log-event:hover {
  border-color: var(--border-secondary);
}

.log-event.given {
  border-left: 3px solid var(--given-color);
}

.log-event.meant {
  border-left: 3px solid var(--meant-color);
}

.log-event-header {
  display: flex;
  align-items: center;
  gap: 10px;
  margin-bottom: 6px;
}

.event-clock {
  font-size: 10px;
  font-family: 'JetBrains Mono', monospace;
  color: var(--text-muted);
  background: var(--bg-tertiary);
  padding: 2px 6px;
  border-radius: 4px;
}

.event-time {
  font-size: 10px;
  color: var(--text-muted);
  margin-left: auto;
}

.log-event-body {
  display: flex;
  align-items: center;
  gap: 10px;
}

.log-event-body code {
  font-size: 10px;
  font-family: 'JetBrains Mono', monospace;
  color: var(--text-secondary);
}

.event-action {
  font-size: 11px;
  color: var(--primary-400);
  font-weight: 500;
}

.log-event-provenance {
  margin-top: 8px;
  padding-top: 8px;
  border-top: 1px solid var(--border-primary);
  font-size: 10px;
  color: var(--text-muted);
}

.provenance-label {
  margin-right: 6px;
}

.log-event-provenance code {
  margin: 0 3px;
  padding: 1px 4px;
  background: var(--bg-tertiary);
  border-radius: 3px;
}

/* Responsive adjustments */
@media (max-width: 768px) {
  .principles-panel-content {
    width: calc(100vw - 40px);
    max-width: 500px;
  }

  .rules-grid {
    grid-template-columns: 1fr;
  }
}

/* ===== View Hierarchy Styles ===== */

/* Navigation section titles with icons */
.nav-section-title {
  display: flex;
  align-items: center;
  gap: 6px;
}

.nav-section-title i {
  font-size: 12px;
  color: var(--text-muted);
}

/* Nav item badge for hierarchy info */
.nav-item-badge {
  margin-left: auto;
  font-size: 10px;
  color: var(--text-muted);
  display: flex;
  align-items: center;
}

.nav-item-badge i {
  font-size: 12px;
}

/* Rule badges */
.rule-badge {
  padding: 2px 4px;
  border-radius: 3px;
  font-size: 9px;
  font-weight: 600;
  background: var(--meant-bg);
  color: var(--meant-color);
}

/* Focus items in sidebar */
.focus-item {
  padding-left: 28px !important;
  font-size: 12px;
}

.focus-item i.ph-funnel {
  color: var(--warning-500);
}

/* Focuses section styling */
.focuses-section {
  border-top: 1px dashed var(--border-primary);
  margin-top: 8px;
  padding-top: 8px;
}

/* Empty hint for navigation */
.nav-item.empty-hint {
  color: var(--text-muted);
  font-style: italic;
  font-size: 12px;
}

.nav-item.empty-hint:hover {
  color: var(--primary-400);
  cursor: pointer;
}

/* Compliance note in modals */
.compliance-note {
  display: flex;
  align-items: flex-start;
  gap: 10px;
  padding: 12px;
  margin-top: 16px;
  background: var(--info-50);
  background: rgba(59, 130, 246, 0.1);
  border-radius: 8px;
  font-size: 12px;
  color: var(--text-secondary);
}

.compliance-note i {
  font-size: 16px;
  color: var(--primary-500);
  flex-shrink: 0;
  margin-top: 1px;
}

.compliance-note.warning {
  background: rgba(245, 158, 11, 0.1);
}

.compliance-note.warning i {
  color: var(--warning-500);
}

/* Lineage chain visualization */
.lineage-chain {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 8px;
  padding: 16px;
}

.lineage-arrow {
  color: var(--text-muted);
}

.lineage-item {
  width: 100%;
  max-width: 300px;
  padding: 12px;
  background: var(--bg-secondary);
  border: 1px solid var(--border-primary);
  border-radius: 8px;
  text-align: center;
}

.lineage-item.current {
  border-color: var(--primary-500);
  background: rgba(59, 130, 246, 0.1);
}

.lineage-type {
  font-size: 10px;
  font-weight: 600;
  color: var(--meant-color);
  margin-bottom: 4px;
  letter-spacing: 0.5px;
}

.lineage-name {
  font-size: 14px;
  font-weight: 500;
  color: var(--text-primary);
  margin-bottom: 4px;
}

.lineage-id {
  font-size: 10px;
  font-family: 'JetBrains Mono', monospace;
  color: var(--text-muted);
}

/* Breadcrumb enhancements */
.breadcrumb-item {
  display: inline-flex;
  align-items: center;
  gap: 4px;
}

.breadcrumb-item i {
  font-size: 12px;
}

.breadcrumb-clear {
  background: none;
  border: none;
  padding: 2px 4px;
  margin-left: 4px;
  cursor: pointer;
  color: var(--text-muted);
  border-radius: 3px;
  display: inline-flex;
  align-items: center;
}

.breadcrumb-clear:hover {
  background: var(--bg-active);
  color: var(--danger-500);
}

.focus-breadcrumb {
  color: var(--warning-500);
  align-items: center;
  gap: 4px;
}

/* Workspace icon in breadcrumb */
#current-workspace-name i {
  color: var(--primary-400);
}

/* ============================================================================
   EO-GROUNDED NAVIGATION STYLES
   Implements visual language for Experience Ontology navigation
   ============================================================================ */

/* Clickable breadcrumb items */
.breadcrumb-clickable {
  cursor: pointer;
  padding: 4px 8px;
  border-radius: var(--radius-md);
  transition: var(--transition-fast);
}

.breadcrumb-clickable:hover {
  background: var(--bg-hover);
}

.breadcrumb-dropdown-icon {
  font-size: 10px;
  opacity: 0.5;
  margin-left: 2px;
}

.breadcrumb-clickable:hover .breadcrumb-dropdown-icon {
  opacity: 1;
}

/* Provenance icons in breadcrumb */
.breadcrumb-provenance-icon {
  margin-right: 4px;
  font-size: 10px;
}

/* Epistemic dots in breadcrumb (colored indicators for GIVEN/MEANT/SCHEMA) */
.breadcrumb-epistemic-dot {
  width: 6px;
  height: 6px;
  border-radius: 50%;
  margin-right: 4px;
  flex-shrink: 0;
}

.breadcrumb-epistemic-dot.given-dot {
  background: var(--accent-blue, #3B82F6);
}

.breadcrumb-epistemic-dot.meant-dot {
  background: var(--accent-purple, #8B5CF6);
}

.breadcrumb-epistemic-dot.schema-dot {
  background: var(--accent-green, #22C55E);
}

/* Data flow breadcrumb - Source â†’ Set â†’ Lens â†’ View chain */
.data-flow-breadcrumb {
  display: flex;
  align-items: center;
  flex-wrap: nowrap;
}

.data-flow-breadcrumb .breadcrumb-source,
.data-flow-breadcrumb .breadcrumb-set,
.data-flow-breadcrumb .breadcrumb-view {
  display: inline-flex;
  align-items: center;
  gap: 4px;
}

.data-flow-breadcrumb .breadcrumb-separator {
  margin: 0 6px;
  color: var(--text-muted);
  font-size: 10px;
}

/* Restriction ratio display */
.breadcrumb-restriction-ratio {
  font-size: 11px;
  color: var(--warning-500);
  margin-left: 4px;
  font-family: 'JetBrains Mono', monospace;
}

/* Epistemic status badges */
.epistemic-badge {
  font-size: 10px;
  margin-left: 4px;
  padding: 1px 4px;
  border-radius: 3px;
}

.epistemic-badge.preliminary {
  color: var(--text-muted);
}

.epistemic-badge.reviewed {
  color: var(--success-500);
}

.epistemic-badge.contested {
  color: var(--warning-500);
}

.epistemic-badge.superseded {
  color: var(--text-muted);
  text-decoration: line-through;
}

/* Breadcrumb dropdown menu */
.breadcrumb-dropdown {
  position: fixed;
  background: var(--bg-secondary);
  border: 1px solid var(--border-color);
  border-radius: var(--radius-lg);
  box-shadow: var(--shadow-lg);
  min-width: 200px;
  max-width: 300px;
  z-index: 1000;
  overflow: hidden;
}

.breadcrumb-dropdown-header {
  padding: 8px 12px;
  font-size: 11px;
  font-weight: 600;
  color: var(--text-muted);
  text-transform: uppercase;
  letter-spacing: 0.5px;
  border-bottom: 1px solid var(--border-color);
  background: var(--bg-tertiary);
}

.breadcrumb-dropdown-item {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 8px 12px;
  cursor: pointer;
  transition: var(--transition-fast);
}

.breadcrumb-dropdown-item:hover {
  background: var(--bg-hover);
}

.breadcrumb-dropdown-item.active {
  background: var(--primary-500);
  color: white;
}

.breadcrumb-dropdown-item.active i {
  color: white;
}

.breadcrumb-dropdown-badge {
  margin-left: auto;
  font-size: 11px;
}

/* GIVEN/MEANT partition headers */
.eo-partition-header {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 8px 12px;
  font-size: 10px;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 1px;
  border-bottom: 2px solid;
  margin-bottom: 4px;
}

.eo-partition-header.eo-given {
  color: var(--success-500);
  border-color: var(--success-500);
  background: linear-gradient(to right, rgba(var(--success-500-rgb), 0.1), transparent);
}

.eo-partition-header.eo-meant {
  color: var(--primary-500);
  border-color: var(--primary-500);
  background: linear-gradient(to right, rgba(var(--primary-500-rgb), 0.1), transparent);
}

.partition-icon {
  font-size: 12px;
}

.partition-label {
  font-weight: 700;
}

.partition-hint {
  font-size: 9px;
  font-weight: 400;
  color: var(--text-muted);
  margin-left: auto;
}

/* Source provenance badges */
.source-provenance-badge {
  font-size: 10px;
  color: var(--success-500);
  margin-left: 4px;
}

.source-meta {
  display: flex;
  gap: 8px;
  padding: 2px 12px 4px 32px;
  font-size: 10px;
  color: var(--text-muted);
}

.source-import-date {
  font-family: 'JetBrains Mono', monospace;
}

.source-method {
  background: var(--bg-tertiary);
  padding: 1px 4px;
  border-radius: 3px;
}

.set-provenance-icon {
  font-size: 10px;
  margin-right: 2px;
}

/* Focus restriction visualization */
.focus-restriction-ratio {
  font-size: 10px;
  color: var(--warning-500);
  font-family: 'JetBrains Mono', monospace;
  margin-left: auto;
}

.focus-restriction-bar {
  position: absolute;
  bottom: 0;
  left: 0;
  right: 0;
  height: 2px;
  background: var(--bg-tertiary);
  border-radius: 1px;
}

.focus-restriction-fill {
  height: 100%;
  background: var(--warning-500);
  border-radius: 1px;
  transition: width 0.3s ease;
}

.nav-item.focus-item {
  position: relative;
  padding-bottom: 6px;
}

.nav-section-hint {
  font-size: 10px;
  color: var(--text-muted);
  margin-left: 4px;
}

/* Hierarchy-aware status bar */
.eo-indicator {
  display: flex;
  align-items: center;
  gap: 6px;
}

.eo-dot {
  width: 8px;
  height: 8px;
  border-radius: 50%;
}

.eo-dot.given {
  background: var(--given-color);
}

.eo-dot.meant {
  background: var(--meant-color);
}

/* Export button styling */
#btn-export i {
  color: var(--warning-500);
}

/* View type icons in lenses nav */
#views-nav .nav-item i {
  color: var(--meant-color);
}

/* Workspaces nav styling */
#workspaces-nav .nav-item {
  font-weight: 500;
}

#workspaces-nav .nav-item.active {
  background: var(--primary-500);
  color: white;
}

#workspaces-nav .nav-item.active .nav-item-badge i {
  color: rgba(255, 255, 255, 0.7);
}

/* ===== Bulk Actions Toolbar ===== */

.bulk-actions-toolbar {
  display: flex;
  align-items: center;
  gap: 16px;
  padding: 10px 16px;
  background: var(--primary-600);
  color: white;
  animation: slideDown 0.2s ease;
}

@keyframes slideDown {
  from {
    opacity: 0;
    transform: translateY(-10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.bulk-actions-info {
  display: flex;
  align-items: center;
  gap: 8px;
  font-weight: 500;
}

.bulk-actions-info i {
  font-size: 18px;
}

.bulk-actions-buttons {
  display: flex;
  gap: 8px;
  flex: 1;
}

.bulk-action-btn {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 6px 12px;
  background: rgba(255, 255, 255, 0.15);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: var(--radius-md);
  color: white;
  font-size: 13px;
  cursor: pointer;
  transition: var(--transition-fast);
}

.bulk-action-btn:hover {
  background: rgba(255, 255, 255, 0.25);
}

.bulk-action-btn.danger:hover {
  background: var(--danger-500);
  border-color: var(--danger-500);
}

.bulk-action-btn i {
  font-size: 14px;
}

.bulk-actions-close {
  width: 32px;
  height: 32px;
  background: transparent;
  border: none;
  border-radius: var(--radius-md);
  color: white;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
}

.bulk-actions-close:hover {
  background: rgba(255, 255, 255, 0.2);
}

/* ===== Keyboard Shortcuts Modal ===== */

.shortcuts-modal-overlay {
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.6);
  backdrop-filter: blur(4px);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 1100;
}

.shortcuts-modal {
  background: var(--bg-secondary);
  border: 1px solid var(--border-primary);
  border-radius: var(--radius-xl);
  width: 90%;
  max-width: 600px;
  max-height: 80vh;
  display: flex;
  flex-direction: column;
  box-shadow: var(--shadow-xl);
  animation: modalIn 0.2s ease;
}

@keyframes modalIn {
  from {
    opacity: 0;
    transform: scale(0.95);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}

.shortcuts-modal-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 16px 20px;
  border-bottom: 1px solid var(--border-primary);
}

.shortcuts-modal-header h3 {
  display: flex;
  align-items: center;
  gap: 10px;
  font-size: 16px;
  font-weight: 600;
}

.shortcuts-modal-header h3 i {
  font-size: 20px;
  color: var(--primary-400);
}

.shortcuts-modal-close {
  width: 32px;
  height: 32px;
  background: transparent;
  border: none;
  border-radius: var(--radius-md);
  color: var(--text-muted);
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
}

.shortcuts-modal-close:hover {
  background: var(--bg-hover);
  color: var(--text-primary);
}

.shortcuts-modal-body {
  padding: 20px;
  overflow-y: auto;
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 24px;
}

.shortcuts-section h4 {
  font-size: 12px;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  color: var(--text-muted);
  margin-bottom: 12px;
}

.shortcut-item {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 8px 0;
  border-bottom: 1px solid var(--border-primary);
}

.shortcut-item:last-child {
  border-bottom: none;
}

.shortcut-keys {
  display: flex;
  gap: 4px;
}

.shortcut-keys kbd {
  display: inline-block;
  padding: 3px 8px;
  background: var(--bg-tertiary);
  border: 1px solid var(--border-secondary);
  border-radius: var(--radius-sm);
  font-family: var(--font-mono);
  font-size: 11px;
  color: var(--text-primary);
}

.shortcut-desc {
  font-size: 13px;
  color: var(--text-secondary);
}

/* ===== Filter & Sort Panels ===== */

.filter-panel,
.sort-panel {
  position: fixed;
  top: calc(var(--header-height) + 8px);
  right: 16px;
  width: 400px;
  background: var(--bg-secondary);
  border: 1px solid var(--border-primary);
  border-radius: var(--radius-lg);
  box-shadow: var(--shadow-lg);
  z-index: 200;
  animation: slideIn 0.15s ease;
}

@keyframes slideIn {
  from {
    opacity: 0;
    transform: translateY(-10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.filter-panel-header,
.sort-panel-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 12px 16px;
  border-bottom: 1px solid var(--border-primary);
}

.filter-panel-header h4,
.sort-panel-header h4 {
  display: flex;
  align-items: center;
  gap: 8px;
  font-size: 14px;
  font-weight: 600;
}

.filter-panel-header h4 i,
.sort-panel-header h4 i {
  color: var(--primary-400);
}

.filter-panel-close,
.sort-panel-close {
  width: 28px;
  height: 28px;
  background: transparent;
  border: none;
  border-radius: var(--radius-sm);
  color: var(--text-muted);
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
}

.filter-panel-close:hover,
.sort-panel-close:hover {
  background: var(--bg-hover);
  color: var(--text-primary);
}

.filter-panel-body,
.sort-panel-body {
  padding: 16px;
  max-height: 400px;
  overflow-y: auto;
}

.filter-groups,
.sort-rules {
  display: flex;
  flex-direction: column;
  gap: 12px;
  margin-bottom: 16px;
}

.filter-row,
.sort-row {
  display: flex;
  gap: 8px;
  align-items: center;
  background: var(--bg-tertiary);
  padding: 10px 12px;
  border-radius: var(--radius-md);
}

.filter-row select,
.filter-row input,
.sort-row select {
  flex: 1;
  min-width: 0;
  padding: 6px 10px;
  background: var(--bg-primary);
  border: 1px solid var(--border-primary);
  border-radius: var(--radius-sm);
  color: var(--text-primary);
  font-size: 13px;
}

.filter-row select:focus,
.filter-row input:focus,
.sort-row select:focus {
  outline: none;
  border-color: var(--primary-500);
}

.filter-remove-btn,
.sort-remove-btn {
  width: 28px;
  height: 28px;
  background: transparent;
  border: none;
  border-radius: var(--radius-sm);
  color: var(--text-muted);
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
}

.filter-remove-btn:hover,
.sort-remove-btn:hover {
  background: var(--danger-50);
  color: var(--danger-500);
}

.add-filter-btn,
.add-sort-btn {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 8px 0;
  background: none;
  border: none;
  color: var(--primary-500);
  font-size: 13px;
  cursor: pointer;
}

.add-filter-btn:hover,
.add-sort-btn:hover {
  text-decoration: underline;
}

.filter-logic-toggle {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 12px 0;
  border-top: 1px solid var(--border-primary);
  margin-top: 8px;
}

.filter-logic-label {
  font-size: 13px;
  color: var(--text-secondary);
}

.filter-logic-select {
  padding: 6px 10px;
  background: var(--bg-tertiary);
  border: 1px solid var(--border-primary);
  border-radius: var(--radius-sm);
  color: var(--text-primary);
  font-size: 13px;
}

.filter-panel-footer,
.sort-panel-footer {
  display: flex;
  justify-content: flex-end;
  gap: 8px;
  padding: 12px 16px;
  border-top: 1px solid var(--border-primary);
}

/* Empty filter state */
.filter-empty-state,
.sort-empty-state {
  text-align: center;
  padding: 24px;
  color: var(--text-muted);
}

.filter-empty-state i,
.sort-empty-state i {
  font-size: 32px;
  margin-bottom: 8px;
  opacity: 0.5;
}

/* ===== Fields Panel (Visibility & Reorder) ===== */

.fields-panel {
  position: fixed;
  top: calc(var(--header-height) + 8px);
  right: 16px;
  width: 360px;
  background: var(--bg-secondary);
  border: 1px solid var(--border-primary);
  border-radius: var(--radius-lg);
  box-shadow: var(--shadow-lg);
  z-index: 200;
  animation: slideIn 0.15s ease;
}

.fields-panel-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 12px 16px;
  border-bottom: 1px solid var(--border-primary);
}

.fields-panel-header h4 {
  display: flex;
  align-items: center;
  gap: 8px;
  font-size: 14px;
  font-weight: 600;
}

.fields-panel-header h4 i {
  color: var(--primary-400);
}

.fields-panel-close {
  width: 28px;
  height: 28px;
  background: transparent;
  border: none;
  border-radius: var(--radius-sm);
  color: var(--text-muted);
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
}

.fields-panel-close:hover {
  background: var(--bg-hover);
  color: var(--text-primary);
}

.fields-panel-body {
  padding: 16px;
  max-height: 450px;
  overflow-y: auto;
}

.fields-panel-description {
  font-size: 12px;
  color: var(--text-muted);
  margin-bottom: 12px;
}

.fields-list {
  display: flex;
  flex-direction: column;
  gap: 4px;
}

.field-item {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 10px 12px;
  background: var(--bg-tertiary);
  border-radius: var(--radius-md);
  cursor: grab;
  user-select: none;
  transition: var(--transition-fast);
}

.field-item:hover {
  background: var(--bg-hover);
}

.field-item.dragging {
  opacity: 0.5;
  cursor: grabbing;
}

.field-item.drag-over {
  background: var(--primary-100);
  border: 1px dashed var(--primary-500);
}

.field-item.hidden-field {
  opacity: 0.5;
}

.field-item-drag-handle {
  color: var(--text-muted);
  cursor: grab;
  display: flex;
  align-items: center;
}

.field-item-drag-handle:active {
  cursor: grabbing;
}

.field-item-icon {
  color: var(--text-secondary);
  font-size: 14px;
  width: 20px;
  display: flex;
  justify-content: center;
}

.field-item-name {
  flex: 1;
  font-size: 13px;
  color: var(--text-primary);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.field-item-primary-badge {
  font-size: 10px;
  padding: 2px 6px;
  background: var(--primary-100);
  color: var(--primary-600);
  border-radius: var(--radius-sm);
  text-transform: uppercase;
  font-weight: 600;
}

.field-item-visibility-btn {
  width: 28px;
  height: 28px;
  background: transparent;
  border: none;
  border-radius: var(--radius-sm);
  color: var(--text-muted);
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: var(--transition-fast);
}

.field-item-visibility-btn:hover {
  background: var(--bg-hover);
  color: var(--text-primary);
}

.field-item-visibility-btn.visible {
  color: var(--primary-500);
}

.field-item-visibility-btn.hidden {
  color: var(--text-muted);
}

.fields-panel-footer {
  display: flex;
  justify-content: flex-end;
  gap: 8px;
  padding: 12px 16px;
  border-top: 1px solid var(--border-primary);
}

/* ===== Tossed Items Panel (Deletion History) ===== */

.tossed-panel {
  position: fixed;
  top: calc(var(--header-height) + 8px);
  right: 16px;
  width: 420px;
  background: var(--bg-secondary);
  border: 1px solid var(--border-primary);
  border-radius: var(--radius-lg);
  box-shadow: var(--shadow-lg);
  z-index: 1100;
  max-height: 80vh;
  display: flex;
  flex-direction: column;
}

.tossed-panel-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 12px 16px;
  border-bottom: 1px solid var(--border-primary);
}

.tossed-panel-header h4 {
  display: flex;
  align-items: center;
  gap: 8px;
  font-size: 14px;
  font-weight: 600;
}

.tossed-panel-header h4 i {
  color: var(--warning-400);
}

.tossed-panel-close {
  width: 28px;
  height: 28px;
  background: transparent;
  border: none;
  border-radius: var(--radius-sm);
  color: var(--text-muted);
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
}

.tossed-panel-close:hover {
  background: var(--bg-hover);
  color: var(--text-primary);
}

.tossed-panel-body {
  padding: 16px;
  flex: 1;
  overflow-y: auto;
  max-height: 500px;
}

.tossed-panel-description {
  font-size: 12px;
  color: var(--text-muted);
  margin-bottom: 16px;
  line-height: 1.5;
}

.tossed-tree {
  display: flex;
  flex-direction: column;
  gap: 4px;
}

.tossed-category {
  margin-bottom: 12px;
}

.tossed-category-header {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 6px 8px;
  background: var(--bg-tertiary);
  border-radius: var(--radius-sm);
  font-size: 11px;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  color: var(--text-muted);
  cursor: pointer;
  user-select: none;
}

.tossed-category-header:hover {
  background: var(--bg-hover);
}

.tossed-category-header i {
  font-size: 14px;
}

.tossed-category-header .category-icon {
  color: var(--primary-400);
}

.tossed-category-header .expand-icon {
  margin-left: auto;
  transition: transform 0.2s;
}

.tossed-category.collapsed .expand-icon {
  transform: rotate(-90deg);
}

.tossed-category-header .category-count {
  margin-left: 4px;
  padding: 1px 6px;
  background: var(--bg-primary);
  border-radius: 10px;
  font-size: 10px;
}

.tossed-category-items {
  margin-top: 4px;
  padding-left: 8px;
  border-left: 2px solid var(--border-secondary);
  margin-left: 10px;
}

.tossed-category.collapsed .tossed-category-items {
  display: none;
}

.tossed-item {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 8px 12px;
  background: var(--bg-primary);
  border: 1px solid var(--border-secondary);
  border-radius: var(--radius-md);
  margin-bottom: 4px;
  transition: all 0.15s ease;
}

.tossed-item:hover {
  border-color: var(--primary-400);
  background: var(--bg-hover);
}

.tossed-item-icon {
  width: 28px;
  height: 28px;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: var(--radius-sm);
  font-size: 14px;
  flex-shrink: 0;
}

.tossed-item-icon.set-icon {
  background: var(--primary-100);
  color: var(--primary-600);
}

.tossed-item-icon.view-icon {
  background: var(--purple-100);
  color: var(--purple-600);
}

.tossed-item-icon.record-icon {
  background: var(--green-100);
  color: var(--green-600);
}

.tossed-item-icon.field-icon {
  background: var(--orange-100);
  color: var(--orange-600);
}

.tossed-item-content {
  flex: 1;
  min-width: 0;
}

.tossed-item-name {
  font-size: 13px;
  font-weight: 500;
  color: var(--text-primary);
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.tossed-item-meta {
  display: flex;
  align-items: center;
  gap: 8px;
  font-size: 11px;
  color: var(--text-muted);
  margin-top: 2px;
}

.tossed-item-meta .meta-separator {
  color: var(--border-secondary);
}

.tossed-item-actions {
  display: flex;
  gap: 4px;
}

.tossed-item-action {
  width: 28px;
  height: 28px;
  background: transparent;
  border: none;
  border-radius: var(--radius-sm);
  color: var(--text-muted);
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.15s;
}

.tossed-item-action:hover {
  background: var(--primary-100);
  color: var(--primary-600);
}

.tossed-item-action.restore:hover {
  background: var(--green-100);
  color: var(--green-600);
}

.tossed-item-action.delete:hover {
  background: var(--red-100);
  color: var(--red-600);
}

.tossed-empty {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 40px 20px;
  text-align: center;
  color: var(--text-muted);
}

.tossed-empty i {
  font-size: 48px;
  margin-bottom: 12px;
  opacity: 0.4;
}

.tossed-empty p {
  font-size: 14px;
  font-weight: 500;
  margin-bottom: 4px;
}

.tossed-empty span {
  font-size: 12px;
}

.tossed-panel-footer {
  display: flex;
  justify-content: space-between;
  gap: 8px;
  padding: 12px 16px;
  border-top: 1px solid var(--border-primary);
}

.tossed-badge {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  min-width: 18px;
  height: 18px;
  padding: 0 5px;
  background: var(--warning-500);
  color: white;
  font-size: 10px;
  font-weight: 600;
  border-radius: 9px;
  margin-left: auto;
}

/* Dark mode adjustments */
[data-theme="dark"] .tossed-item-icon.set-icon {
  background: rgba(var(--primary-500-rgb), 0.2);
}

[data-theme="dark"] .tossed-item-icon.view-icon {
  background: rgba(147, 51, 234, 0.2);
}

[data-theme="dark"] .tossed-item-icon.record-icon {
  background: rgba(34, 197, 94, 0.2);
}

[data-theme="dark"] .tossed-item-icon.field-icon {
  background: rgba(249, 115, 22, 0.2);
}

/* ===== Activity Stream Panel ===== */

.activity-panel {
  position: fixed;
  top: calc(var(--header-height) + 8px);
  right: 16px;
  width: 700px;
  background: var(--bg-secondary);
  border: 1px solid var(--border-primary);
  border-radius: var(--radius-lg);
  box-shadow: var(--shadow-lg);
  z-index: 1100;
  max-height: 80vh;
  display: flex;
  flex-direction: column;
}

.activity-panel-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 12px 16px;
  border-bottom: 1px solid var(--border-primary);
}

.activity-panel-header h4 {
  display: flex;
  align-items: center;
  gap: 8px;
  font-size: 14px;
  font-weight: 600;
}

.activity-panel-header h4 i {
  color: var(--primary-500);
}

.activity-panel-close {
  width: 28px;
  height: 28px;
  background: transparent;
  border: none;
  border-radius: var(--radius-sm);
  color: var(--text-muted);
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
}

.activity-panel-close:hover {
  background: var(--bg-hover);
  color: var(--text-primary);
}

.activity-panel-body {
  padding: 16px;
  flex: 1;
  overflow-y: auto;
  max-height: 600px;
}

.activity-panel-description {
  font-size: 12px;
  color: var(--text-muted);
  margin-bottom: 12px;
  line-height: 1.5;
}

.activity-filters {
  display: flex;
  gap: 8px;
  margin-bottom: 12px;
}

.activity-filter-select {
  padding: 6px 10px;
  font-size: 12px;
  border: 1px solid var(--border-primary);
  border-radius: var(--radius-sm);
  background: var(--bg-primary);
  color: var(--text-primary);
  cursor: pointer;
}

.activity-filter-select:hover {
  border-color: var(--border-secondary);
}

.activity-table-container {
  overflow-x: auto;
  border: 1px solid var(--border-primary);
  border-radius: var(--radius-sm);
}

.activity-table {
  width: 100%;
  border-collapse: collapse;
  font-size: 12px;
}

.activity-table thead {
  background: var(--bg-tertiary);
  position: sticky;
  top: 0;
  z-index: 1;
}

.activity-table th {
  padding: 8px 12px;
  text-align: left;
  font-weight: 600;
  color: var(--text-muted);
  text-transform: uppercase;
  font-size: 10px;
  letter-spacing: 0.5px;
  border-bottom: 1px solid var(--border-primary);
}

.activity-table td {
  padding: 10px 12px;
  border-bottom: 1px solid var(--border-subtle);
  vertical-align: middle;
}

.activity-table tbody tr:hover {
  background: var(--bg-hover);
}

.activity-table tbody tr:last-child td {
  border-bottom: none;
}

.activity-col-time {
  width: 100px;
  white-space: nowrap;
}

.activity-col-action {
  width: 80px;
}

.activity-col-type {
  width: 70px;
}

.activity-col-name {
  min-width: 120px;
}

.activity-col-details {
  min-width: 150px;
}

.activity-col-actions {
  width: 60px;
  text-align: center;
}

.activity-action-badge {
  display: inline-flex;
  align-items: center;
  gap: 4px;
  padding: 3px 8px;
  border-radius: var(--radius-sm);
  font-size: 11px;
  font-weight: 500;
}

.activity-action-badge.create {
  background: rgba(34, 197, 94, 0.15);
  color: var(--success-500);
}

.activity-action-badge.update {
  background: rgba(59, 130, 246, 0.15);
  color: var(--primary-500);
}

.activity-action-badge.delete {
  background: rgba(239, 68, 68, 0.15);
  color: var(--danger-500);
}

.activity-action-badge.restore {
  background: rgba(147, 51, 234, 0.15);
  color: #9333ea;
}

.activity-type-badge {
  display: inline-flex;
  align-items: center;
  gap: 4px;
  padding: 2px 6px;
  border-radius: var(--radius-sm);
  font-size: 10px;
  background: var(--bg-tertiary);
  color: var(--text-muted);
}

.activity-type-badge i {
  font-size: 11px;
}

.activity-name {
  font-weight: 500;
  color: var(--text-primary);
  max-width: 150px;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.activity-details {
  color: var(--text-muted);
  font-size: 11px;
  max-width: 200px;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.activity-undo-btn {
  padding: 4px 8px;
  font-size: 11px;
  background: transparent;
  border: 1px solid var(--border-primary);
  border-radius: var(--radius-sm);
  color: var(--text-muted);
  cursor: pointer;
  transition: all 0.15s ease;
}

.activity-undo-btn:hover {
  background: var(--bg-hover);
  border-color: var(--primary-500);
  color: var(--primary-500);
}

.activity-undo-btn:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

.activity-empty {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 48px 24px;
  text-align: center;
  color: var(--text-muted);
}

.activity-empty i {
  font-size: 48px;
  margin-bottom: 16px;
  opacity: 0.5;
}

.activity-empty p {
  font-size: 14px;
  margin: 0 0 4px 0;
}

.activity-empty span {
  font-size: 12px;
}

.activity-panel-footer {
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: 8px;
  padding: 12px 16px;
  border-top: 1px solid var(--border-primary);
}

.activity-count {
  font-size: 12px;
  color: var(--text-muted);
}

/* ===== Sync Panel (Cloud API Configuration) ===== */

.sync-panel {
  position: fixed;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  width: 440px;
  max-height: 90vh;
  background: var(--bg-secondary);
  border: 1px solid var(--border-primary);
  border-radius: var(--radius-lg);
  box-shadow: var(--shadow-xl);
  z-index: 300;
  animation: modalFadeIn 0.2s ease;
  display: flex;
  flex-direction: column;
}

.sync-panel-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 16px 20px;
  border-bottom: 1px solid var(--border-primary);
}

.sync-panel-header h4 {
  display: flex;
  align-items: center;
  gap: 10px;
  font-size: 16px;
  font-weight: 600;
  margin: 0;
}

.sync-panel-header h4 i {
  color: var(--primary-400);
  font-size: 20px;
}

.sync-panel-close {
  width: 32px;
  height: 32px;
  background: transparent;
  border: none;
  border-radius: var(--radius-sm);
  color: var(--text-muted);
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 18px;
}

.sync-panel-close:hover {
  background: var(--bg-hover);
  color: var(--text-primary);
}

.sync-panel-body {
  padding: 20px;
  overflow-y: auto;
  flex: 1;
}

.sync-panel-description {
  font-size: 13px;
  color: var(--text-muted);
  margin-bottom: 20px;
  line-height: 1.5;
}

/* Status Section */
.sync-status-section {
  background: var(--bg-tertiary);
  border-radius: var(--radius-md);
  padding: 16px;
  margin-bottom: 20px;
}

.sync-status-indicator {
  display: flex;
  align-items: center;
  gap: 10px;
  font-size: 14px;
  font-weight: 500;
}

.sync-status-indicator i {
  font-size: 20px;
}

.sync-status-indicator.not-configured {
  color: var(--text-muted);
}

.sync-status-indicator.configured {
  color: var(--success-500);
}

.sync-status-indicator.syncing {
  color: var(--primary-400);
}

.sync-status-indicator.syncing i {
  animation: spin 1s linear infinite;
}

.sync-status-indicator.error {
  color: var(--error-500);
}

.sync-status-details {
  margin-top: 8px;
  font-size: 12px;
  color: var(--text-muted);
}

/* Configuration Fields */
.sync-config-section {
  display: flex;
  flex-direction: column;
  gap: 16px;
  margin-bottom: 20px;
}

.sync-config-field {
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.sync-config-field label {
  font-size: 13px;
  font-weight: 500;
  color: var(--text-primary);
}

.sync-config-field input[type="url"],
.sync-config-field input[type="text"],
.sync-config-field input[type="password"] {
  padding: 10px 12px;
  border: 1px solid var(--border-primary);
  border-radius: var(--radius-md);
  background: var(--bg-primary);
  color: var(--text-primary);
  font-size: 13px;
  transition: border-color 0.15s ease;
}

.sync-config-field input:focus {
  outline: none;
  border-color: var(--primary-400);
}

.sync-config-field input::placeholder {
  color: var(--text-muted);
}

.sync-config-hint {
  font-size: 11px;
  color: var(--text-muted);
}

/* Token Input with Toggle */
.sync-token-input {
  display: flex;
  position: relative;
}

.sync-token-input input {
  flex: 1;
  padding-right: 40px;
}

.sync-token-toggle {
  position: absolute;
  right: 4px;
  top: 50%;
  transform: translateY(-50%);
  width: 32px;
  height: 32px;
  background: transparent;
  border: none;
  border-radius: var(--radius-sm);
  color: var(--text-muted);
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
}

.sync-token-toggle:hover {
  color: var(--text-primary);
}

/* Toggle Switch */
.sync-config-toggle {
  padding-top: 8px;
}

.sync-toggle-label {
  display: flex;
  align-items: center;
  gap: 12px;
  cursor: pointer;
  font-size: 13px;
  font-weight: 500;
}

.sync-toggle-label input[type="checkbox"] {
  display: none;
}

.sync-toggle-slider {
  position: relative;
  width: 40px;
  height: 22px;
  background: var(--bg-tertiary);
  border: 1px solid var(--border-primary);
  border-radius: 11px;
  transition: all 0.2s ease;
}

.sync-toggle-slider::after {
  content: '';
  position: absolute;
  top: 2px;
  left: 2px;
  width: 16px;
  height: 16px;
  background: var(--text-muted);
  border-radius: 50%;
  transition: all 0.2s ease;
}

.sync-toggle-label input:checked + .sync-toggle-slider {
  background: var(--primary-400);
  border-color: var(--primary-400);
}

.sync-toggle-label input:checked + .sync-toggle-slider::after {
  left: 20px;
  background: white;
}

/* Actions Section */
.sync-actions-section {
  display: flex;
  gap: 12px;
  margin-bottom: 20px;
}

.sync-actions-section .btn {
  flex: 1;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
}

.sync-actions-section .btn:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

/* Last Sync Info */
.sync-last-info {
  background: var(--bg-tertiary);
  border-radius: var(--radius-md);
  padding: 12px 16px;
  margin-bottom: 16px;
}

.sync-last-row {
  display: flex;
  justify-content: space-between;
  padding: 4px 0;
  font-size: 12px;
}

.sync-last-label {
  color: var(--text-muted);
}

.sync-last-value {
  color: var(--text-primary);
  font-weight: 500;
}

/* Error Display */
.sync-error {
  display: flex;
  align-items: flex-start;
  gap: 10px;
  padding: 12px 16px;
  background: rgba(239, 68, 68, 0.1);
  border: 1px solid var(--error-500);
  border-radius: var(--radius-md);
  color: var(--error-500);
  font-size: 13px;
}

.sync-error i {
  font-size: 18px;
  flex-shrink: 0;
  margin-top: 1px;
}

/* Footer */
.sync-panel-footer {
  display: flex;
  justify-content: flex-end;
  gap: 12px;
  padding: 16px 20px;
  border-top: 1px solid var(--border-primary);
}

/* Sync Badge in Sidebar */
.sync-badge {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 20px;
  height: 20px;
  border-radius: 50%;
  margin-left: auto;
}

.sync-badge.synced i {
  color: var(--success-500);
}

.sync-badge.pending i {
  color: var(--warning-500);
}

.sync-badge.error i {
  color: var(--error-500);
}

.sync-badge.syncing i {
  color: var(--primary-400);
  animation: spin 1s linear infinite;
}

/* Backdrop for sync panel */
.sync-panel-backdrop {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(0, 0, 0, 0.5);
  z-index: 299;
}

@keyframes spin {
  from { transform: rotate(0deg); }
  to { transform: rotate(360deg); }
}

/* ===== Enhanced View Switcher ===== */

.view-switch-btn {
  position: relative;
}

.view-switch-btn[data-view]::after {
  content: attr(data-tooltip);
  position: absolute;
  bottom: -30px;
  left: 50%;
  transform: translateX(-50%);
  padding: 4px 8px;
  background: var(--gray-900);
  color: white;
  font-size: 11px;
  border-radius: var(--radius-sm);
  white-space: nowrap;
  opacity: 0;
  visibility: hidden;
  transition: var(--transition-fast);
  z-index: 100;
}

.view-switch-btn:hover::after {
  opacity: 1;
  visibility: visible;
}

.view-switch-btn[data-view="table"]::after { content: "Table (1)"; }
.view-switch-btn[data-view="cards"]::after { content: "Cards (2)"; }
.view-switch-btn[data-view="kanban"]::after { content: "Kanban (3)"; }
.view-switch-btn[data-view="calendar"]::after { content: "Calendar (4)"; }
.view-switch-btn[data-view="graph"]::after { content: "Graph (5)"; }
.view-switch-btn[data-view="filesystem"]::after { content: "Files (6)"; }

/* ===== Filesystem View ===== */
.filesystem-container {
  display: flex;
  flex-direction: column;
  flex: 1;
  background: var(--bg-primary);
  overflow: auto;
}

.filesystem-toolbar {
  display: flex;
  align-items: center;
  gap: 16px;
  padding: 12px 16px;
  border-bottom: 1px solid var(--border-primary);
  background: var(--bg-secondary);
}

.filesystem-info {
  display: flex;
  align-items: center;
  gap: 8px;
  font-size: 14px;
  font-weight: 500;
  color: var(--text-primary);
}

.filesystem-info i {
  font-size: 18px;
  color: var(--primary-500);
}

.filesystem-breadcrumb {
  flex: 1;
  display: flex;
  align-items: center;
  gap: 4px;
  font-size: 12px;
  color: var(--text-muted);
}

.fs-breadcrumb-item {
  padding: 4px 8px;
  border-radius: var(--radius-sm);
  cursor: pointer;
}

.fs-breadcrumb-item:hover {
  background: var(--bg-hover);
}

.filesystem-controls {
  display: flex;
  gap: 4px;
}

.filesystem-control-btn {
  padding: 6px 10px;
  border: 1px solid var(--border-primary);
  border-radius: var(--radius-md);
  background: var(--bg-primary);
  color: var(--text-secondary);
  cursor: pointer;
  transition: var(--transition-fast);
}

.filesystem-control-btn:hover {
  background: var(--bg-hover);
  color: var(--text-primary);
}

.filesystem-control-btn.active {
  background: var(--primary-500);
  border-color: var(--primary-500);
  color: white;
}

.filesystem-content {
  flex: 1;
  overflow: auto;
  padding: 16px;
}

.fs-tree {
  max-width: 900px;
}

/* Layer Legend */
.fs-layer-legend {
  display: flex;
  flex-wrap: wrap;
  gap: 16px;
  padding: 12px 16px;
  margin-bottom: 16px;
  background: var(--bg-tertiary);
  border-radius: var(--radius-lg);
  border: 1px solid var(--border-primary);
}

.fs-layer-item {
  display: flex;
  align-items: center;
  gap: 8px;
  font-size: 12px;
}

.fs-layer-item i {
  font-size: 16px;
}

.fs-layer-item span:first-of-type {
  font-weight: 600;
}

.fs-layer-desc {
  color: var(--text-muted);
  font-weight: 400 !important;
}

/* File Explorer Style - Monochrome layer icons */
.fs-layer-item.given i { color: var(--text-muted); }
.fs-layer-item.meant i { color: var(--text-muted); }
.fs-layer-item.lens i { color: var(--text-muted); }
.fs-layer-item.entity i { color: var(--text-muted); }

/* Tree Nodes */
.fs-section {
  margin-bottom: 8px;
}

.fs-node {
  margin-bottom: 2px;
}

.fs-node-header {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 6px 8px;
  border-radius: 3px;
  cursor: pointer;
  transition: var(--transition-fast);
  font-size: 13px;
}

.fs-node-header:hover {
  background: rgba(255, 255, 255, 0.06);
}

/* Level-based styling - File Explorer Style (indentation only) */
.fs-node-header[data-level="given"] {
  /* No colored border */
}

.fs-node-header[data-level="meant"] {
  margin-left: 16px;
}

.fs-node-header[data-level="lens"] {
  margin-left: 32px;
}

.fs-node-header[data-level="entity"] {
  margin-left: 32px;
}

.fs-toggle {
  font-size: 12px;
  color: var(--text-muted);
  transition: transform 0.15s ease;
  flex-shrink: 0;
}

.fs-node.expanded > .fs-node-header .fs-toggle {
  transform: rotate(90deg);
}

.fs-spacer {
  font-size: 12px;
  color: var(--border-secondary);
  flex-shrink: 0;
}

.fs-icon {
  font-size: 16px;
  flex-shrink: 0;
}

/* File Explorer Style - Monochrome icons */
.source-node > .fs-node-header .fs-icon { color: var(--text-muted); }
.set-node > .fs-node-header .fs-icon { color: var(--text-muted); }
.view-node > .fs-node-header .fs-icon { color: var(--text-muted); }
.records-node > .fs-node-header .fs-icon { color: var(--text-muted); }
.record-node > .fs-node-header .fs-icon { color: var(--text-muted); }

.fs-node-title {
  flex: 1;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.fs-node-meta {
  font-size: 11px;
  color: var(--text-muted);
}

.fs-node-count {
  font-size: 11px;
  color: var(--text-muted);
  background: transparent;
  padding: 0;
  flex-shrink: 0;
}

.fs-node-type {
  font-size: 9px;
  color: var(--text-muted);
  background: transparent;
  padding: 0;
  text-transform: uppercase;
  flex-shrink: 0;
}

.fs-node-children {
  display: none;
}

.fs-node.expanded > .fs-node-children {
  display: block;
}

/* Active state - File Explorer Style (subtle selection) */
.fs-node.active > .fs-node-header {
  background: rgba(59, 130, 246, 0.15);
  color: var(--text-primary);
}

.fs-node.active > .fs-node-header .fs-icon,
.fs-node.active > .fs-node-header .fs-node-meta,
.fs-node.active > .fs-node-header .fs-node-count,
.fs-node.active > .fs-node-header .fs-node-type {
  color: var(--text-secondary);
}

.view-node.active > .fs-node-header {
  background: rgba(59, 130, 246, 0.15);
}

/* Selected state (keyboard/click selection, different from active/open) */
.fs-node.selected > .fs-node-header {
  background: var(--bg-tertiary);
  outline: 2px solid var(--primary-400);
  outline-offset: -2px;
}

.fs-node.selected.active > .fs-node-header {
  outline: 2px solid rgba(255, 255, 255, 0.5);
  outline-offset: -2px;
}

/* Focus visible for keyboard navigation */
.fs-tree:focus {
  outline: none;
}

.fs-tree:focus-visible .fs-node.selected > .fs-node-header {
  outline: 2px solid var(--primary-500);
  outline-offset: -2px;
}

/* More indicator */
.fs-more-indicator {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 8px 12px 8px 48px;
  font-size: 12px;
  color: var(--text-muted);
  font-style: italic;
}

/* Empty state */
.fs-empty {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 60px 20px;
  text-align: center;
}

.fs-empty i {
  font-size: 48px;
  color: var(--text-muted);
  margin-bottom: 16px;
}

.fs-empty h3 {
  font-size: 18px;
  margin-bottom: 8px;
}

.fs-empty p {
  color: var(--text-muted);
  margin-bottom: 20px;
}

.fs-empty-actions {
  display: flex;
  gap: 12px;
}

/* ===== File Structure Table View ===== */

.fs-table-container {
  overflow: auto;
  height: 100%;
}

.fs-table {
  width: 100%;
  border-collapse: collapse;
  font-size: 13px;
}

.fs-table thead {
  position: sticky;
  top: 0;
  z-index: 10;
  background: var(--bg-secondary);
}

.fs-table th {
  text-align: left;
  padding: 10px 12px;
  font-weight: 500;
  color: var(--text-muted);
  border-bottom: 1px solid var(--border-primary);
  font-size: 11px;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.fs-table-name { width: 50%; }
.fs-table-type { width: 15%; }
.fs-table-count { width: 20%; }
.fs-table-modified { width: 15%; }

.fs-table-row {
  cursor: pointer;
  transition: background-color 0.1s;
}

.fs-table-row:hover {
  background: var(--bg-tertiary);
}

.fs-table-row.selected {
  background: var(--primary-500);
  color: white;
}

.fs-table-row.selected .fs-type-badge {
  background: rgba(255,255,255,0.2);
  color: white;
}

.fs-table-row.selected td {
  color: white;
}

.fs-table-row.selected .fs-table-name-text,
.fs-table-row.selected .fs-table-count,
.fs-table-row.selected .fs-table-modified,
.fs-table-row.selected .fs-table-toggle {
  color: white;
}

.fs-table-row.active {
  background: var(--primary-100);
}

.fs-table-row.active.selected {
  background: var(--primary-500);
}

.fs-table td {
  padding: 8px 12px;
  border-bottom: 1px solid var(--border-secondary);
  color: var(--text-secondary);
}

.fs-table-name-content {
  display: flex;
  align-items: center;
  gap: 6px;
}

.fs-table-toggle {
  cursor: pointer;
  color: var(--text-muted);
  width: 16px;
  flex-shrink: 0;
}

.fs-table-toggle:hover {
  color: var(--text-primary);
}

.fs-table-spacer {
  width: 16px;
  flex-shrink: 0;
  visibility: hidden;
}

.fs-table-icon {
  color: var(--text-muted);
  font-size: 16px;
  flex-shrink: 0;
}

.source-row .fs-table-icon {
  color: var(--info-500);
}

.set-row .fs-table-icon {
  color: var(--success-500);
}

.view-row .fs-table-icon {
  color: var(--warning-500);
}

.fs-table-name-text {
  color: var(--text-primary);
  font-weight: 500;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.fs-type-badge {
  display: inline-block;
  padding: 2px 8px;
  border-radius: 4px;
  font-size: 11px;
  font-weight: 500;
  background: var(--bg-tertiary);
  color: var(--text-muted);
}

.fs-type-source { background: var(--info-100); color: var(--info-700); }
.fs-type-set { background: var(--success-100); color: var(--success-700); }
.fs-type-view { background: var(--warning-100); color: var(--warning-700); }

.fs-table-count {
  color: var(--text-muted);
  font-size: 12px;
}

.fs-table-modified {
  color: var(--text-muted);
  font-size: 12px;
}

.fs-table-empty {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 60px 20px;
  text-align: center;
}

.fs-table-empty i {
  font-size: 48px;
  color: var(--text-muted);
  margin-bottom: 16px;
}

.fs-table-empty h3 {
  font-size: 18px;
  margin-bottom: 8px;
}

.fs-table-empty p {
  color: var(--text-muted);
  margin-bottom: 20px;
}

.fs-table:focus {
  outline: none;
}

.fs-table:focus-visible .fs-table-row.selected {
  outline: 2px solid var(--primary-300);
  outline-offset: -2px;
}

/* ===== Enhanced Record Detail Panel ===== */

.detail-panel-body .detail-record h2 {
  display: flex;
  align-items: center;
  gap: 8px;
}

.detail-field-group {
  margin-bottom: 16px;
}

.detail-field-label {
  display: flex;
  align-items: center;
  gap: 6px;
  font-size: 12px;
  font-weight: 500;
  color: var(--text-muted);
  margin-bottom: 6px;
}

.detail-field-label i {
  font-size: 14px;
}

.detail-field-value {
  padding: 8px 12px;
  background: var(--bg-tertiary);
  border: 1px solid transparent;
  border-radius: var(--radius-md);
  min-height: 36px;
  cursor: pointer;
  transition: var(--transition-fast);
}

.detail-field-value:hover {
  border-color: var(--border-secondary);
}

.detail-field-value.editing {
  background: var(--bg-primary);
  border-color: var(--primary-500);
  box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.15);
}

.detail-field-value input,
.detail-field-value textarea,
.detail-field-value select {
  width: 100%;
  background: transparent;
  border: none;
  color: var(--text-primary);
  font-size: 13px;
  outline: none;
}

.detail-field-value textarea {
  min-height: 80px;
  resize: vertical;
}

.detail-editor-wrapper {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.detail-editor-wrapper input,
.detail-editor-wrapper textarea {
  width: 100%;
  background: transparent;
  border: none;
  color: var(--text-primary);
  font-size: 13px;
  outline: none;
}

.detail-editor-actions {
  display: flex;
  justify-content: flex-end;
  gap: 4px;
}

.detail-editor-save,
.detail-editor-cancel {
  padding: 4px 8px;
  border: 1px solid var(--border-primary);
  border-radius: var(--radius-sm);
  background: var(--bg-tertiary);
  color: var(--text-secondary);
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: var(--transition-fast);
}

.detail-editor-save {
  background: var(--success-500);
  border-color: var(--success-500);
  color: white;
}

.detail-editor-save:hover {
  background: var(--success-600);
}

.detail-editor-cancel:hover {
  background: var(--bg-hover);
  color: var(--text-primary);
}

/* Detail Select / Multi-Select Editor */
.detail-select-editor,
.detail-multiselect-editor,
.detail-link-editor {
  display: flex;
  flex-direction: column;
  background: var(--bg-primary);
  border: 1px solid var(--border-color);
  border-radius: var(--radius-md);
  overflow: hidden;
}

.detail-select-search,
.detail-multiselect-search,
.detail-link-search {
  padding: 8px;
  border-bottom: 1px solid var(--border-color);
}

.detail-select-search-input,
.detail-multiselect-search-input,
.detail-link-search-input {
  width: 100%;
  padding: 8px 12px;
  border: 1px solid var(--border-color);
  border-radius: var(--radius-sm);
  font-size: 13px;
  background: var(--bg-primary);
  color: var(--text-primary);
  outline: none;
}

.detail-select-search-input:focus,
.detail-multiselect-search-input:focus,
.detail-link-search-input:focus {
  border-color: var(--primary-500);
}

.detail-select-options,
.detail-multiselect-options,
.detail-link-options {
  max-height: 200px;
  overflow-y: auto;
  padding: 4px;
}

.detail-select-option,
.detail-multiselect-option,
.detail-link-option {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 8px 12px;
  border-radius: var(--radius-sm);
  cursor: pointer;
  transition: var(--transition-fast);
}

.detail-select-option:hover,
.detail-multiselect-option:hover,
.detail-link-option:hover {
  background: var(--bg-tertiary);
}

.detail-select-option.selected,
.detail-multiselect-option.selected,
.detail-link-option.selected {
  background: var(--primary-50);
}

.detail-select-check,
.detail-multiselect-check,
.detail-link-check {
  width: 18px;
  height: 18px;
  display: flex;
  align-items: center;
  justify-content: center;
  color: var(--primary-500);
  font-size: 14px;
}

.detail-link-name {
  font-size: 13px;
  color: var(--text-primary);
}

.detail-select-empty,
.detail-multiselect-empty,
.detail-link-empty {
  padding: 16px;
  text-align: center;
  color: var(--text-muted);
  font-size: 13px;
}

.detail-select-label {
  font-size: 13px;
  color: var(--text-secondary);
}

.detail-multiselect-footer,
.detail-link-footer {
  padding: 8px;
  border-top: 1px solid var(--border-color);
  display: flex;
  justify-content: flex-end;
}

.detail-multiselect-done,
.detail-link-done {
  padding: 6px 14px;
  background: var(--primary-500);
  color: white;
  border: none;
  border-radius: var(--radius-sm);
  font-size: 13px;
  font-weight: 500;
  cursor: pointer;
  transition: var(--transition-fast);
}

.detail-multiselect-done:hover,
.detail-link-done:hover {
  background: var(--primary-600);
}

.detail-link-error {
  padding: 12px;
  color: var(--danger-500);
  font-size: 13px;
  text-align: center;
}

/* URL and Email Input Wrappers */
.detail-url-input-wrapper,
.detail-email-input-wrapper {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 0 8px;
  background: var(--bg-tertiary);
  border: 1px solid var(--border-color);
  border-radius: var(--radius-sm);
}

.detail-url-input-wrapper i,
.detail-email-input-wrapper i {
  color: var(--text-muted);
  font-size: 16px;
}

.detail-url-input,
.detail-email-input {
  flex: 1;
  padding: 8px 0;
  border: none !important;
  background: transparent !important;
}

/* Attachment Editor */
.detail-attachment-editor {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.detail-attachment-list {
  display: flex;
  flex-direction: column;
  gap: 4px;
}

.detail-attachment-item {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 8px 12px;
  background: var(--bg-tertiary);
  border: 1px solid var(--border-color);
  border-radius: var(--radius-sm);
}

.detail-attachment-item i {
  color: var(--text-muted);
  font-size: 16px;
}

.detail-attachment-name {
  flex: 1;
  font-size: 13px;
  color: var(--text-primary);
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.detail-attachment-remove {
  padding: 4px;
  background: transparent;
  border: none;
  color: var(--text-muted);
  cursor: pointer;
  border-radius: var(--radius-sm);
}

.detail-attachment-remove:hover {
  background: var(--danger-50);
  color: var(--danger-500);
}

.detail-attachment-actions {
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: 8px;
}

.detail-attachment-add {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 8px 12px;
  background: var(--bg-tertiary);
  border: 1px dashed var(--border-color);
  border-radius: var(--radius-sm);
  font-size: 13px;
  color: var(--text-muted);
  cursor: pointer;
  transition: var(--transition-fast);
}

.detail-attachment-add:hover {
  border-color: var(--primary-500);
  color: var(--primary-500);
}

.detail-attachment-done {
  padding: 6px 14px;
  background: var(--primary-500);
  color: white;
  border: none;
  border-radius: var(--radius-sm);
  font-size: 13px;
  font-weight: 500;
  cursor: pointer;
  transition: var(--transition-fast);
}

.detail-attachment-done:hover {
  background: var(--primary-600);
}

/* Sort Panel Styles */
.sort-rule {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 8px 0;
  border-bottom: 1px solid var(--border-primary);
}

.sort-rule:last-child {
  border-bottom: none;
}

.sort-field-select,
.sort-direction-select {
  flex: 1;
  padding: 8px 12px;
  background: var(--bg-tertiary);
  border: 1px solid var(--border-primary);
  border-radius: var(--radius-md);
  color: var(--text-primary);
  font-size: 13px;
}

.sort-rule-remove {
  padding: 6px;
  background: transparent;
  border: none;
  color: var(--text-muted);
  cursor: pointer;
  border-radius: var(--radius-sm);
}

.sort-rule-remove:hover {
  background: var(--danger-50);
  color: var(--danger-500);
}

.detail-actions {
  display: flex;
  gap: 8px;
  padding-top: 16px;
  margin-top: 16px;
  border-top: 1px solid var(--border-primary);
}

.detail-action-btn {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 8px 12px;
  background: var(--bg-tertiary);
  border: 1px solid var(--border-primary);
  border-radius: var(--radius-md);
  color: var(--text-secondary);
  font-size: 12px;
  cursor: pointer;
  transition: var(--transition-fast);
}

.detail-action-btn:hover {
  background: var(--bg-hover);
  color: var(--text-primary);
}

.detail-action-btn.danger:hover {
  background: var(--danger-50);
  color: var(--danger-500);
  border-color: var(--danger-500);
}

/* ===== Global Search Enhancement ===== */

.sidebar-search.focused .search-input-wrapper {
  border-color: var(--primary-500);
  box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.15);
}

.search-results-dropdown {
  position: absolute;
  top: 100%;
  left: 0;
  right: 0;
  background: var(--bg-secondary);
  border: 1px solid var(--border-primary);
  border-radius: var(--radius-md);
  margin-top: 4px;
  max-height: 400px;
  overflow-y: auto;
  box-shadow: var(--shadow-lg);
  z-index: 200;
}

.search-results-header {
  padding: 8px 12px;
  font-size: 11px;
  color: var(--text-muted);
  border-bottom: 1px solid var(--border-primary);
  background: var(--bg-tertiary);
}

.search-no-results {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 8px;
  padding: 24px;
  color: var(--text-muted);
}

.search-no-results i {
  font-size: 24px;
}

.search-result-item {
  display: flex;
  align-items: flex-start;
  gap: 10px;
  padding: 10px 12px;
  cursor: pointer;
  transition: var(--transition-fast);
  border-bottom: 1px solid var(--border-primary);
}

.search-result-item:last-child {
  border-bottom: none;
}

.search-result-item:hover {
  background: var(--bg-hover);
}

.search-result-icon {
  color: var(--text-muted);
  font-size: 14px;
  padding-top: 2px;
}

.search-result-content {
  flex: 1;
  display: flex;
  flex-direction: column;
  gap: 2px;
  min-width: 0;
}

.search-result-item .result-title {
  font-size: 13px;
  font-weight: 500;
  color: var(--text-primary);
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.search-result-item .result-context {
  font-size: 12px;
  color: var(--text-secondary);
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.search-result-item .result-field {
  color: var(--text-muted);
  margin-right: 4px;
}

.search-result-item .result-type {
  font-size: 11px;
  color: var(--text-muted);
}

.search-highlight {
  background: rgba(245, 158, 11, 0.3);
  color: var(--warning-500);
  padding: 0 2px;
  border-radius: 2px;
}

.search-highlight-row {
  animation: highlight-pulse 2s ease-out;
}

@keyframes highlight-pulse {
  0% { background-color: rgba(245, 158, 11, 0.3); }
  100% { background-color: transparent; }
}

/* ===== Toast Notifications ===== */

.toast-container {
  position: fixed;
  bottom: 80px;
  right: 20px;
  z-index: 1200;
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.toast {
  position: relative;
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 12px 16px;
  background: var(--bg-secondary);
  border: 1px solid var(--border-primary);
  border-radius: var(--radius-lg);
  box-shadow: var(--shadow-lg);
  animation: toastIn 0.3s ease;
  max-width: 400px;
  overflow: hidden;
}

@keyframes toastIn {
  from {
    opacity: 0;
    transform: translateX(100%);
  }
  to {
    opacity: 1;
    transform: translateX(0);
  }
}

.toast.toast-out {
  animation: toastOut 0.3s ease forwards;
}

@keyframes toastOut {
  from {
    opacity: 1;
    transform: translateX(0);
  }
  to {
    opacity: 0;
    transform: translateX(100%);
  }
}

.toast-icon {
  font-size: 20px;
}

.toast.success .toast-icon { color: var(--success-500); }
.toast.error .toast-icon { color: var(--danger-500); }
.toast.warning .toast-icon { color: var(--warning-500); }
.toast.info .toast-icon { color: var(--info-500); }

.toast-message {
  flex: 1;
  font-size: 13px;
  color: var(--text-primary);
}

.toast-close {
  background: none;
  border: none;
  color: var(--text-muted);
  cursor: pointer;
  padding: 4px;
}

.toast-close:hover {
  color: var(--text-primary);
}

.toast.has-action {
  padding-right: 12px;
}

.toast-action {
  background: rgba(255, 255, 255, 0.15);
  border: 1px solid rgba(255, 255, 255, 0.2);
  color: var(--text-primary);
  font-size: 12px;
  font-weight: 600;
  padding: 4px 12px;
  border-radius: var(--radius-sm);
  cursor: pointer;
  margin-left: 8px;
  transition: var(--transition-fast);
}

.toast-action:hover {
  background: rgba(255, 255, 255, 0.25);
  border-color: rgba(255, 255, 255, 0.3);
}

.toast-progress {
  position: absolute;
  bottom: 0;
  left: 0;
  right: 0;
  height: 3px;
  background: rgba(0, 0, 0, 0.2);
  border-radius: 0 0 var(--radius-lg) var(--radius-lg);
  overflow: hidden;
}

.toast-progress-bar {
  height: 100%;
  background: var(--primary-500);
  width: 100%;
  transform-origin: left;
}

@keyframes toast-countdown {
  from { transform: scaleX(1); }
  to { transform: scaleX(0); }
}

/* ===== Quick Actions Command Palette ===== */

.command-palette-overlay {
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.5);
  backdrop-filter: blur(4px);
  display: flex;
  align-items: flex-start;
  justify-content: center;
  padding-top: 120px;
  z-index: 1100;
}

.command-palette {
  width: 90%;
  max-width: 560px;
  background: var(--bg-secondary);
  border: 1px solid var(--border-primary);
  border-radius: var(--radius-xl);
  box-shadow: var(--shadow-xl);
  overflow: hidden;
}

.command-palette-input {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 16px 20px;
  border-bottom: 1px solid var(--border-primary);
}

.command-palette-input i {
  font-size: 20px;
  color: var(--text-muted);
}

.command-palette-input input {
  flex: 1;
  background: none;
  border: none;
  font-size: 16px;
  color: var(--text-primary);
  outline: none;
}

.command-palette-results {
  max-height: 400px;
  overflow-y: auto;
}

.command-group {
  padding: 8px 0;
}

.command-group-title {
  padding: 8px 20px;
  font-size: 11px;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  color: var(--text-muted);
}

.command-item {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 10px 20px;
  cursor: pointer;
  transition: var(--transition-fast);
}

.command-item:hover,
.command-item.selected {
  background: var(--bg-hover);
}

.command-item i {
  font-size: 16px;
  color: var(--text-muted);
  width: 20px;
  text-align: center;
}

.command-item-title {
  flex: 1;
  font-size: 14px;
  color: var(--text-primary);
}

.command-item-shortcut {
  display: flex;
  gap: 4px;
}

.command-item-shortcut kbd {
  padding: 2px 6px;
  background: var(--bg-tertiary);
  border: 1px solid var(--border-secondary);
  border-radius: var(--radius-sm);
  font-family: var(--font-mono);
  font-size: 10px;
}

/* ===== Responsive for New Components ===== */

@media (max-width: 768px) {
  .shortcuts-modal-body {
    grid-template-columns: 1fr;
  }

  .filter-panel,
  .sort-panel,
  .fields-panel {
    width: calc(100% - 32px);
    left: 16px;
    right: 16px;
  }

  .bulk-action-btn span {
    display: none;
  }
}

/* ===== Browser-Style Tab Bar ===== */

.tab-bar {
  display: flex;
  align-items: stretch;
  background: var(--bg-tertiary);
  border-bottom: 1px solid var(--border-primary);
  height: 38px;
  padding: 0 4px;
  gap: 2px;
  position: relative;
  user-select: none;
}

.tab-bar::before {
  content: '';
  position: absolute;
  bottom: 0;
  left: 0;
  right: 0;
  height: 1px;
  background: var(--border-primary);
}

.tab-bar-scroll-left,
.tab-bar-scroll-right {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 24px;
  color: var(--text-muted);
  cursor: pointer;
  transition: var(--transition-fast);
  flex-shrink: 0;
}

.tab-bar-scroll-left:hover,
.tab-bar-scroll-right:hover {
  color: var(--text-primary);
  background: var(--bg-hover);
}

.tab-bar-tabs {
  display: flex;
  align-items: flex-end;
  flex: 1;
  overflow-x: auto;
  overflow-y: hidden;
  scrollbar-width: none;
  gap: 1px;
  padding-top: 6px;
}

.tab-bar-tabs::-webkit-scrollbar {
  display: none;
}

/* Individual Tab */
.browser-tab {
  display: flex;
  align-items: center;
  gap: 8px;
  min-width: 120px;
  max-width: 240px;
  height: 32px;
  padding: 0 12px;
  background: var(--bg-secondary);
  border: 1px solid var(--border-primary);
  border-bottom: none;
  border-radius: var(--radius-md) var(--radius-md) 0 0;
  color: var(--text-secondary);
  font-size: 13px;
  cursor: pointer;
  position: relative;
  transition: var(--transition-fast);
  flex-shrink: 0;
}

.browser-tab:hover {
  background: var(--bg-elevated);
  color: var(--text-primary);
}

.browser-tab:hover .tab-close {
  opacity: 1;
}

.browser-tab.active {
  background: var(--bg-primary);
  color: var(--text-primary);
  border-color: var(--primary-500);
  border-top-width: 2px;
  z-index: 1;
  font-weight: 600;
  box-shadow: inset 0 2px 0 0 var(--primary-500);
}

.browser-tab.active::after {
  content: '';
  position: absolute;
  bottom: -1px;
  left: 0;
  right: 0;
  height: 2px;
  background: var(--bg-primary);
}

/* Tab connection curves (browser-like) */
.browser-tab::before,
.browser-tab::after {
  content: '';
  position: absolute;
  bottom: 0;
  width: 8px;
  height: 8px;
}

.browser-tab.active::before {
  left: -8px;
  background: radial-gradient(circle at 0 0, transparent 8px, var(--bg-primary) 8px);
}

.browser-tab.active .tab-curve-right {
  position: absolute;
  right: -8px;
  bottom: 0;
  width: 8px;
  height: 8px;
  background: radial-gradient(circle at 100% 0, transparent 8px, var(--bg-primary) 8px);
}

/* Tab Icon */
.tab-icon {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 16px;
  height: 16px;
  font-size: 14px;
  color: var(--meant-color);
  flex-shrink: 0;
}

.browser-tab.active .tab-icon {
  color: var(--primary-500);
}

/* Tab Title */
.tab-title {
  flex: 1;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  font-weight: 500;
}

/* Tab Close Button */
.tab-close {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 18px;
  height: 18px;
  border-radius: var(--radius-sm);
  color: var(--text-muted);
  opacity: 0;
  transition: var(--transition-fast);
  flex-shrink: 0;
  cursor: pointer;
}

.tab-close:hover {
  background: var(--bg-hover);
  color: var(--text-primary);
}

.tab-close:active {
  background: var(--danger-500);
  color: white;
}

/* Tab record count badge (for Sets) */
.tab-count {
  font-size: 11px;
  color: var(--text-muted);
  background: var(--bg-tertiary);
  padding: 1px 6px;
  border-radius: var(--radius-sm);
  margin-left: 4px;
  flex-shrink: 0;
}

.browser-tab.active .tab-count {
  background: var(--bg-secondary);
  color: var(--text-secondary);
}

.browser-tab.active .tab-close {
  opacity: 0.7;
}

.browser-tab.active .tab-close:hover {
  opacity: 1;
  color: var(--text-primary);
}

/* Tab Modified Indicator */
.tab-modified {
  width: 8px;
  height: 8px;
  background: var(--warning-500);
  border-radius: 50%;
  flex-shrink: 0;
  display: none;
}

.browser-tab.modified .tab-modified {
  display: block;
}

.browser-tab.modified .tab-close {
  display: none;
}

.browser-tab.modified:hover .tab-modified {
  display: none;
}

.browser-tab.modified:hover .tab-close {
  display: flex;
}

/* New Tab Button */
.tab-bar-new-tab {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 28px;
  height: 28px;
  margin: auto 4px;
  background: transparent;
  border: none;
  border-radius: var(--radius-md);
  color: var(--text-muted);
  cursor: pointer;
  transition: var(--transition-fast);
  flex-shrink: 0;
}

.tab-bar-new-tab:hover {
  background: var(--bg-hover);
  color: var(--text-primary);
}

.tab-bar-new-tab:active {
  background: var(--bg-active);
}

/* Tab Bar Actions */
.tab-bar-actions {
  display: flex;
  align-items: center;
  gap: 4px;
  padding-right: 8px;
  margin-left: auto;
}

.tab-bar-action-btn {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 24px;
  height: 24px;
  margin: auto 0;
  background: transparent;
  border: none;
  border-radius: var(--radius-sm);
  color: var(--text-muted);
  cursor: pointer;
  transition: var(--transition-fast);
}

.tab-bar-action-btn:hover {
  background: var(--bg-hover);
  color: var(--text-primary);
}

/* Tab List Dropdown */
.tab-list-dropdown {
  position: absolute;
  top: 100%;
  right: 8px;
  width: 280px;
  max-height: 400px;
  background: var(--bg-secondary);
  border: 1px solid var(--border-primary);
  border-radius: var(--radius-lg);
  box-shadow: var(--shadow-lg);
  overflow: hidden;
  z-index: 200;
  animation: dropdownIn 0.15s ease;
}

@keyframes dropdownIn {
  from {
    opacity: 0;
    transform: translateY(-8px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.tab-list-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 12px 16px;
  border-bottom: 1px solid var(--border-primary);
}

.tab-list-header h4 {
  font-size: 13px;
  font-weight: 600;
  color: var(--text-primary);
}

.tab-list-header span {
  font-size: 12px;
  color: var(--text-muted);
}

.tab-list-body {
  overflow-y: auto;
  max-height: 320px;
}

.tab-list-section {
  padding: 8px 0;
}

.tab-list-section-title {
  padding: 4px 16px 8px;
  font-size: 11px;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  color: var(--text-muted);
}

.tab-list-item {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 8px 16px;
  cursor: pointer;
  transition: var(--transition-fast);
}

.tab-list-item:hover {
  background: var(--bg-hover);
}

.tab-list-item.active {
  background: var(--primary-500);
  color: white;
}

.tab-list-item-icon {
  width: 16px;
  height: 16px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 14px;
  color: var(--meant-color);
}

.tab-list-item.active .tab-list-item-icon {
  color: rgba(255, 255, 255, 0.8);
}

.tab-list-item-title {
  flex: 1;
  font-size: 13px;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.tab-list-item-toss {
  width: 20px;
  height: 20px;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: var(--radius-sm);
  color: var(--text-muted);
  opacity: 0;
  transition: var(--transition-fast);
  cursor: pointer;
}

.tab-list-item:hover .tab-list-item-toss {
  opacity: 1;
}

.tab-list-item-toss:hover {
  background: rgba(255, 255, 255, 0.1);
  color: var(--warning-500);
}

.tab-list-item.active .tab-list-item-toss:hover {
  background: rgba(255, 255, 255, 0.2);
  color: var(--warning-400);
}

/* Tossed Pile Section */
.tab-list-section.tossed-pile .tab-list-section-title {
  display: flex;
  align-items: center;
  gap: 6px;
  color: var(--warning-400);
}

.tab-list-section.tossed-pile .tab-list-item {
  color: var(--text-muted);
}

.tab-list-section.tossed-pile .tab-list-item-icon {
  color: var(--text-muted);
}

.tab-list-section.tossed-pile .tab-list-item:hover {
  color: var(--text-primary);
  background: rgba(var(--warning-500-rgb), 0.1);
}

.tab-list-section.tossed-pile .tab-list-item:hover .tab-list-item-icon {
  color: var(--warning-400);
}

.tab-list-item-hint {
  font-size: 10px;
  color: var(--text-muted);
  margin-left: auto;
  opacity: 0;
  transition: var(--transition-fast);
}

.tab-list-item:hover .tab-list-item-hint {
  opacity: 1;
}

/* Tab Context Menu */
.tab-context-menu {
  position: fixed;
  min-width: 200px;
  background: var(--bg-secondary);
  border: 1px solid var(--border-primary);
  border-radius: var(--radius-lg);
  box-shadow: var(--shadow-lg);
  padding: 6px 0;
  z-index: 1000;
  animation: contextMenuIn 0.1s ease;
}

@keyframes contextMenuIn {
  from {
    opacity: 0;
    transform: scale(0.95);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}

.tab-context-item {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 8px 14px;
  font-size: 13px;
  color: var(--text-secondary);
  cursor: pointer;
  transition: var(--transition-fast);
  white-space: nowrap;
}

.tab-context-item:hover {
  background: var(--bg-hover);
  color: var(--text-primary);
}

.tab-context-item.danger {
  color: var(--danger-500);
}

.tab-context-item.danger:hover {
  background: var(--danger-50);
}

.tab-context-item.disabled {
  color: var(--text-disabled);
  cursor: not-allowed;
  pointer-events: none;
  opacity: 0.5;
}

.tab-context-item i {
  width: 16px;
  font-size: 14px;
}

.tab-context-item .shortcut {
  margin-left: auto;
  font-size: 11px;
  color: var(--text-muted);
  font-family: var(--font-mono);
}

.tab-context-separator {
  height: 1px;
  background: var(--border-primary);
  margin: 6px 0;
}

/* Tab Drag & Drop */
.browser-tab.dragging {
  opacity: 0.5;
  cursor: grabbing;
}

.browser-tab.drag-over {
  border-left: 2px solid var(--primary-500);
}

.browser-tab.drag-over-right {
  border-right: 2px solid var(--primary-500);
}

/* Tab Loading State */
.browser-tab.loading .tab-icon i {
  animation: tabLoading 1s linear infinite;
}

@keyframes tabLoading {
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
}

/* Tab Pinned State */
.browser-tab.pinned {
  min-width: 40px;
  max-width: 40px;
  padding: 0;
  justify-content: center;
}

.browser-tab.pinned .tab-title,
.browser-tab.pinned .tab-close {
  display: none;
}

.browser-tab.pinned .tab-icon {
  margin: 0;
}

/* Dark mode: Active tab should be lighter to stand out */
html:not(.light-theme) .browser-tab {
  background: var(--bg-primary);
}

html:not(.light-theme) .browser-tab:hover {
  background: var(--bg-secondary);
}

html:not(.light-theme) .browser-tab.active {
  background: var(--bg-tertiary);
  border-color: var(--primary-500);
  box-shadow: inset 0 2px 0 0 var(--primary-500);
}

html:not(.light-theme) .browser-tab.active::after {
  background: var(--bg-tertiary);
}

html:not(.light-theme) .browser-tab.active::before {
  background: radial-gradient(circle at 0 0, transparent 8px, var(--bg-tertiary) 8px);
}

html:not(.light-theme) .browser-tab.active .tab-curve-right {
  background: radial-gradient(circle at 100% 0, transparent 8px, var(--bg-tertiary) 8px);
}

/* Tab Badge (for notifications/counts) */
.tab-badge {
  position: absolute;
  top: 4px;
  right: 8px;
  min-width: 16px;
  height: 16px;
  padding: 0 4px;
  background: var(--danger-500);
  color: white;
  font-size: 10px;
  font-weight: 600;
  border-radius: 8px;
  display: flex;
  align-items: center;
  justify-content: center;
}

/* Responsive Tab Bar */
@media (max-width: 768px) {
  .tab-bar {
    height: 34px;
  }

  .browser-tab {
    min-width: 100px;
    max-width: 160px;
    height: 28px;
    padding: 0 8px;
    font-size: 12px;
  }

  .tab-icon {
    width: 14px;
    height: 14px;
    font-size: 12px;
  }

  .tab-close {
    width: 16px;
    height: 16px;
  }

  .tab-bar-new-tab {
    width: 24px;
    height: 24px;
  }
}

/* ===== View Disclosure Panel ===== */
/* DEPRECATED: Views now shown in sidebar only (Airtable-style) */

.view-disclosure {
  display: none !important; /* Hidden - views are in sidebar */
  background: var(--bg-secondary);
  border-bottom: 1px solid var(--border-primary);
  transition: var(--transition-fast);
}

.view-disclosure.collapsed .view-disclosure-content {
  display: none;
}

.view-disclosure.collapsed .view-disclosure-toggle i {
  transform: rotate(-90deg);
}

.view-disclosure-header {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 8px 16px;
  cursor: pointer;
  user-select: none;
  transition: var(--transition-fast);
}

.view-disclosure-header:hover {
  background: var(--bg-hover);
}

.view-disclosure-toggle {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 20px;
  height: 20px;
  background: transparent;
  border: none;
  color: var(--text-muted);
  cursor: pointer;
  border-radius: var(--radius-sm);
  transition: var(--transition-fast);
}

.view-disclosure-toggle:hover {
  background: var(--bg-hover);
  color: var(--text-primary);
}

.view-disclosure-toggle i {
  font-size: 14px;
  transition: transform 0.15s ease;
}

.view-disclosure-title {
  display: flex;
  align-items: center;
  gap: 6px;
  font-size: 12px;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  color: var(--text-muted);
}

.view-disclosure-title i {
  color: var(--meant-color);
  font-size: 14px;
}

.view-disclosure-count {
  font-size: 11px;
  color: var(--text-muted);
  background: var(--bg-tertiary);
  padding: 2px 8px;
  border-radius: 10px;
}

.view-disclosure-add {
  margin-left: auto;
  display: flex;
  align-items: center;
  justify-content: center;
  width: 24px;
  height: 24px;
  background: transparent;
  border: none;
  color: var(--text-muted);
  cursor: pointer;
  border-radius: var(--radius-sm);
  transition: var(--transition-fast);
}

.view-disclosure-add:hover {
  background: var(--primary-500);
  color: white;
}

.view-disclosure-content {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
  padding: 0 16px 12px 44px;
  animation: disclosureSlideDown 0.15s ease;
}

@keyframes disclosureSlideDown {
  from {
    opacity: 0;
    transform: translateY(-4px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.view-disclosure-item {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 6px 12px;
  background: var(--bg-tertiary);
  border: 1px solid var(--border-primary);
  border-radius: var(--radius-md);
  font-size: 13px;
  color: var(--text-secondary);
  cursor: pointer;
  transition: var(--transition-fast);
}

.view-disclosure-item:hover {
  background: var(--bg-hover);
  border-color: var(--primary-300);
  color: var(--text-primary);
}

.view-disclosure-item.active {
  background: var(--primary-500);
  border-color: var(--primary-500);
  color: white;
}

.view-disclosure-item i {
  font-size: 14px;
}

.view-disclosure-item.active i {
  color: rgba(255, 255, 255, 0.8);
}

.view-disclosure-item-badge {
  font-size: 10px;
  padding: 1px 4px;
  border-radius: 4px;
  background: rgba(255, 255, 255, 0.15);
}

.view-disclosure-item:not(.active) .view-disclosure-item-badge {
  background: var(--bg-secondary);
  color: var(--text-muted);
}

.view-disclosure-empty {
  color: var(--text-muted);
  font-size: 12px;
  font-style: italic;
}

/* View Type Grid for Create View Modal */
.create-view-form .view-type-grid {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 8px;
  margin-top: 8px;
}

.view-type-option {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 4px;
  padding: 12px 8px;
  background: var(--bg-tertiary);
  border: 2px solid var(--border-primary);
  border-radius: var(--radius-md);
  cursor: pointer;
  transition: var(--transition-fast);
  text-align: center;
}

.view-type-option:hover {
  border-color: var(--primary-300);
  background: var(--bg-hover);
}

.view-type-option.selected {
  border-color: var(--primary-500);
  background: rgba(var(--primary-500-rgb), 0.1);
}

.view-type-option i {
  font-size: 24px;
  color: var(--meant-color);
}

.view-type-option.selected i {
  color: var(--primary-500);
}

.view-type-name {
  font-size: 12px;
  font-weight: 600;
  color: var(--text-primary);
}

.view-type-desc {
  font-size: 10px;
  color: var(--text-muted);
  line-height: 1.3;
}

/* ===== Provenance Styles ===== */

/* Provenance column in table */
.col-provenance {
  width: 32px;
  min-width: 32px;
  max-width: 32px;
  text-align: center;
  cursor: pointer;
  font-size: 14px;
}

.col-provenance:hover {
  background: var(--bg-hover);
}

/* Provenance status indicators */
.prov-full {
  color: var(--success-500);
}

.prov-partial {
  color: var(--warning-500);
}

.prov-none {
  color: var(--text-muted);
  opacity: 0.5;
}

/* Provenance indicator with title */
.provenance-indicator {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  cursor: help;
}

/* Provenance section in detail panel */
.provenance-section {
  background: var(--bg-secondary);
  border-radius: 8px;
  padding: 12px;
  margin-top: 16px;
}

.provenance-header {
  display: flex;
  align-items: center;
  gap: 8px;
  margin-bottom: 12px;
}

.provenance-grid {
  display: grid;
  gap: 8px;
}

.provenance-field {
  display: flex;
  align-items: flex-start;
  gap: 8px;
  padding: 4px 0;
}

.provenance-field i {
  color: var(--text-muted);
  margin-top: 2px;
  flex-shrink: 0;
}

.provenance-value {
  font-size: 12px;
  cursor: pointer;
  padding: 2px 4px;
  border-radius: 4px;
  transition: background 0.15s;
}

.provenance-value:hover {
  background: var(--bg-hover);
}

.provenance-value.editing {
  background: var(--bg-tertiary);
  padding: 8px;
  border-radius: 6px;
}

/* Provenance reference link */
.prov-ref {
  display: inline-flex;
  align-items: center;
  gap: 4px;
  color: var(--primary-400);
  cursor: pointer;
}

.prov-ref:hover {
  color: var(--primary-300);
  text-decoration: underline;
}

.prov-ref i {
  font-size: 10px;
}

/* Provenance editor */
.prov-editor {
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.prov-editor-tabs {
  display: flex;
  gap: 4px;
  margin-bottom: 4px;
}

.prov-tab {
  padding: 2px 8px;
  font-size: 10px;
  border-radius: 3px;
  border: 1px solid var(--border-primary);
  background: transparent;
  color: var(--text-muted);
  cursor: pointer;
  transition: all 0.15s;
}

.prov-tab:hover {
  background: var(--bg-hover);
}

.prov-tab.active {
  background: var(--primary-500);
  color: white;
  border-color: var(--primary-500);
}

.prov-input {
  padding: 4px 8px;
  font-size: 12px;
  border: 1px solid var(--border-primary);
  border-radius: 4px;
  width: 100%;
  background: var(--bg-primary);
  color: var(--text-primary);
}

.prov-input:focus {
  outline: none;
  border-color: var(--primary-500);
}

.prov-editor-actions {
  display: flex;
  gap: 4px;
  justify-content: flex-end;
}

.prov-cancel,
.prov-save {
  padding: 2px 8px;
  font-size: 11px;
  border-radius: 3px;
  cursor: pointer;
  transition: all 0.15s;
}

.prov-cancel {
  border: 1px solid var(--border-primary);
  background: transparent;
  color: var(--text-secondary);
}

.prov-cancel:hover {
  background: var(--bg-hover);
}

.prov-save {
  border: none;
  background: var(--primary-500);
  color: white;
}

.prov-save:hover {
  background: var(--primary-600);
}

/* Provenance indicator in row */
td.col-provenance {
  transition: background 0.15s;
}

td.col-provenance:hover {
  background: var(--bg-active);
}

/* Inherited value styling */
.provenance-field .inherited {
  opacity: 0.7;
  font-style: italic;
}

/* ===== Pick Up Indicator ===== */
/* Shows when user has "picked up" data they're carrying */

.picked-up-indicator {
  position: fixed;
  bottom: 20px;
  left: 50%;
  transform: translateX(-50%);
  z-index: 10000;
  pointer-events: auto;
}

.picked-up-content {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 10px 16px;
  background: linear-gradient(135deg, var(--primary-600), var(--primary-700));
  color: white;
  border-radius: var(--radius-lg);
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.25), 0 0 0 1px rgba(255, 255, 255, 0.1) inset;
  font-size: 13px;
  font-weight: 500;
  animation: picked-up-bounce 0.4s ease-out;
}

@keyframes picked-up-bounce {
  0% {
    transform: translateX(-50%) translateY(20px);
    opacity: 0;
  }
  50% {
    transform: translateX(-50%) translateY(-5px);
  }
  100% {
    transform: translateX(-50%) translateY(0);
    opacity: 1;
  }
}

.picked-up-content i {
  font-size: 18px;
  color: rgba(255, 255, 255, 0.9);
}

.picked-up-drop {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 22px;
  height: 22px;
  margin-left: 6px;
  background: rgba(255, 255, 255, 0.15);
  border: none;
  border-radius: var(--radius-sm);
  color: rgba(255, 255, 255, 0.8);
  cursor: pointer;
  transition: var(--transition-fast);
}

.picked-up-drop:hover {
  background: rgba(255, 255, 255, 0.25);
  color: white;
}

.picked-up-drop i {
  font-size: 12px;
}

/* Grabbable elements highlight when something is picked up */
body.has-picked-up .cell:hover,
body.has-picked-up .record-row:hover,
body.has-picked-up .browser-tab:hover {
  outline: 2px dashed var(--primary-400);
  outline-offset: -2px;
}

/* ===== Data Import Landing Page ===== */
/* Shown when no data exists */

.data-import-landing {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  min-height: 60vh;
  padding: 48px 24px;
  gap: 32px;
}

.import-section {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 24px;
  max-width: 400px;
  width: 100%;
}

/* Secondary Import Section */
.import-section-secondary {
  flex-direction: row;
  gap: 12px;
}

.import-section-secondary .btn {
  flex: 1;
}

/* ===== Loading Overlay ===== */

.loading-overlay {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: var(--bg-primary);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 100;
}

.loading-content {
  text-align: center;
  max-width: 400px;
  padding: 24px;
}

.loading-spinner {
  font-size: 48px;
  color: var(--primary);
  margin-bottom: 16px;
}

.loading-spinner .ph-spin {
  animation: spin 1s linear infinite;
}

@keyframes spin {
  from { transform: rotate(0deg); }
  to { transform: rotate(360deg); }
}

.loading-text {
  font-size: 16px;
  font-weight: 500;
  color: var(--text-primary);
  margin: 0 0 16px 0;
}

.loading-progress-container {
  height: 8px;
  background: var(--bg-tertiary);
  border-radius: 4px;
  overflow: hidden;
  margin-bottom: 12px;
}

.loading-progress-bar {
  height: 100%;
  background: var(--primary);
  border-radius: 4px;
  transition: width 0.3s ease;
}

.loading-progress-text {
  font-size: 13px;
  color: var(--text-muted);
  margin: 0;
}

/* ===== Load More Styles ===== */

.load-more-row {
  background: var(--bg-secondary);
}

.load-more-cell {
  text-align: center;
  padding: 16px !important;
}

.load-more-btn,
.load-all-btn {
  display: inline-flex;
  align-items: center;
  gap: 8px;
  padding: 10px 20px;
  background: var(--bg-tertiary);
  border: 1px solid var(--border-primary);
  border-radius: var(--radius-md);
  color: var(--text-primary);
  font-size: 13px;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.2s ease;
  margin: 0 6px;
}

.load-more-btn:hover,
.load-all-btn:hover {
  background: var(--bg-hover);
  border-color: var(--primary-500);
}

.load-more-btn i,
.load-all-btn i {
  font-size: 16px;
}

.load-more-remaining {
  color: var(--text-muted);
  font-weight: 400;
}

/* Cards Load More */
.cards-load-more {
  grid-column: 1 / -1;
  display: flex;
  justify-content: center;
  gap: 12px;
  padding: 24px;
  background: var(--bg-secondary);
  border-radius: var(--radius-lg);
  margin-top: 16px;
}

/* ===== Graph Loading ===== */

.graph-loading {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: var(--bg-primary);
  display: none;
  align-items: center;
  justify-content: center;
  z-index: 10;
}

.graph-loading-content {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 12px;
  color: var(--text-muted);
  font-size: 14px;
}

.graph-loading-content i {
  font-size: 36px;
  color: var(--primary);
}

.graph-loading-content .ph-spin {
  animation: spin 1s linear infinite;
}

/* ===== Operator Efficiency Architecture Styles ===== */

/* Operator Badges (Mini) */
.op-badge-mini {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 18px;
  height: 18px;
  font-size: 12px;
  font-weight: 600;
  border-radius: 4px;
  margin-right: 6px;
  flex-shrink: 0;
}

.op-badge-mini.op-purple {
  background: rgba(139, 92, 246, 0.15);
  color: #a78bfa;
  border: 1px solid rgba(139, 92, 246, 0.3);
}

.op-badge-mini.op-blue {
  background: rgba(59, 130, 246, 0.15);
  color: #60a5fa;
  border: 1px solid rgba(59, 130, 246, 0.3);
}

.op-badge-mini.op-green {
  background: rgba(16, 185, 129, 0.15);
  color: #34d399;
  border: 1px solid rgba(16, 185, 129, 0.3);
}

.op-badge-mini.op-orange {
  background: rgba(249, 115, 22, 0.15);
  color: #fb923c;
  border: 1px solid rgba(249, 115, 22, 0.3);
}

.op-badge-mini.op-gray {
  background: rgba(156, 163, 175, 0.1);
  color: #9ca3af;
  border: 1px solid rgba(156, 163, 175, 0.2);
}

/* Set Item Styling */
.set-item {
  display: flex;
  align-items: center;
  gap: 6px;
}

.set-item .set-name {
  flex: 1;
  min-width: 0;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

/* Stability Levels */
.stability-holon {
  /* Stable - no special styling */
}

.stability-protogon {
  opacity: 0.9;
}

.stability-protogon::before {
  content: '';
  position: absolute;
  left: 0;
  top: 50%;
  transform: translateY(-50%);
  width: 3px;
  height: 12px;
  background: var(--warning-500);
  border-radius: 2px;
}

.stability-emanon {
  opacity: 0.7;
  font-style: italic;
}

/* Source Item Styling */
.source-item {
  display: flex;
  align-items: center;
  gap: 8px;
}

.source-item .source-info {
  display: flex;
  flex-direction: column;
  flex: 1;
  min-width: 0;
}

.source-item .source-name {
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.source-item .source-meta-inline {
  font-size: 11px;
  color: var(--text-muted);
}

.source-item.highlighted {
  outline: 2px solid var(--primary-500);
  background: var(--bg-active);
  animation: highlight-pulse 0.5s ease-out;
}

@keyframes highlight-pulse {
  0% { transform: scale(1.02); }
  100% { transform: scale(1); }
}

.source-provenance-badge {
  font-size: 10px;
  color: var(--given-color);
  margin-left: auto;
  margin-right: 4px;
}

/* Definition Item Styling */
.definition-item {
  display: flex;
  align-items: center;
  gap: 8px;
}

.definition-item .definition-info {
  display: flex;
  flex-direction: column;
  flex: 1;
  min-width: 0;
}

.definition-item .definition-name {
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.definition-item .definition-meta-inline {
  font-size: 11px;
  color: var(--text-muted);
}

.definition-item.active {
  background: var(--bg-active);
}

.definition-item.active .definition-name {
  color: var(--primary-500);
}

.definition-item.active .definition-meta-inline {
  color: var(--text-secondary);
}

.definition-source-badge {
  font-size: 10px;
  color: rgb(168, 85, 247);
  margin-left: auto;
  margin-right: 4px;
}

.definition-source-badge i {
  font-size: 12px;
}

/* ===== Definition as Linked Glossary ===== */
.definition-glossary-item {
  display: flex;
  flex-direction: column;
  padding: 10px 12px;
  border-radius: var(--radius-md);
  background: var(--bg-secondary);
  border-left: 3px solid rgb(168, 85, 247);
  margin-bottom: 8px;
  transition: all var(--transition-fast);
}

.definition-glossary-item:hover {
  background: var(--bg-tertiary);
}

.definition-glossary-header {
  display: flex;
  align-items: center;
  gap: 8px;
}

.definition-glossary-icon {
  font-size: 16px;
  color: rgb(168, 85, 247);
}

.definition-glossary-name {
  font-weight: 600;
  font-size: 13px;
  flex: 1;
}

.definition-glossary-uri {
  display: flex;
  align-items: center;
  gap: 4px;
  font-size: 10px;
  color: var(--text-muted);
  margin-top: 4px;
  padding-left: 24px;
}

.definition-glossary-uri i {
  font-size: 10px;
}

.definition-glossary-uri a {
  color: var(--primary-500);
  text-decoration: none;
}

.definition-glossary-uri a:hover {
  text-decoration: underline;
}

.definition-glossary-usage {
  display: flex;
  flex-wrap: wrap;
  gap: 4px;
  margin-top: 8px;
  padding-left: 24px;
}

.definition-usage-badge {
  display: inline-flex;
  align-items: center;
  gap: 3px;
  font-size: 9px;
  padding: 2px 6px;
  background: rgba(59, 130, 246, 0.1);
  color: var(--primary-500);
  border-radius: 3px;
}

.definition-usage-badge i {
  font-size: 9px;
}

/* ===== Schema Tabs (Structure & Meaning) ===== */
.schema-tabs {
  display: flex;
  border-bottom: 1px solid var(--border-primary);
  background: var(--bg-secondary);
}

.schema-tab {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 10px 16px;
  font-size: 13px;
  color: var(--text-muted);
  background: none;
  border: none;
  border-bottom: 2px solid transparent;
  cursor: pointer;
  transition: all var(--transition-fast);
}

.schema-tab:hover {
  color: var(--text-primary);
  background: var(--bg-hover);
}

.schema-tab.active {
  color: var(--text-primary);
  font-weight: 500;
  border-bottom-color: var(--primary-500);
}

.schema-tab i {
  font-size: 14px;
}

.schema-tab.structure {
  border-bottom-color: transparent;
}

.schema-tab.structure.active {
  border-bottom-color: var(--given-color);
}

.schema-tab.structure.active i {
  color: var(--given-color);
}

.schema-tab.meaning {
  border-bottom-color: transparent;
}

.schema-tab.meaning.active {
  border-bottom-color: var(--meant-color);
}

.schema-tab.meaning.active i {
  color: var(--meant-color);
}

.schema-tab-content {
  padding: 16px;
}

.schema-tab-content.hidden {
  display: none;
}

/* Structure tab content */
.schema-structure-list {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.schema-structure-field {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 10px 12px;
  background: var(--bg-secondary);
  border-radius: var(--radius-md);
  border-left: 3px solid var(--given-border);
}

.schema-structure-field .field-name {
  font-weight: 500;
  flex: 1;
}

.schema-structure-field .field-type {
  font-size: 11px;
  padding: 2px 6px;
  border-radius: 3px;
  background: var(--bg-tertiary);
  color: var(--text-muted);
}

.schema-structure-field .field-source {
  font-size: 10px;
  color: var(--given-color);
}

/* Meaning tab content */
.schema-meaning-list {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.schema-meaning-field {
  display: flex;
  flex-direction: column;
  gap: 6px;
  padding: 10px 12px;
  background: var(--bg-secondary);
  border-radius: var(--radius-md);
  border-left: 3px solid var(--meant-border);
}

.schema-meaning-field .field-header {
  display: flex;
  align-items: center;
  gap: 8px;
}

.schema-meaning-field .field-name {
  font-weight: 500;
}

.schema-meaning-field .field-definition-link {
  display: flex;
  align-items: center;
  gap: 4px;
  font-size: 11px;
  color: rgb(168, 85, 247);
}

.schema-meaning-field .field-definition-link i {
  font-size: 10px;
}

.schema-meaning-field .field-explanation {
  font-size: 12px;
  color: var(--text-secondary);
  padding-left: 8px;
  border-left: 2px solid var(--border-primary);
}

/* ===== Null Source Indicator ===== */
.null-source-indicator {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 10px 14px;
  background: linear-gradient(90deg, var(--given-bg) 0%, transparent 100%);
  border-left: 3px solid var(--given-color);
  font-size: 12px;
  margin-bottom: 12px;
}

.null-source-indicator i {
  font-size: 14px;
  color: var(--given-color);
}

.null-source-indicator .null-source-label {
  color: var(--given-color);
  font-weight: 600;
}

.null-source-indicator .null-source-hint {
  color: var(--text-muted);
  font-size: 11px;
}

/* Definition Detail View */
/* Definitions Table View */
.definitions-table-view {
  padding: 24px;
  max-width: 1200px;
}

.definitions-table-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 24px;
}

.definitions-table-title {
  display: flex;
  align-items: center;
  gap: 12px;
}

.definitions-table-title i {
  font-size: 24px;
  color: rgb(168, 85, 247);
}

.definitions-table-title h2 {
  margin: 0;
  font-size: 1.5rem;
  font-weight: 600;
}

.definitions-count {
  font-size: 13px;
  color: var(--text-muted);
  background: var(--bg-secondary);
  padding: 4px 10px;
  border-radius: 12px;
}

.definitions-table-container {
  border: 1px solid var(--border-color);
  border-radius: var(--radius);
  overflow: hidden;
}

.definitions-data-table {
  width: 100%;
}

.definitions-data-table tbody tr {
  cursor: pointer;
  transition: background-color 0.15s;
}

.definitions-data-table tbody tr:hover {
  background: var(--bg-hover);
}

.definition-name-content {
  display: flex;
  align-items: center;
  gap: 8px;
}

.definition-name-content i {
  font-size: 16px;
  color: rgb(168, 85, 247);
}

.definition-name {
  font-weight: 500;
}

.term-count-badge {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  min-width: 28px;
  padding: 2px 8px;
  font-size: 12px;
  font-weight: 500;
  background: var(--bg-secondary);
  border-radius: 12px;
  color: var(--text-secondary);
}

.source-link {
  display: inline-flex;
  align-items: center;
  gap: 4px;
  color: var(--text-secondary);
  text-decoration: none;
  font-size: 13px;
  transition: color 0.15s;
}

.source-link:hover {
  color: var(--primary-500);
}

.source-link i {
  font-size: 12px;
  opacity: 0.7;
}

.source-local {
  color: var(--text-muted);
  font-size: 13px;
}

.linked-fields-badges {
  display: flex;
  flex-wrap: wrap;
  gap: 4px;
}

.linked-field-badge {
  font-size: 11px;
  padding: 2px 6px;
  background: rgba(168, 85, 247, 0.1);
  color: rgb(168, 85, 247);
  border-radius: 4px;
}

.linked-more {
  font-size: 11px;
  color: var(--text-muted);
  padding: 2px 6px;
}

.no-links {
  color: var(--text-muted);
}

.import-date {
  font-size: 13px;
  color: var(--text-muted);
}

.definition-actions-cell {
  display: flex;
  gap: 4px;
  justify-content: flex-end;
}

.btn-icon {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 28px;
  height: 28px;
  border: none;
  background: transparent;
  color: var(--text-muted);
  border-radius: var(--radius-sm);
  cursor: pointer;
  transition: all 0.15s;
}

.btn-icon:hover {
  background: var(--bg-secondary);
  color: var(--text-primary);
}

.btn-icon.btn-delete-definition:hover {
  background: rgba(239, 68, 68, 0.1);
  color: rgb(239, 68, 68);
}

.definitions-empty-state {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 64px 24px;
  text-align: center;
  background: var(--bg-secondary);
  border-radius: var(--radius);
}

.definitions-empty-state i {
  font-size: 48px;
  color: var(--text-muted);
  margin-bottom: 16px;
}

.definitions-empty-state h3 {
  margin: 0 0 8px 0;
  font-size: 1.125rem;
  font-weight: 600;
}

.definitions-empty-state p {
  margin: 0 0 16px 0;
  color: var(--text-muted);
}

.definition-detail-view {
  padding: 24px;
  max-width: 1000px;
}

.definition-detail-header {
  margin-bottom: 24px;
}

.definition-detail-title {
  display: flex;
  align-items: center;
  gap: 12px;
  margin-bottom: 12px;
}

.definition-detail-title i {
  font-size: 24px;
  color: rgb(168, 85, 247);
}

.definition-detail-title h2 {
  margin: 0;
  font-size: 1.5rem;
  font-weight: 600;
}

.definition-uri-link {
  color: var(--text-muted);
  transition: color 0.15s;
}

.definition-uri-link:hover {
  color: var(--primary-500);
}

.definition-detail-meta {
  margin-bottom: 16px;
}

.definition-description {
  color: var(--text-secondary);
  margin: 0 0 12px 0;
}

.definition-meta-row {
  display: flex;
  flex-wrap: wrap;
  gap: 16px;
}

.definition-meta-item {
  display: flex;
  align-items: center;
  gap: 6px;
  font-size: 13px;
  color: var(--text-muted);
}

.definition-meta-item i {
  font-size: 14px;
}

.definition-detail-actions {
  display: flex;
  gap: 8px;
  margin-top: 16px;
}

.definition-terms-section {
  margin-top: 32px;
}

.definition-terms-section h3 {
  display: flex;
  align-items: center;
  gap: 8px;
  font-size: 1rem;
  font-weight: 600;
  margin: 0 0 16px 0;
}

.definition-empty-terms {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 16px;
  background: var(--bg-secondary);
  border-radius: var(--radius);
  color: var(--text-muted);
}

.definition-terms-table {
  border: 1px solid var(--border-color);
  border-radius: var(--radius);
  overflow: hidden;
}

/* Glossary-Style Definition Detail View */
.definition-detail-view.glossary-style {
  max-width: 900px;
}

.definition-glossary-header {
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  gap: 24px;
  padding-bottom: 20px;
  border-bottom: 1px solid var(--border-color);
  margin-bottom: 24px;
}

.glossary-icon-title {
  display: flex;
  gap: 16px;
  align-items: flex-start;
}

.glossary-icon {
  width: 48px;
  height: 48px;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 12px;
  background: rgba(168, 85, 247, 0.15);
  color: rgb(168, 85, 247);
  font-size: 24px;
  flex-shrink: 0;
}

.glossary-title-area h2 {
  margin: 0 0 8px 0;
  font-size: 1.5rem;
  font-weight: 600;
}

.glossary-uri {
  display: flex;
  align-items: center;
  gap: 8px;
  font-size: 13px;
  color: var(--text-muted);
}

.glossary-uri i {
  font-size: 14px;
}

.glossary-uri a {
  color: var(--primary-500);
  word-break: break-all;
}

.glossary-uri.local-warning {
  flex-wrap: wrap;
  color: var(--accent-orange, #F97316);
}

.glossary-uri.local-warning .local-only-text {
  font-weight: 500;
}

.glossary-uri.local-warning .local-hint {
  flex-basis: 100%;
  padding-left: 22px;
  font-size: 12px;
  color: var(--text-muted);
  margin-top: 4px;
}

.glossary-actions {
  display: flex;
  gap: 8px;
  flex-shrink: 0;
}

/* Glossary Sections */
.glossary-section {
  margin-bottom: 24px;
  padding: 16px 20px;
  background: var(--bg-secondary);
  border-radius: var(--radius);
  border: 1px solid var(--border-color);
}

.glossary-section h3 {
  display: flex;
  align-items: center;
  gap: 8px;
  margin: 0 0 12px 0;
  font-size: 14px;
  font-weight: 600;
  color: var(--text-primary);
}

.glossary-section h3 i {
  color: var(--text-muted);
}

.purpose-text {
  margin: 0;
  font-size: 14px;
  color: var(--text-secondary);
  line-height: 1.5;
}

/* Used By Section */
.used-by-list {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
}

.used-by-item {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  padding: 6px 10px;
  background: var(--bg-tertiary);
  border-radius: var(--radius);
  font-size: 13px;
  color: var(--text-secondary);
  border: 1px solid var(--border-secondary);
}

.used-by-item i {
  color: var(--accent-green, #22C55E);
  font-size: 12px;
}

.used-by-item .set-name {
  font-weight: 500;
  color: var(--text-primary);
}

.used-by-item .field-name {
  color: var(--accent-purple, #8B5CF6);
}

.used-by-section.unused h3 {
  color: var(--text-muted);
}

.not-used-text {
  margin: 0;
  font-size: 13px;
  color: var(--text-muted);
  font-style: italic;
}

.definition-terms-table .data-table {
  width: 100%;
  border-collapse: collapse;
}

.definition-terms-table th,
.definition-terms-table td {
  padding: 10px 12px;
  text-align: left;
  border-bottom: 1px solid var(--border-color);
}

.definition-terms-table th {
  background: var(--bg-secondary);
  font-weight: 500;
  font-size: 12px;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  color: var(--text-muted);
}

.definition-terms-table tbody tr:last-child td {
  border-bottom: none;
}

.definition-terms-table tbody tr:hover {
  background: var(--bg-hover);
}

.term-name {
  display: flex;
  align-items: center;
  gap: 6px;
  font-weight: 500;
}

.term-name i {
  color: rgb(168, 85, 247);
  font-size: 14px;
}

.type-badge {
  display: inline-block;
  padding: 2px 8px;
  background: var(--bg-secondary);
  border-radius: var(--radius-sm);
  font-size: 12px;
  font-family: var(--font-mono);
}

.term-description {
  color: var(--text-secondary);
  font-size: 13px;
}

.term-uri-link {
  font-size: 12px;
  font-family: var(--font-mono);
  color: var(--primary-500);
  text-decoration: none;
}

.term-uri-link:hover {
  text-decoration: underline;
}

.definition-add-term-section {
  margin-top: 16px;
}

/* Import Definition Modal Tabs */
.import-tabs {
  display: flex;
  gap: 8px;
  margin-bottom: 16px;
  border-bottom: 1px solid var(--border-color);
  padding-bottom: 8px;
}

.import-tab {
  padding: 8px 16px;
  border: none;
  background: transparent;
  color: var(--text-muted);
  cursor: pointer;
  border-radius: var(--radius-sm);
  font-size: 14px;
  transition: all 0.15s;
}

.import-tab:hover {
  color: var(--text-primary);
  background: var(--bg-hover);
}

.import-tab.active {
  color: var(--primary-500);
  background: rgba(59, 130, 246, 0.1);
}

.import-tab-content {
  animation: fadeIn 0.2s ease;
}

/* Empty State */
.nav-empty-state {
  display: flex;
  flex-direction: column;
  align-items: center;
  padding: 24px 16px;
  text-align: center;
  gap: 8px;
}

.nav-empty-state i {
  font-size: 28px;
  color: var(--text-muted);
  opacity: 0.5;
}

.nav-empty-state span {
  color: var(--text-secondary);
  font-size: 13px;
}

.nav-empty-state .empty-actions {
  display: flex;
  align-items: center;
  gap: 8px;
  margin-top: 8px;
  flex-wrap: wrap;
  justify-content: center;
}

.nav-empty-state .empty-divider {
  color: var(--text-muted);
  font-size: 11px;
}

.btn-link {
  background: none;
  border: none;
  color: var(--primary-500);
  font-size: 13px;
  cursor: pointer;
  padding: 4px 8px;
  border-radius: 4px;
}

.btn-link:hover {
  background: var(--bg-hover);
  text-decoration: underline;
}

.btn-link.btn-secondary {
  color: var(--text-secondary);
}

/* Source Detail Panel */
.source-detail {
  padding: 16px;
}

.source-detail-header {
  display: flex;
  align-items: center;
  gap: 12px;
  margin-bottom: 20px;
}

.source-detail-header .source-detail-icon {
  font-size: 24px;
  color: var(--given-color);
}

.source-detail-header h3 {
  flex: 1;
  font-size: 16px;
  font-weight: 600;
}

.given-badge {
  font-size: 10px;
  font-weight: 600;
  padding: 2px 6px;
  border-radius: 4px;
  background: var(--given-bg);
  color: var(--given-color);
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

/* Provenance Section */
.provenance-section {
  background: var(--bg-secondary);
  border-radius: 8px;
  padding: 12px;
  margin-bottom: 16px;
}

.provenance-info {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.provenance-item {
  display: flex;
  align-items: center;
  gap: 8px;
  font-size: 13px;
}

.provenance-label {
  color: var(--text-secondary);
  min-width: 80px;
}

.provenance-value {
  color: var(--text-primary);
}

/* Derived Sets List */
.derived-sets-section {
  margin-bottom: 16px;
}

.derived-sets-list {
  display: flex;
  flex-direction: column;
  gap: 4px;
}

.derived-set-item {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 8px 12px;
  border-radius: 6px;
  cursor: pointer;
  font-size: 13px;
  background: var(--bg-secondary);
}

.derived-set-item:hover {
  background: var(--bg-tertiary);
}

/* Immutability Notice */
.immutability-notice {
  display: flex;
  align-items: flex-start;
  gap: 8px;
  padding: 12px;
  background: rgba(16, 185, 129, 0.1);
  border-radius: 8px;
  border-left: 3px solid var(--given-color);
  font-size: 12px;
  color: var(--text-secondary);
}

.immutability-notice i {
  color: var(--given-color);
  font-size: 16px;
  flex-shrink: 0;
}

/* Operator Creation Modal */
.operator-creation-modal {
  padding: 8px 0;
}

.creation-prompt {
  font-size: 14px;
  color: var(--text-secondary);
  margin-bottom: 16px;
  text-align: center;
}

.creation-intents {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.creation-intent-btn {
  display: flex;
  align-items: flex-start;
  gap: 12px;
  padding: 12px 16px;
  background: var(--bg-secondary);
  border: 1px solid var(--border-primary);
  border-radius: 8px;
  cursor: pointer;
  text-align: left;
  transition: all 0.15s ease;
}

.creation-intent-btn:hover {
  background: var(--bg-tertiary);
  border-color: var(--primary-500);
}

.creation-intent-btn > i {
  font-size: 20px;
  color: var(--primary-500);
  flex-shrink: 0;
  margin-top: 2px;
}

.intent-content {
  display: flex;
  flex-direction: column;
  gap: 2px;
  flex: 1;
}

.intent-label {
  font-size: 14px;
  font-weight: 500;
  color: var(--text-primary);
}

.intent-description {
  font-size: 12px;
  color: var(--text-secondary);
}

.intent-operator {
  font-family: 'SF Mono', Monaco, monospace;
  font-size: 11px;
  font-weight: 600;
  padding: 2px 6px;
  background: var(--bg-tertiary);
  border-radius: 4px;
  color: var(--text-muted);
}

/* Ontology Warning */
.ontology-warning {
  display: flex;
  align-items: flex-start;
  gap: 12px;
  padding: 16px;
  background: rgba(245, 158, 11, 0.1);
  border: 1px solid rgba(245, 158, 11, 0.3);
  border-radius: 8px;
}

.ontology-warning > i {
  font-size: 24px;
  color: var(--warning-500);
  flex-shrink: 0;
}

.ontology-warning strong {
  display: block;
  margin-bottom: 4px;
  color: var(--warning-500);
}

.ontology-warning p {
  font-size: 13px;
  color: var(--text-secondary);
  margin-top: 4px;
}

/* Detail Section */
.detail-section {
  margin-bottom: 16px;
}

.detail-section h4 {
  display: flex;
  align-items: center;
  gap: 6px;
  font-size: 12px;
  font-weight: 600;
  color: var(--text-secondary);
  text-transform: uppercase;
  letter-spacing: 0.5px;
  margin-bottom: 8px;
}

.detail-section h4 i {
  font-size: 14px;
}

/* Form Styling */
.form-group {
  margin-bottom: 16px;
}

.form-group label {
  display: block;
  font-size: 13px;
  font-weight: 500;
  color: var(--text-secondary);
  margin-bottom: 6px;
}

.form-input,
.form-select {
  width: 100%;
  padding: 8px 12px;
  background: var(--bg-secondary);
  border: 1px solid var(--border-primary);
  border-radius: 6px;
  color: var(--text-primary);
  font-size: 14px;
}

.form-input:focus,
.form-select:focus {
  outline: none;
  border-color: var(--primary-500);
  box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.15);
}

.form-hint {
  font-size: 12px;
  color: var(--text-muted);
  margin-top: 8px;
}

/* Optional label for form fields */
.optional-label {
  font-size: 11px;
  font-weight: 400;
  color: var(--text-muted);
}

/* URI soft nudge hint */
.uri-nudge-hint {
  display: flex;
  align-items: flex-start;
  gap: 8px;
  margin-top: 10px;
  padding: 10px 12px;
  background: rgba(168, 85, 247, 0.08);
  border-radius: var(--radius);
  border-left: 3px solid rgba(168, 85, 247, 0.4);
}

.uri-nudge-hint i {
  font-size: 16px;
  color: var(--accent-purple, #8B5CF6);
  flex-shrink: 0;
  margin-top: 1px;
}

.uri-nudge-hint span {
  font-size: 12px;
  color: var(--text-secondary);
  line-height: 1.4;
}

.checkbox-list {
  display: flex;
  flex-direction: column;
  gap: 8px;
  max-height: 200px;
  overflow-y: auto;
  padding: 8px;
  background: var(--bg-secondary);
  border-radius: 6px;
}

.checkbox-item {
  display: flex;
  align-items: center;
  gap: 8px;
  font-size: 13px;
  cursor: pointer;
}

.checkbox-item input {
  accent-color: var(--primary-500);
}

/* Empty Hint */
.empty-hint {
  color: var(--text-muted);
  font-size: 12px;
  font-style: italic;
  padding: 8px 12px;
  text-align: center;
}

/* ===== SQL Query Modal ===== */
.sql-query-modal {
  max-height: 70vh;
  overflow-y: auto;
}

.sql-sources-list {
  background: var(--bg-secondary);
  border: 1px solid var(--border-color);
  border-radius: 6px;
  padding: 12px;
  font-size: 12px;
  line-height: 1.6;
  max-height: 100px;
  overflow-y: auto;
}

.sql-sources-list code {
  background: var(--bg-tertiary);
  padding: 2px 6px;
  border-radius: 4px;
  font-family: 'JetBrains Mono', 'SF Mono', 'Consolas', monospace;
  color: var(--primary-500);
}

.sql-editor {
  font-family: 'JetBrains Mono', 'SF Mono', 'Consolas', monospace;
  font-size: 13px;
  line-height: 1.5;
  resize: vertical;
  min-height: 120px;
}

.sql-examples {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
}

.sql-example-btn {
  background: var(--bg-secondary);
  border: 1px solid var(--border-color);
  border-radius: 4px;
  padding: 4px 10px;
  font-size: 11px;
  color: var(--text-secondary);
  cursor: pointer;
  transition: all 0.15s ease;
}

.sql-example-btn:hover {
  background: var(--bg-tertiary);
  border-color: var(--primary-500);
  color: var(--primary-500);
}

.sql-preview-results {
  margin-top: 16px;
  border: 1px solid var(--border-color);
  border-radius: 8px;
  overflow: hidden;
}

.sql-preview-header {
  display: flex;
  justify-content: space-between;
  padding: 8px 12px;
  background: var(--bg-secondary);
  border-bottom: 1px solid var(--border-color);
  font-size: 12px;
  color: var(--text-secondary);
}

.sql-preview-table-wrap {
  max-height: 200px;
  overflow: auto;
}

.sql-preview-results table {
  width: 100%;
  border-collapse: collapse;
  font-size: 12px;
}

.sql-preview-results th {
  background: var(--bg-tertiary);
  padding: 6px 10px;
  text-align: left;
  font-weight: 600;
  color: var(--text-secondary);
  border-bottom: 1px solid var(--border-color);
  position: sticky;
  top: 0;
}

.sql-preview-results td {
  padding: 6px 10px;
  border-bottom: 1px solid var(--border-subtle);
  max-width: 200px;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.sql-preview-results tr:hover td {
  background: var(--bg-secondary);
}

/* SQL Pipeline Visualization */
.sql-pipeline-view {
  margin-top: 16px;
  padding: 12px;
  background: var(--bg-secondary);
  border: 1px solid var(--border-color);
  border-radius: 8px;
}

.pipeline-steps {
  display: flex;
  flex-direction: column;
  gap: 4px;
}

.pipeline-step {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 6px 10px;
  background: var(--bg-primary);
  border-radius: 6px;
  font-size: 12px;
}

.pipeline-symbol {
  font-size: 16px;
  font-weight: bold;
  width: 24px;
  text-align: center;
}

.pipeline-op {
  font-weight: 600;
  color: var(--text-primary);
  min-width: 80px;
}

.pipeline-params {
  flex: 1;
  color: var(--text-secondary);
  font-family: 'JetBrains Mono', monospace;
  font-size: 11px;
}

.pipeline-params .param-key {
  color: var(--text-muted);
}

.pipeline-params .param-value {
  color: var(--success-500);
}

.pipeline-reduction {
  color: var(--text-muted);
  font-size: 11px;
  font-family: 'JetBrains Mono', monospace;
}

.pipeline-arrow {
  text-align: center;
  color: var(--text-muted);
  font-size: 14px;
  margin: 2px 0;
}

/* SQL Operator badge */
.intent-operator[title="SQL"] {
  background: var(--purple-100);
  color: var(--purple-700);
}

:root.dark-theme .intent-operator[title="SQL"],
.dark-theme .intent-operator[title="SQL"] {
  background: var(--purple-900);
  color: var(--purple-300);
}

/* SQL Autocomplete */
.sql-autocomplete-dropdown {
  scrollbar-width: thin;
  scrollbar-color: var(--border-color) transparent;
}

.sql-autocomplete-item {
  transition: background 0.1s ease;
}

.sql-autocomplete-item:hover,
.sql-autocomplete-item.selected {
  background: var(--primary-500) !important;
  color: white !important;
}

.sql-autocomplete-item.selected span,
.sql-autocomplete-item:hover span {
  color: inherit !important;
}

.sql-autocomplete-item.selected i,
.sql-autocomplete-item:hover i {
  color: rgba(255, 255, 255, 0.8) !important;
}

/* ===== Field History Button & Popover ===== */

.field-history-btn {
  margin-left: auto;
  width: 22px;
  height: 22px;
  padding: 0;
  border: none;
  background: transparent;
  color: var(--text-muted);
  cursor: pointer;
  border-radius: var(--radius-sm);
  display: flex;
  align-items: center;
  justify-content: center;
  opacity: 0;
  transition: var(--transition-fast);
}

.detail-field-label {
  display: flex;
  align-items: center;
}

.detail-field-group:hover .field-history-btn {
  opacity: 0.6;
}

.field-history-btn:hover {
  opacity: 1 !important;
  background: var(--bg-hover);
  color: var(--primary-500);
}

/* Field History Popover Container */
.field-history-popover-container {
  position: fixed;
  z-index: 9999;
  animation: fieldHistoryFadeIn 0.15s ease-out;
}

@keyframes fieldHistoryFadeIn {
  from {
    opacity: 0;
    transform: translateY(-4px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* Field History Popover */
.field-history-popover {
  width: 380px;
  max-height: 480px;
  background: var(--bg-primary);
  border: 1px solid var(--border-primary);
  border-radius: var(--radius-lg);
  box-shadow: var(--shadow-xl);
  overflow: hidden;
  display: flex;
  flex-direction: column;
}

.field-history-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 12px 14px;
  border-bottom: 1px solid var(--border-primary);
  background: var(--bg-secondary);
}

.field-history-title {
  display: flex;
  align-items: center;
  gap: 8px;
  font-weight: 600;
  font-size: 13px;
  color: var(--text-primary);
}

.field-history-title i {
  color: var(--primary-500);
  font-size: 16px;
}

.field-history-close {
  width: 24px;
  height: 24px;
  padding: 0;
  border: none;
  background: transparent;
  color: var(--text-muted);
  cursor: pointer;
  border-radius: var(--radius-sm);
  display: flex;
  align-items: center;
  justify-content: center;
  transition: var(--transition-fast);
}

.field-history-close:hover {
  background: var(--bg-hover);
  color: var(--text-primary);
}

/* Current Value Section */
.field-history-current {
  padding: 12px 14px;
  background: var(--bg-tertiary);
  border-bottom: 1px solid var(--border-primary);
}

.field-history-current-label {
  font-size: 10px;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  color: var(--text-muted);
  margin-bottom: 4px;
}

.field-history-current-value {
  font-size: 14px;
  font-weight: 500;
  color: var(--text-primary);
  word-break: break-word;
}

.field-history-current-value .empty-value {
  color: var(--text-muted);
  font-style: italic;
  font-weight: 400;
}

/* Provenance Section */
.field-history-provenance {
  padding: 12px 14px;
  border-bottom: 1px solid var(--border-primary);
}

.field-history-section-label {
  display: flex;
  align-items: center;
  gap: 6px;
  font-size: 11px;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.3px;
  color: var(--text-muted);
  margin-bottom: 10px;
}

.field-history-section-label i {
  font-size: 14px;
}

.provenance-source-badge {
  font-size: 9px;
  padding: 2px 6px;
  border-radius: 10px;
  text-transform: uppercase;
  font-weight: 600;
  letter-spacing: 0.3px;
}

.provenance-source-badge.field {
  background: var(--primary-100);
  color: var(--primary-700);
}

.provenance-source-badge.record {
  background: var(--warning-100);
  color: var(--warning-700);
}

.provenance-source-badge.dataset {
  background: var(--gray-100);
  color: var(--gray-600);
}

:root.dark-theme .provenance-source-badge.field,
.dark-theme .provenance-source-badge.field {
  background: var(--primary-900);
  color: var(--primary-300);
}

:root.dark-theme .provenance-source-badge.record,
.dark-theme .provenance-source-badge.record {
  background: var(--warning-900);
  color: var(--warning-300);
}

:root.dark-theme .provenance-source-badge.dataset,
.dark-theme .provenance-source-badge.dataset {
  background: var(--gray-800);
  color: var(--gray-400);
}

.history-count {
  font-size: 10px;
  font-weight: 500;
  padding: 2px 6px;
  background: var(--bg-tertiary);
  border-radius: 10px;
  color: var(--text-secondary);
}

.field-history-provenance-grid {
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.prov-item {
  display: flex;
  align-items: baseline;
  gap: 8px;
  font-size: 12px;
}

.prov-item.empty {
  color: var(--text-muted);
  font-style: italic;
}

.prov-label {
  color: var(--text-muted);
  min-width: 50px;
  font-size: 11px;
}

.prov-value {
  color: var(--text-primary);
  word-break: break-word;
}

/* Timeline Section */
.field-history-timeline {
  padding: 12px 14px;
  flex: 1;
  overflow-y: auto;
  max-height: 260px;
}

.field-history-events {
  display: flex;
  flex-direction: column;
  gap: 2px;
}

.field-history-event {
  display: flex;
  gap: 10px;
  padding: 8px;
  border-radius: var(--radius-md);
  transition: var(--transition-fast);
}

.field-history-event:hover {
  background: var(--bg-hover);
}

.field-history-event .event-icon {
  width: 24px;
  height: 24px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
  font-size: 12px;
}

.field-history-event.event-created .event-icon {
  background: var(--success-100);
  color: var(--success-600);
}

.field-history-event.event-modified .event-icon {
  background: var(--primary-100);
  color: var(--primary-600);
}

.field-history-event.event-superseded .event-icon {
  background: var(--info-100);
  color: var(--info-600);
}

:root.dark-theme .field-history-event.event-created .event-icon,
.dark-theme .field-history-event.event-created .event-icon {
  background: var(--success-900);
  color: var(--success-400);
}

:root.dark-theme .field-history-event.event-modified .event-icon,
.dark-theme .field-history-event.event-modified .event-icon {
  background: var(--primary-900);
  color: var(--primary-400);
}

:root.dark-theme .field-history-event.event-superseded .event-icon,
.dark-theme .field-history-event.event-superseded .event-icon {
  background: var(--info-900);
  color: var(--info-400);
}

.field-history-event .event-content {
  flex: 1;
  min-width: 0;
}

.field-history-event .event-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 8px;
}

.field-history-event .event-label {
  font-weight: 500;
  font-size: 12px;
  color: var(--text-primary);
}

.field-history-event .event-time {
  font-size: 10px;
  color: var(--text-muted);
}

.field-history-event .event-change {
  display: flex;
  align-items: center;
  gap: 6px;
  margin-top: 4px;
  font-size: 11px;
}

.field-history-event .event-change .old-value {
  color: var(--text-muted);
  text-decoration: line-through;
  max-width: 180px;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.field-history-event .event-change .new-value {
  color: var(--success-600);
  font-weight: 500;
  max-width: 180px;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.field-history-event .event-change i {
  color: var(--text-muted);
  font-size: 10px;
}

.field-history-event .event-actor {
  display: flex;
  align-items: center;
  gap: 4px;
  margin-top: 4px;
  font-size: 10px;
  color: var(--text-muted);
}

.field-history-event .event-actor i {
  font-size: 11px;
}

.field-history-event.record-level {
  opacity: 0.7;
}

.field-history-event.field-specific {
  border-left: 2px solid var(--primary-400);
  padding-left: 10px;
  margin-left: -2px;
}

/* Empty State */
.field-history-empty {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 24px 16px;
  text-align: center;
  color: var(--text-muted);
}

.field-history-empty i {
  font-size: 32px;
  margin-bottom: 8px;
  opacity: 0.5;
}

.field-history-empty span {
  font-size: 13px;
  font-weight: 500;
}

.field-history-empty-hint {
  font-size: 11px;
  margin-top: 4px;
  opacity: 0.7;
}

/* ===== Source Data Viewer ===== */
/* Main container for viewing immutable source data */

.source-data-viewer {
  display: grid;
  grid-template-columns: 1fr 320px;
  grid-template-rows: auto auto 1fr;
  height: 100%;
  background: var(--bg-primary);
  position: relative;
}

.source-viewer-header {
  grid-column: 1 / -1;
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 16px 20px;
  background: var(--bg-secondary);
  border-bottom: 1px solid var(--border-color);
}

.source-viewer-title {
  display: flex;
  align-items: center;
  gap: 12px;
}

.source-viewer-icon {
  width: 44px;
  height: 44px;
  background: linear-gradient(135deg, var(--given-color, #f0883e), #e5622a);
  border-radius: 10px;
  display: flex;
  align-items: center;
  justify-content: center;
  color: white;
  font-size: 22px;
}

.source-viewer-info h2 {
  font-size: 18px;
  font-weight: 600;
  color: var(--text-primary);
  display: flex;
  align-items: center;
  gap: 10px;
}

.source-viewer-info h2 .given-badge {
  display: inline-flex;
  align-items: center;
  gap: 4px;
  font-size: 10px;
  font-weight: 700;
  padding: 3px 8px;
  border-radius: 4px;
  background: var(--given-color, #f0883e);
  color: #000;
}

.source-viewer-info h2 .given-badge i {
  font-size: 11px;
}

.source-viewer-meta {
  font-size: 13px;
  color: var(--text-muted);
  margin-top: 4px;
}

.source-viewer-actions {
  display: flex;
  gap: 8px;
}

.source-action-btn {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 8px 14px;
  border-radius: 6px;
  border: 1px solid var(--border-color);
  background: var(--bg-tertiary);
  color: var(--text-primary);
  font-size: 13px;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.15s ease;
}

.source-action-btn:hover {
  background: var(--bg-hover);
  border-color: var(--text-muted);
}

.source-action-btn.primary {
  background: var(--primary-500);
  border-color: var(--primary-500);
  color: white;
}

.source-action-btn.primary:hover {
  background: var(--primary-600);
  border-color: var(--primary-600);
}

/* Toolbar */
.source-viewer-toolbar {
  grid-column: 1;
  grid-row: 2; /* Explicitly set grid row for clarity */
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 10px 20px;
  background: var(--bg-secondary);
  border-bottom: 1px solid var(--border-color);
  position: relative;
  z-index: 11; /* Higher than table thead (z-index: 10) to prevent overlap */
}

.source-search-box {
  display: flex;
  align-items: center;
  gap: 8px;
  background: var(--bg-tertiary);
  border: 1px solid var(--border-color);
  border-radius: 6px;
  padding: 6px 12px;
  width: 280px;
}

.source-search-box i {
  color: var(--text-muted);
  font-size: 14px;
}

.source-search-box input {
  background: transparent;
  border: none;
  color: var(--text-primary);
  font-size: 13px;
  width: 100%;
  outline: none;
}

.source-search-box input::placeholder {
  color: var(--text-muted);
}

.source-record-count {
  font-size: 13px;
  color: var(--text-muted);
}

/* Provenance Panel Toggle Button */
.source-provenance-toggle-btn {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 32px;
  height: 32px;
  background: var(--bg-tertiary);
  border: 1px solid var(--border-color);
  border-radius: 6px;
  color: var(--text-secondary);
  cursor: pointer;
  transition: all 0.15s ease;
  margin-left: 8px;
}

.source-provenance-toggle-btn:hover {
  background: var(--bg-hover);
  color: var(--text-primary);
  border-color: var(--border-hover);
}

.source-provenance-toggle-btn i {
  font-size: 16px;
}

/* Hidden Provenance Panel State */
.source-data-viewer.provenance-hidden {
  grid-template-columns: 1fr;
}

.source-data-viewer.provenance-hidden .source-provenance-panel {
  display: none;
}

.source-data-viewer.provenance-hidden .source-provenance-toggle-btn {
  background: var(--accent-color);
  border-color: var(--accent-color);
  color: white;
}

.source-data-viewer.provenance-hidden .source-provenance-toggle-btn:hover {
  background: var(--accent-hover);
  border-color: var(--accent-hover);
}

/* Floating Provenance Tab (visible when panel is hidden) */
.source-provenance-floating-tab {
  display: none;
  position: absolute;
  right: 0;
  top: 50%;
  transform: translateY(-50%);
  background: var(--accent-color);
  color: white;
  padding: 12px 8px;
  border-radius: 8px 0 0 8px;
  cursor: pointer;
  writing-mode: vertical-rl;
  text-orientation: mixed;
  font-size: 12px;
  font-weight: 600;
  letter-spacing: 0.5px;
  box-shadow: -2px 0 8px rgba(0, 0, 0, 0.15);
  transition: all 0.2s ease;
  z-index: 100;
  gap: 8px;
  align-items: center;
}

.source-provenance-floating-tab i {
  font-size: 16px;
  transform: rotate(90deg);
  margin-bottom: 4px;
}

.source-provenance-floating-tab:hover {
  background: var(--accent-hover);
  padding-right: 12px;
  box-shadow: -4px 0 12px rgba(0, 0, 0, 0.2);
}

/* Show floating tab when panel is hidden */
.source-data-viewer.provenance-hidden .source-provenance-floating-tab {
  display: flex;
}

/* View Mode Toggle */
.source-view-mode-toggle {
  display: flex;
  align-items: center;
  background: var(--bg-tertiary);
  border: 1px solid var(--border-color);
  border-radius: 6px;
  padding: 2px;
  gap: 2px;
}

.source-view-mode-btn {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 6px 12px;
  background: transparent;
  border: none;
  border-radius: 4px;
  color: var(--text-muted);
  font-size: 12px;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.15s ease;
}

.source-view-mode-btn:hover {
  color: var(--text-primary);
  background: var(--bg-secondary);
}

.source-view-mode-btn.active {
  background: var(--bg-primary);
  color: var(--text-primary);
  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
}

.source-view-mode-btn i {
  font-size: 14px;
}

/* Column Group Header (for multi-record unified view) */
.source-col-group-header th {
  padding: 6px 16px;
  font-size: 11px;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  border-bottom: none;
  background: var(--bg-secondary); /* Ensure all header cells have background for sticky */
  /* Text overlap protection */
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  max-width: 250px;
}

/* Row number cell in column group header - needs proper styling */
.source-col-group-header th.source-row-num {
  border-right: 1px solid var(--border-color);
}

.source-col-group {
  text-align: center;
  border-right: 1px solid var(--border-color); /* Separate column groups with border */
}

/* Remove border from last column group */
.source-col-group:last-child {
  border-right: none;
}

.source-col-group.common {
  background: var(--common-col-bg, rgba(148, 163, 184, 0.12));
  color: var(--text-secondary);
  border-bottom: 2px solid var(--border-color);
}

.source-col-group.typed {
  color: var(--text-secondary);
  /* Background applied via inline style from JS, but provide fallback */
  background: var(--bg-secondary);
}

.source-col-group-count {
  font-size: 10px;
  font-weight: 400;
  margin-left: 6px;
  opacity: 0.7;
}

/* Split Tables View */
.source-split-tables {
  display: flex;
  flex-direction: column;
  gap: 24px;
  padding: 16px;
}

.source-split-table-section {
  border: 1px solid var(--border-color);
  border-radius: 8px;
  overflow: hidden;
  background: var(--bg-primary);
}

.source-split-table-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 12px 16px;
  border-bottom: 2px solid;
}

.source-split-table-type {
  font-weight: 600;
  font-size: 14px;
}

.source-split-table-count {
  font-size: 12px;
  color: var(--text-muted);
}

.source-split-table {
  width: 100%;
}

.source-split-table thead {
  position: static; /* Don't stick within split sections */
}

.source-split-table-section .source-more-records {
  border-top: 1px solid var(--border-color);
  margin: 0;
  padding: 10px 16px;
  font-size: 12px;
}

/* Cards View */
.source-cards-view {
  padding: 24px;
  display: flex;
  flex-direction: column;
  gap: 24px;
}

.source-cards-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
  gap: 20px;
}

.source-type-card {
  background: var(--bg-primary);
  border: 1px solid var(--border-color);
  border-radius: 12px;
  overflow: hidden;
  transition: box-shadow 0.2s ease, transform 0.2s ease;
}

.source-type-card:hover {
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
  transform: translateY(-2px);
}

.source-type-card-header {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 16px;
  border-bottom: 1px solid;
}

.source-type-card-icon {
  width: 40px;
  height: 40px;
  border-radius: 10px;
  display: flex;
  align-items: center;
  justify-content: center;
  color: white;
  font-size: 18px;
  flex-shrink: 0;
}

.source-type-card-title {
  display: flex;
  flex-direction: column;
  gap: 2px;
  min-width: 0;
  flex: 1;
}

.source-type-card-name {
  font-weight: 600;
  font-size: 15px;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.source-type-card-badge {
  font-size: 12px;
  color: var(--text-muted);
  font-weight: 500;
}

.source-type-card-body {
  padding: 16px;
  display: flex;
  flex-direction: column;
  gap: 16px;
}

.source-type-card-stat {
  display: flex;
  flex-direction: column;
  gap: 2px;
}

.source-type-card-stat-primary {
  text-align: center;
  padding: 12px;
  background: var(--bg-secondary);
  border-radius: 8px;
}

.source-type-card-stat-primary .source-type-card-stat-value {
  font-size: 28px;
  font-weight: 700;
  color: var(--text-primary);
}

.source-type-card-stat-value {
  font-size: 18px;
  font-weight: 600;
  color: var(--text-primary);
}

.source-type-card-stat-label {
  font-size: 11px;
  color: var(--text-muted);
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.source-type-card-stats-row {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 12px;
  text-align: center;
}

.source-type-card-stats-row .source-type-card-stat {
  padding: 8px;
  background: var(--bg-secondary);
  border-radius: 6px;
}

.source-type-card-fields {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.source-type-card-fields-label {
  font-size: 11px;
  color: var(--text-muted);
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.source-type-card-fields-list {
  display: flex;
  flex-wrap: wrap;
  gap: 6px;
}

.source-type-card-field-tag {
  padding: 4px 8px;
  border-radius: 4px;
  font-size: 11px;
  font-weight: 500;
  border: 1px solid;
  white-space: nowrap;
}

.source-type-card-field-more {
  font-size: 11px;
  color: var(--text-muted);
  padding: 4px 8px;
}

.source-type-card-footer {
  padding: 12px 16px;
  border-top: 1px solid;
  background: var(--bg-secondary);
}

.source-type-card-progress {
  height: 6px;
  background: var(--bg-tertiary);
  border-radius: 3px;
  overflow: hidden;
}

.source-type-card-progress-bar {
  height: 100%;
  border-radius: 3px;
  transition: width 0.3s ease;
}

.source-cards-summary {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 24px;
  padding: 16px;
  background: var(--bg-secondary);
  border-radius: 8px;
  border: 1px solid var(--border-color);
}

.source-cards-summary-item {
  display: flex;
  align-items: center;
  gap: 8px;
  font-size: 13px;
  color: var(--text-secondary);
}

.source-cards-summary-item i {
  font-size: 16px;
  color: var(--text-muted);
}

/* Data Table */
.source-data-table-container {
  grid-column: 1;
  grid-row: 3;
  overflow: auto;
  background: var(--bg-primary);
  min-width: 0; /* Prevent grid blowout - allows proper overflow handling */
}

.source-data-table {
  border-collapse: collapse;
  table-layout: auto; /* Allow columns to expand for content */
  font-size: 13px;
  width: 100%; /* Ensure table fills container width */
}

.source-data-table thead {
  position: sticky;
  top: 0;
  z-index: 10;
  /* Prevent text from showing through semi-transparent backgrounds */
  isolation: isolate;
}

/* Ensure column group row has solid background to prevent bleed-through */
.source-data-table.multi-record thead tr:first-child th {
  background: var(--bg-primary);
}

.source-data-table th {
  background: var(--bg-secondary);
  padding: 10px 16px;
  text-align: left;
  font-weight: 600;
  color: var(--text-secondary);
  border-bottom: 1px solid var(--border-color);
  border-right: 1px solid var(--border-color); /* TABLE RULE 4: Consistent borders */
  min-width: 80px; /* TABLE RULE 1: Minimum column width */
  white-space: nowrap;
}

.source-col-header {
  display: flex;
  align-items: center;
  gap: 8px;
  /* Text overlap protection */
  max-width: 200px;
  overflow: hidden;
}

.source-col-name {
  font-weight: 600;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  max-width: 150px;
}

.source-col-type {
  font-size: 10px;
  color: var(--text-muted);
  font-weight: 400;
  background: var(--bg-tertiary);
  padding: 2px 6px;
  border-radius: 4px;
  text-transform: lowercase;
}

.source-data-table td {
  padding: 10px 16px;
  border-bottom: 1px solid var(--border-color);
  border-right: 1px solid var(--border-color); /* TABLE RULE 4: Consistent borders */
  min-width: 80px; /* TABLE RULE 1: Minimum column width */
  max-width: 300px;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
  color: var(--text-primary);
}

.source-data-table tr:hover td {
  background: var(--bg-secondary);
}

.source-row-num {
  color: var(--text-muted);
  font-size: 11px;
  font-family: monospace;
  width: 50px;
  text-align: right;
  padding-right: 16px !important;
  background: var(--bg-secondary) !important;
  border-right: 1px solid var(--border-color);
}

/* Cell type styling */
.source-cell-null .null-value {
  color: var(--text-muted);
  font-style: italic;
}

.source-cell-number {
  font-family: monospace;
  color: var(--primary-400);
}

.source-cell-date {
  color: #a371f7;
}

.source-cell-boolean {
  color: var(--success-500);
}

/* More records notice */
.source-more-records {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
  padding: 16px;
  background: var(--bg-secondary);
  border-top: 1px solid var(--border-color);
  color: var(--text-muted);
  font-size: 13px;
}

.source-more-records i {
  color: var(--primary-400);
}

/* Empty state */
.source-empty-state {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  height: 100%;
  color: var(--text-muted);
  gap: 12px;
}

.source-empty-state i {
  font-size: 48px;
  opacity: 0.5;
}

.source-empty-state p {
  font-size: 14px;
}

/* Provenance Panel */
.source-provenance-panel {
  grid-column: 2;
  grid-row: 2 / 4;
  background: var(--bg-secondary);
  border-left: 1px solid var(--border-color);
  padding: 20px;
  overflow-y: auto;
}

.source-provenance-header {
  display: flex;
  align-items: center;
  gap: 8px;
  font-size: 11px;
  font-weight: 600;
  text-transform: uppercase;
  color: var(--text-muted);
  margin-bottom: 16px;
}

.source-provenance-header i {
  font-size: 14px;
}

.source-provenance-items {
  display: flex;
  flex-direction: column;
  gap: 10px;
}

.source-provenance-item {
  display: flex;
  align-items: flex-start;
  gap: 10px;
  padding: 12px;
  background: var(--bg-tertiary);
  border-radius: 8px;
}

.source-provenance-item > i {
  width: 28px;
  height: 28px;
  background: var(--bg-primary);
  border-radius: 6px;
  display: flex;
  align-items: center;
  justify-content: center;
  color: var(--given-color, #f0883e);
  font-size: 14px;
  flex-shrink: 0;
}

.source-provenance-item > div {
  display: flex;
  flex-direction: column;
  gap: 2px;
  min-width: 0;
}

.source-provenance-item .label {
  font-size: 10px;
  color: var(--text-muted);
  text-transform: uppercase;
  letter-spacing: 0.3px;
}

.source-provenance-item .value {
  font-size: 12px;
  color: var(--text-primary);
  word-break: break-word;
}

/* Immutable notice */
.source-immutable-notice {
  display: flex;
  align-items: flex-start;
  gap: 10px;
  padding: 12px;
  background: rgba(240, 136, 62, 0.1);
  border: 1px solid rgba(240, 136, 62, 0.3);
  border-radius: 8px;
  margin-top: 20px;
}

.source-immutable-notice i {
  color: var(--given-color, #f0883e);
  font-size: 16px;
  flex-shrink: 0;
  margin-top: 2px;
}

.source-immutable-notice p {
  font-size: 12px;
  color: var(--text-secondary);
  line-height: 1.5;
}

.source-immutable-notice strong {
  color: var(--text-primary);
}

/* Derived Sets section */
.source-derived-sets {
  margin-top: 20px;
  padding-top: 20px;
  border-top: 1px solid var(--border-color);
}

.source-derived-header {
  display: flex;
  align-items: center;
  gap: 8px;
  font-size: 11px;
  font-weight: 600;
  text-transform: uppercase;
  color: var(--text-muted);
  margin-bottom: 12px;
}

.source-derived-header i {
  font-size: 14px;
}

.source-derived-item {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 10px 12px;
  background: var(--bg-tertiary);
  border-radius: 6px;
  margin-bottom: 6px;
  cursor: pointer;
  transition: all 0.15s ease;
}

.source-derived-item:hover {
  background: var(--bg-hover);
}

.source-derived-item i {
  color: var(--text-muted);
  font-size: 16px;
}

.source-derived-item span {
  flex: 1;
  font-size: 13px;
  color: var(--text-primary);
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.source-derived-item .count {
  font-size: 11px;
  color: var(--text-muted);
  background: var(--bg-primary);
  padding: 2px 6px;
  border-radius: 4px;
}

/* Source item active state in sidebar */
.source-item.active {
  background: var(--bg-active);
  border: 2px solid var(--given-color);
  color: var(--text-primary);
}

.source-item.active .source-name {
  color: var(--text-primary);
}

.source-item.active .source-meta-inline {
  color: var(--text-secondary);
}

.source-item.active .nav-item-count {
  color: var(--text-secondary);
  background: var(--bg-tertiary);
}

.source-item.active .source-icon {
  color: var(--given-color);
}

/* Responsive adjustments */
@media (max-width: 1024px) {
  .source-data-viewer {
    grid-template-columns: 1fr;
  }

  .source-provenance-panel {
    grid-column: 1;
    grid-row: 4;
    border-left: none;
    border-top: 1px solid var(--border-color);
  }
}

/* ============================================================================
   Sources View Toggle (List vs Table)
   ============================================================================ */

.sources-view-toggle {
  display: flex;
  background: var(--bg-tertiary);
  border-radius: 4px;
  padding: 2px;
  margin-right: 4px;
}

.view-toggle-btn {
  width: 22px;
  height: 20px;
  border: none;
  background: transparent;
  color: var(--text-muted);
  border-radius: 3px;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 12px;
  transition: all 0.15s ease;
}

.view-toggle-btn:hover {
  color: var(--text-primary);
}

.view-toggle-btn.active {
  background: var(--bg-primary);
  color: var(--primary-500);
  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
}

.nav-panel-actions {
  display: flex;
  align-items: center;
  gap: 2px;
}

/* ============================================================================
   Sources Table View (Main Content Area)
   ============================================================================ */

.sources-table-view {
  height: 100%;
  display: flex;
  flex-direction: column;
  background: var(--bg-primary);
}

.sources-table-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 20px 24px;
  border-bottom: 1px solid var(--border-color);
  background: var(--bg-primary);
}

.sources-table-title {
  display: flex;
  align-items: center;
  gap: 16px;
}

.sources-table-icon {
  width: 40px;
  height: 40px;
  background: var(--given-bg);
  border-radius: 10px;
  display: flex;
  align-items: center;
  justify-content: center;
}

.sources-table-icon i {
  font-size: 20px;
  color: var(--given-color);
}

.sources-table-info h2 {
  font-size: 18px;
  font-weight: 600;
  color: var(--text-primary);
  margin: 0;
  display: flex;
  align-items: center;
  gap: 10px;
}

.sources-table-info h2 .given-badge {
  font-size: 10px;
  font-weight: 600;
  background: var(--given-bg);
  color: var(--given-color);
  padding: 3px 8px;
  border-radius: 4px;
  display: inline-flex;
  align-items: center;
  gap: 4px;
}

.sources-table-info h2 .given-badge i {
  font-size: 10px;
}

.sources-table-meta {
  font-size: 13px;
  color: var(--text-muted);
  margin-top: 4px;
}

.sources-table-actions {
  display: flex;
  gap: 8px;
}

.sources-table-toolbar {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 12px 24px;
  border-bottom: 1px solid var(--border-color);
  background: var(--bg-secondary);
}

.sources-table-search {
  display: flex;
  align-items: center;
  gap: 8px;
  background: var(--bg-primary);
  border: 1px solid var(--border-color);
  border-radius: 6px;
  padding: 6px 12px;
  width: 280px;
}

.sources-table-search i {
  color: var(--text-muted);
  font-size: 14px;
}

.sources-table-search input {
  flex: 1;
  border: none;
  background: transparent;
  outline: none;
  font-size: 13px;
  color: var(--text-primary);
}

.sources-table-search input::placeholder {
  color: var(--text-muted);
}

.sources-table-count {
  font-size: 13px;
  color: var(--text-muted);
}

.sources-table-container {
  flex: 1;
  overflow: auto;
}

.sources-table {
  width: 100%;
  border-collapse: collapse;
  font-size: 13px;
}

.sources-table thead {
  position: sticky;
  top: 0;
  z-index: 10;
}

.sources-table th {
  background: var(--bg-secondary);
  padding: 12px 16px;
  text-align: left;
  font-weight: 600;
  font-size: 11px;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  color: var(--text-muted);
  border-bottom: 1px solid var(--border-color);
  white-space: nowrap;
}

.sources-table th.col-icon {
  width: 48px;
  padding-left: 24px;
}

.sources-table th.col-name {
  min-width: 200px;
}

.sources-table th.col-type {
  width: 80px;
}

.sources-table th.col-records,
.sources-table th.col-fields {
  width: 90px;
  text-align: right;
}

.sources-table th.col-imported {
  width: 110px;
}

.sources-table th.col-agent {
  width: 150px;
}

.sources-table th.col-derived {
  width: 100px;
  text-align: center;
}

.sources-table th.col-actions {
  width: 120px;
  text-align: right;
  padding-right: 24px;
}

.sources-table-row {
  cursor: pointer;
  transition: background 0.1s ease;
}

.sources-table-row:hover {
  background: var(--bg-secondary);
}

.sources-table-row td {
  padding: 14px 16px;
  border-bottom: 1px solid var(--border-color);
  color: var(--text-primary);
}

.sources-table-row td.col-icon {
  padding-left: 24px;
}

.sources-table-row td.col-icon i {
  font-size: 18px;
  color: var(--given-color);
}

.sources-table-row td.col-name {
  font-weight: 500;
}

.sources-table-row td.col-records,
.sources-table-row td.col-fields {
  text-align: right;
  font-family: var(--font-mono, monospace);
  font-size: 12px;
}

.sources-table-row td.col-agent {
  color: var(--text-secondary);
  max-width: 150px;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.sources-table-row td.col-derived {
  text-align: center;
}

.sources-table-row td.col-actions {
  text-align: right;
  padding-right: 24px;
}

.source-type-badge {
  font-size: 10px;
  font-weight: 600;
  padding: 3px 8px;
  border-radius: 4px;
  background: var(--bg-tertiary);
  color: var(--text-secondary);
  text-transform: uppercase;
  letter-spacing: 0.3px;
}

.derived-sets-badge {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  min-width: 24px;
  height: 22px;
  padding: 0 8px;
  background: var(--primary-500);
  color: white;
  font-size: 11px;
  font-weight: 600;
  border-radius: 12px;
}

.sources-table-action-btn {
  width: 28px;
  height: 28px;
  border: none;
  background: transparent;
  color: var(--text-muted);
  border-radius: 6px;
  cursor: pointer;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  opacity: 0;
  transition: all 0.15s ease;
}

.sources-table-row:hover .sources-table-action-btn {
  opacity: 1;
}

.sources-table-action-btn:hover {
  background: var(--bg-tertiary);
  color: var(--primary-500);
}

.sources-table-action-btn i {
  font-size: 14px;
}

/* Empty state */
.sources-table-empty {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  height: 100%;
  min-height: 300px;
  color: var(--text-muted);
  gap: 16px;
}

.sources-table-empty i {
  font-size: 64px;
  opacity: 0.4;
}

.sources-table-empty p {
  font-size: 15px;
  margin: 0;
}

.sources-table-empty .btn-primary {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 10px 20px;
  font-size: 14px;
}

/* Responsive adjustments */
@media (max-width: 900px) {
  .sources-table th.col-agent,
  .sources-table-row td.col-agent,
  .sources-table th.col-derived,
  .sources-table-row td.col-derived {
    display: none;
  }

  .sources-table-search {
    width: 200px;
  }
}

@media (max-width: 600px) {
  .sources-table th.col-fields,
  .sources-table-row td.col-fields,
  .sources-table th.col-imported,
  .sources-table-row td.col-imported {
    display: none;
  }

  .sources-table-search {
    width: 150px;
  }

  .sources-table-header {
    padding: 16px;
  }

  .sources-table-toolbar {
    padding: 10px 16px;
  }
}

/* ============================================================================
   Sets Table View (Main Content Area)
   ============================================================================ */

.sets-table-view .sources-table-icon {
  background: var(--accent-purple-bg, rgba(139, 92, 246, 0.1));
}

.sets-table-view .sources-table-icon i {
  color: var(--accent-purple, #8b5cf6);
}

.sets-table-row td.col-icon i {
  color: var(--accent-purple, #8b5cf6);
}

/* Sets table specific column widths */
.sets-table th.col-operator,
.sets-table td.col-operator {
  width: 80px;
  text-align: center;
}

.sets-table th.col-views,
.sets-table th.col-lenses {
  width: 70px;
  text-align: right;
}

.sets-table td.col-views,
.sets-table td.col-lenses {
  text-align: right;
  font-family: var(--font-mono, monospace);
  font-size: 12px;
}

.sets-table th.col-source {
  width: 150px;
}

.sets-table td.col-source {
  color: var(--text-secondary);
  max-width: 150px;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.sets-table th.col-created {
  width: 100px;
}

/* Responsive adjustments for sets table */
@media (max-width: 1100px) {
  .sets-table th.col-lenses,
  .sets-table td.col-lenses,
  .sets-table th.col-source,
  .sets-table td.col-source {
    display: none;
  }
}

@media (max-width: 900px) {
  .sets-table th.col-views,
  .sets-table td.col-views,
  .sets-table th.col-created,
  .sets-table td.col-created {
    display: none;
  }
}

/* ============================================================================
   Definitions Explorer View (Main Content Area - File Explorer Style)
   ============================================================================ */

.definitions-explorer-view {
  height: 100%;
  display: flex;
  flex-direction: column;
  background: var(--bg-primary);
}

.definitions-explorer-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 20px 24px;
  border-bottom: 1px solid var(--border-color);
  background: var(--bg-primary);
}

.definitions-explorer-title {
  display: flex;
  align-items: center;
  gap: 16px;
}

.definitions-explorer-icon {
  width: 40px;
  height: 40px;
  background: rgba(168, 85, 247, 0.1);
  border-radius: 10px;
  display: flex;
  align-items: center;
  justify-content: center;
}

.definitions-explorer-icon i {
  font-size: 20px;
  color: rgb(168, 85, 247);
}

.definitions-explorer-info h2 {
  font-size: 18px;
  font-weight: 600;
  color: var(--text-primary);
  margin: 0;
  display: flex;
  align-items: center;
  gap: 10px;
}

.definitions-explorer-info h2 .dict-badge {
  font-size: 10px;
  font-weight: 600;
  background: rgba(168, 85, 247, 0.1);
  color: rgb(168, 85, 247);
  padding: 3px 8px;
  border-radius: 4px;
  display: inline-flex;
  align-items: center;
  gap: 4px;
}

.definitions-explorer-info h2 .dict-badge i {
  font-size: 10px;
}

.definitions-explorer-meta {
  font-size: 13px;
  color: var(--text-muted);
  margin-top: 4px;
}

.definitions-explorer-actions {
  display: flex;
  gap: 8px;
}

.definitions-explorer-toolbar {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 12px 24px;
  border-bottom: 1px solid var(--border-color);
  background: var(--bg-secondary);
}

.definitions-explorer-search {
  display: flex;
  align-items: center;
  gap: 8px;
  background: var(--bg-primary);
  border: 1px solid var(--border-color);
  border-radius: 6px;
  padding: 6px 12px;
  width: 280px;
}

.definitions-explorer-search i {
  color: var(--text-muted);
  font-size: 14px;
}

.definitions-explorer-search input {
  flex: 1;
  border: none;
  background: transparent;
  outline: none;
  font-size: 13px;
  color: var(--text-primary);
}

.definitions-explorer-search input::placeholder {
  color: var(--text-muted);
}

.definitions-explorer-view-toggle {
  display: flex;
  gap: 4px;
  background: var(--bg-primary);
  border: 1px solid var(--border-color);
  border-radius: 6px;
  padding: 2px;
}

.view-toggle-btn {
  width: 28px;
  height: 28px;
  border: none;
  background: transparent;
  color: var(--text-muted);
  border-radius: 4px;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.15s ease;
}

.view-toggle-btn:hover {
  color: var(--text-primary);
}

.view-toggle-btn.active {
  background: var(--primary-500);
  color: white;
}

.definitions-explorer-count {
  font-size: 13px;
  color: var(--text-muted);
}

.definitions-explorer-content {
  flex: 1;
  overflow: auto;
  padding: 16px 24px;
}

/* Definitions Tree Structure */
.definitions-tree {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

/* Folder (Format Group) */
.def-tree-folder {
  border: 1px solid var(--border-color);
  border-radius: 8px;
  background: var(--bg-primary);
  overflow: hidden;
}

.def-tree-folder-header {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 12px 16px;
  background: var(--bg-secondary);
  cursor: pointer;
  transition: background 0.15s ease;
  user-select: none;
}

.def-tree-folder-header:hover {
  background: var(--bg-tertiary);
}

.folder-expand-icon {
  font-size: 12px;
  color: var(--text-muted);
  transition: transform 0.15s ease;
}

.def-tree-folder.expanded .folder-expand-icon {
  transform: rotate(90deg);
}

.folder-type-icon {
  font-size: 16px;
  color: rgb(168, 85, 247);
}

.def-tree-folder-name {
  flex: 1;
  font-size: 14px;
  font-weight: 600;
  color: var(--text-primary);
}

.def-tree-folder-count {
  font-size: 12px;
  color: var(--text-muted);
  background: var(--bg-primary);
  padding: 2px 8px;
  border-radius: 10px;
}

.def-tree-folder-children {
  display: none;
  flex-direction: column;
  border-top: 1px solid var(--border-color);
}

.def-tree-folder.expanded .def-tree-folder-children {
  display: flex;
}

/* Definition Item */
.def-tree-item {
  border-bottom: 1px solid var(--border-color);
}

.def-tree-item:last-child {
  border-bottom: none;
}

.def-tree-item-header {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 10px 16px 10px 32px;
  cursor: pointer;
  transition: background 0.15s ease;
}

.def-tree-item-header:hover {
  background: var(--bg-hover);
}

.item-expand-icon {
  font-size: 10px;
  color: var(--text-muted);
  transition: transform 0.15s ease;
}

.def-tree-item.expanded .item-expand-icon {
  transform: rotate(90deg);
}

.item-type-icon {
  font-size: 14px;
  color: rgb(168, 85, 247);
}

.def-tree-item-name {
  flex: 1;
  font-size: 13px;
  font-weight: 500;
  color: var(--text-primary);
}

.def-tree-item-badge {
  font-size: 10px;
  font-weight: 600;
  text-transform: uppercase;
  padding: 2px 6px;
  border-radius: 4px;
}

.def-tree-item-badge.uri {
  background: rgba(59, 130, 246, 0.1);
  color: rgb(59, 130, 246);
}

.def-tree-item-badge.local {
  background: rgba(34, 197, 94, 0.1);
  color: rgb(34, 197, 94);
}

.def-tree-item-count {
  font-size: 11px;
  color: var(--text-muted);
  min-width: 24px;
  text-align: right;
}

.def-tree-item-actions {
  display: flex;
  gap: 4px;
  opacity: 0;
  transition: opacity 0.15s ease;
}

.def-tree-item-header:hover .def-tree-item-actions {
  opacity: 1;
}

.def-tree-action-btn {
  width: 24px;
  height: 24px;
  border: none;
  background: transparent;
  color: var(--text-muted);
  border-radius: 4px;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.15s ease;
}

.def-tree-action-btn:hover {
  background: var(--bg-tertiary);
  color: var(--primary-500);
}

.def-tree-action-btn.delete:hover {
  background: rgba(239, 68, 68, 0.1);
  color: rgb(239, 68, 68);
}

.def-tree-action-btn i {
  font-size: 12px;
}

/* Term Children (nested under definition) */
.def-tree-item-children {
  display: none;
  flex-direction: column;
  background: var(--bg-secondary);
  border-top: 1px solid var(--border-color);
}

.def-tree-item.expanded .def-tree-item-children {
  display: flex;
}

.def-tree-term {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 6px 16px 6px 56px;
  font-size: 12px;
  color: var(--text-secondary);
  border-bottom: 1px solid var(--border-light);
}

.def-tree-term:last-child {
  border-bottom: none;
}

.term-icon {
  font-size: 12px;
  color: var(--text-muted);
}

.def-tree-term-name {
  flex: 1;
  font-weight: 500;
}

.def-tree-term-type {
  font-size: 11px;
  font-family: var(--font-mono);
  color: var(--text-muted);
  background: var(--bg-primary);
  padding: 2px 6px;
  border-radius: 3px;
}

.def-tree-term-more {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 8px 16px 8px 56px;
  font-size: 12px;
  color: var(--text-muted);
  font-style: italic;
}

.def-tree-term-more i {
  font-size: 14px;
}

/* Empty State */
.definitions-explorer-empty {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  height: 100%;
  min-height: 300px;
  color: var(--text-muted);
  gap: 12px;
  text-align: center;
}

.definitions-explorer-empty > i {
  font-size: 64px;
  opacity: 0.4;
  color: rgb(168, 85, 247);
}

.definitions-explorer-empty p {
  font-size: 15px;
  margin: 0;
}

.definitions-explorer-empty .empty-hint {
  font-size: 13px;
  max-width: 300px;
}

.definitions-explorer-empty .empty-actions {
  display: flex;
  gap: 12px;
  margin-top: 8px;
}

.definitions-explorer-empty .btn-secondary,
.definitions-explorer-empty .btn-primary {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 10px 20px;
  font-size: 14px;
}

/* Apply Definition to Keys Modal */
.apply-definition-form {
  min-width: 350px;
}

.apply-definition-form > p {
  margin-bottom: 16px;
  color: var(--text-secondary);
}

.apply-definition-sets {
  display: flex;
  flex-direction: column;
  gap: 8px;
  max-height: 300px;
  overflow-y: auto;
}

.apply-definition-set-option {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 12px 16px;
  border: 1px solid var(--border-color);
  border-radius: 8px;
  cursor: pointer;
  transition: all 0.15s ease;
}

.apply-definition-set-option:hover {
  background: var(--bg-hover);
  border-color: var(--primary-500);
}

.apply-definition-set-option input[type="radio"] {
  width: 16px;
  height: 16px;
  accent-color: var(--primary-500);
}

.apply-definition-set-option i {
  font-size: 18px;
  color: var(--primary-500);
}

.apply-definition-set-option span {
  flex: 1;
  font-size: 14px;
  color: var(--text-primary);
}

.apply-definition-set-option .set-record-count {
  font-size: 12px;
  color: var(--text-muted);
}

.no-sets-message {
  text-align: center;
  color: var(--text-muted);
  padding: 20px;
}

/* Definitions Tab Styling */
.definitions-tab {
  background: rgba(168, 85, 247, 0.05);
}

.definitions-tab.active {
  border-color: rgb(168, 85, 247);
  box-shadow: inset 0 2px 0 0 rgb(168, 85, 247);
}

.definitions-tab .tab-icon i {
  color: rgb(168, 85, 247);
}

/* Responsive adjustments */
@media (max-width: 768px) {
  .definitions-explorer-header {
    flex-direction: column;
    align-items: flex-start;
    gap: 16px;
  }

  .definitions-explorer-toolbar {
    flex-direction: column;
    gap: 12px;
    align-items: stretch;
  }

  .definitions-explorer-search {
    width: 100%;
  }

  .definitions-explorer-view-toggle {
    align-self: flex-end;
  }

  .definitions-explorer-content {
    padding: 12px 16px;
  }

  .def-tree-item-header {
    padding-left: 24px;
  }

  .def-tree-term {
    padding-left: 40px;
  }

  .def-tree-term-more {
    padding-left: 40px;
  }
}

/* ============================================================================
   Definitions Panel - Table View
   ============================================================================ */

.definitions-panel-view {
  display: flex;
  flex-direction: column;
  height: 100%;
  background: var(--bg-primary);
}

.definitions-panel-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 20px 24px;
  border-bottom: 1px solid var(--border-color);
  background: var(--bg-secondary);
}

.definitions-panel-title-area {
  display: flex;
  align-items: center;
  gap: 16px;
}

.definitions-panel-icon {
  width: 48px;
  height: 48px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: rgba(168, 85, 247, 0.1);
  border-radius: 12px;
}

.definitions-panel-icon i {
  font-size: 24px;
  color: rgb(168, 85, 247);
}

.definitions-panel-title-info h2 {
  font-size: 20px;
  font-weight: 600;
  color: var(--text-primary);
  margin: 0;
}

.definitions-panel-subtitle {
  font-size: 13px;
  color: var(--text-muted);
  margin-top: 4px;
}

.definitions-panel-actions {
  display: flex;
  gap: 12px;
}

.definitions-panel-toolbar {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 12px 24px;
  border-bottom: 1px solid var(--border-color);
  background: var(--bg-primary);
  gap: 16px;
}

.definitions-panel-search {
  display: flex;
  align-items: center;
  gap: 8px;
  flex: 1;
  max-width: 400px;
  background: var(--bg-secondary);
  border: 1px solid var(--border-color);
  border-radius: 6px;
  padding: 8px 12px;
}

.definitions-panel-search i {
  color: var(--text-muted);
  font-size: 14px;
}

.definitions-panel-search input {
  flex: 1;
  border: none;
  background: transparent;
  font-size: 13px;
  color: var(--text-primary);
  outline: none;
}

.definitions-panel-search input::placeholder {
  color: var(--text-muted);
}

.definitions-panel-filters {
  display: flex;
  gap: 12px;
}

.def-panel-filter-select {
  padding: 8px 12px;
  border: 1px solid var(--border-color);
  border-radius: 6px;
  background: var(--bg-secondary);
  font-size: 13px;
  color: var(--text-primary);
  cursor: pointer;
}

.def-panel-filter-select:focus {
  outline: none;
  border-color: var(--primary-500);
}

.definitions-panel-table-container {
  flex: 1;
  overflow: auto;
  padding: 0;
}

.definitions-panel-table {
  width: 100%;
  border-collapse: collapse;
  font-size: 13px;
}

.definitions-panel-table thead {
  position: sticky;
  top: 0;
  z-index: 10;
  background: var(--bg-secondary);
}

.definitions-panel-table th {
  padding: 12px 16px;
  text-align: left;
  font-weight: 600;
  color: var(--text-muted);
  font-size: 11px;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  border-bottom: 1px solid var(--border-color);
}

.definitions-panel-table th.col-expand { width: 40px; }
.definitions-panel-table th.col-status { width: 100px; }
.definitions-panel-table th.col-name { min-width: 180px; }
.definitions-panel-table th.col-description { min-width: 180px; }
.definitions-panel-table th.col-format { width: 100px; }
.definitions-panel-table th.col-source { width: 160px; }
.definitions-panel-table th.col-terms { width: 70px; text-align: center; }
.definitions-panel-table th.col-linked { width: 90px; text-align: center; }
.definitions-panel-table th.col-actions { width: 130px; }

.definition-row {
  border-bottom: 1px solid var(--border-color);
  transition: background 0.15s ease;
}

.definition-row:hover {
  background: var(--bg-hover);
}

.definition-row.expanded {
  background: var(--bg-secondary);
}

/* Pending approval row styles */
.definition-row.pending-approval {
  background: rgba(251, 191, 36, 0.05);
  border-left: 3px solid rgb(251, 191, 36);
}

.definition-row.pending-approval:hover {
  background: rgba(251, 191, 36, 0.1);
}

/* Status badges */
.def-status-badge {
  display: inline-flex;
  align-items: center;
  gap: 5px;
  padding: 4px 10px;
  font-size: 11px;
  font-weight: 500;
  border-radius: 12px;
  white-space: nowrap;
}

.def-status-badge i {
  font-size: 12px;
}

.def-status-badge.pending {
  background: rgba(251, 191, 36, 0.15);
  color: rgb(180, 130, 20);
}

.def-status-badge.active {
  background: rgba(34, 197, 94, 0.1);
  color: rgb(22, 163, 74);
}

/* Approve button styling */
.def-action-btn.approve {
  color: rgb(34, 197, 94);
}

.def-action-btn.approve:hover {
  background: rgba(34, 197, 94, 0.1);
  color: rgb(22, 163, 74);
}

/* Pending actions container */
.def-row-actions.pending-actions {
  display: flex;
  gap: 4px;
}

/* Pending count badge in subtitle */
.pending-count-badge {
  display: inline-flex;
  align-items: center;
  gap: 4px;
  padding: 2px 8px;
  font-size: 11px;
  font-weight: 500;
  background: rgba(251, 191, 36, 0.15);
  color: rgb(180, 130, 20);
  border-radius: 10px;
}

/* Sidebar pending indicator */
.definition-pending-indicator {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 18px;
  height: 18px;
  font-size: 10px;
  font-weight: 600;
  background: rgb(251, 191, 36);
  color: white;
  border-radius: 50%;
  margin-left: 4px;
}

/* Sidebar definition item pending state */
.definition-item.pending {
  border-left: 2px solid rgb(251, 191, 36);
  background: rgba(251, 191, 36, 0.05);
}

.definition-item.pending:hover {
  background: rgba(251, 191, 36, 0.1);
}

.definition-item.pending .definition-meta-inline {
  color: rgb(180, 130, 20);
}

.definition-pending-badge {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 20px;
  height: 20px;
  color: rgb(180, 130, 20);
  font-size: 12px;
}

.definition-pending-badge i {
  font-size: 14px;
}

.definition-row td {
  padding: 12px 16px;
  vertical-align: middle;
}

.def-row-expand-btn {
  width: 28px;
  height: 28px;
  border: none;
  background: transparent;
  color: var(--text-muted);
  border-radius: 4px;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.15s ease;
}

.def-row-expand-btn:hover {
  background: var(--bg-tertiary);
  color: var(--primary-500);
}

.def-row-expand-btn i {
  font-size: 14px;
  transition: transform 0.15s ease;
}

.definition-row.expanded .def-row-expand-btn i {
  transform: rotate(90deg);
}

.def-name-cell {
  display: flex;
  align-items: center;
  gap: 10px;
}

.def-icon {
  font-size: 18px;
  color: rgb(168, 85, 247);
}

.def-name-text {
  font-weight: 500;
  color: var(--text-primary);
  cursor: pointer;
}

.def-name-text:hover {
  color: var(--primary-500);
}

.def-description-text {
  color: var(--text-secondary);
  cursor: pointer;
  max-width: 300px;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.def-description-text:hover {
  color: var(--text-primary);
}

.def-format-badge {
  display: inline-block;
  padding: 4px 8px;
  font-size: 11px;
  font-weight: 500;
  background: rgba(168, 85, 247, 0.1);
  color: rgb(168, 85, 247);
  border-radius: 4px;
}

.def-source-badge {
  display: inline-flex;
  align-items: center;
  gap: 4px;
  padding: 4px 8px;
  font-size: 11px;
  font-weight: 500;
  border-radius: 4px;
}

.def-source-badge.uri {
  background: rgba(59, 130, 246, 0.1);
  color: rgb(59, 130, 246);
}

.def-source-badge.local {
  background: rgba(34, 197, 94, 0.1);
  color: rgb(34, 197, 94);
}

.def-source-uri {
  display: block;
  font-size: 11px;
  color: var(--text-muted);
  margin-top: 4px;
  max-width: 150px;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.def-terms-count {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  min-width: 24px;
  padding: 4px 8px;
  font-size: 12px;
  font-weight: 500;
  background: var(--bg-tertiary);
  color: var(--text-primary);
  border-radius: 12px;
}

.def-linked-badge {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 4px;
  padding: 4px 10px;
  font-size: 12px;
  border-radius: 4px;
  border: none;
  cursor: pointer;
  transition: all 0.15s ease;
}

.def-linked-badge.has-links {
  background: rgba(34, 197, 94, 0.1);
  color: rgb(34, 197, 94);
}

.def-linked-badge.has-links:hover {
  background: rgba(34, 197, 94, 0.2);
}

.def-linked-badge.no-links {
  color: var(--text-muted);
  cursor: default;
}

.def-row-actions {
  display: flex;
  gap: 4px;
  opacity: 0;
  transition: opacity 0.15s ease;
}

.definition-row:hover .def-row-actions {
  opacity: 1;
}

.def-action-btn {
  width: 28px;
  height: 28px;
  border: none;
  background: transparent;
  color: var(--text-muted);
  border-radius: 4px;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.15s ease;
}

.def-action-btn:hover {
  background: var(--bg-tertiary);
  color: var(--primary-500);
}

.def-action-btn:disabled {
  opacity: 0.4;
  cursor: not-allowed;
}

.def-action-btn.danger:hover {
  background: rgba(239, 68, 68, 0.1);
  color: rgb(239, 68, 68);
}

/* Definition Terms Expanded Row */
.definition-terms-row {
  background: var(--bg-secondary);
}

.definition-terms-row td {
  padding: 0;
}

.def-terms-expanded {
  padding: 16px 24px;
  border-top: 1px solid var(--border-color);
}

.def-terms-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 16px;
}

.def-terms-header h4 {
  display: flex;
  align-items: center;
  gap: 8px;
  font-size: 14px;
  font-weight: 600;
  color: var(--text-primary);
}

.def-terms-header h4 i {
  color: rgb(168, 85, 247);
}

.def-terms-empty {
  text-align: center;
  color: var(--text-muted);
  padding: 20px;
  font-style: italic;
}

.def-terms-table {
  width: 100%;
  border-collapse: collapse;
  background: var(--bg-primary);
  border-radius: 8px;
  overflow: hidden;
  border: 1px solid var(--border-color);
}

.def-terms-table th,
.def-terms-table td {
  padding: 10px 14px;
  text-align: left;
  font-size: 13px;
  border-bottom: 1px solid var(--border-color);
}

.def-terms-table th {
  background: var(--bg-tertiary);
  font-weight: 600;
  color: var(--text-muted);
  font-size: 11px;
  text-transform: uppercase;
}

.def-terms-table tr:last-child td {
  border-bottom: none;
}

.term-row:hover {
  background: var(--bg-hover);
}

.term-name {
  display: flex;
  align-items: center;
  gap: 8px;
  font-weight: 500;
  color: var(--text-primary);
}

.term-name i {
  color: var(--text-muted);
}

.type-badge {
  display: inline-block;
  padding: 2px 6px;
  font-size: 11px;
  font-family: var(--font-mono);
  background: var(--bg-tertiary);
  color: var(--text-secondary);
  border-radius: 3px;
}

.term-description {
  color: var(--text-secondary);
  max-width: 250px;
}

.term-uri-link {
  color: var(--primary-500);
  text-decoration: none;
  font-size: 12px;
}

.term-uri-link:hover {
  text-decoration: underline;
}

.term-link-action {
  min-width: 180px;
}

.term-link-btn {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  padding: 6px 12px;
  border: 1px dashed var(--border-color);
  background: transparent;
  color: var(--text-muted);
  border-radius: 4px;
  cursor: pointer;
  font-size: 12px;
  transition: all 0.15s ease;
}

.term-link-btn:hover {
  border-color: var(--primary-500);
  color: var(--primary-500);
  background: rgba(59, 130, 246, 0.05);
}

.term-linked-to {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  padding: 4px 10px;
  background: rgba(34, 197, 94, 0.1);
  color: rgb(34, 197, 94);
  border-radius: 4px;
  font-size: 12px;
}

.term-linked-to i {
  font-size: 14px;
}

.term-unlink-btn {
  width: 18px;
  height: 18px;
  border: none;
  background: transparent;
  color: inherit;
  border-radius: 50%;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  margin-left: 4px;
  transition: all 0.15s ease;
}

.term-unlink-btn:hover {
  background: rgba(239, 68, 68, 0.2);
  color: rgb(239, 68, 68);
}

/* Inline Edit Input */
.inline-edit-input {
  width: 100%;
  padding: 4px 8px;
  border: 1px solid var(--primary-500);
  border-radius: 4px;
  background: var(--bg-primary);
  color: var(--text-primary);
  font-size: inherit;
  outline: none;
}

/* Definitions Panel Empty State */
.definitions-panel-empty {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  height: 100%;
  min-height: 400px;
  text-align: center;
  color: var(--text-muted);
  gap: 16px;
}

.definitions-panel-empty > i {
  font-size: 64px;
  opacity: 0.4;
  color: rgb(168, 85, 247);
}

.definitions-panel-empty h3 {
  font-size: 18px;
  font-weight: 600;
  color: var(--text-primary);
  margin: 0;
}

.definitions-panel-empty p {
  font-size: 14px;
  max-width: 350px;
  margin: 0;
}

.definitions-panel-empty-actions {
  display: flex;
  gap: 12px;
  margin-top: 8px;
}

/* Link Term Modal Styles */
.link-term-form > p,
.link-definition-form > p {
  margin-bottom: 16px;
  color: var(--text-secondary);
}

.link-term-sets {
  display: flex;
  flex-direction: column;
  gap: 16px;
  max-height: 350px;
  overflow-y: auto;
}

.link-term-set-group {
  border: 1px solid var(--border-color);
  border-radius: 8px;
  overflow: hidden;
}

.link-term-set-header {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 10px 14px;
  background: var(--bg-secondary);
  font-weight: 500;
  color: var(--text-primary);
}

.link-term-set-header i {
  font-size: 16px;
  color: var(--primary-500);
}

.link-term-fields {
  display: flex;
  flex-direction: column;
}

.link-term-field-option {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 10px 14px;
  cursor: pointer;
  border-top: 1px solid var(--border-color);
  transition: background 0.15s ease;
}

.link-term-field-option:hover {
  background: var(--bg-hover);
}

.link-term-field-option.already-linked {
  background: rgba(34, 197, 94, 0.05);
}

.link-term-field-option input[type="radio"] {
  width: 16px;
  height: 16px;
  accent-color: var(--primary-500);
}

.link-term-field-option i {
  font-size: 14px;
  color: var(--text-muted);
}

.link-term-field-option span {
  flex: 1;
  font-size: 13px;
}

.linked-indicator {
  color: rgb(34, 197, 94);
}

.no-sets-message {
  text-align: center;
  color: var(--text-muted);
  padding: 30px 20px;
}

/* Link Definition Modal */
.link-definition-terms {
  display: flex;
  flex-direction: column;
  gap: 8px;
  max-height: 200px;
  overflow-y: auto;
  margin-bottom: 16px;
}

.link-term-option {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 10px 14px;
  border: 1px solid var(--border-color);
  border-radius: 6px;
  cursor: pointer;
  transition: all 0.15s ease;
}

.link-term-option:hover {
  border-color: var(--primary-500);
  background: var(--bg-hover);
}

.link-term-option input[type="radio"] {
  width: 16px;
  height: 16px;
  accent-color: var(--primary-500);
}

.link-term-option i {
  color: var(--text-muted);
}

.link-term-option .term-name {
  flex: 1;
  font-weight: 500;
}

.link-term-option .term-type-badge {
  font-size: 11px;
  font-family: var(--font-mono);
  padding: 2px 6px;
  background: var(--bg-tertiary);
  border-radius: 3px;
  color: var(--text-muted);
}

.form-divider {
  border: none;
  border-top: 1px solid var(--border-color);
  margin: 16px 0;
}

/* Linked Fields Modal */
.linked-fields-list {
  min-width: 400px;
}

.no-linked-fields {
  text-align: center;
  color: var(--text-muted);
  padding: 30px 20px;
}

.linked-fields-table {
  width: 100%;
  border-collapse: collapse;
}

.linked-fields-table th,
.linked-fields-table td {
  padding: 10px 12px;
  text-align: left;
  font-size: 13px;
  border-bottom: 1px solid var(--border-color);
}

.linked-fields-table th {
  font-weight: 600;
  color: var(--text-muted);
  font-size: 11px;
  text-transform: uppercase;
  background: var(--bg-secondary);
}

.linked-fields-table tr:last-child td {
  border-bottom: none;
}

.linked-fields-table td i {
  margin-right: 6px;
  color: var(--text-muted);
}

/* Button size small */
.btn-sm {
  padding: 4px 10px;
  font-size: 12px;
}

/* Make all panel titles clickable - opens explorer views */
.projects-panel .nav-panel-title,
.sources-panel .nav-panel-title,
.definitions-panel .nav-panel-title,
.sets-panel .nav-panel-title {
  cursor: pointer;
  transition: color 0.15s ease;
}

.projects-panel .nav-panel-title:hover {
  color: var(--text-primary);
}

.sources-panel .nav-panel-title:hover {
  color: var(--accent-green, #10b981);
}

.definitions-panel .nav-panel-title:hover {
  color: rgb(168, 85, 247);
}

.sets-panel .nav-panel-title:hover {
  color: var(--accent-purple, #8b5cf6);
}

/* Responsive */
@media (max-width: 768px) {
  .definitions-panel-header {
    flex-direction: column;
    align-items: flex-start;
    gap: 16px;
  }

  .definitions-panel-toolbar {
    flex-direction: column;
    gap: 12px;
  }

  .definitions-panel-search {
    max-width: none;
  }

  .definitions-panel-filters {
    width: 100%;
    flex-wrap: wrap;
  }

  .def-panel-filter-select {
    flex: 1;
  }

  .def-row-actions {
    opacity: 1;
  }
}

/* ============================================================================
   Source Name Edit Button
   ============================================================================ */

.source-name-edit-btn {
  background: transparent;
  border: none;
  color: var(--text-muted);
  cursor: pointer;
  padding: 4px 6px;
  border-radius: 4px;
  margin-left: 8px;
  opacity: 0;
  transition: all 0.15s ease;
  font-size: 14px;
  vertical-align: middle;
}

.source-viewer-info h2:hover .source-name-edit-btn {
  opacity: 0.7;
}

.source-name-edit-btn:hover {
  background: var(--bg-tertiary);
  color: var(--primary-500);
  opacity: 1 !important;
}

/* ============================================================================
   Source Provenance Edit Styles
   ============================================================================ */

.source-provenance-header {
  position: relative;
}

.source-prov-edit-all-btn {
  background: transparent;
  border: none;
  color: var(--text-muted);
  cursor: pointer;
  padding: 4px 6px;
  border-radius: 4px;
  margin-left: auto;
  opacity: 0.5;
  transition: all 0.15s ease;
  font-size: 12px;
}

.source-prov-edit-all-btn:hover {
  background: var(--bg-tertiary);
  color: var(--primary-500);
  opacity: 1;
}

/* Empty provenance items */
.source-provenance-item.empty {
  opacity: 0.6;
}

.source-provenance-item .value.placeholder {
  color: var(--text-muted);
  font-style: italic;
}

/* Source Provenance Status Indicator */
.source-prov-status {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 8px 12px;
  background: var(--bg-tertiary);
  border-radius: 8px;
  margin-bottom: 12px;
}

.source-prov-status.complete {
  color: var(--success-500);
}

.source-prov-status.partial {
  color: var(--warning-500);
}

.source-prov-status.none {
  color: var(--text-muted);
}

.source-prov-indicator {
  font-size: 14px;
}

.source-prov-status-text {
  font-size: 12px;
  font-weight: 500;
}

/* Source Provenance Triads */
.source-prov-triad {
  margin-bottom: 16px;
  padding-bottom: 16px;
  border-bottom: 1px solid var(--border-color);
}

.source-prov-triad:last-child {
  margin-bottom: 0;
  padding-bottom: 0;
  border-bottom: none;
}

.source-prov-triad.empty {
  opacity: 0.6;
}

.source-prov-triad-header {
  display: flex;
  align-items: center;
  gap: 8px;
  margin-bottom: 10px;
}

.source-prov-triad-header > i {
  color: var(--primary-500);
  font-size: 16px;
}

.source-prov-triad-name {
  font-weight: 600;
  font-size: 12px;
  color: var(--text-primary);
  text-transform: uppercase;
  letter-spacing: 0.3px;
}

.source-prov-triad-subtitle {
  font-size: 11px;
  color: var(--text-muted);
  margin-left: auto;
}

/* Source File Metadata Section */
.source-file-metadata {
  margin-top: 20px;
  padding-top: 16px;
  border-top: 1px solid var(--border-color);
}

.source-file-metadata-header {
  display: flex;
  align-items: center;
  gap: 8px;
  font-size: 11px;
  font-weight: 600;
  text-transform: uppercase;
  color: var(--text-muted);
  margin-bottom: 12px;
}

.source-file-metadata-header > i {
  font-size: 14px;
  color: var(--text-muted);
}

.source-file-metadata-items {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.source-file-metadata-item {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 8px 12px;
  background: var(--bg-tertiary);
  border-radius: 6px;
  font-size: 12px;
}

.source-file-metadata-item > i {
  color: var(--text-muted);
  font-size: 14px;
  width: 20px;
  flex-shrink: 0;
}

.source-file-metadata-item .label {
  color: var(--text-muted);
  min-width: 120px;
}

.source-file-metadata-item .value {
  color: var(--text-primary);
  flex: 1;
  word-break: break-word;
}

/* ============================================================================
   Source Edit History Styles
   ============================================================================ */

.source-edit-history {
  margin-top: 20px;
  padding-top: 16px;
  border-top: 1px solid var(--border-color);
}

.source-edit-history-header {
  display: flex;
  align-items: center;
  gap: 8px;
  font-size: 11px;
  font-weight: 600;
  text-transform: uppercase;
  color: var(--text-muted);
  cursor: pointer;
  padding: 8px;
  margin: -8px;
  border-radius: 6px;
  transition: background 0.15s ease;
}

.source-edit-history-header:hover {
  background: var(--bg-tertiary);
}

.source-edit-history-header i {
  font-size: 14px;
}

.source-edit-history-header i:last-child {
  margin-left: auto;
  font-size: 12px;
}

.source-edit-history-items {
  margin-top: 12px;
}

.source-edit-history-item {
  padding: 10px 12px;
  background: var(--bg-tertiary);
  border-radius: 6px;
  margin-bottom: 6px;
  font-size: 12px;
}

.source-edit-history-item .edit-timestamp {
  font-size: 10px;
  color: var(--text-muted);
  font-family: 'JetBrains Mono', monospace;
  margin-bottom: 4px;
}

.source-edit-history-item .edit-details {
  color: var(--text-secondary);
  line-height: 1.4;
}

.source-edit-history-item .edit-field {
  color: var(--primary-500);
  font-weight: 500;
}

.source-edit-history-item .edit-old {
  color: var(--danger-500);
  text-decoration: line-through;
  opacity: 0.7;
}

.source-edit-history-item .edit-new {
  color: var(--success-500);
  font-weight: 500;
}

/* ============================================================================
   Provenance Edit Modal Styles
   ============================================================================ */

.source-provenance-edit-modal {
  padding: 8px 0;
}

.source-provenance-edit-modal h3 {
  display: flex;
  align-items: center;
  gap: 10px;
  font-size: 18px;
  font-weight: 600;
  color: var(--text-primary);
  margin: 0 0 8px 0;
}

.source-provenance-edit-modal h3 i {
  color: var(--given-color, #f0883e);
}

.source-provenance-edit-modal .modal-subtitle {
  font-size: 13px;
  color: var(--text-muted);
  margin: 0 0 20px 0;
}

.provenance-edit-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
  gap: 16px;
}

.provenance-edit-field {
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.provenance-edit-field label {
  display: flex;
  align-items: center;
  gap: 8px;
  font-size: 12px;
  font-weight: 500;
  color: var(--text-secondary);
}

.provenance-edit-field label i {
  width: 20px;
  height: 20px;
  background: var(--bg-tertiary);
  border-radius: 4px;
  display: flex;
  align-items: center;
  justify-content: center;
  color: var(--given-color, #f0883e);
  font-size: 11px;
}

.provenance-edit-field input {
  padding: 10px 12px;
  font-size: 13px;
  border: 1px solid var(--border-color);
  border-radius: 6px;
  background: var(--bg-secondary);
  color: var(--text-primary);
  transition: all 0.15s ease;
}

.provenance-edit-field input:focus {
  outline: none;
  border-color: var(--primary-500);
  box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.15);
}

.provenance-edit-field input::placeholder {
  color: var(--text-muted);
  font-style: italic;
}

/* ============================================================================
   Join Builder UI Styles
   ============================================================================ */

.join-builder-overlay,
.set-creator-overlay {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(0, 0, 0, 0.5);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 1000;
  padding: 20px;
}

.join-builder-modal,
.set-creator-modal {
  background: var(--bg-primary);
  border-radius: 12px;
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
  width: 100%;
  max-width: 900px;
  max-height: 90vh;
  display: flex;
  flex-direction: column;
  overflow: hidden;
}

.join-builder-header,
.set-creator-header {
  padding: 20px 24px;
  border-bottom: 1px solid var(--border-color);
  position: relative;
}

.join-builder-header h2,
.set-creator-header h2 {
  font-size: 18px;
  font-weight: 600;
  display: flex;
  align-items: center;
  gap: 10px;
  margin: 0 0 4px 0;
}

.join-builder-header h2 i,
.set-creator-header h2 i {
  color: var(--accent-color);
}

.join-builder-subtitle,
.set-creator-subtitle {
  font-size: 13px;
  color: var(--text-muted);
  margin: 0;
  display: flex;
  align-items: center;
  gap: 8px;
}

.set-creator-subtitle .record-count {
  background: var(--bg-secondary);
  padding: 2px 8px;
  border-radius: 4px;
  font-size: 11px;
}

.join-builder-close,
.set-creator-close {
  position: absolute;
  top: 16px;
  right: 16px;
  background: none;
  border: none;
  font-size: 20px;
  color: var(--text-muted);
  cursor: pointer;
  padding: 4px;
  border-radius: 4px;
}

.join-builder-close:hover,
.set-creator-close:hover {
  background: var(--bg-hover);
  color: var(--text-primary);
}

.join-builder-body,
.set-creator-body {
  flex: 1;
  overflow-y: auto;
  padding: 24px;
  display: flex;
  flex-direction: column;
  gap: 24px;
}

/* Source Selection Section */
.join-sources-section {
  display: grid;
  grid-template-columns: 1fr auto 1fr;
  gap: 20px;
  align-items: start;
}

.join-source-picker {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.join-source-picker label {
  font-size: 12px;
  font-weight: 600;
  color: var(--text-muted);
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.join-source-select {
  padding: 10px 12px;
  border: 1px solid var(--border-color);
  border-radius: 6px;
  background: var(--bg-primary);
  font-size: 14px;
  color: var(--text-primary);
  cursor: pointer;
}

.join-source-select:focus {
  outline: none;
  border-color: var(--accent-color);
  box-shadow: 0 0 0 2px rgba(0, 112, 243, 0.1);
}

.join-source-fields {
  margin-top: 8px;
}

.field-chips {
  display: flex;
  flex-wrap: wrap;
  gap: 6px;
}

.field-chip {
  display: inline-flex;
  align-items: center;
  gap: 4px;
  padding: 4px 10px;
  background: var(--bg-secondary);
  border-radius: 12px;
  font-size: 12px;
  color: var(--text-secondary);
}

.field-chip i {
  font-size: 11px;
  color: var(--text-muted);
}

/* Join Type Picker */
.join-type-picker {
  display: flex;
  flex-direction: column;
  gap: 8px;
  align-items: center;
  padding-top: 22px;
}

.join-type-picker label {
  font-size: 12px;
  font-weight: 600;
  color: var(--text-muted);
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.join-type-options {
  display: flex;
  flex-direction: column;
  gap: 4px;
}

.join-type-btn {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 8px 12px;
  border: 1px solid var(--border-color);
  border-radius: 6px;
  background: var(--bg-primary);
  font-size: 12px;
  color: var(--text-secondary);
  cursor: pointer;
  transition: all 0.15s ease;
}

.join-type-btn:hover {
  background: var(--bg-hover);
  border-color: var(--accent-color);
}

.join-type-btn.active {
  background: rgba(0, 112, 243, 0.1);
  border-color: var(--accent-color);
  color: var(--accent-color);
}

.join-type-btn i {
  font-size: 14px;
}

.join-type-desc {
  font-size: 11px;
  color: var(--text-muted);
  text-align: center;
  max-width: 150px;
  margin: 4px 0 0 0;
}

/* Join Conditions Section */
.join-conditions-section,
.join-output-section,
.set-creator-fields-section,
.set-creator-filters-section {
  background: var(--bg-secondary);
  border-radius: 8px;
  padding: 16px;
}

.join-conditions-section h3,
.join-output-section h3,
.set-creator-fields-section h3,
.set-creator-filters-section h3 {
  font-size: 14px;
  font-weight: 600;
  display: flex;
  align-items: center;
  gap: 8px;
  margin: 0 0 4px 0;
}

.section-desc {
  font-size: 12px;
  color: var(--text-muted);
  margin: 0 0 12px 0;
}

.join-conditions-list,
.filter-list {
  display: flex;
  flex-direction: column;
  gap: 8px;
  margin-bottom: 12px;
}

.join-condition-empty,
.filter-empty,
.join-output-empty {
  padding: 16px;
  text-align: center;
  color: var(--text-muted);
  background: var(--bg-primary);
  border-radius: 6px;
  border: 1px dashed var(--border-color);
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
  font-size: 13px;
}

.join-condition,
.filter-row {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 8px 12px;
  background: var(--bg-primary);
  border-radius: 6px;
  border: 1px solid var(--border-color);
}

.join-condition select,
.filter-row select,
.filter-row input {
  flex: 1;
  padding: 8px 10px;
  border: 1px solid var(--border-color);
  border-radius: 4px;
  background: var(--bg-primary);
  font-size: 13px;
  color: var(--text-primary);
}

.join-condition select:focus,
.filter-row select:focus,
.filter-row input:focus {
  outline: none;
  border-color: var(--accent-color);
}

.condition-operator,
.filter-operator {
  flex: 0 0 100px !important;
  text-align: center;
}

.condition-remove-btn,
.filter-remove-btn,
.output-field-remove {
  background: none;
  border: none;
  color: var(--text-muted);
  cursor: pointer;
  padding: 4px;
  border-radius: 4px;
  font-size: 14px;
}

.condition-remove-btn:hover,
.filter-remove-btn:hover,
.output-field-remove:hover {
  background: rgba(255, 0, 0, 0.1);
  color: #e53e3e;
}

.join-add-condition-btn,
.add-filter-btn {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 6px;
  padding: 8px 16px;
  border: 1px dashed var(--border-color);
  border-radius: 6px;
  background: none;
  color: var(--text-muted);
  font-size: 13px;
  cursor: pointer;
  transition: all 0.15s ease;
}

.join-add-condition-btn:hover:not(:disabled),
.add-filter-btn:hover {
  border-color: var(--accent-color);
  color: var(--accent-color);
  background: rgba(0, 112, 243, 0.05);
}

.join-add-condition-btn:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

/* Output Fields Section */
.join-output-controls,
.field-select-actions {
  display: flex;
  gap: 8px;
  margin-bottom: 12px;
}

.join-output-btn,
.field-action-btn {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 6px 12px;
  border: 1px solid var(--border-color);
  border-radius: 4px;
  background: var(--bg-primary);
  color: var(--text-secondary);
  font-size: 12px;
  cursor: pointer;
}

.join-output-btn:hover:not(:disabled),
.field-action-btn:hover {
  background: var(--bg-hover);
  border-color: var(--accent-color);
}

.join-output-btn:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

.join-output-list {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
}

.join-output-field {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  padding: 6px 10px;
  background: var(--bg-primary);
  border: 1px solid var(--border-color);
  border-radius: 6px;
  font-size: 13px;
}

.output-source-badge {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 18px;
  height: 18px;
  border-radius: 50%;
  font-size: 10px;
  font-weight: 600;
}

.output-source-badge.left {
  background: #3182ce;
  color: white;
}

.output-source-badge.right {
  background: #38a169;
  color: white;
}

.output-field-name {
  color: var(--text-primary);
}

.output-field-rename {
  color: var(--text-muted);
  font-style: italic;
}

/* Field Selection List */
.field-select-list {
  max-height: 250px;
  overflow-y: auto;
  border: 1px solid var(--border-color);
  border-radius: 6px;
  background: var(--bg-primary);
}

.field-select-row {
  display: grid;
  grid-template-columns: auto 1fr 120px 150px;
  align-items: center;
  gap: 12px;
  padding: 10px 12px;
  border-bottom: 1px solid var(--border-color);
  opacity: 0.6;
}

.field-select-row:last-child {
  border-bottom: none;
}

.field-select-row.selected {
  opacity: 1;
  background: rgba(0, 112, 243, 0.05);
}

.field-checkbox {
  width: 16px;
  height: 16px;
  cursor: pointer;
}

.field-original-name {
  font-size: 13px;
  color: var(--text-primary);
  font-weight: 500;
}

.field-type-select,
.field-rename-input {
  padding: 6px 8px;
  border: 1px solid var(--border-color);
  border-radius: 4px;
  background: var(--bg-primary);
  font-size: 12px;
  color: var(--text-primary);
}

.field-rename-input::placeholder {
  color: var(--text-muted);
  font-style: italic;
}

/* Set Name Section */
.join-name-section,
.set-creator-name-section {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.join-name-section label,
.set-creator-name-section label {
  font-size: 12px;
  font-weight: 600;
  color: var(--text-muted);
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.join-set-name-input,
.set-creator-name-input {
  padding: 12px 14px;
  border: 1px solid var(--border-color);
  border-radius: 6px;
  background: var(--bg-primary);
  font-size: 14px;
  color: var(--text-primary);
}

.join-set-name-input:focus,
.set-creator-name-input:focus {
  outline: none;
  border-color: var(--accent-color);
  box-shadow: 0 0 0 2px rgba(0, 112, 243, 0.1);
}

/* Preview Section */
.join-preview-section,
.set-creator-preview-section {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.join-preview-btn,
.preview-btn {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
  padding: 10px 16px;
  border: 1px solid var(--border-color);
  border-radius: 6px;
  background: var(--bg-secondary);
  color: var(--text-primary);
  font-size: 13px;
  cursor: pointer;
  align-self: flex-start;
}

.join-preview-btn:hover,
.preview-btn:hover {
  background: var(--bg-hover);
  border-color: var(--accent-color);
}

.join-preview-results,
.preview-results {
  background: var(--bg-secondary);
  border-radius: 8px;
  overflow: hidden;
}

.preview-stats {
  display: flex;
  justify-content: space-between;
  padding: 10px 14px;
  background: var(--bg-primary);
  border-bottom: 1px solid var(--border-color);
  font-size: 12px;
  color: var(--text-secondary);
}

.preview-error {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 12px 16px;
  color: #e53e3e;
  background: rgba(229, 62, 62, 0.1);
  font-size: 13px;
}

.preview-table-container {
  max-height: 200px;
  overflow: auto;
}

.preview-table {
  width: 100%;
  border-collapse: collapse;
  font-size: 12px;
}

.preview-table th,
.preview-table td {
  padding: 8px 12px;
  text-align: left;
  border-bottom: 1px solid var(--border-color);
  white-space: nowrap;
  max-width: 200px;
  overflow: hidden;
  text-overflow: ellipsis;
}

.preview-table th {
  background: var(--bg-primary);
  font-weight: 600;
  color: var(--text-secondary);
  position: sticky;
  top: 0;
}

.preview-table tbody tr:hover {
  background: var(--bg-hover);
}

.preview-more {
  padding: 8px 14px;
  text-align: center;
  font-size: 11px;
  color: var(--text-muted);
  background: var(--bg-primary);
  border-top: 1px solid var(--border-color);
}

/* Footer */
.join-builder-footer,
.set-creator-footer {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 16px 24px;
  border-top: 1px solid var(--border-color);
  background: var(--bg-secondary);
}

.join-sql-preview {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.join-sql-toggle {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 6px 12px;
  border: 1px solid var(--border-color);
  border-radius: 4px;
  background: none;
  color: var(--text-muted);
  font-size: 12px;
  cursor: pointer;
}

.join-sql-toggle:hover {
  background: var(--bg-hover);
  color: var(--text-primary);
}

.join-sql-code {
  background: #1e1e1e;
  color: #d4d4d4;
  padding: 12px;
  border-radius: 6px;
  font-family: 'SF Mono', Monaco, monospace;
  font-size: 12px;
  line-height: 1.5;
  max-width: 400px;
  overflow-x: auto;
  margin: 0;
}

.join-builder-actions,
.set-creator-footer {
  display: flex;
  gap: 12px;
}

/* Large modal variant for advanced filtering */
.set-creator-modal-large {
  max-width: 1000px;
}

/* Advanced Filter Builder Styles */
.set-creator-advanced-filters {
  position: relative;
}

.set-creator-advanced-filters .filters-header {
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  margin-bottom: 12px;
}

.set-creator-advanced-filters .filters-header h3 {
  margin: 0;
}

.filter-result-count {
  font-size: 12px;
  color: var(--text-muted);
  padding: 4px 10px;
  background: var(--bg-primary);
  border-radius: 4px;
}

.filter-result-count.has-filters {
  background: var(--accent-color);
  color: white;
}

/* Advanced Filter Builder Component */
.advanced-filter-builder {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.filter-builder-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding-bottom: 8px;
  border-bottom: 1px solid var(--border-color);
}

.filter-builder-title {
  font-weight: 600;
  font-size: 13px;
  color: var(--text-primary);
  display: flex;
  align-items: center;
  gap: 6px;
}

.filter-builder-actions {
  display: flex;
  gap: 8px;
}

.filter-action-btn {
  display: flex;
  align-items: center;
  gap: 4px;
  padding: 6px 10px;
  border: 1px solid var(--border-color);
  border-radius: 4px;
  background: var(--bg-primary);
  color: var(--text-secondary);
  font-size: 12px;
  cursor: pointer;
  transition: all 0.15s ease;
}

.filter-action-btn:hover {
  border-color: var(--accent-color);
  color: var(--accent-color);
  background: rgba(0, 112, 243, 0.05);
}

/* Filter Groups */
.filter-group {
  border: 1px solid var(--border-color);
  border-radius: 8px;
  background: var(--bg-primary);
  padding: 12px;
}

.filter-group-root {
  border: 2px solid var(--border-color);
}

.filter-group:not(.filter-group-root) {
  margin-left: 20px;
  border-left: 3px solid var(--accent-color);
  background: rgba(0, 112, 243, 0.02);
}

.filter-group-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 12px;
}

.filter-logic-toggle {
  display: flex;
  border: 1px solid var(--border-color);
  border-radius: 4px;
  overflow: hidden;
}

.logic-btn {
  padding: 4px 12px;
  border: none;
  background: var(--bg-secondary);
  color: var(--text-muted);
  font-size: 11px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.15s ease;
}

.logic-btn:first-child {
  border-right: 1px solid var(--border-color);
}

.logic-btn.active {
  background: var(--accent-color);
  color: white;
}

.logic-btn:not(.active):hover {
  background: var(--bg-hover);
  color: var(--text-primary);
}

.filter-group-remove {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 24px;
  height: 24px;
  border: none;
  border-radius: 4px;
  background: none;
  color: var(--text-muted);
  cursor: pointer;
}

.filter-group-remove:hover {
  background: rgba(229, 62, 62, 0.1);
  color: #e53e3e;
}

.filter-group-content {
  display: flex;
  flex-direction: column;
  gap: 8px;
  margin-bottom: 12px;
}

.filter-group-empty {
  padding: 16px;
  text-align: center;
  color: var(--text-muted);
  font-size: 12px;
  background: var(--bg-secondary);
  border-radius: 4px;
  border: 1px dashed var(--border-color);
}

.filter-group-actions {
  display: flex;
  gap: 8px;
  padding-top: 8px;
  border-top: 1px solid var(--border-color);
}

.filter-group-add-condition,
.filter-group-add-subgroup {
  display: flex;
  align-items: center;
  gap: 4px;
  padding: 6px 10px;
  border: 1px dashed var(--border-color);
  border-radius: 4px;
  background: none;
  color: var(--text-muted);
  font-size: 11px;
  cursor: pointer;
  transition: all 0.15s ease;
}

.filter-group-add-condition:hover,
.filter-group-add-subgroup:hover {
  border-color: var(--accent-color);
  color: var(--accent-color);
  background: rgba(0, 112, 243, 0.05);
}

/* Filter Conditions */
.filter-condition {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 8px 12px;
  background: var(--bg-secondary);
  border-radius: 6px;
  border: 1px solid var(--border-color);
}

.filter-condition-field {
  flex: 2;
  min-width: 0;
}

.filter-condition-operator {
  flex: 1;
  min-width: 100px;
  max-width: 140px;
}

.filter-condition-value {
  flex: 2;
  min-width: 0;
  display: flex;
  align-items: center;
  gap: 6px;
}

.filter-condition-value.hidden {
  display: none;
}

.condition-field-select,
.condition-operator-select,
.condition-value-input {
  width: 100%;
  padding: 8px 10px;
  border: 1px solid var(--border-color);
  border-radius: 4px;
  background: var(--bg-primary);
  font-size: 13px;
  color: var(--text-primary);
}

.condition-field-select:focus,
.condition-operator-select:focus,
.condition-value-input:focus {
  outline: none;
  border-color: var(--accent-color);
  box-shadow: 0 0 0 2px rgba(0, 112, 243, 0.1);
}

.condition-field-select optgroup {
  font-weight: 600;
  color: var(--text-primary);
}

.condition-field-select option {
  font-weight: normal;
  padding: 4px 8px;
}

.condition-value-wrapper {
  position: relative;
  flex: 1;
}

.condition-value-wrapper .condition-value-input {
  width: 100%;
}

.between-separator {
  font-size: 12px;
  color: var(--text-muted);
  flex-shrink: 0;
}

.filter-condition-remove {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 28px;
  height: 28px;
  border: none;
  border-radius: 4px;
  background: none;
  color: var(--text-muted);
  cursor: pointer;
  flex-shrink: 0;
}

.filter-condition-remove:hover {
  background: rgba(229, 62, 62, 0.1);
  color: #e53e3e;
}

/* Filter Empty State */
.filter-empty-state {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 8px;
  padding: 24px;
  background: var(--bg-secondary);
  border: 1px dashed var(--border-color);
  border-radius: 8px;
  color: var(--text-muted);
  text-align: center;
}

.filter-empty-state i {
  font-size: 24px;
  opacity: 0.5;
}

.filter-empty-state span {
  font-size: 13px;
}

/* Filter Summary */
.filter-summary {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 8px 12px;
  background: var(--bg-secondary);
  border-radius: 4px;
  font-size: 12px;
  color: var(--text-muted);
}

.filter-summary i {
  color: var(--accent-color);
}

/* Responsive adjustments for filter conditions */
@media (max-width: 768px) {
  .filter-condition {
    flex-wrap: wrap;
  }

  .filter-condition-field,
  .filter-condition-operator,
  .filter-condition-value {
    flex: 1 1 100%;
    max-width: none;
  }

  .filter-group:not(.filter-group-root) {
    margin-left: 12px;
  }
}

/* Source Browser enhancements for imports */
.source-item-actions {
  display: flex;
  gap: 4px;
  opacity: 0;
  transition: opacity 0.15s ease;
}

.source-item:hover .source-item-actions {
  opacity: 1;
}

.source-action-small {
  padding: 4px 8px;
  border: none;
  border-radius: 4px;
  background: var(--accent-color);
  color: white;
  font-size: 11px;
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 4px;
}

.source-action-small:hover {
  background: var(--accent-color-dark, #0056b3);
}

.source-action-small.join {
  background: #38a169;
}

.source-action-small.join:hover {
  background: #2f855a;
}

/* Source-first sidebar section */
.sidebar-sources-section {
  padding: 8px 0;
  border-bottom: 1px solid var(--border-color);
}

.sidebar-section-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 8px 16px;
  font-size: 11px;
  font-weight: 600;
  color: var(--text-muted);
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.sidebar-section-header .count-badge {
  background: var(--bg-secondary);
  padding: 2px 6px;
  border-radius: 4px;
  font-size: 10px;
}

.source-list-item {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 8px 16px;
  cursor: pointer;
  transition: background 0.15s ease;
}

.source-list-item:hover {
  background: var(--bg-hover);
}

.source-list-item.active {
  background: var(--bg-active);
}

.source-list-item .source-icon {
  width: 28px;
  height: 28px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: rgba(240, 136, 62, 0.15);
  border-radius: 6px;
  color: var(--given-color, #f0883e);
  font-size: 14px;
}

.source-list-item .source-info {
  flex: 1;
  min-width: 0;
}

.source-list-item .source-name {
  font-size: 13px;
  color: var(--text-primary);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.source-list-item .source-meta {
  font-size: 11px;
  color: var(--text-muted);
}

.source-list-item .given-tag {
  font-size: 9px;
  font-weight: 600;
  padding: 2px 5px;
  border-radius: 3px;
  background: rgba(240, 136, 62, 0.2);
  color: var(--given-color, #f0883e);
}


/* ============================================================================
   EO Modal System
   ============================================================================ */

/* Backdrop */
.eo-modal-backdrop {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(0, 0, 0, 0.5);
  z-index: 400;
  opacity: 0;
  transition: opacity 0.2s ease;
  backdrop-filter: blur(2px);
}

.eo-modal-backdrop.visible {
  opacity: 1;
}

/* Modal Container */
.eo-modal {
  position: fixed;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%) scale(0.95);
  background: var(--bg-secondary);
  border: 1px solid var(--border-primary);
  border-radius: var(--radius-lg);
  box-shadow: var(--shadow-xl);
  z-index: 401;
  opacity: 0;
  transition: opacity 0.2s ease, transform 0.2s ease;
  display: flex;
  flex-direction: column;
  max-height: 90vh;
  overflow: hidden;
}

.eo-modal.visible {
  opacity: 1;
  transform: translate(-50%, -50%) scale(1);
}

/* Modal Sizes */
.eo-modal-small {
  width: 360px;
}

.eo-modal-medium {
  width: 480px;
}

.eo-modal-large {
  width: 640px;
}

/* Extra large modal for formula editor */
#formula-editor-modal.eo-modal {
  width: 960px;
  max-width: calc(100vw - 32px);
}

/* Modal Header */
.eo-modal-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 16px 20px;
  border-bottom: 1px solid var(--border-primary);
  flex-shrink: 0;
}

.eo-modal-title {
  font-size: 16px;
  font-weight: 600;
  margin: 0;
  color: var(--text-primary);
}

.eo-modal-close {
  width: 32px;
  height: 32px;
  background: transparent;
  border: none;
  border-radius: var(--radius-sm);
  color: var(--text-muted);
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 18px;
  transition: all 0.15s ease;
}

.eo-modal-close:hover {
  background: var(--bg-hover);
  color: var(--text-primary);
}

/* Modal Body */
.eo-modal-body {
  padding: 20px;
  overflow-y: auto;
  flex: 1;
}

.eo-modal-body p {
  margin: 0 0 12px;
  line-height: 1.5;
  color: var(--text-secondary);
}

/* Modal Footer */
.eo-modal-footer {
  display: flex;
  align-items: center;
  justify-content: flex-end;
  gap: 10px;
  padding: 16px 20px;
  border-top: 1px solid var(--border-primary);
  flex-shrink: 0;
}

/* Modal Buttons */
.eo-modal-btn {
  display: inline-flex;
  align-items: center;
  gap: 8px;
  padding: 8px 16px;
  font-size: 13px;
  font-weight: 500;
  border-radius: var(--radius-md);
  border: none;
  cursor: pointer;
  transition: all 0.15s ease;
}

.eo-modal-btn:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

.eo-modal-btn-primary {
  background: var(--primary-500);
  color: white;
}

.eo-modal-btn-primary:hover:not(:disabled) {
  background: var(--primary-600);
}

.eo-modal-btn-secondary {
  background: var(--bg-tertiary);
  color: var(--text-primary);
  border: 1px solid var(--border-primary);
}

.eo-modal-btn-secondary:hover:not(:disabled) {
  background: var(--bg-hover);
}

.eo-modal-btn-danger {
  background: var(--danger-500);
  color: white;
}

.eo-modal-btn-danger:hover:not(:disabled) {
  background: var(--danger-600);
}

/* Modal Loading State */
.eo-modal-loading {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 40px 20px;
  gap: 16px;
  color: var(--text-muted);
}

.eo-modal-spinner {
  width: 32px;
  height: 32px;
  border: 3px solid var(--border-primary);
  border-top-color: var(--primary-500);
  border-radius: 50%;
  animation: spin 0.8s linear infinite;
}

@keyframes spin {
  to { transform: rotate(360deg); }
}

/* Modal Status States */
.eo-modal-status {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 40px 20px;
  gap: 12px;
  text-align: center;
}

.eo-modal-status i {
  font-size: 48px;
}

.eo-modal-success i {
  color: var(--success-500);
}

.eo-modal-error i {
  color: var(--danger-500);
}

/* ============================================================================
   EO Wizard Modal
   ============================================================================ */

/* Wizard Progress */
.eo-wizard-progress {
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 0 0 24px;
  margin-bottom: 20px;
  border-bottom: 1px solid var(--border-secondary);
}

.eo-wizard-step {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 6px;
}

.eo-wizard-step-indicator {
  width: 28px;
  height: 28px;
  border-radius: 50%;
  background: var(--bg-tertiary);
  border: 2px solid var(--border-primary);
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 12px;
  font-weight: 600;
  color: var(--text-muted);
  transition: all 0.2s ease;
}

.eo-wizard-step.active .eo-wizard-step-indicator {
  background: var(--primary-500);
  border-color: var(--primary-500);
  color: white;
}

.eo-wizard-step.completed .eo-wizard-step-indicator {
  background: var(--success-500);
  border-color: var(--success-500);
  color: white;
}

.eo-wizard-step-label {
  font-size: 11px;
  color: var(--text-muted);
  white-space: nowrap;
}

.eo-wizard-step.active .eo-wizard-step-label {
  color: var(--text-primary);
  font-weight: 500;
}

.eo-wizard-step-line {
  width: 40px;
  height: 2px;
  background: var(--border-primary);
  margin: 0 8px;
  margin-bottom: 20px;
}

/* ============================================================================
   Sync Wizard Specific Styles
   ============================================================================ */

/* Welcome Step */
.sync-wizard-welcome {
  text-align: center;
}

.sync-wizard-icon {
  width: 64px;
  height: 64px;
  margin: 0 auto 16px;
  background: var(--primary-100);
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
}

.sync-wizard-icon i {
  font-size: 32px;
  color: var(--primary-500);
}

.sync-wizard-intro {
  font-size: 14px;
  color: var(--text-secondary);
  margin-bottom: 16px;
}

.sync-wizard-benefits {
  list-style: none;
  padding: 0;
  margin: 0 0 24px;
  text-align: left;
}

.sync-wizard-benefits li {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 10px 16px;
  font-size: 13px;
  color: var(--text-primary);
}

.sync-wizard-benefits i {
  font-size: 18px;
  color: var(--primary-500);
}

.sync-wizard-local-status {
  background: var(--bg-tertiary);
  border-radius: var(--radius-md);
  padding: 16px;
  text-align: left;
}

.sync-wizard-status-header {
  display: flex;
  align-items: center;
  gap: 8px;
  font-size: 12px;
  font-weight: 600;
  color: var(--text-muted);
  text-transform: uppercase;
  letter-spacing: 0.5px;
  margin-bottom: 12px;
}

.sync-wizard-status-row {
  display: flex;
  justify-content: space-between;
  font-size: 13px;
  padding: 4px 0;
}

.sync-wizard-status-row span {
  color: var(--text-muted);
}

.sync-wizard-status-row strong {
  color: var(--text-primary);
}

/* Config Step */
.sync-wizard-config {
  display: flex;
  flex-direction: column;
  gap: 20px;
}

.sync-wizard-field {
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.sync-wizard-field label {
  font-size: 13px;
  font-weight: 500;
  color: var(--text-primary);
}

.sync-wizard-field input[type="text"],
.sync-wizard-field input[type="url"],
.sync-wizard-field input[type="password"] {
  width: 100%;
  padding: 10px 12px;
  font-size: 14px;
  border: 1px solid var(--border-primary);
  border-radius: var(--radius-md);
  background: var(--bg-primary);
  color: var(--text-primary);
  transition: all 0.15s ease;
}

.sync-wizard-field input:focus {
  outline: none;
  border-color: var(--primary-500);
  box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.15);
}

.sync-wizard-field input.error {
  border-color: var(--danger-500);
}

.sync-wizard-hint {
  font-size: 12px;
  color: var(--text-muted);
}

.field-error {
  font-size: 12px;
  color: var(--danger-500);
}

.sync-wizard-token-input {
  display: flex;
  gap: 0;
}

.sync-wizard-token-input input {
  border-top-right-radius: 0;
  border-bottom-right-radius: 0;
  border-right: none;
}

.sync-wizard-token-toggle {
  width: 42px;
  background: var(--bg-tertiary);
  border: 1px solid var(--border-primary);
  border-left: none;
  border-top-right-radius: var(--radius-md);
  border-bottom-right-radius: var(--radius-md);
  color: var(--text-muted);
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.15s ease;
}

.sync-wizard-token-toggle:hover {
  background: var(--bg-hover);
  color: var(--text-primary);
}

/* Toggle Switch */
.sync-wizard-toggle-label {
  display: flex;
  align-items: center;
  gap: 12px;
  cursor: pointer;
  font-size: 14px;
  color: var(--text-primary);
}

.sync-wizard-toggle-label input {
  display: none;
}

.sync-wizard-toggle-slider {
  position: relative;
  width: 44px;
  height: 24px;
  background: var(--bg-tertiary);
  border-radius: 12px;
  transition: all 0.2s ease;
  flex-shrink: 0;
}

.sync-wizard-toggle-slider::after {
  content: '';
  position: absolute;
  top: 2px;
  left: 2px;
  width: 20px;
  height: 20px;
  background: white;
  border-radius: 50%;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.2);
  transition: all 0.2s ease;
}

.sync-wizard-toggle-label input:checked + .sync-wizard-toggle-slider {
  background: var(--primary-500);
}

.sync-wizard-toggle-label input:checked + .sync-wizard-toggle-slider::after {
  left: 22px;
}

/* Test Step */
.sync-wizard-test {
  padding: 40px 20px;
  text-align: center;
}

.sync-wizard-test-status {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 16px;
  color: var(--text-muted);
  font-size: 14px;
}

.sync-wizard-spinner {
  width: 40px;
  height: 40px;
  border: 3px solid var(--border-primary);
  border-top-color: var(--primary-500);
  border-radius: 50%;
  animation: spin 0.8s linear infinite;
}

.sync-wizard-test-error {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 12px;
  color: var(--danger-500);
}

.sync-wizard-test-error i {
  font-size: 40px;
}

/* Success Step */
.sync-wizard-success {
  text-align: center;
}

.sync-wizard-success-icon {
  width: 64px;
  height: 64px;
  margin: 0 auto 16px;
  background: var(--success-100, rgba(34, 197, 94, 0.15));
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
}

.sync-wizard-success-icon i {
  font-size: 32px;
  color: var(--success-500);
}

.sync-wizard-success-text {
  font-size: 14px;
  color: var(--text-primary);
  margin-bottom: 20px;
}

.sync-wizard-server-info {
  background: var(--bg-tertiary);
  border-radius: var(--radius-md);
  padding: 16px;
  margin-bottom: 20px;
  text-align: left;
}

.sync-wizard-info-row {
  display: flex;
  justify-content: space-between;
  font-size: 13px;
  padding: 6px 0;
}

.sync-wizard-info-row span {
  color: var(--text-muted);
}

.sync-wizard-info-row strong {
  color: var(--text-primary);
}

.sync-wizard-enable-toggle {
  padding: 16px;
  background: var(--bg-tertiary);
  border-radius: var(--radius-md);
}

/* Status Modal */
.sync-status-view {
  display: flex;
  flex-direction: column;
  gap: 20px;
}

.sync-status-view .sync-status-indicator {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 12px;
  padding: 20px;
  background: var(--bg-tertiary);
  border-radius: var(--radius-md);
  font-size: 16px;
  font-weight: 500;
}

.sync-status-view .sync-status-indicator i {
  font-size: 24px;
}

.sync-status-view .sync-status-indicator.ready i {
  color: var(--success-500);
}

.sync-status-view .sync-status-indicator.syncing i {
  color: var(--primary-500);
}

.sync-status-info {
  background: var(--bg-tertiary);
  border-radius: var(--radius-md);
  padding: 16px;
}

.sync-status-row {
  display: flex;
  justify-content: space-between;
  font-size: 13px;
  padding: 6px 0;
  border-bottom: 1px solid var(--border-secondary);
}

.sync-status-row:last-child {
  border-bottom: none;
}

.sync-status-row span {
  color: var(--text-muted);
}

.sync-status-row strong {
  color: var(--text-primary);
}

.sync-status-error {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 12px 16px;
  background: rgba(239, 68, 68, 0.1);
  border: 1px solid rgba(239, 68, 68, 0.2);
  border-radius: var(--radius-md);
  color: var(--danger-500);
  font-size: 13px;
}

/* Enable Modal */
.sync-enable-view {
  text-align: center;
}

.sync-enable-icon {
  width: 64px;
  height: 64px;
  margin: 0 auto 16px;
  background: var(--bg-tertiary);
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
}

.sync-enable-icon i {
  font-size: 32px;
  color: var(--text-muted);
}

.sync-enable-view p {
  margin-bottom: 20px;
}

.sync-enable-view .sync-status-info {
  text-align: left;
}

/* Settings Modal */
.sync-settings-actions {
  display: flex;
  justify-content: flex-start;
  padding-top: 8px;
}

.sync-settings-actions button.success {
  background: var(--success-500);
  color: white;
  border-color: var(--success-500);
}

.sync-settings-actions button.error {
  background: var(--danger-500);
  color: white;
  border-color: var(--danger-500);
}

/* Spinning animation for sync icon */
.spinning {
  animation: spin 1s linear infinite;
}

/* Dark mode adjustments */
@media (prefers-color-scheme: dark) {
  .sync-wizard-icon {
    background: rgba(59, 130, 246, 0.15);
  }

  .sync-wizard-success-icon {
    background: rgba(34, 197, 94, 0.15);
  }
}


/* ============================================================================
   Formula Editor Styles
   ============================================================================ */

.formula-editor {
  display: flex;
  gap: 20px;
  min-height: 450px;
  max-height: 70vh;
}

.formula-editor-main {
  flex: 1;
  display: flex;
  flex-direction: column;
  gap: 16px;
  min-width: 0;
}

.formula-editor-sidebar {
  width: 280px;
  display: flex;
  flex-direction: column;
  gap: 16px;
  border-left: 1px solid var(--border-color);
  padding-left: 20px;
  overflow: hidden;
}

.formula-editor-section {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.formula-editor-section-grow {
  flex: 1;
  min-height: 0;
}

.formula-editor-label {
  font-size: 12px;
  font-weight: 600;
  color: var(--text-secondary);
  text-transform: uppercase;
  letter-spacing: 0.5px;
  display: flex;
  align-items: center;
  gap: 8px;
}

.formula-editor-hint {
  font-weight: 400;
  text-transform: none;
  letter-spacing: normal;
  color: var(--text-muted);
}

.formula-editor-input {
  padding: 10px 12px;
  border: 1px solid var(--border-color);
  border-radius: var(--radius-md);
  font-size: 14px;
  background: var(--bg-primary);
  color: var(--text-primary);
  transition: border-color 0.15s, box-shadow 0.15s;
}

.formula-editor-input:focus {
  outline: none;
  border-color: var(--primary-500);
  box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
}

.formula-editor-input.error {
  border-color: var(--danger-500);
}

.formula-input-wrapper {
  flex: 1;
  display: flex;
  flex-direction: column;
  min-height: 120px;
}

.formula-editor-textarea {
  flex: 1;
  width: 100%;
  min-height: 120px;
  padding: 12px;
  border: 1px solid var(--border-color);
  border-radius: var(--radius-md);
  font-family: 'SF Mono', 'Monaco', 'Inconsolata', 'Fira Code', monospace;
  font-size: 13px;
  line-height: 1.5;
  background: var(--bg-primary);
  color: var(--text-primary);
  resize: vertical;
  transition: border-color 0.15s, box-shadow 0.15s;
}

.formula-editor-textarea:focus {
  outline: none;
  border-color: var(--primary-500);
  box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
}

.formula-editor-textarea.error {
  border-color: var(--danger-500);
}

.formula-editor-toolbar {
  display: flex;
  gap: 4px;
  flex-wrap: wrap;
}

.formula-op-btn {
  padding: 4px 10px;
  border: 1px solid var(--border-color);
  border-radius: var(--radius-sm);
  background: var(--bg-secondary);
  color: var(--text-secondary);
  font-family: 'SF Mono', 'Monaco', 'Inconsolata', 'Fira Code', monospace;
  font-size: 13px;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.15s;
}

.formula-op-btn:hover {
  background: var(--bg-hover);
  border-color: var(--primary-500);
  color: var(--primary-500);
}

/* Result Type Selection */
.formula-result-types {
  display: flex;
  gap: 8px;
}

.formula-result-type {
  flex: 1;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 6px;
  padding: 12px 8px;
  border: 1px solid var(--border-color);
  border-radius: var(--radius-md);
  background: var(--bg-primary);
  cursor: pointer;
  transition: all 0.15s;
}

.formula-result-type:hover {
  background: var(--bg-hover);
  border-color: var(--primary-300);
}

.formula-result-type.selected {
  background: rgba(59, 130, 246, 0.1);
  border-color: var(--primary-500);
}

.formula-result-type input {
  display: none;
}

.formula-result-type i {
  font-size: 18px;
  color: var(--text-muted);
}

.formula-result-type.selected i {
  color: var(--primary-500);
}

.formula-result-type span {
  font-size: 12px;
  color: var(--text-secondary);
}

.formula-result-type.selected span {
  color: var(--primary-600);
  font-weight: 500;
}

/* Preview */
.formula-preview {
  padding: 12px;
  background: var(--bg-tertiary);
  border-radius: var(--radius-md);
  font-size: 13px;
  min-height: 44px;
  display: flex;
  align-items: center;
}

.formula-preview-placeholder {
  color: var(--text-muted);
  font-style: italic;
}

.formula-preview-valid {
  color: var(--success-600);
  display: flex;
  align-items: center;
  gap: 6px;
}

.formula-preview-warning {
  color: var(--warning-600);
  display: flex;
  align-items: center;
  gap: 6px;
}

.formula-preview-error {
  color: var(--danger-600);
  display: flex;
  align-items: center;
  gap: 6px;
}

/* Sidebar Sections */
.formula-sidebar-section {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.formula-sidebar-section-grow {
  flex: 1;
  min-height: 0;
  overflow: hidden;
  display: flex;
  flex-direction: column;
}

.formula-sidebar-header {
  font-size: 12px;
  font-weight: 600;
  color: var(--text-secondary);
  text-transform: uppercase;
  letter-spacing: 0.5px;
  display: flex;
  align-items: center;
  gap: 6px;
}

.formula-sidebar-header i {
  font-size: 14px;
  color: var(--text-muted);
}

/* Field List */
.formula-field-list {
  display: flex;
  flex-direction: column;
  gap: 2px;
  max-height: 150px;
  overflow-y: auto;
}

.formula-field-item {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 8px 10px;
  border: none;
  border-radius: var(--radius-sm);
  background: transparent;
  color: var(--text-secondary);
  font-size: 13px;
  text-align: left;
  cursor: pointer;
  transition: all 0.15s;
}

.formula-field-item:hover {
  background: var(--bg-hover);
  color: var(--text-primary);
}

.formula-field-item i {
  font-size: 14px;
  color: var(--text-muted);
}

.formula-field-item:hover i {
  color: var(--primary-500);
}

.formula-empty-state {
  padding: 16px;
  color: var(--text-muted);
  font-size: 12px;
  text-align: center;
  font-style: italic;
}

/* Function Search */
.formula-search-wrapper {
  position: relative;
  margin-bottom: 8px;
}

.formula-search-wrapper i {
  position: absolute;
  left: 10px;
  top: 50%;
  transform: translateY(-50%);
  font-size: 14px;
  color: var(--text-muted);
}

.formula-search-input {
  width: 100%;
  padding: 8px 10px 8px 32px;
  border: 1px solid var(--border-color);
  border-radius: var(--radius-md);
  font-size: 13px;
  background: var(--bg-primary);
  color: var(--text-primary);
  transition: border-color 0.15s;
}

.formula-search-input:focus {
  outline: none;
  border-color: var(--primary-500);
}

/* Function Categories */
.formula-function-categories {
  flex: 1;
  overflow-y: auto;
  display: flex;
  flex-direction: column;
  gap: 4px;
}

.formula-category {
  border-radius: var(--radius-md);
  overflow: hidden;
}

.formula-category-header {
  display: flex;
  align-items: center;
  gap: 8px;
  width: 100%;
  padding: 10px 12px;
  border: none;
  border-radius: var(--radius-md);
  background: var(--bg-tertiary);
  color: var(--text-secondary);
  font-size: 13px;
  font-weight: 500;
  text-align: left;
  cursor: pointer;
  transition: all 0.15s;
}

.formula-category-header:hover {
  background: var(--bg-hover);
}

.formula-category-header i:first-child {
  font-size: 14px;
  color: var(--text-muted);
}

.formula-category-count {
  margin-left: auto;
  padding: 2px 6px;
  background: var(--bg-secondary);
  border-radius: var(--radius-sm);
  font-size: 11px;
  color: var(--text-muted);
}

.formula-category-toggle {
  font-size: 12px;
  color: var(--text-muted);
  transition: transform 0.2s;
}

.formula-category.expanded .formula-category-toggle {
  transform: rotate(180deg);
}

.formula-category-functions {
  display: none;
  flex-direction: column;
  gap: 2px;
  padding: 4px 0 4px 24px;
}

.formula-category.expanded .formula-category-functions {
  display: flex;
}

.formula-function-item {
  display: flex;
  flex-direction: column;
  gap: 2px;
  padding: 8px 12px;
  border: none;
  border-radius: var(--radius-sm);
  background: transparent;
  text-align: left;
  cursor: pointer;
  transition: all 0.15s;
}

.formula-function-item:hover {
  background: var(--bg-hover);
}

.formula-function-name {
  font-family: 'SF Mono', 'Monaco', 'Inconsolata', 'Fira Code', monospace;
  font-size: 12px;
  font-weight: 500;
  color: var(--primary-600);
}

.formula-function-desc {
  font-size: 11px;
  color: var(--text-muted);
  line-height: 1.3;
}

/* Error Message */
.formula-field-error {
  font-size: 12px;
  color: var(--danger-500);
  margin-top: 4px;
}

/* Shake animation for errors */
@keyframes shake {
  0%, 100% { transform: translateX(0); }
  10%, 30%, 50%, 70%, 90% { transform: translateX(-4px); }
  20%, 40%, 60%, 80% { transform: translateX(4px); }
}

.shake {
  animation: shake 0.5s ease-in-out;
}

/* Responsive adjustments */
@media (max-width: 768px) {
  .formula-editor {
    flex-direction: column;
    max-height: none;
  }

  .formula-editor-sidebar {
    width: 100%;
    border-left: none;
    border-top: 1px solid var(--border-color);
    padding-left: 0;
    padding-top: 20px;
  }

  .formula-result-types {
    flex-wrap: wrap;
  }

  .formula-result-type {
    flex: 1 1 calc(50% - 4px);
    min-width: 80px;
  }
}

/* ============================================================================
   Formula Editor V2 - Redesigned Layout
   ============================================================================ */

.formula-editor-v2 {
  display: flex;
  flex-direction: column;
  gap: 20px;
  width: 900px;
  height: 600px;
  min-height: 600px;
  max-height: 600px;
}

/* Header: Field Name + Result Type in one row */
.formula-editor-header {
  display: flex;
  gap: 24px;
  align-items: flex-end;
}

.formula-editor-name-group {
  flex: 1;
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.formula-editor-type-group {
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.formula-editor-v2 .formula-editor-label {
  font-size: 11px;
  font-weight: 600;
  color: var(--text-muted);
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.formula-editor-v2 .formula-editor-input {
  padding: 10px 14px;
  border: 1px solid var(--border-color);
  border-radius: var(--radius-md);
  font-size: 14px;
  background: var(--bg-primary);
  color: var(--text-primary);
  transition: border-color 0.15s, box-shadow 0.15s;
}

.formula-editor-v2 .formula-editor-input:focus {
  outline: none;
  border-color: var(--primary-500);
  box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
}

.formula-editor-v2 .formula-editor-input.error {
  border-color: var(--danger-500);
}

/* Result Type Pills */
.formula-result-type-pills {
  display: flex;
  gap: 6px;
}

.formula-type-pill {
  display: flex;
  align-items: center;
  gap: 5px;
  padding: 8px 12px;
  border: 1px solid var(--border-color);
  border-radius: var(--radius-md);
  background: var(--bg-primary);
  color: var(--text-secondary);
  font-size: 12px;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.15s;
  white-space: nowrap;
}

.formula-type-pill:hover {
  background: var(--bg-hover);
  border-color: var(--primary-300);
}

.formula-type-pill.selected {
  background: var(--primary-50);
  border-color: var(--primary-500);
  color: var(--primary-600);
}

.formula-type-pill i {
  font-size: 14px;
}

/* Main Body: Editor + Reference Panel */
.formula-editor-body {
  display: flex;
  gap: 20px;
  flex: 1;
  min-height: 0;
  overflow: hidden;
}

.formula-editor-v2 .formula-editor-main {
  flex: 1;
  display: flex;
  flex-direction: column;
  min-width: 0;
}

/* Input Area with integrated toolbar */
.formula-editor-input-area {
  flex: 1;
  display: flex;
  flex-direction: column;
  border: 1px solid var(--border-color);
  border-radius: var(--radius-lg);
  overflow: hidden;
  transition: border-color 0.15s, box-shadow 0.15s;
}

.formula-editor-input-area:focus-within {
  border-color: var(--primary-500);
  box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
}

/* Operator Bar */
.formula-operator-bar {
  display: flex;
  gap: 2px;
  padding: 8px 10px;
  background: var(--bg-tertiary);
  border-bottom: 1px solid var(--border-color);
}

.formula-operator-bar .formula-op-btn {
  padding: 4px 10px;
  border: none;
  border-radius: var(--radius-sm);
  background: transparent;
  color: var(--text-secondary);
  font-family: 'SF Mono', 'Monaco', 'Inconsolata', 'Fira Code', monospace;
  font-size: 13px;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.15s;
}

.formula-operator-bar .formula-op-btn:hover {
  background: var(--bg-hover);
  color: var(--primary-600);
}

/* Textarea inside input area */
.formula-editor-v2 .formula-editor-textarea {
  flex: 1;
  width: 100%;
  min-height: 200px;
  padding: 16px;
  border: none;
  font-family: 'SF Mono', 'Monaco', 'Inconsolata', 'Fira Code', monospace;
  font-size: 14px;
  line-height: 1.7;
  background: var(--bg-primary);
  color: var(--text-primary);
  resize: none;
}

.formula-editor-v2 .formula-editor-textarea:focus {
  outline: none;
}

.formula-editor-v2 .formula-editor-textarea::placeholder {
  color: var(--text-muted);
}

/* Inline Validation */
.formula-validation {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 10px 14px;
  background: var(--bg-tertiary);
  border-top: 1px solid var(--border-color);
  font-size: 12px;
  color: var(--text-muted);
}

.formula-validation i {
  font-size: 14px;
}

.formula-validation.valid {
  background: rgba(34, 197, 94, 0.08);
  color: var(--success-600);
}

.formula-validation.warning {
  background: rgba(234, 179, 8, 0.08);
  color: var(--warning-600);
}

.formula-validation.error {
  background: rgba(239, 68, 68, 0.08);
  color: var(--danger-600);
}

.formula-validation-idle,
.formula-validation-valid,
.formula-validation-warning,
.formula-validation-error {
  display: flex;
  align-items: center;
  gap: 6px;
}

/* Reference Panel */
.formula-reference-panel {
  width: 340px;
  min-width: 340px;
  max-width: 340px;
  display: flex;
  flex-direction: column;
  background: var(--bg-secondary);
  border-radius: var(--radius-lg);
  border: 1px solid var(--border-color);
  overflow: hidden;
}

/* Tab Navigation */
.formula-reference-tabs {
  display: flex;
  border-bottom: 1px solid var(--border-color);
}

.formula-ref-tab {
  flex: 1;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 6px;
  padding: 12px;
  border: none;
  background: transparent;
  color: var(--text-muted);
  font-size: 12px;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.15s;
}

.formula-ref-tab:hover {
  background: var(--bg-hover);
  color: var(--text-secondary);
}

.formula-ref-tab.active {
  background: var(--bg-primary);
  color: var(--primary-600);
  border-bottom: 2px solid var(--primary-500);
  margin-bottom: -1px;
}

.formula-ref-tab i {
  font-size: 14px;
}

/* Tab Content */
.formula-tab-content {
  display: none;
  flex: 1;
  flex-direction: column;
  overflow: hidden;
}

.formula-tab-content.active {
  display: flex;
}

/* Field Chips */
.formula-field-chips {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
  padding: 16px;
  overflow-y: auto;
  align-content: flex-start;
}

.formula-field-chip {
  display: inline-flex;
  align-items: center;
  gap: 5px;
  padding: 6px 10px;
  border: 1px solid var(--border-color);
  border-radius: var(--radius-full);
  background: var(--bg-primary);
  color: var(--text-secondary);
  font-size: 12px;
  cursor: pointer;
  transition: all 0.15s;
  white-space: nowrap;
}

.formula-field-chip:hover {
  background: var(--primary-50);
  border-color: var(--primary-400);
  color: var(--primary-600);
}

.formula-field-chip i {
  font-size: 12px;
  color: var(--text-muted);
}

.formula-field-chip:hover i {
  color: var(--primary-500);
}

/* Function Search */
.formula-fn-search {
  position: relative;
  padding: 10px 12px;
  border-bottom: 1px solid var(--border-color);
}

.formula-fn-search i {
  position: absolute;
  left: 22px;
  top: 50%;
  transform: translateY(-50%);
  font-size: 14px;
  color: var(--text-muted);
}

.formula-fn-search input {
  width: 100%;
  padding: 8px 10px 8px 32px;
  border: 1px solid var(--border-color);
  border-radius: var(--radius-md);
  font-size: 13px;
  background: var(--bg-primary);
  color: var(--text-primary);
  transition: border-color 0.15s;
}

.formula-fn-search input:focus {
  outline: none;
  border-color: var(--primary-500);
}

/* Category Filter Chips */
.formula-fn-categories {
  display: flex;
  flex-wrap: wrap;
  gap: 4px;
  padding: 8px 12px;
  border-bottom: 1px solid var(--border-color);
}

.formula-cat-chip {
  display: inline-flex;
  align-items: center;
  gap: 4px;
  padding: 4px 8px;
  border: none;
  border-radius: var(--radius-sm);
  background: transparent;
  color: var(--text-muted);
  font-size: 11px;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.15s;
}

.formula-cat-chip:hover {
  background: var(--bg-hover);
  color: var(--text-secondary);
}

.formula-cat-chip.active {
  background: var(--primary-100);
  color: var(--primary-600);
}

.formula-cat-chip i {
  font-size: 11px;
}

/* Function List */
.formula-fn-list {
  flex: 1;
  overflow-y: auto;
  padding: 8px;
}

.formula-fn-item {
  display: flex;
  flex-direction: column;
  gap: 2px;
  width: 100%;
  padding: 10px 12px;
  border: none;
  border-radius: var(--radius-md);
  background: transparent;
  text-align: left;
  cursor: pointer;
  transition: all 0.15s;
}

.formula-fn-item:hover {
  background: var(--bg-hover);
}

.formula-fn-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
}

.formula-fn-name {
  font-family: 'SF Mono', 'Monaco', 'Inconsolata', 'Fira Code', monospace;
  font-size: 12px;
  font-weight: 600;
  color: var(--primary-600);
}

.formula-fn-category {
  font-size: 12px;
  color: var(--text-muted);
}

.formula-fn-syntax {
  font-family: 'SF Mono', 'Monaco', 'Inconsolata', 'Fira Code', monospace;
  font-size: 10px;
  color: var(--text-muted);
  margin-top: 2px;
}

.formula-fn-desc {
  font-size: 11px;
  color: var(--text-secondary);
  line-height: 1.3;
  margin-top: 4px;
}

/* Function Disclosure List */
.formula-fn-disclosure-list {
  flex: 1;
  overflow-y: auto;
  padding: 8px;
}

/* Disclosure/Accordion Sections */
.formula-fn-disclosure {
  border-radius: var(--radius-md);
  margin-bottom: 4px;
  overflow: hidden;
}

.formula-fn-disclosure-header {
  display: flex;
  align-items: center;
  gap: 10px;
  width: 100%;
  padding: 12px 14px;
  border: none;
  border-radius: var(--radius-md);
  background: var(--bg-primary);
  color: var(--text-primary);
  font-size: 13px;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.15s;
  text-align: left;
}

.formula-fn-disclosure-header:hover {
  background: var(--bg-hover);
}

.formula-fn-disclosure-header > i:first-child {
  font-size: 16px;
  color: var(--text-muted);
}

.formula-fn-disclosure-title {
  flex: 1;
}

.formula-fn-disclosure-count {
  font-size: 11px;
  font-weight: 500;
  color: var(--text-muted);
  background: var(--bg-tertiary);
  padding: 2px 8px;
  border-radius: var(--radius-full);
}

.formula-fn-disclosure-arrow {
  font-size: 14px;
  color: var(--text-muted);
  transition: transform 0.2s ease;
}

.formula-fn-disclosure.expanded .formula-fn-disclosure-arrow {
  transform: rotate(90deg);
}

.formula-fn-disclosure-content {
  display: none;
  padding: 4px 0 8px 0;
}

.formula-fn-disclosure.expanded .formula-fn-disclosure-content {
  display: block;
}

.formula-fn-disclosure .formula-fn-item {
  padding: 8px 14px 8px 40px;
  margin: 0;
  border-radius: 0;
}

.formula-fn-disclosure .formula-fn-item:hover {
  background: var(--primary-50);
}

.formula-fn-disclosure .formula-fn-name {
  font-size: 12px;
  font-weight: 600;
  color: var(--primary-600);
}

.formula-fn-disclosure .formula-fn-syntax {
  font-size: 10px;
  color: var(--text-muted);
  margin-top: 2px;
}

.formula-fn-disclosure .formula-fn-desc {
  font-size: 11px;
  color: var(--text-secondary);
  margin-top: 3px;
}

/* Empty State */
.formula-editor-v2 .formula-empty-state {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
  padding: 24px;
  color: var(--text-muted);
  font-size: 12px;
  text-align: center;
}

/* Responsive V2 - Tablet */
@media (max-width: 960px) {
  .formula-editor-v2 {
    width: 100%;
    height: auto;
    min-height: auto;
    max-height: none;
  }

  .formula-editor-header {
    flex-direction: column;
    align-items: stretch;
    gap: 12px;
  }

  .formula-result-type-pills {
    flex-wrap: wrap;
  }

  .formula-type-pill {
    flex: 1 1 calc(50% - 3px);
    justify-content: center;
  }

  .formula-editor-body {
    flex-direction: column;
  }

  .formula-reference-panel {
    width: 100%;
    min-width: 100%;
    max-width: 100%;
    max-height: 300px;
  }
}

/* Responsive V2 - Mobile */
@media (max-width: 600px) {
  #formula-editor-modal.eo-modal {
    width: calc(100vw - 16px);
    max-height: calc(100vh - 32px);
    top: 16px;
    left: 8px;
    right: 8px;
    transform: none;
  }

  #formula-editor-modal.eo-modal.visible {
    transform: none;
  }

  #formula-editor-modal .eo-modal-body {
    padding: 12px;
    overflow-y: auto;
  }

  .formula-editor-v2 {
    gap: 16px;
  }

  .formula-editor-header {
    gap: 16px;
  }

  .formula-result-type-pills {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 8px;
  }

  .formula-type-pill {
    flex: none;
    padding: 10px 8px;
    font-size: 11px;
  }

  .formula-type-pill i {
    font-size: 12px;
  }

  .formula-editor-input-area {
    min-height: 180px;
  }

  .formula-editor-v2 .formula-editor-textarea {
    min-height: 120px;
    padding: 12px;
    font-size: 13px;
  }

  .formula-operator-bar {
    flex-wrap: wrap;
    padding: 6px 8px;
  }

  .formula-operator-bar .formula-op-btn {
    padding: 6px 8px;
    font-size: 12px;
  }

  .formula-reference-panel {
    max-height: 250px;
  }

  .formula-ref-tab {
    padding: 10px;
    font-size: 11px;
  }

  .formula-fn-disclosure-header {
    padding: 10px 12px;
  }

  .formula-fn-item {
    padding: 10px 12px;
  }

  .formula-field-chip {
    padding: 6px 10px;
    font-size: 11px;
  }

  #formula-editor-modal .eo-modal-footer {
    padding: 12px;
    flex-wrap: wrap;
    gap: 8px;
  }

  #formula-editor-modal .eo-modal-btn {
    flex: 1;
    min-width: 100px;
  }
}


/* ============================================================================
   File Explorer Styles
   ============================================================================ */

/* Tag Colors */
:root {
  --tag-blue: #3b82f6;
  --tag-green: #22c55e;
  --tag-yellow: #eab308;
  --tag-red: #ef4444;
  --tag-purple: #a855f7;
  --tag-pink: #ec4899;
  --tag-orange: #f97316;
  --tag-cyan: #06b6d4;
  --tag-indigo: #6366f1;
  --tag-teal: #14b8a6;
}

/* File Explorer Container */
.file-explorer {
  display: flex;
  flex-direction: column;
  height: 100%;
  background: var(--bg-primary);
}

/* Toolbar */
.file-explorer-toolbar {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 12px 16px;
  background: var(--bg-secondary);
  border-bottom: 1px solid var(--border-color);
  gap: 16px;
}

.file-explorer-toolbar-left {
  display: flex;
  align-items: center;
  gap: 12px;
}

.file-explorer-close-btn {
  width: 28px;
  height: 28px;
  display: flex;
  align-items: center;
  justify-content: center;
  border: none;
  background: transparent;
  color: var(--text-muted);
  border-radius: 6px;
  cursor: pointer;
  transition: all 0.15s ease;
}

.file-explorer-close-btn:hover {
  background: var(--bg-hover);
  color: var(--text-primary);
}

.file-explorer-title {
  display: flex;
  align-items: center;
  gap: 8px;
  font-weight: 600;
  font-size: 14px;
  color: var(--text-primary);
}

.file-explorer-title i {
  font-size: 18px;
  color: var(--given-color, #f0883e);
}

.file-explorer-badge {
  font-size: 9px;
  font-weight: 700;
  padding: 2px 6px;
  border-radius: 4px;
  background: rgba(240, 136, 62, 0.15);
  color: var(--given-color, #f0883e);
  letter-spacing: 0.5px;
}

/* Content Mode Toggle (Sources/Sets) */
.file-explorer-content-toggle {
  display: flex;
  background: var(--bg-primary);
  border: 1px solid var(--border-color);
  border-radius: 8px;
  padding: 3px;
  gap: 2px;
}

.fe-content-tab {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 6px 12px;
  border: none;
  background: transparent;
  border-radius: 6px;
  cursor: pointer;
  font-size: 13px;
  font-weight: 500;
  color: var(--text-muted);
  transition: all 0.15s ease;
}

.fe-content-tab:hover {
  color: var(--text-primary);
  background: var(--bg-hover);
}

.fe-content-tab.active {
  background: var(--bg-secondary);
  color: var(--text-primary);
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.08);
}

.fe-content-tab i {
  font-size: 16px;
}

.fe-content-badge {
  font-size: 9px;
  font-weight: 700;
  padding: 2px 5px;
  border-radius: 3px;
  letter-spacing: 0.5px;
}

.fe-content-badge.given {
  background: rgba(240, 136, 62, 0.15);
  color: var(--given-color, #f0883e);
}

.fe-content-badge.schema {
  background: rgba(139, 92, 246, 0.15);
  color: var(--accent-purple, #8b5cf6);
}

/* Operator badge for sets */
.fe-operator-badge {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  font-size: 10px;
  font-weight: 700;
  padding: 2px 6px;
  border-radius: 4px;
  color: white;
  letter-spacing: 0.5px;
  text-transform: uppercase;
}

.fe-operator-badge.small {
  font-size: 8px;
  padding: 1px 4px;
  margin-left: 4px;
}

/* Set preview badge */
.fe-preview-badge.schema {
  background: rgba(139, 92, 246, 0.15);
  color: var(--accent-purple, #8b5cf6);
}

.fe-preview-source {
  color: var(--text-muted);
  font-size: 12px;
  margin-left: 8px;
}

/* Grid card stats for sets */
.fe-grid-card-stats {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
  font-size: 11px;
  color: var(--text-muted);
  margin-top: 8px;
}

.fe-grid-card-stats span {
  display: flex;
  align-items: center;
  gap: 4px;
}

.fe-grid-card-stats i {
  font-size: 12px;
}

.file-explorer-toolbar-center {
  flex: 1;
  max-width: 400px;
}

.file-explorer-search {
  display: flex;
  align-items: center;
  background: var(--bg-primary);
  border: 1px solid var(--border-color);
  border-radius: 8px;
  padding: 0 12px;
  gap: 8px;
}

.file-explorer-search i {
  color: var(--text-muted);
  font-size: 16px;
}

.file-explorer-search input {
  flex: 1;
  border: none;
  background: transparent;
  padding: 8px 0;
  font-size: 13px;
  color: var(--text-primary);
  outline: none;
}

.file-explorer-search input::placeholder {
  color: var(--text-muted);
}

.fe-search-clear {
  border: none;
  background: transparent;
  color: var(--text-muted);
  cursor: pointer;
  padding: 4px;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 4px;
}

.fe-search-clear:hover {
  background: var(--bg-hover);
  color: var(--text-primary);
}

.file-explorer-toolbar-right {
  display: flex;
  align-items: center;
  gap: 12px;
}

.file-explorer-view-toggle {
  display: flex;
  background: var(--bg-primary);
  border: 1px solid var(--border-color);
  border-radius: 6px;
  overflow: hidden;
}

.fe-view-btn {
  width: 32px;
  height: 32px;
  display: flex;
  align-items: center;
  justify-content: center;
  border: none;
  background: transparent;
  color: var(--text-muted);
  cursor: pointer;
  transition: all 0.15s ease;
}

.fe-view-btn:hover {
  color: var(--text-primary);
  background: var(--bg-hover);
}

.fe-view-btn.active {
  background: var(--accent);
  color: white;
}

.file-explorer-import-btn {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 8px 14px;
  border: none;
  background: var(--accent);
  color: white;
  border-radius: 6px;
  font-size: 13px;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.15s ease;
}

.file-explorer-import-btn:hover {
  filter: brightness(1.1);
}

/* Selection Bar */
.file-explorer-selection-bar {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 8px 16px;
  background: linear-gradient(135deg, rgba(59, 130, 246, 0.15), rgba(139, 92, 246, 0.1));
  border-bottom: 1px solid var(--accent);
  gap: 16px;
}

.fe-selection-info {
  display: flex;
  align-items: center;
  gap: 8px;
}

.fe-selection-clear {
  width: 24px;
  height: 24px;
  display: flex;
  align-items: center;
  justify-content: center;
  border: none;
  background: rgba(255, 255, 255, 0.1);
  color: var(--text-primary);
  border-radius: 4px;
  cursor: pointer;
  transition: all 0.15s ease;
}

.fe-selection-clear:hover {
  background: rgba(255, 255, 255, 0.2);
}

.fe-selection-count {
  font-size: 13px;
  font-weight: 500;
  color: var(--text-primary);
}

.fe-selection-actions {
  display: flex;
  align-items: center;
  gap: 8px;
}

.fe-selection-action {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 6px 12px;
  border: none;
  background: var(--accent);
  color: white;
  font-size: 12px;
  font-weight: 500;
  border-radius: 6px;
  cursor: pointer;
  transition: all 0.15s ease;
}

.fe-selection-action:hover {
  filter: brightness(1.1);
}

.fe-selection-action.secondary {
  background: rgba(255, 255, 255, 0.1);
  color: var(--text-primary);
}

.fe-selection-action.secondary:hover {
  background: rgba(255, 255, 255, 0.15);
}

.fe-selection-action.danger {
  background: rgba(239, 68, 68, 0.2);
  color: #ef4444;
}

.fe-selection-action.danger:hover {
  background: rgba(239, 68, 68, 0.3);
}

.fe-selection-action i {
  font-size: 14px;
}

/* Main Layout */
.file-explorer-main {
  display: flex;
  flex: 1;
  overflow: hidden;
}

/* Sidebar */
.file-explorer-sidebar {
  width: 220px;
  border-right: 1px solid var(--border-color);
  background: var(--bg-secondary);
  overflow-y: auto;
  flex-shrink: 0;
}

.fe-sidebar-section {
  padding: 12px 0;
  border-bottom: 1px solid var(--border-color);
}

.fe-sidebar-section:last-child {
  border-bottom: none;
}

.fe-sidebar-section-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 0 12px 8px 12px;
  font-size: 11px;
  font-weight: 600;
  color: var(--text-muted);
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.fe-sidebar-add-btn {
  width: 20px;
  height: 20px;
  display: flex;
  align-items: center;
  justify-content: center;
  border: none;
  background: transparent;
  color: var(--text-muted);
  border-radius: 4px;
  cursor: pointer;
  opacity: 0;
  transition: all 0.15s ease;
}

.fe-sidebar-section:hover .fe-sidebar-add-btn {
  opacity: 1;
}

.fe-sidebar-add-btn:hover {
  background: var(--bg-hover);
  color: var(--text-primary);
}

.fe-sidebar-items {
  display: flex;
  flex-direction: column;
}

.fe-sidebar-item {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 6px 12px;
  cursor: pointer;
  transition: all 0.15s ease;
  font-size: 13px;
  color: var(--text-secondary);
}

.fe-sidebar-item:hover {
  background: var(--bg-hover);
  color: var(--text-primary);
}

.fe-sidebar-item.active {
  background: var(--bg-active);
  color: var(--text-primary);
}

.fe-sidebar-item i {
  font-size: 16px;
  width: 18px;
  text-align: center;
}

.fe-sidebar-item-name {
  flex: 1;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.fe-sidebar-item-count {
  font-size: 11px;
  color: var(--text-muted);
  background: var(--bg-tertiary);
  padding: 2px 6px;
  border-radius: 10px;
}

.fe-sidebar-empty {
  padding: 8px 12px;
  font-size: 12px;
  color: var(--text-muted);
  font-style: italic;
}

.fe-tag-dot {
  width: 10px;
  height: 10px;
  border-radius: 50%;
  flex-shrink: 0;
}

/* Folder Items */
.fe-folder-item {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 6px 8px;
  cursor: pointer;
  transition: all 0.15s ease;
  font-size: 13px;
  color: var(--text-secondary);
}

.fe-folder-item:hover {
  background: var(--bg-hover);
  color: var(--text-primary);
}

.fe-folder-item.active {
  background: var(--bg-active);
  color: var(--text-primary);
}

.fe-folder-toggle {
  width: 16px;
  height: 16px;
  display: flex;
  align-items: center;
  justify-content: center;
  border: none;
  background: transparent;
  color: var(--text-muted);
  cursor: pointer;
  padding: 0;
  transition: transform 0.15s ease;
}

.fe-folder-toggle.expanded i {
  transform: rotate(90deg);
}

.fe-folder-toggle-spacer {
  width: 16px;
}

/* Content Area */
.file-explorer-content {
  flex: 1;
  display: flex;
  flex-direction: column;
  overflow: hidden;
}

.fe-content-breadcrumb {
  display: flex;
  align-items: center;
  gap: 4px;
  padding: 12px 16px;
  background: var(--bg-primary);
  border-bottom: 1px solid var(--border-color);
  font-size: 13px;
}

.fe-breadcrumb-item {
  color: var(--text-muted);
  cursor: pointer;
  padding: 4px 8px;
  border-radius: 4px;
  transition: all 0.15s ease;
}

.fe-breadcrumb-item:hover {
  background: var(--bg-hover);
  color: var(--text-primary);
}

.fe-breadcrumb-item.active {
  color: var(--text-primary);
  font-weight: 500;
}

.fe-breadcrumb-item.drop-target {
  background: var(--accent);
  color: white;
}

.fe-content-breadcrumb > i {
  color: var(--text-muted);
  font-size: 12px;
}

.fe-content-sources {
  flex: 1;
  overflow: auto;
  padding: 16px;
}

/* Empty State */
.fe-empty-state {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 60px 20px;
  text-align: center;
}

.fe-empty-state i {
  font-size: 48px;
  color: var(--text-muted);
  margin-bottom: 16px;
}

.fe-empty-state h3 {
  font-size: 16px;
  font-weight: 600;
  color: var(--text-primary);
  margin: 0 0 8px 0;
}

.fe-empty-state p {
  font-size: 13px;
  color: var(--text-muted);
  margin: 0 0 20px 0;
}

/* List View */
.fe-list-view {
  display: flex;
  flex-direction: column;
}

.fe-list-header {
  display: flex;
  align-items: center;
  padding: 8px 12px;
  background: var(--bg-secondary);
  border-radius: 6px 6px 0 0;
  font-size: 11px;
  font-weight: 600;
  color: var(--text-muted);
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.fe-list-col {
  display: flex;
  align-items: center;
}

.fe-list-col-name {
  flex: 2;
  gap: 10px;
}

.fe-list-col-type {
  width: 80px;
}

.fe-list-col-rows {
  width: 100px;
}

.fe-list-col-date {
  width: 100px;
}

.fe-list-col-tags {
  flex: 1;
  gap: 4px;
}

.fe-list-col-actions {
  width: 70px;
  justify-content: flex-end;
  gap: 4px;
}

.fe-list-body {
  background: var(--bg-primary);
  border: 1px solid var(--border-color);
  border-radius: 0 0 6px 6px;
}

.fe-list-row {
  display: flex;
  align-items: center;
  padding: 10px 12px;
  border-bottom: 1px solid var(--border-color);
  cursor: pointer;
  transition: all 0.15s ease;
}

.fe-list-row:last-child {
  border-bottom: none;
}

.fe-list-row:hover {
  background: var(--bg-hover);
}

.fe-list-row.selected {
  background: var(--bg-active);
}

.fe-list-row.checked {
  background: rgba(59, 130, 246, 0.1);
}

.fe-list-row.checked:hover {
  background: rgba(59, 130, 246, 0.15);
}

.fe-list-row.dragging {
  opacity: 0.5;
}

/* Checkbox column */
.fe-list-col-checkbox {
  width: 40px;
  flex-shrink: 0;
  display: flex;
  align-items: center;
  justify-content: center;
}

.fe-source-checkbox,
.fe-select-all-checkbox {
  width: 16px;
  height: 16px;
  cursor: pointer;
  accent-color: var(--accent);
}

.fe-grid-checkbox {
  position: absolute;
  top: 8px;
  left: 8px;
  z-index: 2;
}

.fe-list-source-name {
  font-size: 13px;
  color: var(--text-primary);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.fe-list-row i {
  font-size: 16px;
  color: var(--given-color, #f0883e);
}

.fe-favorite-icon {
  color: #fbbf24 !important;
  font-size: 14px !important;
}

.fe-type-badge {
  font-size: 10px;
  font-weight: 600;
  padding: 2px 6px;
  border-radius: 4px;
  text-transform: uppercase;
}

.fe-type-csv {
  background: rgba(34, 197, 94, 0.15);
  color: #22c55e;
}

.fe-type-json {
  background: rgba(168, 85, 247, 0.15);
  color: #a855f7;
}

.fe-type-excel {
  background: rgba(34, 197, 94, 0.15);
  color: #16a34a;
}

.fe-type-calendar {
  background: rgba(59, 130, 246, 0.15);
  color: #3b82f6;
}

.fe-type-unknown {
  background: var(--bg-tertiary);
  color: var(--text-muted);
}

.fe-tag-mini {
  font-size: 10px;
  padding: 2px 6px;
  border-radius: 10px;
  color: white;
  white-space: nowrap;
}

.fe-tag-more {
  font-size: 10px;
  color: var(--text-muted);
}

.fe-row-action {
  width: 28px;
  height: 28px;
  display: flex;
  align-items: center;
  justify-content: center;
  border: none;
  background: transparent;
  color: var(--text-muted);
  border-radius: 4px;
  cursor: pointer;
  opacity: 0;
  transition: all 0.15s ease;
}

.fe-list-row:hover .fe-row-action {
  opacity: 1;
}

.fe-row-action:hover {
  background: var(--bg-tertiary);
  color: var(--text-primary);
}

/* Grid View */
.fe-grid-view {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
  gap: 16px;
}

.fe-grid-card {
  background: var(--bg-secondary);
  border: 1px solid var(--border-color);
  border-radius: 8px;
  overflow: hidden;
  cursor: pointer;
  transition: all 0.15s ease;
}

.fe-grid-card:hover {
  border-color: var(--accent);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
}

.fe-grid-card.selected {
  border-color: var(--accent);
  box-shadow: 0 0 0 2px rgba(var(--accent-rgb), 0.2);
}

.fe-grid-card.checked {
  border-color: var(--accent);
  background: rgba(59, 130, 246, 0.05);
}

.fe-grid-card.checked:hover {
  background: rgba(59, 130, 246, 0.1);
}

.fe-grid-card.dragging {
  opacity: 0.5;
}

.fe-grid-card-header {
  display: flex;
  justify-content: space-between;
  padding: 8px 10px;
  min-height: 28px;
  position: relative;
}

.fe-grid-favorite {
  color: #fbbf24;
  font-size: 14px;
}

.fe-grid-menu-btn {
  width: 24px;
  height: 24px;
  display: flex;
  align-items: center;
  justify-content: center;
  border: none;
  background: transparent;
  color: var(--text-muted);
  border-radius: 4px;
  cursor: pointer;
  opacity: 0;
  margin-left: auto;
}

.fe-grid-card:hover .fe-grid-menu-btn {
  opacity: 1;
}

.fe-grid-menu-btn:hover {
  background: var(--bg-hover);
  color: var(--text-primary);
}

.fe-grid-card-preview {
  padding: 12px;
  background: var(--bg-primary);
  display: flex;
  align-items: center;
  justify-content: center;
  min-height: 80px;
}

.fe-grid-preview-visual {
  display: flex;
  align-items: center;
  justify-content: center;
}

.fe-grid-preview-visual > i {
  font-size: 36px;
  color: var(--text-muted);
}

.fe-preview-table {
  display: flex;
  flex-direction: column;
  gap: 3px;
}

.fe-preview-row {
  display: flex;
  gap: 3px;
}

.fe-preview-cell {
  width: 20px;
  height: 8px;
  background: var(--bg-tertiary);
  border-radius: 2px;
}

.fe-preview-cell.filled {
  background: var(--given-color, #f0883e);
  opacity: 0.4;
}

.fe-grid-card-info {
  padding: 12px;
}

.fe-grid-card-icon {
  width: 32px;
  height: 32px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: rgba(240, 136, 62, 0.15);
  border-radius: 8px;
  margin-bottom: 10px;
}

.fe-grid-card-icon i {
  font-size: 16px;
  color: var(--given-color, #f0883e);
}

.fe-grid-card-name {
  font-size: 13px;
  font-weight: 500;
  color: var(--text-primary);
  margin-bottom: 4px;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.fe-grid-card-meta {
  font-size: 11px;
  color: var(--text-muted);
  margin-bottom: 4px;
}

.fe-grid-sep {
  margin: 0 4px;
}

.fe-grid-card-date {
  font-size: 11px;
  color: var(--text-muted);
}

.fe-grid-card-tags {
  display: flex;
  flex-wrap: wrap;
  gap: 4px;
  margin-top: 8px;
}

/* File Explorer Grid (for explorers) */
.file-explorer-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
  gap: 16px;
  padding: 0;
}

.fe-grid-item {
  background: var(--bg-secondary);
  border: 1px solid var(--border-color);
  border-radius: 10px;
  padding: 20px;
  cursor: pointer;
  transition: all 0.15s ease;
  text-align: center;
}

.fe-grid-item:hover {
  border-color: var(--accent);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
  transform: translateY(-2px);
}

.fe-grid-item .fe-grid-icon {
  width: 48px;
  height: 48px;
  margin: 0 auto 12px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: var(--bg-tertiary);
  border-radius: 12px;
}

.fe-grid-item .fe-grid-icon i {
  font-size: 24px;
  color: var(--text-muted);
}

.fe-grid-item .fe-grid-name {
  font-size: 13px;
  font-weight: 600;
  color: var(--text-primary);
  margin-bottom: 4px;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.fe-grid-item .fe-grid-meta {
  font-size: 11px;
  color: var(--text-muted);
}

.fe-section-header {
  font-size: 12px;
  font-weight: 600;
  color: var(--text-muted);
  text-transform: uppercase;
  letter-spacing: 0.5px;
  margin-bottom: 16px;
}

/* ============================================================================
   Export Detail View
   ============================================================================ */

.export-detail-view {
  max-width: 800px;
  margin: 0 auto;
  padding: 24px;
}

.export-detail-header {
  display: flex;
  align-items: flex-start;
  gap: 16px;
  padding-bottom: 20px;
  border-bottom: 1px solid var(--border-color);
  margin-bottom: 24px;
}

.export-detail-icon {
  width: 56px;
  height: 56px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: rgba(34, 197, 94, 0.1);
  border-radius: 12px;
  flex-shrink: 0;
}

.export-detail-icon i {
  font-size: 28px;
  color: rgb(34, 197, 94);
}

.export-detail-info {
  flex: 1;
  min-width: 0;
}

.export-detail-info h2 {
  font-size: 20px;
  font-weight: 600;
  color: var(--text-primary);
  margin: 0 0 6px 0;
  display: flex;
  align-items: center;
  gap: 10px;
}

.export-frozen-badge {
  display: inline-flex;
  align-items: center;
  gap: 4px;
  font-size: 10px;
  font-weight: 700;
  padding: 3px 8px;
  border-radius: 4px;
  background: rgba(34, 197, 94, 0.15);
  color: rgb(34, 197, 94);
}

.export-frozen-badge i {
  font-size: 11px;
}

.export-detail-meta {
  font-size: 13px;
  color: var(--text-muted);
}

.export-detail-actions {
  display: flex;
  gap: 8px;
}

.export-detail-content {
  display: flex;
  flex-direction: column;
  gap: 24px;
}

.export-notes {
  background: var(--bg-secondary);
  border-radius: 8px;
  padding: 16px;
}

.export-notes h3 {
  font-size: 12px;
  font-weight: 600;
  color: var(--text-muted);
  text-transform: uppercase;
  letter-spacing: 0.5px;
  margin: 0 0 8px 0;
}

.export-notes p {
  font-size: 14px;
  color: var(--text-primary);
  margin: 0;
  line-height: 1.5;
}

.export-provenance {
  background: var(--bg-secondary);
  border-radius: 8px;
  padding: 16px;
}

.export-provenance h3 {
  font-size: 12px;
  font-weight: 600;
  color: var(--text-muted);
  text-transform: uppercase;
  letter-spacing: 0.5px;
  margin: 0 0 12px 0;
}

.provenance-item {
  display: flex;
  align-items: center;
  padding: 8px 0;
  border-bottom: 1px solid var(--border-color);
}

.provenance-item:last-child {
  border-bottom: none;
}

.provenance-label {
  font-size: 13px;
  color: var(--text-muted);
  min-width: 120px;
}

.provenance-value {
  font-size: 13px;
  color: var(--text-primary);
  font-family: var(--font-mono);
}

.compliance-note.frozen {
  display: flex;
  align-items: flex-start;
  gap: 12px;
  padding: 16px;
  background: rgba(34, 197, 94, 0.08);
  border: 1px solid rgba(34, 197, 94, 0.2);
  border-radius: 8px;
}

.compliance-note.frozen i {
  font-size: 18px;
  color: rgb(34, 197, 94);
  flex-shrink: 0;
  margin-top: 2px;
}

.compliance-note.frozen span {
  font-size: 13px;
  color: var(--text-primary);
  line-height: 1.5;
}

/* Tree View */
.fe-tree-view {
  padding: 8px 0;
}

.fe-tree-section {
  padding-left: 8px;
}

.fe-tree-folder {
  margin-bottom: 4px;
}

.fe-tree-folder-header {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 6px 8px;
  cursor: pointer;
  border-radius: 6px;
  transition: all 0.15s ease;
}

.fe-tree-folder-header:hover {
  background: var(--bg-hover);
}

.fe-tree-folder-header.drop-target {
  background: var(--accent);
  color: white;
}

.fe-tree-toggle {
  width: 18px;
  height: 18px;
  display: flex;
  align-items: center;
  justify-content: center;
  border: none;
  background: transparent;
  color: var(--text-muted);
  cursor: pointer;
  padding: 0;
  transition: transform 0.15s ease;
}

.fe-tree-folder.expanded .fe-tree-toggle i {
  transform: rotate(90deg);
}

.fe-tree-folder-header > i:not(.ph-caret-right) {
  font-size: 16px;
  color: #f0883e;
}

.fe-tree-folder-name {
  font-size: 13px;
  color: var(--text-primary);
  flex: 1;
}

.fe-tree-folder-count {
  font-size: 11px;
  color: var(--text-muted);
}

.fe-tree-folder-content {
  padding-left: 24px;
}

.fe-tree-source {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 6px 8px;
  cursor: pointer;
  border-radius: 6px;
  transition: all 0.15s ease;
}

.fe-tree-source:hover {
  background: var(--bg-hover);
}

.fe-tree-source.selected {
  background: var(--bg-active);
}

.fe-tree-source.dragging {
  opacity: 0.5;
}

.fe-tree-source > i {
  font-size: 16px;
  color: var(--given-color, #f0883e);
}

.fe-tree-source-name {
  font-size: 13px;
  color: var(--text-primary);
  flex: 1;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.fe-tree-source-meta {
  font-size: 11px;
  color: var(--text-muted);
}

/* Preview Panel */
.file-explorer-preview {
  width: 0;
  border-left: 1px solid var(--border-color);
  background: var(--bg-secondary);
  overflow: hidden;
  transition: width 0.2s ease;
  flex-shrink: 0;
}

.file-explorer-preview.visible {
  width: 300px;
}

.fe-preview-empty {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  height: 100%;
  color: var(--text-muted);
  gap: 8px;
}

.fe-preview-empty i {
  font-size: 32px;
}

.fe-preview-content {
  padding: 16px;
  height: 100%;
  overflow-y: auto;
}

.fe-preview-header {
  display: flex;
  align-items: flex-start;
  gap: 12px;
  margin-bottom: 16px;
}

.fe-preview-icon {
  width: 48px;
  height: 48px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: rgba(240, 136, 62, 0.15);
  border-radius: 10px;
  flex-shrink: 0;
}

.fe-preview-icon i {
  font-size: 24px;
  color: var(--given-color, #f0883e);
}

.fe-preview-title {
  flex: 1;
  min-width: 0;
}

.fe-preview-title h3 {
  font-size: 14px;
  font-weight: 600;
  color: var(--text-primary);
  margin: 0 0 4px 0;
  word-wrap: break-word;
}

.fe-preview-badge {
  font-size: 9px;
  font-weight: 700;
  padding: 2px 6px;
  border-radius: 4px;
  background: rgba(240, 136, 62, 0.15);
  color: var(--given-color, #f0883e);
  letter-spacing: 0.5px;
}

.fe-preview-close {
  width: 24px;
  height: 24px;
  display: flex;
  align-items: center;
  justify-content: center;
  border: none;
  background: transparent;
  color: var(--text-muted);
  border-radius: 4px;
  cursor: pointer;
}

.fe-preview-close:hover {
  background: var(--bg-hover);
  color: var(--text-primary);
}

.fe-preview-stats {
  display: flex;
  gap: 12px;
  margin-bottom: 20px;
  padding: 12px;
  background: var(--bg-primary);
  border-radius: 8px;
}

.fe-preview-stat {
  flex: 1;
  text-align: center;
}

.fe-preview-stat-value {
  display: block;
  font-size: 18px;
  font-weight: 600;
  color: var(--text-primary);
}

.fe-preview-stat-label {
  font-size: 10px;
  color: var(--text-muted);
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.fe-preview-section {
  margin-bottom: 16px;
}

.fe-preview-section-header {
  display: flex;
  align-items: center;
  gap: 8px;
  margin-bottom: 8px;
  font-size: 12px;
  font-weight: 600;
  color: var(--text-muted);
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.fe-preview-section-header i {
  font-size: 14px;
}

.fe-preview-add-tag-btn {
  width: 18px;
  height: 18px;
  display: flex;
  align-items: center;
  justify-content: center;
  border: none;
  background: transparent;
  color: var(--text-muted);
  border-radius: 4px;
  cursor: pointer;
  margin-left: auto;
}

.fe-preview-add-tag-btn:hover {
  background: var(--bg-hover);
  color: var(--text-primary);
}

.fe-preview-section-content {
  font-size: 13px;
  color: var(--text-secondary);
}

.fe-preview-fields {
  display: flex;
  flex-direction: column;
  gap: 4px;
}

.fe-preview-field {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 6px 8px;
  background: var(--bg-primary);
  border-radius: 4px;
  font-size: 12px;
}

.fe-preview-field i {
  font-size: 14px;
  color: var(--text-muted);
}

.fe-preview-field span:first-of-type {
  flex: 1;
  color: var(--text-primary);
}

.fe-preview-field-type {
  font-size: 10px;
  color: var(--text-muted);
  text-transform: uppercase;
}

.fe-preview-more {
  font-size: 11px;
  color: var(--text-muted);
  padding: 4px 8px;
  text-align: center;
}

.fe-preview-tags {
  display: flex;
  flex-wrap: wrap;
  gap: 6px;
}

.fe-preview-tag {
  display: flex;
  align-items: center;
  gap: 4px;
  padding: 4px 8px;
  border-radius: 12px;
  font-size: 12px;
  color: white;
}

.fe-tag-remove {
  width: 14px;
  height: 14px;
  display: flex;
  align-items: center;
  justify-content: center;
  border: none;
  background: rgba(255, 255, 255, 0.2);
  color: white;
  border-radius: 50%;
  cursor: pointer;
  padding: 0;
}

.fe-tag-remove:hover {
  background: rgba(255, 255, 255, 0.3);
}

.fe-preview-no-tags {
  font-size: 12px;
  color: var(--text-muted);
  font-style: italic;
}

.fe-preview-provenance {
  font-size: 12px;
  color: var(--text-secondary);
}

.fe-preview-provenance div {
  margin-bottom: 4px;
}

.fe-preview-provenance strong {
  color: var(--text-muted);
  font-weight: 500;
}

/* Enhanced Provenance Display - File Explorer Preview */
.fe-preview-provenance-full {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.fe-prov-status {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 6px 10px;
  background: var(--bg-secondary);
  border-radius: 6px;
  font-size: 11px;
}

.fe-prov-status.complete {
  color: var(--success-500);
}

.fe-prov-status.partial {
  color: var(--warning-500);
}

.fe-prov-status.none {
  color: var(--text-muted);
}

.fe-prov-indicator {
  font-size: 12px;
}

.fe-prov-triad {
  padding: 10px;
  background: var(--bg-secondary);
  border-radius: 8px;
}

.fe-prov-triad.empty {
  opacity: 0.6;
}

.fe-prov-triad-header {
  display: flex;
  align-items: center;
  gap: 6px;
  margin-bottom: 8px;
  padding-bottom: 6px;
  border-bottom: 1px solid var(--border-color);
}

.fe-prov-triad-header > i {
  color: var(--primary-500);
  font-size: 14px;
}

.fe-prov-triad-name {
  font-weight: 600;
  font-size: 11px;
  color: var(--text-primary);
}

.fe-prov-triad-subtitle {
  font-size: 10px;
  color: var(--text-muted);
  margin-left: auto;
}

.fe-prov-triad-elements {
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.fe-prov-element {
  display: flex;
  align-items: center;
  gap: 8px;
  font-size: 11px;
}

.fe-prov-element > i {
  color: var(--text-muted);
  font-size: 12px;
  width: 16px;
}

.fe-prov-element.filled > i {
  color: var(--primary-500);
}

.fe-prov-label {
  color: var(--text-muted);
  min-width: 70px;
}

.fe-prov-value {
  color: var(--text-primary);
  flex: 1;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.fe-prov-element.empty .fe-prov-value {
  color: var(--text-muted);
  font-style: italic;
}

/* File Metadata Display */
.fe-preview-metadata {
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.fe-metadata-item {
  display: flex;
  align-items: center;
  gap: 8px;
  font-size: 11px;
  padding: 4px 0;
}

.fe-metadata-item > i {
  color: var(--text-muted);
  font-size: 12px;
  width: 16px;
}

.fe-metadata-label {
  color: var(--text-muted);
  min-width: 110px;
}

.fe-metadata-value {
  color: var(--text-primary);
  flex: 1;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.fe-metadata-empty {
  font-size: 11px;
  color: var(--text-muted);
  font-style: italic;
}

.fe-preview-edit-prov-btn {
  background: transparent;
  border: none;
  cursor: pointer;
  color: var(--text-muted);
  padding: 4px;
  margin-left: auto;
  transition: color 0.15s ease;
}

.fe-preview-edit-prov-btn:hover {
  color: var(--primary-500);
}

.fe-preview-actions {
  display: flex;
  flex-direction: column;
  gap: 8px;
  margin-top: 20px;
  padding-top: 16px;
  border-top: 1px solid var(--border-color);
}

.fe-preview-action {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
  width: 100%;
}

/* Modal Styles for File Explorer */
.tag-selection {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
}

.tag-checkbox {
  display: flex;
  align-items: center;
  gap: 6px;
  cursor: pointer;
}

.tag-checkbox input {
  display: none;
}

.tag-label {
  padding: 4px 10px;
  border-radius: 12px;
  font-size: 12px;
  color: white;
  opacity: 0.6;
  transition: all 0.15s ease;
}

.tag-checkbox input:checked + .tag-label {
  opacity: 1;
  box-shadow: 0 0 0 2px rgba(255, 255, 255, 0.5);
}

.folder-selection {
  display: flex;
  flex-direction: column;
  gap: 8px;
  margin-top: 12px;
}

.folder-radio {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 8px 12px;
  background: var(--bg-primary);
  border: 1px solid var(--border-color);
  border-radius: 6px;
  cursor: pointer;
  transition: all 0.15s ease;
}

.folder-radio:hover {
  background: var(--bg-hover);
}

.folder-radio input:checked + span {
  color: var(--accent);
  font-weight: 500;
}

.folder-radio span {
  display: flex;
  align-items: center;
  gap: 8px;
  font-size: 13px;
}

.color-picker {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
}

.color-option {
  width: 28px;
  height: 28px;
  border-radius: 50%;
  border: 2px solid transparent;
  cursor: pointer;
  transition: all 0.15s ease;
}

.color-option:hover {
  transform: scale(1.1);
}

.color-option.selected {
  border-color: var(--text-primary);
  box-shadow: 0 0 0 2px var(--bg-primary);
}

/* Drop target styling */
.drop-target {
  background: rgba(var(--accent-rgb), 0.1) !important;
  border-color: var(--accent) !important;
}

/* Nav panel actions container */
.nav-panel-actions {
  display: flex;
  align-items: center;
  gap: 4px;
}

/* ============================================================================
   Query Builder UI Styles
   ============================================================================ */

.query-builder-overlay {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(0, 0, 0, 0.7);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 1000;
  animation: fadeIn 0.15s ease;
}

.query-builder-modal {
  background: var(--bg-secondary);
  border: 1px solid var(--border-color);
  border-radius: 12px;
  width: 95%;
  max-width: 1200px;
  max-height: 92vh;
  display: flex;
  flex-direction: column;
  overflow: hidden;
  animation: slideUp 0.2s ease;
}

.query-builder-header {
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  padding: 16px 20px;
  border-bottom: 1px solid var(--border-color);
  background: var(--bg-tertiary);
}

.qb-header-title h2 {
  font-size: 18px;
  font-weight: 600;
  display: flex;
  align-items: center;
  gap: 8px;
  margin: 0;
}

.qb-subtitle {
  font-size: 12px;
  color: var(--text-secondary);
  margin-top: 4px;
  display: flex;
  align-items: center;
  gap: 12px;
}

.source-badge {
  display: inline-flex;
  align-items: center;
  gap: 4px;
  padding: 2px 8px;
  background: rgba(240, 136, 62, 0.2);
  color: #f0883e;
  border-radius: 10px;
  font-size: 11px;
}

.qb-close-btn {
  background: transparent;
  border: none;
  color: var(--text-muted);
  cursor: pointer;
  padding: 4px;
  border-radius: 4px;
}

.qb-close-btn:hover {
  background: var(--bg-hover);
  color: var(--text-primary);
}

/* Mode Tabs */
.qb-mode-tabs {
  display: flex;
  gap: 4px;
  padding: 12px 20px;
  background: var(--bg-primary);
  border-bottom: 1px solid var(--border-color);
}

.qb-mode-tab {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 10px 16px;
  background: transparent;
  border: 1px solid transparent;
  border-radius: 8px;
  color: var(--text-muted);
  font-size: 13px;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.15s ease;
}

.qb-mode-tab:hover {
  background: var(--bg-hover);
  color: var(--text-secondary);
}

.qb-mode-tab.active {
  background: var(--bg-secondary);
  border-color: var(--border-color);
  color: var(--text-primary);
}

.mode-badge {
  padding: 2px 8px;
  border-radius: 10px;
  font-size: 10px;
  font-weight: 600;
  text-transform: uppercase;
}

.mode-badge.easy {
  background: rgba(63, 185, 80, 0.2);
  color: #3fb950;
}

.mode-badge.power {
  background: rgba(163, 113, 247, 0.2);
  color: #a371f7;
}

/* Body */
.qb-body {
  flex: 1;
  overflow-y: auto;
  padding: 20px;
  max-height: 400px;
}

/* Wizard Mode */
.wizard-mode {
  display: flex;
  flex-direction: column;
  gap: 24px;
}

.wizard-step {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.step-header {
  display: flex;
  align-items: center;
  gap: 12px;
}

.step-num {
  width: 28px;
  height: 28px;
  background: var(--accent-blue);
  color: white;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 12px;
  font-weight: 600;
}

.step-label {
  font-size: 14px;
  font-weight: 500;
}

.qb-input {
  width: 100%;
  padding: 10px 12px;
  background: var(--bg-tertiary);
  border: 1px solid var(--border-color);
  border-radius: 6px;
  color: var(--text-primary);
  font-size: 13px;
}

.qb-input:focus {
  outline: none;
  border-color: var(--accent-blue);
}

/* Column Chips */
.column-chips {
  display: flex;
  flex-wrap: wrap;
  gap: 6px;
}

.column-chip {
  display: flex;
  align-items: center;
  gap: 4px;
  padding: 6px 10px;
  background: var(--bg-tertiary);
  border: 1px solid var(--border-color);
  border-radius: 16px;
  font-size: 12px;
  cursor: pointer;
  transition: all 0.15s ease;
}

.column-chip:hover {
  background: var(--bg-hover);
}

.column-chip.selected {
  background: rgba(88, 166, 255, 0.2);
  border-color: var(--accent-blue);
  color: var(--accent-blue);
}

.column-chip i {
  font-size: 10px;
}

/* Query Mode */
.query-mode {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.lang-tabs {
  display: flex;
  gap: 4px;
  background: var(--bg-tertiary);
  padding: 4px;
  border-radius: 8px;
  width: fit-content;
}

.lang-tab {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 8px 14px;
  border-radius: 6px;
  font-size: 12px;
  font-weight: 500;
  cursor: pointer;
  border: none;
  background: transparent;
  color: var(--text-muted);
  transition: all 0.15s ease;
}

.lang-tab:hover {
  color: var(--text-secondary);
}

.lang-tab.active {
  background: var(--bg-secondary);
  color: var(--text-primary);
}

.query-editor-container {
  background: var(--bg-primary);
  border: 1px solid var(--border-color);
  border-radius: 8px;
  overflow: hidden;
}

.query-editor {
  width: 100%;
  min-height: 150px;
  padding: 16px;
  background: transparent;
  border: none;
  color: var(--text-primary);
  font-family: 'Monaco', 'Menlo', 'Consolas', monospace;
  font-size: 13px;
  line-height: 1.6;
  resize: vertical;
  white-space: pre-wrap;
  overflow-wrap: break-word;
}

.query-editor:focus {
  outline: none;
}

.query-editor::placeholder {
  color: var(--text-muted);
}

.query-toolbar {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 10px 16px;
  background: var(--bg-tertiary);
  border-top: 1px solid var(--border-color);
}

.query-hints {
  display: flex;
  gap: 16px;
  font-size: 11px;
  color: var(--text-muted);
}

.hint {
  display: flex;
  align-items: center;
  gap: 4px;
}

.hint kbd {
  padding: 2px 6px;
  background: var(--bg-primary);
  border-radius: 4px;
  font-family: inherit;
}

.query-validation {
  font-size: 12px;
}

.validation-pending {
  color: var(--text-muted);
}

.validation-success {
  color: #3fb950;
}

.validation-error {
  color: #f85149;
}

/* Operator Chain */
.qb-operator-chain {
  padding: 12px 20px;
  background: var(--bg-tertiary);
  border-top: 1px solid var(--border-color);
  border-bottom: 1px solid var(--border-color);
}

.chain-label {
  font-size: 11px;
  color: var(--text-muted);
  margin-bottom: 8px;
  display: flex;
  align-items: center;
  gap: 6px;
}

.chain-operators {
  display: flex;
  align-items: center;
  gap: 8px;
  flex-wrap: wrap;
}

.chain-op {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 6px 10px;
  background: var(--bg-secondary);
  border: 1px solid var(--border-color);
  border-radius: 6px;
  font-size: 12px;
}

.chain-op .op-symbol {
  font-size: 14px;
  font-weight: 600;
}

.chain-op .op-name {
  color: var(--text-secondary);
  font-size: 11px;
}

/* Operator colors */
.chain-op.op-given { border-color: #f0883e; background: rgba(240, 136, 62, 0.1); }
.chain-op.op-given .op-symbol { color: #f0883e; }

.chain-op.op-seg { border-color: #a371f7; background: rgba(163, 113, 247, 0.1); }
.chain-op.op-seg .op-symbol { color: #a371f7; }

.chain-op.op-con { border-color: #58a6ff; background: rgba(88, 166, 255, 0.1); }
.chain-op.op-con .op-symbol { color: #58a6ff; }

.chain-op.op-alt { border-color: #3fb950; background: rgba(63, 185, 80, 0.1); }
.chain-op.op-alt .op-symbol { color: #3fb950; }

.chain-op.op-des { border-color: #d29922; background: rgba(210, 153, 34, 0.1); }
.chain-op.op-des .op-symbol { color: #d29922; }

.chain-op.op-syn { border-color: #8957e5; background: rgba(137, 87, 229, 0.1); }
.chain-op.op-syn .op-symbol { color: #8957e5; }

.chain-op.op-sup { border-color: #db61a2; background: rgba(219, 97, 162, 0.1); }
.chain-op.op-sup .op-symbol { color: #db61a2; }

.chain-op.op-nul { border-color: #6e7681; background: rgba(110, 118, 129, 0.1); }
.chain-op.op-nul .op-symbol { color: #6e7681; }

.chain-op.op-agg { border-color: #79c0ff; background: rgba(121, 192, 255, 0.1); }
.chain-op.op-agg .op-symbol { color: #79c0ff; }

.chain-arrow {
  color: var(--text-muted);
  font-size: 14px;
}

.chain-empty {
  font-size: 12px;
  color: var(--text-muted);
  font-style: italic;
}

/* Preview */
.qb-preview {
  padding: 16px 20px;
  max-height: 200px;
  overflow-y: auto;
}

.preview-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 12px;
}

.preview-title {
  font-size: 12px;
  font-weight: 500;
  display: flex;
  align-items: center;
  gap: 6px;
}

.preview-count {
  font-size: 11px;
  color: var(--text-muted);
}

.preview-table-container {
  overflow-x: auto;
}

.preview-table {
  width: 100%;
  font-size: 11px;
  border-collapse: collapse;
}

.preview-table th {
  padding: 8px 12px;
  text-align: left;
  font-weight: 500;
  color: var(--text-muted);
  border-bottom: 1px solid var(--border-color);
  background: var(--bg-tertiary);
}

.preview-table td {
  padding: 8px 12px;
  border-bottom: 1px solid var(--border-color);
}

.preview-more {
  color: var(--text-muted);
  font-style: italic;
  text-align: center;
}

.preview-empty,
.preview-error {
  padding: 24px;
  text-align: center;
  color: var(--text-muted);
  font-size: 12px;
}

.preview-error {
  color: #f85149;
}

/* Footer */
.qb-footer {
  display: flex;
  justify-content: flex-end;
  gap: 8px;
  padding: 16px 20px;
  background: var(--bg-tertiary);
  border-top: 1px solid var(--border-color);
}

.btn-sm {
  padding: 6px 12px;
  font-size: 12px;
}

.btn-success {
  background: #3fb950;
  color: white;
  border: none;
}

.btn-success:hover:not(:disabled) {
  background: #2ea043;
}

.btn-success:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

/* Join Builder Styles */
.join-builder {
  background: var(--bg-tertiary);
  border-radius: 8px;
  padding: 12px;
}

.join-empty {
  color: var(--text-muted);
  font-size: 12px;
  font-style: italic;
  padding: 8px 0;
}

.joins-list {
  display: flex;
  flex-direction: column;
  gap: 12px;
  margin-bottom: 12px;
}

.join-row {
  background: var(--bg-secondary);
  border: 1px solid var(--border-color);
  border-radius: 8px;
  padding: 12px;
}

.join-row-header {
  display: flex;
  gap: 8px;
  align-items: center;
  margin-bottom: 12px;
}

.join-type-select {
  flex-shrink: 0;
}

.join-source-select {
  flex: 1;
}

.qb-select {
  padding: 8px 10px;
  background: var(--bg-tertiary);
  border: 1px solid var(--border-color);
  border-radius: 6px;
  color: var(--text-primary);
  font-size: 12px;
  min-width: 100px;
}

.qb-select:focus {
  outline: none;
  border-color: var(--accent-blue);
}

.join-remove-btn {
  background: transparent;
  border: none;
  color: var(--text-muted);
  cursor: pointer;
  padding: 4px 8px;
  border-radius: 4px;
}

.join-remove-btn:hover {
  background: var(--bg-hover);
  color: #f85149;
}

.join-conditions {
  display: flex;
  flex-direction: column;
  gap: 8px;
  margin-bottom: 12px;
}

.join-condition {
  display: flex;
  align-items: center;
  gap: 8px;
}

.join-equals {
  color: var(--text-muted);
  font-size: 14px;
}

.join-cond-remove {
  background: transparent;
  border: none;
  color: var(--text-muted);
  cursor: pointer;
  padding: 4px;
  border-radius: 4px;
}

.join-cond-remove:hover {
  color: #f85149;
}

.add-condition-btn {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 6px 10px;
  background: transparent;
  border: 1px dashed var(--border-color);
  border-radius: 6px;
  color: var(--text-muted);
  font-size: 11px;
  cursor: pointer;
  width: fit-content;
}

.add-condition-btn:hover {
  border-color: var(--accent-blue);
  color: var(--accent-blue);
}

.join-conflict {
  display: flex;
  align-items: center;
  gap: 8px;
  padding-top: 8px;
  border-top: 1px solid var(--border-color);
}

.join-conflict label {
  font-size: 11px;
  color: var(--text-muted);
}

.add-join-btn {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 8px 12px;
  background: transparent;
  border: 1px dashed var(--border-color);
  border-radius: 6px;
  color: var(--text-muted);
  font-size: 12px;
  cursor: pointer;
  width: 100%;
  justify-content: center;
}

.add-join-btn:hover {
  border-color: var(--accent-blue);
  color: var(--accent-blue);
}

/* Column groups */
.column-group {
  margin-bottom: 12px;
}

.column-group:last-child {
  margin-bottom: 0;
}

.column-group-label {
  font-size: 11px;
  color: var(--text-muted);
  margin-bottom: 8px;
  display: flex;
  align-items: center;
  gap: 6px;
}

.column-group.joined .column-group-label {
  color: var(--accent-blue);
}

.column-group-chips {
  display: flex;
  flex-wrap: wrap;
  gap: 6px;
}

.step-optional {
  font-size: 11px;
  color: var(--text-muted);
  font-weight: 400;
}

/* Syntax Highlighting for Query Editor */
.query-editor-wrapper {
  position: relative;
}

.query-editor-highlight {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  padding: 16px;
  pointer-events: none;
  font-family: 'Monaco', 'Menlo', 'Consolas', monospace;
  font-size: 13px;
  line-height: 1.6;
  white-space: pre-wrap;
  word-wrap: break-word;
  overflow-wrap: break-word;
  overflow: auto;
  color: transparent;
  scrollbar-width: none; /* Firefox */
  -ms-overflow-style: none; /* IE/Edge */
}

.query-editor-highlight::-webkit-scrollbar {
  display: none; /* Chrome/Safari/Opera */
}

.query-editor.with-highlight {
  background: transparent;
  caret-color: var(--text-primary);
}

.hl-keyword {
  color: #a371f7;
  font-weight: 500;
}

.hl-operator {
  color: #ff7b72;
}

.hl-string {
  color: #a5d6ff;
}

.hl-number {
  color: #79c0ff;
}

.hl-function {
  color: #d2a8ff;
}

.hl-source {
  color: #f0883e;
}

.hl-eo-extension {
  color: #3fb950;
}

.hl-comment {
  color: var(--text-muted);
  font-style: italic;
}

/* Autocomplete Dropdown */
.autocomplete-dropdown {
  position: absolute;
  background: var(--bg-secondary);
  border: 1px solid var(--border-color);
  border-radius: 6px;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
  max-height: 200px;
  overflow-y: auto;
  z-index: 1001;
  min-width: 200px;
}

.autocomplete-item {
  padding: 8px 12px;
  cursor: pointer;
  font-size: 12px;
  display: flex;
  align-items: center;
  gap: 8px;
}

.autocomplete-item:hover,
.autocomplete-item.selected {
  background: var(--bg-hover);
}

.autocomplete-item-icon {
  color: var(--text-muted);
  font-size: 14px;
}

.autocomplete-item-text {
  flex: 1;
}

.autocomplete-item-type {
  font-size: 10px;
  color: var(--text-muted);
  text-transform: uppercase;
}

.autocomplete-category {
  padding: 6px 12px;
  font-size: 10px;
  color: var(--text-muted);
  text-transform: uppercase;
  background: var(--bg-tertiary);
  border-bottom: 1px solid var(--border-color);
}

/* ===== Consolidated New Action Button ===== */
.sidebar-new-action {
  padding: 8px 12px;
  position: relative;
}

.new-action-btn {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
  width: 100%;
  padding: 10px 16px;
  background: var(--primary-600);
  color: white;
  border: none;
  border-radius: var(--radius-md);
  font-size: 13px;
  font-weight: 500;
  cursor: pointer;
  transition: var(--transition-fast);
}

.new-action-btn:hover {
  background: var(--primary-700);
}

.new-action-btn:active {
  background: var(--primary-800);
}

.new-action-btn i:first-child {
  font-size: 16px;
}

.new-action-caret {
  font-size: 12px;
  opacity: 0.8;
  margin-left: auto;
}

.new-action-dropdown {
  position: absolute;
  top: calc(100% + 4px);
  left: 12px;
  right: 12px;
  background: var(--bg-secondary);
  border: 1px solid var(--border-primary);
  border-radius: var(--radius-lg);
  box-shadow: var(--shadow-lg);
  z-index: 1000;
  overflow: hidden;
}

.new-action-item {
  display: flex;
  align-items: center;
  gap: 12px;
  width: 100%;
  padding: 12px 14px;
  background: none;
  border: none;
  cursor: pointer;
  text-align: left;
  transition: var(--transition-fast);
  color: var(--text-primary);
}

.new-action-item:hover {
  background: var(--bg-hover);
}

.new-action-item > i:first-child {
  font-size: 18px;
  color: var(--text-muted);
  width: 24px;
  text-align: center;
  flex-shrink: 0;
}

.new-action-item:hover > i:first-child {
  color: var(--primary-500);
}

.new-action-item-content {
  flex: 1;
  min-width: 0;
}

.new-action-item-label {
  display: block;
  font-size: 13px;
  font-weight: 500;
  color: var(--text-primary);
}

.new-action-item-hint {
  display: block;
  font-size: 11px;
  color: var(--text-muted);
  margin-top: 2px;
}

.new-action-shortcut {
  font-size: 10px;
  color: var(--text-muted);
  background: var(--bg-tertiary);
  padding: 2px 6px;
  border-radius: 3px;
  font-family: var(--font-mono);
  white-space: nowrap;
}

.new-action-divider {
  height: 1px;
  background: var(--border-primary);
  margin: 4px 0;
}

/* Labeled action buttons in nav panels */
.nav-panel-action-labeled {
  display: flex;
  align-items: center;
  gap: 4px;
  padding: 4px 8px;
  border: none;
  background: var(--primary-600);
  color: white;
  border-radius: var(--radius-sm);
  cursor: pointer;
  font-size: 11px;
  font-weight: 500;
  transition: var(--transition-fast);
  opacity: 1;
}

.nav-panel-action-labeled:hover {
  background: var(--primary-700);
}

.nav-panel-action-labeled i {
  font-size: 12px;
}

.nav-panel-action-label {
  font-size: 11px;
}

/* Ensure add-column-btn is always visible in table header */
.table-header th.col-add {
  position: sticky;
  right: 0;
  z-index: 5;
  background: var(--bg-secondary);
}

/* Make the add-field button more prominent in the table */
#add-column-btn .add-column-content {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 4px 12px;
  background: var(--bg-hover);
  border-radius: var(--radius-sm);
  color: var(--text-muted);
  transition: var(--transition-fast);
  white-space: nowrap;
}

#add-column-btn:hover .add-column-content {
  background: var(--primary-100);
  color: var(--primary-600);
}

.light-theme #add-column-btn:hover .add-column-content {
  background: var(--primary-100);
  color: var(--primary-700);
}

/* Make view-tabs add-field button always visible */
.view-tabs-add-field {
  opacity: 1 !important;
  visibility: visible !important;
}


/* ============================================================================
   SetJoinFilterCreator - Unified Set Creation Wizard
   ============================================================================ */

/* Overlay */
.sjf-overlay {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(0, 0, 0, 0.6);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 1000;
  backdrop-filter: blur(2px);
}

/* Modal */
.sjf-modal {
  background: var(--bg-secondary);
  border-radius: var(--radius-xl);
  box-shadow: var(--shadow-xl);
  width: 90%;
  max-width: 800px;
  max-height: 90vh;
  display: flex;
  flex-direction: column;
  overflow: hidden;
}

/* Header */
.sjf-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 16px 24px;
  border-bottom: 1px solid var(--border-primary);
}

.sjf-header h2 {
  font-size: 18px;
  font-weight: 600;
  display: flex;
  align-items: center;
  gap: 10px;
}

.sjf-header h2 i {
  color: var(--primary-500);
}

.sjf-close-btn {
  background: none;
  border: none;
  color: var(--text-muted);
  cursor: pointer;
  padding: 8px;
  border-radius: var(--radius-md);
  transition: var(--transition-fast);
}

.sjf-close-btn:hover {
  background: var(--bg-hover);
  color: var(--text-primary);
}

/* Step Indicators */
.sjf-steps {
  padding: 16px 24px;
  border-bottom: 1px solid var(--border-primary);
  background: var(--bg-primary);
}

.sjf-step-indicators {
  display: flex;
  align-items: center;
  justify-content: space-between;
  max-width: 600px;
  margin: 0 auto;
}

.sjf-step-indicator {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 6px;
  opacity: 0.5;
  transition: var(--transition-normal);
}

.sjf-step-indicator.active {
  opacity: 1;
}

.sjf-step-indicator.completed {
  opacity: 0.8;
}

.sjf-step-icon {
  width: 36px;
  height: 36px;
  border-radius: 50%;
  background: var(--bg-tertiary);
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 16px;
  color: var(--text-muted);
  transition: var(--transition-normal);
}

.sjf-step-indicator.active .sjf-step-icon {
  background: var(--primary-500);
  color: white;
}

.sjf-step-indicator.completed .sjf-step-icon {
  background: var(--success-500);
  color: white;
}

.sjf-step-label {
  font-size: 12px;
  font-weight: 500;
  color: var(--text-muted);
}

.sjf-step-indicator.active .sjf-step-label {
  color: var(--primary-500);
}

/* Body */
.sjf-body {
  flex: 1;
  padding: 24px;
  overflow-y: auto;
  min-height: 300px;
}

/* Select Step */
.sjf-select-step {
  display: flex;
  flex-direction: column;
  gap: 16px;
}

.sjf-name-input {
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.sjf-name-input label {
  font-size: 12px;
  font-weight: 600;
  color: var(--text-muted);
  text-transform: uppercase;
}

.sjf-name-input input {
  padding: 10px 14px;
  background: var(--bg-primary);
  border: 1px solid var(--border-primary);
  border-radius: var(--radius-md);
  color: var(--text-primary);
  font-size: 14px;
}

.sjf-name-input input:focus {
  outline: none;
  border-color: var(--primary-500);
  box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.2);
}

.sjf-select-header h3 {
  font-size: 14px;
  font-weight: 600;
  display: flex;
  align-items: center;
  gap: 8px;
}

.sjf-hint {
  font-size: 12px;
  color: var(--text-muted);
  margin-top: 4px;
}

.sjf-search-bar {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 10px 14px;
  background: var(--bg-primary);
  border: 1px solid var(--border-primary);
  border-radius: var(--radius-md);
}

.sjf-search-bar i {
  color: var(--text-muted);
}

.sjf-search-bar input {
  flex: 1;
  background: none;
  border: none;
  color: var(--text-primary);
  font-size: 14px;
}

.sjf-search-bar input:focus {
  outline: none;
}

.sjf-select-actions {
  display: flex;
  align-items: center;
  justify-content: space-between;
}

.sjf-selected-count {
  font-size: 12px;
  font-weight: 600;
  color: var(--primary-500);
}

.sjf-action-btn {
  background: none;
  border: none;
  color: var(--text-muted);
  font-size: 12px;
  cursor: pointer;
  padding: 4px 8px;
  border-radius: var(--radius-sm);
}

.sjf-action-btn:hover {
  background: var(--bg-hover);
  color: var(--text-primary);
}

/* Items List */
.sjf-items-list {
  max-height: 280px;
  overflow-y: auto;
  border: 1px solid var(--border-primary);
  border-radius: var(--radius-md);
  background: var(--bg-primary);
}

.sjf-items-group {
  padding: 8px 0;
}

.sjf-items-group:not(:last-child) {
  border-bottom: 1px solid var(--border-primary);
}

.sjf-group-header {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 8px 14px;
  font-size: 11px;
  font-weight: 600;
  text-transform: uppercase;
  color: var(--text-muted);
}

.sjf-select-item {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 10px 14px;
  cursor: pointer;
  transition: var(--transition-fast);
}

.sjf-select-item:hover {
  background: var(--bg-hover);
}

.sjf-select-item.selected {
  background: rgba(59, 130, 246, 0.1);
}

.sjf-item-checkbox {
  width: 24px;
  height: 24px;
  display: flex;
  align-items: center;
  justify-content: center;
}

.sjf-item-checkbox i {
  font-size: 18px;
  color: var(--text-muted);
}

.sjf-select-item.selected .sjf-item-checkbox i {
  display: none;
}

.sjf-order-badge {
  width: 24px;
  height: 24px;
  background: var(--primary-500);
  color: white;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 12px;
  font-weight: 600;
}

.sjf-item-icon {
  width: 32px;
  height: 32px;
  background: var(--bg-tertiary);
  border-radius: var(--radius-md);
  display: flex;
  align-items: center;
  justify-content: center;
  color: var(--text-muted);
}

.sjf-item-info {
  flex: 1;
  min-width: 0;
}

.sjf-item-name {
  font-weight: 500;
  display: block;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.sjf-item-meta {
  font-size: 11px;
  color: var(--text-muted);
}

.sjf-item-badge {
  font-size: 10px;
  font-weight: 600;
  padding: 2px 8px;
  border-radius: var(--radius-sm);
  text-transform: uppercase;
}

.sjf-item-badge.source {
  background: var(--given-bg);
  color: var(--given-color);
}

.sjf-item-badge.set {
  background: var(--meant-bg);
  color: var(--meant-color);
}

.sjf-empty-state {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 8px;
  padding: 40px 20px;
  color: var(--text-muted);
}

.sjf-empty-state i {
  font-size: 32px;
}

.sjf-empty-state p {
  font-weight: 500;
}

.sjf-empty-state span {
  font-size: 12px;
}

/* Join Step */
.sjf-join-step {
  display: flex;
  flex-direction: column;
  gap: 20px;
}

.sjf-join-header h3 {
  font-size: 14px;
  font-weight: 600;
  display: flex;
  align-items: center;
  gap: 8px;
}

.sjf-join-type-section label {
  font-size: 12px;
  font-weight: 600;
  color: var(--text-muted);
  text-transform: uppercase;
  display: block;
  margin-bottom: 10px;
}

.sjf-join-types {
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  gap: 8px;
}

.sjf-join-type-btn {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 6px;
  padding: 12px 8px;
  background: var(--bg-primary);
  border: 2px solid var(--border-primary);
  border-radius: var(--radius-md);
  cursor: pointer;
  transition: var(--transition-fast);
}

.sjf-join-type-btn:hover {
  border-color: var(--primary-400);
}

.sjf-join-type-btn.active {
  border-color: var(--primary-500);
  background: rgba(59, 130, 246, 0.1);
}

.sjf-join-type-btn i {
  font-size: 20px;
  color: var(--text-muted);
}

.sjf-join-type-btn.active i {
  color: var(--primary-500);
}

.sjf-jt-label {
  font-size: 11px;
  font-weight: 600;
}

.sjf-jt-desc {
  font-size: 9px;
  color: var(--text-muted);
  text-align: center;
}

.sjf-join-conditions label {
  font-size: 12px;
  font-weight: 600;
  color: var(--text-muted);
  text-transform: uppercase;
  display: block;
  margin-bottom: 8px;
}

.sjf-conditions-list {
  border: 1px solid var(--border-primary);
  border-radius: var(--radius-md);
  background: var(--bg-primary);
  min-height: 80px;
}

.sjf-empty-conditions {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 6px;
  padding: 24px;
  color: var(--text-muted);
}

.sjf-empty-conditions i {
  font-size: 24px;
}

.sjf-empty-conditions p {
  font-weight: 500;
  font-size: 13px;
}

.sjf-empty-conditions span {
  font-size: 11px;
}

.sjf-join-condition {
  padding: 12px;
  border-bottom: 1px solid var(--border-primary);
}

.sjf-join-condition:last-child {
  border-bottom: none;
}

.sjf-condition-row {
  display: flex;
  align-items: center;
  gap: 10px;
}

.sjf-condition-side {
  flex: 1;
  display: flex;
  gap: 8px;
}

.sjf-source-select,
.sjf-field-select,
.sjf-operator-select {
  padding: 6px 10px;
  background: var(--bg-secondary);
  border: 1px solid var(--border-primary);
  border-radius: var(--radius-sm);
  color: var(--text-primary);
  font-size: 12px;
  cursor: pointer;
}

.sjf-source-select {
  width: 120px;
}

.sjf-field-select {
  flex: 1;
  min-width: 0;
}

.sjf-condition-operator {
  padding: 0 8px;
}

.sjf-operator-select {
  width: 100px;
  text-align: center;
}

.sjf-remove-condition {
  background: none;
  border: none;
  color: var(--text-muted);
  cursor: pointer;
  padding: 6px;
  border-radius: var(--radius-sm);
}

.sjf-remove-condition:hover {
  background: var(--danger-100);
  color: var(--danger-500);
}

.sjf-add-condition-btn {
  display: flex;
  align-items: center;
  gap: 6px;
  margin-top: 10px;
  padding: 8px 14px;
  background: var(--bg-primary);
  border: 1px dashed var(--border-primary);
  border-radius: var(--radius-md);
  color: var(--text-muted);
  font-size: 12px;
  cursor: pointer;
  transition: var(--transition-fast);
}

.sjf-add-condition-btn:hover {
  border-color: var(--primary-500);
  color: var(--primary-500);
}

.sjf-info-card {
  display: flex;
  gap: 12px;
  padding: 16px;
  background: var(--info-50);
  border-radius: var(--radius-md);
}

.sjf-info-card i {
  font-size: 24px;
  color: var(--info-500);
  flex-shrink: 0;
}

.sjf-info-card strong {
  display: block;
  margin-bottom: 4px;
  color: var(--info-700);
}

.sjf-info-card p {
  font-size: 12px;
  color: var(--text-secondary);
}

.light-theme .sjf-info-card {
  background: var(--info-50);
}

.sjf-join-preview {
  padding-top: 16px;
  border-top: 1px solid var(--border-primary);
}

.sjf-join-preview h4 {
  font-size: 12px;
  font-weight: 600;
  color: var(--text-muted);
  text-transform: uppercase;
  margin-bottom: 12px;
}

.sjf-sources-visual {
  display: flex;
  align-items: center;
  gap: 8px;
  flex-wrap: wrap;
}

.sjf-source-card {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 10px 14px;
  background: var(--bg-primary);
  border: 1px solid var(--border-primary);
  border-radius: var(--radius-md);
}

.sjf-source-letter {
  width: 28px;
  height: 28px;
  background: var(--primary-500);
  color: white;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 14px;
  font-weight: 600;
}

.sjf-source-info {
  display: flex;
  flex-direction: column;
}

.sjf-source-name {
  font-size: 13px;
  font-weight: 500;
}

.sjf-source-count {
  font-size: 11px;
  color: var(--text-muted);
}

.sjf-link-icon {
  color: var(--text-muted);
  font-size: 18px;
}

.sjf-union-info {
  padding-top: 8px;
}

.sjf-join-single {
  display: flex;
  flex-direction: column;
  gap: 20px;
}

.sjf-selected-preview {
  padding: 16px;
  background: var(--bg-primary);
  border-radius: var(--radius-md);
  border: 1px solid var(--border-primary);
}

.sjf-selected-preview h4 {
  font-size: 14px;
  font-weight: 500;
  margin-bottom: 4px;
}

.sjf-selected-preview p {
  font-size: 12px;
  color: var(--text-muted);
}

/* Filter Step */
.sjf-filter-step {
  display: flex;
  flex-direction: column;
  gap: 16px;
}

.sjf-filter-header {
  display: flex;
  flex-direction: column;
  gap: 4px;
}

.sjf-filter-header h3 {
  font-size: 14px;
  font-weight: 600;
  display: flex;
  align-items: center;
  gap: 8px;
}

.sjf-filter-count {
  font-size: 13px;
  font-weight: 600;
  color: var(--primary-500);
  padding: 4px 10px;
  background: rgba(59, 130, 246, 0.1);
  border-radius: var(--radius-sm);
  align-self: flex-start;
  margin-top: 8px;
}

.sjf-filter-preview {
  padding-top: 16px;
  border-top: 1px solid var(--border-primary);
}

.sjf-preview-btn {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 10px 16px;
  background: var(--bg-primary);
  border: 1px solid var(--border-primary);
  border-radius: var(--radius-md);
  color: var(--text-primary);
  font-size: 13px;
  cursor: pointer;
  transition: var(--transition-fast);
}

.sjf-preview-btn:hover {
  background: var(--bg-hover);
  border-color: var(--primary-500);
}

.sjf-preview-results {
  margin-top: 12px;
}

.sjf-preview-stats {
  font-size: 12px;
  color: var(--text-muted);
  margin-bottom: 8px;
}

.sjf-preview-stats strong {
  color: var(--primary-500);
}

.sjf-preview-table-wrap {
  overflow-x: auto;
  border: 1px solid var(--border-primary);
  border-radius: var(--radius-md);
}

.sjf-preview-table {
  width: 100%;
  border-collapse: collapse;
  font-size: 12px;
}

.sjf-preview-table th,
.sjf-preview-table td {
  padding: 8px 12px;
  text-align: left;
  border-bottom: 1px solid var(--border-primary);
  white-space: nowrap;
  max-width: 200px;
  overflow: hidden;
  text-overflow: ellipsis;
}

.sjf-preview-table th {
  background: var(--bg-tertiary);
  font-weight: 600;
  color: var(--text-muted);
}

.sjf-preview-table td {
  background: var(--bg-primary);
}

.sjf-preview-table th.more,
.sjf-preview-table td.more {
  color: var(--text-muted);
  font-style: italic;
}

.sjf-preview-more {
  font-size: 11px;
  color: var(--text-muted);
  text-align: center;
  padding: 8px;
}

.sjf-preview-empty {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 8px;
  padding: 30px;
  color: var(--text-muted);
}

/* Review Step */
.sjf-review-step {
  display: flex;
  flex-direction: column;
  gap: 20px;
}

.sjf-review-header h3 {
  font-size: 14px;
  font-weight: 600;
  display: flex;
  align-items: center;
  gap: 8px;
}

.sjf-review-summary {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 12px;
}

.sjf-summary-card {
  display: flex;
  gap: 12px;
  padding: 14px;
  background: var(--bg-primary);
  border: 1px solid var(--border-primary);
  border-radius: var(--radius-md);
}

.sjf-summary-card.highlight {
  border-color: var(--primary-500);
  background: rgba(59, 130, 246, 0.05);
}

.sjf-summary-icon {
  width: 36px;
  height: 36px;
  background: var(--bg-tertiary);
  border-radius: var(--radius-md);
  display: flex;
  align-items: center;
  justify-content: center;
  color: var(--text-muted);
  flex-shrink: 0;
}

.sjf-summary-card.highlight .sjf-summary-icon {
  background: var(--primary-500);
  color: white;
}

.sjf-summary-content {
  flex: 1;
  min-width: 0;
}

.sjf-summary-content label {
  font-size: 10px;
  font-weight: 600;
  text-transform: uppercase;
  color: var(--text-muted);
}

.sjf-summary-value {
  font-size: 14px;
  font-weight: 600;
  display: block;
  margin-top: 2px;
}

.sjf-summary-detail {
  font-size: 11px;
  color: var(--text-muted);
  display: block;
}

.sjf-summary-list {
  display: flex;
  flex-wrap: wrap;
  gap: 4px;
  margin-top: 6px;
}

.sjf-summary-item {
  font-size: 10px;
  padding: 2px 6px;
  background: var(--bg-tertiary);
  border-radius: var(--radius-sm);
  color: var(--text-secondary);
}

.sjf-review-preview {
  padding-top: 16px;
  border-top: 1px solid var(--border-primary);
}

.sjf-review-preview h4 {
  font-size: 12px;
  font-weight: 600;
  color: var(--text-muted);
  text-transform: uppercase;
  margin-bottom: 12px;
}

.sjf-final-preview {
  max-height: 200px;
  overflow-y: auto;
}

/* Footer */
.sjf-footer {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 16px 24px;
  border-top: 1px solid var(--border-primary);
  background: var(--bg-primary);
}

.sjf-footer-left,
.sjf-footer-right {
  display: flex;
  gap: 10px;
}

.sjf-btn {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 10px 18px;
  border-radius: var(--radius-md);
  font-size: 13px;
  font-weight: 500;
  cursor: pointer;
  transition: var(--transition-fast);
  border: none;
}

.sjf-btn.secondary {
  background: var(--bg-tertiary);
  color: var(--text-primary);
}

.sjf-btn.secondary:hover {
  background: var(--bg-elevated);
}

.sjf-btn.primary {
  background: var(--primary-500);
  color: white;
}

.sjf-btn.primary:hover {
  background: var(--primary-600);
}

.sjf-btn.primary:disabled {
  background: var(--gray-500);
  cursor: not-allowed;
  opacity: 0.6;
}

.sjf-btn.success {
  background: var(--success-500);
  color: white;
}

.sjf-btn.success:hover {
  background: var(--success-600);
}

/* Responsive */
@media (max-width: 768px) {
  .sjf-modal {
    width: 95%;
    max-height: 95vh;
  }

  .sjf-join-types {
    grid-template-columns: repeat(3, 1fr);
  }

  .sjf-review-summary {
    grid-template-columns: 1fr;
  }

  .sjf-condition-row {
    flex-wrap: wrap;
  }

  .sjf-condition-side {
    flex-basis: 100%;
  }

  .sjf-condition-operator {
    flex-basis: 100%;
    justify-content: center;
  }
}


/* Highlight the Create Wizard option */
.creation-intent-btn[data-intent="CREATE"] {
  border: 2px solid var(--primary-500) !important;
  background: rgba(59, 130, 246, 0.08);
}

.creation-intent-btn[data-intent="CREATE"]::before {
  content: "Recommended";
  position: absolute;
  top: -8px;
  right: 10px;
  font-size: 9px;
  font-weight: 600;
  text-transform: uppercase;
  background: var(--primary-500);
  color: white;
  padding: 2px 6px;
  border-radius: 3px;
}

.creation-intent-btn[data-intent="CREATE"] {
  position: relative;
}


/* ============================================================================
   INTERPRETATION LAYER STYLES
   ============================================================================ */

/* Interpretation Panel */
.interpretation-panel {
  background: var(--bg-secondary, #f8f9fa);
  border-radius: 8px;
  padding: 16px;
  height: 100%;
  display: flex;
  flex-direction: column;
  gap: 16px;
}

.interpretation-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
}

.interpretation-header h3 {
  display: flex;
  align-items: center;
  gap: 8px;
  margin: 0;
  font-size: 16px;
}

.interpretation-stats {
  display: flex;
  gap: 16px;
  font-size: 13px;
  color: var(--text-muted, #666);
}

.interpretation-stats .stat {
  display: flex;
  align-items: center;
  gap: 4px;
}

.interpretation-columns {
  flex: 1;
  overflow-y: auto;
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.column-binding {
  background: var(--bg-primary, #fff);
  border: 1px solid var(--border-color, #e0e0e0);
  border-radius: 8px;
  padding: 12px;
}

.column-binding.unbound {
  border-style: dashed;
}

.column-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 8px;
}

.column-name {
  font-weight: 600;
  font-family: var(--font-mono, monospace);
}

.binding-status {
  display: flex;
  align-items: center;
  gap: 4px;
  font-size: 12px;
  padding: 2px 8px;
  border-radius: 12px;
}

.binding-status.bound {
  background: var(--success-light, #d4edda);
  color: var(--success, #28a745);
}

.binding-status.unbound {
  background: var(--warning-light, #fff3cd);
  color: var(--warning, #856404);
}

.binding-info {
  margin-bottom: 8px;
}

.semantic-label {
  font-weight: 500;
  margin-bottom: 4px;
}

.semantic-meta {
  display: flex;
  gap: 8px;
  font-size: 12px;
  color: var(--text-muted, #666);
}

.semantic-meta span {
  padding: 2px 6px;
  background: var(--bg-tertiary, #f0f0f0);
  border-radius: 4px;
}

.semantic-definition {
  font-size: 13px;
  color: var(--text-secondary, #444);
  margin-top: 4px;
}

.binding-actions {
  display: flex;
  gap: 8px;
  margin-top: 8px;
}

.suggestion-search {
  display: flex;
  gap: 8px;
  margin-bottom: 8px;
}

.suggestion-search .search-input {
  flex: 1;
  padding: 6px 10px;
  border: 1px solid var(--border-color, #e0e0e0);
  border-radius: 4px;
  font-size: 13px;
}

.suggestion-results {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.suggestion-item {
  background: var(--bg-tertiary, #f5f5f5);
  padding: 10px;
  border-radius: 6px;
  border: 1px solid var(--border-color, #e0e0e0);
}

.suggestion-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 4px;
}

.suggestion-label {
  font-weight: 500;
}

.suggestion-source {
  font-size: 11px;
  padding: 2px 6px;
  border-radius: 4px;
  text-transform: uppercase;
}

.suggestion-source.source-local {
  background: var(--primary-light, #e3f2fd);
  color: var(--primary, #1976d2);
}

.suggestion-source.source-wikidata {
  background: #e8f5e9;
  color: #2e7d32;
}

.suggestion-source.source-qudt {
  background: #fff3e0;
  color: #e65100;
}

.suggestion-description {
  font-size: 12px;
  color: var(--text-secondary, #555);
  margin-bottom: 4px;
}

.suggestion-meta {
  display: flex;
  gap: 8px;
  font-size: 11px;
  color: var(--text-muted, #888);
  margin-bottom: 8px;
}

.interpretation-context {
  background: var(--bg-primary, #fff);
  border: 1px solid var(--border-color, #e0e0e0);
  border-radius: 8px;
  padding: 12px;
}

.interpretation-context h4 {
  margin: 0 0 12px 0;
  font-size: 14px;
}

.context-field {
  margin-bottom: 12px;
}

.context-field label {
  display: block;
  font-size: 12px;
  color: var(--text-muted, #666);
  margin-bottom: 4px;
}

.context-field input,
.context-field select {
  width: 100%;
  padding: 6px 10px;
  border: 1px solid var(--border-color, #e0e0e0);
  border-radius: 4px;
  font-size: 13px;
}

.context-field.full-width {
  grid-column: 1 / -1;
}

.interpretation-actions {
  display: flex;
  justify-content: flex-end;
  gap: 8px;
}

/* Semantic Browser */
.semantic-browser {
  display: grid;
  grid-template-columns: 1fr 1fr;
  grid-template-rows: auto auto auto 1fr;
  gap: 16px;
  height: 100%;
  padding: 16px;
}

.browser-header {
  grid-column: 1 / -1;
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.browser-header h3 {
  display: flex;
  align-items: center;
  gap: 8px;
  margin: 0;
}

.browser-search {
  grid-column: 1 / -1;
  display: flex;
  gap: 12px;
  align-items: center;
}

.browser-search .search-input-wrapper {
  flex: 1;
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 8px 12px;
  background: var(--bg-secondary, #f8f9fa);
  border: 1px solid var(--border-color, #e0e0e0);
  border-radius: 6px;
}

.browser-search .search-input-wrapper input {
  flex: 1;
  border: none;
  background: transparent;
  outline: none;
  font-size: 14px;
}

.status-filters {
  display: flex;
  gap: 4px;
}

.filter-btn {
  padding: 4px 10px;
  border: 1px solid var(--border-color, #e0e0e0);
  border-radius: 4px;
  background: transparent;
  font-size: 12px;
  cursor: pointer;
  text-transform: capitalize;
}

.filter-btn:hover {
  background: var(--bg-hover, #f0f0f0);
}

.filter-btn.active {
  background: var(--primary, #1976d2);
  color: white;
  border-color: var(--primary, #1976d2);
}

.browser-stats {
  grid-column: 1 / -1;
  display: flex;
  gap: 16px;
  font-size: 12px;
  color: var(--text-muted, #666);
}

.semantic-list {
  overflow-y: auto;
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.semantic-card {
  background: var(--bg-primary, #fff);
  border: 1px solid var(--border-color, #e0e0e0);
  border-radius: 8px;
  padding: 12px;
  cursor: pointer;
  transition: all 0.15s ease;
}

.semantic-card:hover {
  border-color: var(--primary, #1976d2);
}

.semantic-card.selected {
  border-color: var(--primary, #1976d2);
  box-shadow: 0 0 0 2px var(--primary-light, #e3f2fd);
}

.card-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 6px;
}

.semantic-term {
  font-weight: 600;
}

.status-badge {
  font-size: 10px;
  padding: 2px 6px;
  border-radius: 10px;
  text-transform: uppercase;
}

.status-stable { background: #d4edda; color: #155724; }
.status-provisional { background: #fff3cd; color: #856404; }
.status-draft { background: #cce5ff; color: #004085; }
.status-protected { background: #f8d7da; color: #721c24; }
.status-deprecated { background: #e2e3e5; color: #383d41; }

.card-definition {
  font-size: 12px;
  color: var(--text-secondary, #555);
  margin-bottom: 8px;
}

.card-meta {
  display: flex;
  gap: 8px;
  font-size: 11px;
  color: var(--text-muted, #888);
}

.card-meta span {
  padding: 2px 6px;
  background: var(--bg-tertiary, #f0f0f0);
  border-radius: 4px;
}

.aligned-uris {
  display: flex;
  gap: 4px;
  margin-top: 8px;
}

.uri-badge {
  font-size: 10px;
  padding: 2px 6px;
  background: var(--primary-light, #e3f2fd);
  color: var(--primary, #1976d2);
  border-radius: 4px;
}

.semantic-detail {
  background: var(--bg-primary, #fff);
  border: 1px solid var(--border-color, #e0e0e0);
  border-radius: 8px;
  padding: 16px;
  overflow-y: auto;
}

.detail-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 16px;
}

.detail-header h4 {
  margin: 0;
}

.detail-section {
  margin-bottom: 16px;
}

.detail-section label {
  display: block;
  font-size: 11px;
  text-transform: uppercase;
  color: var(--text-muted, #888);
  margin-bottom: 4px;
}

.detail-section .uri {
  display: block;
  font-size: 12px;
  padding: 6px 10px;
  background: var(--bg-tertiary, #f5f5f5);
  border-radius: 4px;
  word-break: break-all;
}

.detail-grid {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 12px;
}

.alias-list,
.background-list {
  display: flex;
  flex-wrap: wrap;
  gap: 6px;
}

.alias-tag,
.bg-tag {
  font-size: 12px;
  padding: 2px 8px;
  background: var(--bg-tertiary, #f0f0f0);
  border-radius: 4px;
}

.aligned-list {
  display: flex;
  flex-direction: column;
  gap: 4px;
}

.aligned-uri {
  font-size: 12px;
  color: var(--primary, #1976d2);
  text-decoration: none;
  display: flex;
  align-items: center;
  gap: 4px;
}

.aligned-uri:hover {
  text-decoration: underline;
}

.usage-stats {
  display: flex;
  flex-direction: column;
  gap: 4px;
  font-size: 12px;
  color: var(--text-secondary, #555);
}

.detail-actions {
  display: flex;
  gap: 8px;
  margin-top: 16px;
  padding-top: 16px;
  border-top: 1px solid var(--border-color, #e0e0e0);
}

.empty-list,
.empty {
  color: var(--text-muted, #888);
  font-size: 13px;
  font-style: italic;
}

/* Semantic Form */
.semantic-form {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.semantic-form h4 {
  margin: 0 0 8px 0;
}

.form-field {
  display: flex;
  flex-direction: column;
  gap: 4px;
}

.form-field label {
  font-size: 12px;
  color: var(--text-muted, #666);
}

.form-field input,
.form-field textarea,
.form-field select {
  padding: 8px 10px;
  border: 1px solid var(--border-color, #e0e0e0);
  border-radius: 4px;
  font-size: 13px;
}

.form-field textarea {
  resize: vertical;
  font-family: inherit;
}

.form-row {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 12px;
}

.form-actions {
  display: flex;
  justify-content: flex-end;
  gap: 8px;
  margin-top: 8px;
}

/* Loading and error states */
.loading {
  text-align: center;
  padding: 20px;
  color: var(--text-muted, #888);
}

.error {
  color: var(--danger, #dc3545);
  padding: 10px;
  background: var(--danger-light, #f8d7da);
  border-radius: 4px;
}

.no-results {
  text-align: center;
  padding: 16px;
  color: var(--text-muted, #888);
}

/* Button variants */
.btn-sm {
  padding: 4px 10px;
  font-size: 12px;
  border-radius: 4px;
  border: 1px solid var(--border-color, #e0e0e0);
  background: var(--bg-primary, #fff);
  cursor: pointer;
}

.btn-sm:hover {
  background: var(--bg-hover, #f0f0f0);
}

.btn-sm.btn-primary {
  background: var(--primary, #1976d2);
  color: white;
  border-color: var(--primary, #1976d2);
}

.btn-sm.btn-primary:hover {
  background: var(--primary-dark, #1565c0);
}

.btn-sm.btn-danger {
  color: var(--danger, #dc3545);
  border-color: var(--danger, #dc3545);
}

.btn-sm.btn-danger:hover {
  background: var(--danger, #dc3545);
  color: white;
}

.btn-sm.btn-link {
  background: none;
  border: none;
  color: var(--primary, #1976d2);
  padding: 0;
}

.btn-sm.btn-link:hover {
  text-decoration: underline;
}

/* ============================================================================
   Data Pipeline UI - Visual pipeline for creating Sets from Sources
   ============================================================================ */

.data-pipeline-overlay {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(0, 0, 0, 0.6);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 10000;
  backdrop-filter: blur(4px);
}

.data-pipeline-modal {
  background: var(--bg-primary, #1a1a2e);
  border-radius: 12px;
  width: 95%;
  max-width: 1200px;
  max-height: 90vh;
  display: flex;
  flex-direction: column;
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4);
  border: 1px solid var(--border-color, #2a2a4a);
}

.data-pipeline-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 16px 20px;
  border-bottom: 1px solid var(--border-color, #2a2a4a);
}

.data-pipeline-header h2 {
  margin: 0;
  font-size: 18px;
  font-weight: 600;
  color: var(--text-primary, #fff);
  display: flex;
  align-items: center;
  gap: 10px;
}

.data-pipeline-header h2 i {
  color: var(--primary, #60a5fa);
}

.data-pipeline-close {
  background: none;
  border: none;
  color: var(--text-muted, #888);
  cursor: pointer;
  padding: 8px;
  border-radius: 6px;
  display: flex;
  align-items: center;
  justify-content: center;
}

.data-pipeline-close:hover {
  background: var(--bg-hover, #2a2a4a);
  color: var(--text-primary, #fff);
}

.data-pipeline-body {
  display: grid;
  grid-template-columns: 240px auto 1fr auto 300px;
  gap: 0;
  padding: 20px;
  min-height: 450px;
  overflow: hidden;
}

.data-pipeline-panel {
  background: var(--bg-secondary, #16162a);
  border-radius: 10px;
  border: 1px solid var(--border-color, #2a2a4a);
  display: flex;
  flex-direction: column;
  overflow: hidden;
}

.data-pipeline-arrow {
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 0 12px;
  color: var(--text-muted, #666);
  font-size: 24px;
}

.panel-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 12px 16px;
  border-bottom: 1px solid var(--border-color, #2a2a4a);
  background: var(--bg-tertiary, #1a1a35);
}

.panel-header h3 {
  margin: 0;
  font-size: 13px;
  font-weight: 600;
  color: var(--text-secondary, #ccc);
  display: flex;
  align-items: center;
  gap: 8px;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.panel-header h3 i {
  color: var(--primary, #60a5fa);
}

.panel-badge {
  font-size: 11px;
  padding: 2px 8px;
  border-radius: 10px;
  background: var(--primary, #60a5fa);
  color: white;
  font-weight: 500;
}

.panel-content {
  flex: 1;
  padding: 12px;
  overflow-y: auto;
  display: flex;
  flex-direction: column;
  gap: 10px;
}

/* Source Panel */
.source-list {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.source-card {
  background: var(--bg-tertiary, #1a1a35);
  border: 1px solid var(--border-color, #2a2a4a);
  border-radius: 8px;
  padding: 10px 12px;
  transition: border-color 0.2s;
}

.source-card:hover {
  border-color: var(--primary, #60a5fa);
}

.source-card-header {
  display: flex;
  align-items: center;
  gap: 8px;
}

.source-card-header i {
  color: var(--primary, #60a5fa);
}

.source-name {
  flex: 1;
  font-size: 13px;
  font-weight: 500;
  color: var(--text-primary, #fff);
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.source-remove-btn {
  background: none;
  border: none;
  color: var(--text-muted, #666);
  cursor: pointer;
  padding: 4px;
  border-radius: 4px;
  display: flex;
  align-items: center;
  justify-content: center;
  opacity: 0;
  transition: opacity 0.2s;
}

.source-card:hover .source-remove-btn {
  opacity: 1;
}

.source-remove-btn:hover {
  background: var(--danger, #ef4444);
  color: white;
}

.source-card-stats {
  display: flex;
  gap: 12px;
  margin-top: 6px;
  font-size: 11px;
  color: var(--text-muted, #888);
}

.source-empty {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 30px 20px;
  color: var(--text-muted, #666);
  text-align: center;
}

.source-empty i {
  font-size: 32px;
  margin-bottom: 8px;
  opacity: 0.5;
}

.source-empty p {
  margin: 4px 0;
}

.source-empty .hint {
  font-size: 12px;
  opacity: 0.7;
}

.add-source-btn {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 6px;
  padding: 10px;
  border: 2px dashed var(--border-color, #2a2a4a);
  border-radius: 8px;
  background: transparent;
  color: var(--text-muted, #888);
  cursor: pointer;
  font-size: 13px;
  transition: all 0.2s;
  margin-top: auto;
}

.add-source-btn:hover {
  border-color: var(--primary, #60a5fa);
  color: var(--primary, #60a5fa);
  background: rgba(96, 165, 250, 0.1);
}

/* Transform Panel */
.transform-list {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.transform-card {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 10px 12px;
  background: var(--bg-tertiary, #1a1a35);
  border: 1px solid var(--border-color, #2a2a4a);
  border-radius: 8px;
  font-size: 13px;
  color: var(--text-primary, #fff);
}

.transform-card i {
  color: var(--primary, #60a5fa);
}

.transform-detail {
  margin-left: auto;
  font-size: 11px;
  color: var(--text-muted, #888);
}

.transform-remove-btn {
  background: none;
  border: none;
  color: var(--text-muted, #666);
  cursor: pointer;
  padding: 4px;
  border-radius: 4px;
  margin-left: 4px;
  display: flex;
  align-items: center;
  justify-content: center;
}

.transform-remove-btn:hover {
  background: var(--danger, #ef4444);
  color: white;
}

.transform-passthrough {
  border-style: dashed;
  opacity: 0.7;
}

.transform-join i {
  color: #a855f7;
}

.transform-filter i {
  color: #22c55e;
}

.transform-select i {
  color: #f59e0b;
}

.transform-warning {
  border-color: var(--warning, #f59e0b);
  background: rgba(245, 158, 11, 0.1);
}

.transform-warning i {
  color: var(--warning, #f59e0b);
}

.transforms-empty {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 20px;
  color: var(--text-muted, #666);
  text-align: center;
}

.transform-actions {
  display: flex;
  flex-direction: column;
  gap: 6px;
  margin-top: auto;
}

.add-transform-btn {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 8px 12px;
  border: 1px solid var(--border-color, #2a2a4a);
  border-radius: 6px;
  background: var(--bg-tertiary, #1a1a35);
  color: var(--text-secondary, #ccc);
  cursor: pointer;
  font-size: 12px;
  transition: all 0.2s;
}

.add-transform-btn:hover {
  border-color: var(--primary, #60a5fa);
  color: var(--primary, #60a5fa);
  background: rgba(96, 165, 250, 0.1);
}

.add-transform-btn i {
  font-size: 14px;
}

/* Output Panel */
.output-name-section {
  margin-bottom: 12px;
}

.output-name-section label {
  display: block;
  font-size: 11px;
  font-weight: 500;
  color: var(--text-muted, #888);
  margin-bottom: 6px;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.output-name-input {
  width: 100%;
  padding: 10px 12px;
  border: 1px solid var(--border-color, #2a2a4a);
  border-radius: 6px;
  background: var(--bg-tertiary, #1a1a35);
  color: var(--text-primary, #fff);
  font-size: 14px;
  box-sizing: border-box;
}

.output-name-input:focus {
  outline: none;
  border-color: var(--primary, #60a5fa);
  box-shadow: 0 0 0 3px rgba(96, 165, 250, 0.2);
}

.output-stats {
  display: flex;
  gap: 16px;
  padding: 12px;
  background: var(--bg-tertiary, #1a1a35);
  border-radius: 8px;
  margin-bottom: 12px;
}

.output-stats .stat {
  display: flex;
  flex-direction: column;
  align-items: center;
}

.output-stats .stat-value {
  font-size: 24px;
  font-weight: 600;
  color: var(--primary, #60a5fa);
}

.output-stats .stat-label {
  font-size: 11px;
  color: var(--text-muted, #888);
  text-transform: uppercase;
}

.output-preview {
  flex: 1;
  display: flex;
  flex-direction: column;
  gap: 10px;
  min-height: 0;
}

.output-preview .preview-btn {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 6px;
  padding: 10px;
  border: 1px solid var(--border-color, #2a2a4a);
  border-radius: 6px;
  background: var(--bg-tertiary, #1a1a35);
  color: var(--text-secondary, #ccc);
  cursor: pointer;
  font-size: 13px;
  transition: all 0.2s;
}

.output-preview .preview-btn:hover {
  border-color: var(--primary, #60a5fa);
  color: var(--primary, #60a5fa);
}

.output-preview .preview-results {
  flex: 1;
  overflow: auto;
  border-radius: 6px;
  background: var(--bg-tertiary, #1a1a35);
  border: 1px solid var(--border-color, #2a2a4a);
}

.output-preview .preview-stats {
  display: flex;
  justify-content: space-between;
  padding: 8px 12px;
  font-size: 12px;
  color: var(--text-muted, #888);
  border-bottom: 1px solid var(--border-color, #2a2a4a);
}

.output-preview .preview-table-wrapper {
  overflow: auto;
  max-height: 200px;
}

.output-preview .preview-table {
  width: 100%;
  border-collapse: collapse;
  font-size: 12px;
}

.output-preview .preview-table th {
  padding: 8px 12px;
  text-align: left;
  background: var(--bg-secondary, #16162a);
  color: var(--text-secondary, #ccc);
  font-weight: 500;
  border-bottom: 1px solid var(--border-color, #2a2a4a);
  position: sticky;
  top: 0;
}

.output-preview .preview-table td {
  padding: 6px 12px;
  color: var(--text-primary, #fff);
  border-bottom: 1px solid var(--border-color, #2a2a4a);
  max-width: 150px;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.output-preview .preview-more {
  padding: 8px 12px;
  font-size: 11px;
  color: var(--text-muted, #888);
  text-align: center;
  border-top: 1px solid var(--border-color, #2a2a4a);
}

.output-preview .preview-empty,
.output-preview .preview-error {
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 30px;
  color: var(--text-muted, #888);
  text-align: center;
}

.output-preview .preview-error {
  color: var(--danger, #ef4444);
}

/* Footer */
.data-pipeline-footer {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 16px 20px;
  border-top: 1px solid var(--border-color, #2a2a4a);
  background: var(--bg-tertiary, #16162a);
}

.footer-info {
  display: flex;
  align-items: center;
  gap: 16px;
}

.provenance-info {
  display: flex;
  align-items: center;
  gap: 6px;
  font-size: 12px;
  color: var(--text-muted, #888);
}

.provenance-info i {
  color: var(--primary, #60a5fa);
}

.footer-actions {
  display: flex;
  gap: 10px;
}

/* Source Picker Modal */
.source-picker-overlay {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(0, 0, 0, 0.5);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 10001;
}

.source-picker-modal {
  background: var(--bg-primary, #1a1a2e);
  border-radius: 10px;
  width: 400px;
  max-height: 500px;
  display: flex;
  flex-direction: column;
  box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
  border: 1px solid var(--border-color, #2a2a4a);
}

.source-picker-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 14px 16px;
  border-bottom: 1px solid var(--border-color, #2a2a4a);
}

.source-picker-header h3 {
  margin: 0;
  font-size: 15px;
  color: var(--text-primary, #fff);
  display: flex;
  align-items: center;
  gap: 8px;
}

.source-picker-close {
  background: none;
  border: none;
  color: var(--text-muted, #888);
  cursor: pointer;
  padding: 6px;
  border-radius: 4px;
}

.source-picker-close:hover {
  background: var(--bg-hover, #2a2a4a);
  color: var(--text-primary, #fff);
}

.source-picker-list {
  flex: 1;
  overflow-y: auto;
  padding: 8px;
}

.source-picker-item {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 12px;
  border-radius: 8px;
  cursor: pointer;
  transition: background 0.2s;
}

.source-picker-item:hover {
  background: var(--bg-hover, #2a2a4a);
}

.source-picker-item i {
  color: var(--primary, #60a5fa);
  font-size: 20px;
}

.source-picker-info {
  flex: 1;
  display: flex;
  flex-direction: column;
  gap: 2px;
}

.source-picker-name {
  font-size: 14px;
  color: var(--text-primary, #fff);
  font-weight: 500;
}

.source-picker-stats {
  font-size: 12px;
  color: var(--text-muted, #888);
}

/* Filter, Join, Field Selector Modals */
.filter-modal-overlay,
.join-modal-overlay,
.field-selector-overlay {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(0, 0, 0, 0.5);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 10001;
}

.filter-modal,
.join-modal,
.field-selector-modal {
  background: var(--bg-primary, #1a1a2e);
  border-radius: 10px;
  width: 600px;
  max-height: 80vh;
  display: flex;
  flex-direction: column;
  box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
  border: 1px solid var(--border-color, #2a2a4a);
}

.filter-modal-header,
.join-modal-header,
.field-selector-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 14px 16px;
  border-bottom: 1px solid var(--border-color, #2a2a4a);
}

.filter-modal-header h3,
.join-modal-header h3,
.field-selector-header h3 {
  margin: 0;
  font-size: 15px;
  color: var(--text-primary, #fff);
  display: flex;
  align-items: center;
  gap: 8px;
}

.filter-modal-close,
.join-modal-close,
.field-selector-close {
  background: none;
  border: none;
  color: var(--text-muted, #888);
  cursor: pointer;
  padding: 6px;
  border-radius: 4px;
}

.filter-modal-close:hover,
.join-modal-close:hover,
.field-selector-close:hover {
  background: var(--bg-hover, #2a2a4a);
  color: var(--text-primary, #fff);
}

.filter-modal-body,
.join-modal-body {
  flex: 1;
  overflow-y: auto;
  padding: 16px;
}

.filter-modal-footer,
.join-modal-footer,
.field-selector-footer {
  display: flex;
  justify-content: flex-end;
  gap: 10px;
  padding: 14px 16px;
  border-top: 1px solid var(--border-color, #2a2a4a);
}

/* Join Modal specific */
.join-sources {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 16px;
  margin-bottom: 20px;
}

.join-source {
  flex: 1;
  padding: 12px;
  background: var(--bg-secondary, #16162a);
  border-radius: 8px;
  text-align: center;
}

.join-source-label {
  display: block;
  font-size: 11px;
  color: var(--text-muted, #888);
  margin-bottom: 4px;
  text-transform: uppercase;
}

.join-source-name {
  font-size: 14px;
  color: var(--text-primary, #fff);
  font-weight: 500;
}

.join-type-select {
  flex: 0 0 auto;
}

.join-type-select select {
  padding: 8px 12px;
  border: 1px solid var(--border-color, #2a2a4a);
  border-radius: 6px;
  background: var(--bg-secondary, #16162a);
  color: var(--text-primary, #fff);
  font-size: 13px;
}

.join-condition {
  padding: 16px;
  background: var(--bg-secondary, #16162a);
  border-radius: 8px;
}

.join-condition label {
  display: block;
  font-size: 12px;
  color: var(--text-muted, #888);
  margin-bottom: 10px;
}

.join-fields {
  display: flex;
  align-items: center;
  gap: 12px;
}

.join-fields select {
  flex: 1;
  padding: 10px 12px;
  border: 1px solid var(--border-color, #2a2a4a);
  border-radius: 6px;
  background: var(--bg-tertiary, #1a1a35);
  color: var(--text-primary, #fff);
  font-size: 13px;
}

.join-fields span {
  color: var(--text-muted, #888);
  font-weight: 500;
}

/* Field Selector specific */
.field-selector-actions {
  display: flex;
  gap: 8px;
  padding: 12px 16px;
  border-bottom: 1px solid var(--border-color, #2a2a4a);
}

.field-selector-list {
  flex: 1;
  overflow-y: auto;
  padding: 8px 16px;
  max-height: 400px;
}

.field-selector-row {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 10px 0;
  border-bottom: 1px solid var(--border-color, #2a2a4a);
}

.field-selector-row:last-child {
  border-bottom: none;
}

.field-selector-row input[type="checkbox"] {
  flex: 0 0 auto;
}

.field-selector-row label {
  flex: 1;
  display: flex;
  align-items: center;
  gap: 8px;
  cursor: pointer;
}

.field-selector-row .field-name {
  font-size: 13px;
  color: var(--text-primary, #fff);
  font-weight: 500;
}

.field-selector-row .field-source {
  font-size: 11px;
  color: var(--text-muted, #888);
  padding: 2px 6px;
  background: var(--bg-secondary, #16162a);
  border-radius: 4px;
}

.field-selector-row .field-type {
  font-size: 11px;
  color: var(--text-primary, #fff);
  background: var(--bg-secondary, #16162a);
  padding: 4px 10px;
  border-radius: 4px;
  border: 1px solid var(--border-color, #2a2a4a);
  font-weight: 500;
  text-transform: capitalize;
}

.field-selector-row .field-rename {
  width: 120px;
  padding: 6px 10px;
  border: 1px solid var(--border-color, #2a2a4a);
  border-radius: 4px;
  background: var(--bg-tertiary, #1a1a35);
  color: var(--text-primary, #fff);
  font-size: 12px;
}

.field-selector-row .field-rename:focus {
  outline: none;
  border-color: var(--primary, #60a5fa);
}

/* Subtypes Detection Section */
.subtypes-section {
  background: var(--bg-tertiary, #1a1a35);
  border: 1px solid var(--border-color, #2a2a4a);
  border-radius: 8px;
  padding: 12px;
  margin-bottom: 12px;
}

.subtypes-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 8px;
}

.subtypes-title {
  display: flex;
  align-items: center;
  gap: 8px;
  font-size: 13px;
  font-weight: 500;
  color: var(--text-primary, #fff);
}

.subtypes-title i {
  color: #a855f7;
}

.subtypes-toggle {
  display: flex;
  align-items: center;
  gap: 6px;
  font-size: 12px;
  color: var(--text-secondary, #ccc);
  cursor: pointer;
}

.subtypes-toggle input[type="checkbox"] {
  accent-color: var(--primary, #60a5fa);
}

.subtypes-info {
  font-size: 12px;
  color: var(--text-muted, #888);
  margin-bottom: 10px;
}

.subtypes-info code {
  background: var(--bg-secondary, #16162a);
  padding: 2px 6px;
  border-radius: 4px;
  color: var(--primary, #60a5fa);
  font-family: monospace;
}

/* Type Distribution Bars (like import preview) */
.type-distribution {
  background: var(--bg-secondary, #16162a);
  border-radius: 6px;
  padding: 8px 12px;
  margin-bottom: 12px;
}

.type-distribution .type-bar-row {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 5px 0;
}

.type-distribution .type-bar-label {
  width: 100px;
  display: flex;
  align-items: center;
  gap: 6px;
  font-size: 13px;
  font-weight: 500;
  color: var(--text-primary, #fff);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.type-distribution .type-bar-label i {
  font-size: 14px;
  color: var(--primary, #60a5fa);
  flex-shrink: 0;
}

.type-distribution .type-bar-track {
  flex: 1;
  height: 8px;
  background: var(--bg-tertiary, #1a1a35);
  border-radius: 4px;
  overflow: hidden;
}

.type-distribution .type-bar-fill {
  height: 100%;
  background: linear-gradient(90deg, var(--primary, #60a5fa), #a855f7);
  border-radius: 4px;
  transition: width 0.3s ease;
}

.type-distribution .type-bar-count {
  width: 45px;
  text-align: right;
  font-size: 12px;
  font-weight: 500;
  color: var(--text-muted, #b8b8c8);
}

.type-distribution .type-bar-more {
  font-size: 11px;
  color: var(--text-muted, #b8b8c8);
  text-align: center;
  padding: 4px 0 0;
  border-top: 1px solid var(--border-color, #2a2a4a);
  margin-top: 4px;
}

.subtypes-list {
  display: flex;
  flex-direction: column;
  gap: 4px;
  max-height: 150px;
  overflow-y: auto;
  margin-bottom: 10px;
  padding: 8px;
  background: var(--bg-secondary, #16162a);
  border-radius: 6px;
}

.subtypes-list.disabled {
  opacity: 0.5;
  pointer-events: none;
}

.subtype-item {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 6px 8px;
  border-radius: 4px;
  transition: background 0.2s;
}

.subtype-item:hover {
  background: var(--bg-tertiary, #1a1a35);
}

.subtype-item input[type="checkbox"] {
  accent-color: var(--primary, #60a5fa);
}

.subtype-item label {
  flex: 1;
  display: flex;
  justify-content: space-between;
  align-items: center;
  cursor: pointer;
}

.subtype-name {
  font-size: 13px;
  color: var(--text-primary, #fff);
}

.subtype-count {
  font-size: 11px;
  color: var(--text-muted, #b8b8c8);
  background: var(--bg-tertiary, #1a1a35);
  padding: 2px 8px;
  border-radius: 10px;
}

.subtypes-summary {
  display: flex;
  align-items: center;
  gap: 6px;
  font-size: 12px;
  color: var(--text-muted, #b8b8c8);
  padding-top: 8px;
  border-top: 1px solid var(--border-color, #2a2a4a);
}

.subtypes-summary i.ph-check-circle {
  color: #22c55e;
}

.subtypes-summary i.ph-info {
  color: var(--text-muted, #b8b8c8);
}

.subtypes-summary i.ph-eye {
  color: var(--primary, #60a5fa);
}

.subtypes-summary i.ph-circles-three {
  color: #a855f7;
}

/* Record Type Mode Selector */
.subtypes-mode-selector {
  display: flex;
  gap: 4px;
  margin-bottom: 12px;
  background: var(--bg-secondary, #16162a);
  border-radius: 8px;
  padding: 4px;
}

.subtypes-mode-selector .mode-option {
  flex: 1;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 6px;
  padding: 8px 12px;
  border-radius: 6px;
  cursor: pointer;
  font-size: 12px;
  color: var(--text-secondary, #c8c8d8);
  transition: all 0.2s ease;
  border: 1px solid transparent;
}

.subtypes-mode-selector .mode-option:hover {
  background: rgba(255, 255, 255, 0.05);
}

.subtypes-mode-selector .mode-option.selected {
  background: var(--bg-tertiary, #1a1a35);
  color: var(--text-primary, #fff);
  border-color: var(--border-color, #2a2a4a);
}

.subtypes-mode-selector .mode-option input[type="radio"] {
  display: none;
}

.subtypes-mode-selector .mode-option i {
  font-size: 14px;
}

.subtypes-mode-selector .mode-option.selected i.ph-circles-three {
  color: #a855f7;
}

.subtypes-mode-selector .mode-option.selected i.ph-eye {
  color: var(--primary, #60a5fa);
}

.subtypes-mode-selector .mode-option.selected i.ph-minus-circle {
  color: var(--text-muted, #b8b8c8);
}

/* Enhanced Subtype Item with Configuration */
.subtype-item {
  display: flex;
  flex-direction: column;
  gap: 6px;
  padding: 8px 10px;
  border-radius: 6px;
  transition: background 0.2s;
  border: 1px solid transparent;
}

.subtype-item.enabled {
  background: rgba(96, 165, 250, 0.05);
  border-color: rgba(96, 165, 250, 0.2);
}

.subtype-main {
  display: flex;
  align-items: center;
  gap: 8px;
}

.subtype-main label {
  flex: 1;
  display: flex;
  align-items: center;
  gap: 8px;
  cursor: pointer;
}

.subtype-main label i {
  color: var(--text-secondary, #c8c8d8);
  font-size: 14px;
}

.subtype-config {
  display: flex;
  align-items: center;
  gap: 8px;
  margin-left: 24px;
  padding: 4px 8px;
  background: var(--bg-tertiary, #1a1a35);
  border-radius: 4px;
  font-size: 11px;
}

.subtype-view-type {
  display: flex;
  align-items: center;
  gap: 4px;
  color: var(--text-secondary, #c8c8d8);
}

.subtype-view-type i {
  font-size: 12px;
  color: var(--primary, #60a5fa);
}

.subtype-field-count {
  color: var(--text-muted, #b8b8c8);
}

.subtype-configure-btn {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 24px;
  height: 24px;
  background: transparent;
  border: 1px solid var(--border-color, #2a2a4a);
  border-radius: 4px;
  color: var(--text-secondary, #aaa);
  cursor: pointer;
  transition: all 0.2s;
  margin-left: auto;
}

.subtype-configure-btn:hover {
  background: var(--primary, #60a5fa);
  color: #fff;
  border-color: var(--primary, #60a5fa);
}

/* Record Type View Configuration Modal */
.record-type-config-overlay {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0, 0, 0, 0.7);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 10001;
}

.record-type-config-modal {
  background: var(--bg-primary, #0f0f1a);
  border: 1px solid var(--border-color, #2a2a4a);
  border-radius: 12px;
  width: 480px;
  max-height: 80vh;
  display: flex;
  flex-direction: column;
  box-shadow: 0 20px 50px rgba(0, 0, 0, 0.5);
}

.record-type-config-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 16px 20px;
  border-bottom: 1px solid var(--border-color, #2a2a4a);
}

.record-type-config-header h3 {
  display: flex;
  align-items: center;
  gap: 10px;
  font-size: 16px;
  font-weight: 600;
  color: var(--text-primary, #fff);
  margin: 0;
}

.record-type-config-header h3 i {
  color: var(--primary, #60a5fa);
  font-size: 20px;
}

.record-type-config-close {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 32px;
  height: 32px;
  background: transparent;
  border: none;
  color: var(--text-muted, #888);
  cursor: pointer;
  border-radius: 6px;
  transition: all 0.2s;
}

.record-type-config-close:hover {
  background: var(--bg-tertiary, #1a1a35);
  color: var(--text-primary, #fff);
}

.record-type-config-body {
  flex: 1;
  overflow-y: auto;
  padding: 20px;
}

.config-section {
  margin-bottom: 20px;
}

.config-section:last-child {
  margin-bottom: 0;
}

.config-label {
  display: block;
  font-size: 12px;
  font-weight: 500;
  color: var(--text-secondary, #aaa);
  margin-bottom: 10px;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.config-label-row {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 10px;
}

.field-actions {
  display: flex;
  gap: 6px;
}

.field-actions .btn {
  padding: 4px 8px;
  font-size: 11px;
}

.view-type-options {
  display: flex;
  gap: 10px;
}

.view-type-option {
  flex: 1;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 6px;
  padding: 12px;
  background: var(--bg-secondary, #16162a);
  border: 2px solid var(--border-color, #2a2a4a);
  border-radius: 8px;
  cursor: pointer;
  transition: all 0.2s;
}

.view-type-option:hover {
  border-color: rgba(96, 165, 250, 0.5);
}

.view-type-option.selected {
  border-color: var(--primary, #60a5fa);
  background: rgba(96, 165, 250, 0.1);
}

.view-type-option input[type="radio"] {
  display: none;
}

.view-type-option i {
  font-size: 24px;
  color: var(--text-secondary, #aaa);
}

.view-type-option.selected i {
  color: var(--primary, #60a5fa);
}

.view-type-option span {
  font-size: 12px;
  color: var(--text-secondary, #aaa);
}

.view-type-option.selected span {
  color: var(--text-primary, #fff);
}

.type-fields-list {
  max-height: 250px;
  overflow-y: auto;
  background: var(--bg-secondary, #16162a);
  border: 1px solid var(--border-color, #2a2a4a);
  border-radius: 8px;
  padding: 8px;
}

.type-field-item {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 8px;
  border-radius: 4px;
  transition: background 0.2s;
}

.type-field-item:hover {
  background: var(--bg-tertiary, #1a1a35);
}

.type-field-item .drag-handle {
  color: var(--text-muted, #888);
  cursor: grab;
  opacity: 0.5;
}

.type-field-item:hover .drag-handle {
  opacity: 1;
}

.type-field-item input[type="checkbox"] {
  accent-color: var(--primary, #60a5fa);
}

.type-field-item label {
  flex: 1;
  display: flex;
  justify-content: space-between;
  align-items: center;
  cursor: pointer;
}

.type-field-item .field-name {
  font-size: 13px;
  color: var(--text-primary, #fff);
}

.type-field-item .field-type {
  font-size: 11px;
  color: var(--text-muted, #888);
  background: var(--bg-tertiary, #1a1a35);
  padding: 2px 6px;
  border-radius: 4px;
}

.config-preview {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 12px;
  background: var(--bg-secondary, #16162a);
  border-radius: 8px;
}

.preview-label {
  font-size: 12px;
  color: var(--text-muted, #888);
}

.preview-count,
.preview-fields {
  font-size: 12px;
  color: var(--text-secondary, #aaa);
  background: var(--bg-tertiary, #1a1a35);
  padding: 4px 8px;
  border-radius: 4px;
}

.record-type-config-footer {
  display: flex;
  justify-content: flex-end;
  gap: 10px;
  padding: 16px 20px;
  border-top: 1px solid var(--border-color, #2a2a4a);
}

/* ===== Settings Modal Sync Section ===== */
.settings-sync-status {
  background: var(--bg-tertiary);
  border: 1px solid var(--border-secondary);
  border-radius: var(--radius-md);
  padding: 12px;
  margin-top: 8px;
}

.settings-sync-indicator {
  display: flex;
  align-items: center;
  gap: 8px;
  font-size: 13px;
  font-weight: 500;
}

.settings-sync-indicator i {
  font-size: 18px;
}

.settings-sync-enabled .settings-sync-indicator {
  color: var(--success-500, #22c55e);
}

.settings-sync-enabled .settings-sync-indicator i {
  color: var(--success-500, #22c55e);
}

.settings-sync-disabled .settings-sync-indicator {
  color: var(--warning-500, #f59e0b);
}

.settings-sync-disabled .settings-sync-indicator i {
  color: var(--warning-500, #f59e0b);
}

.settings-sync-not-configured .settings-sync-indicator {
  color: var(--text-secondary);
}

.settings-sync-not-configured .settings-sync-indicator i {
  color: var(--text-muted);
}

.settings-sync-details {
  display: flex;
  flex-direction: column;
  gap: 2px;
  margin-top: 8px;
  padding-top: 8px;
  border-top: 1px solid var(--border-secondary);
  font-size: 12px;
  color: var(--text-muted);
}

.settings-sync-hint {
  font-size: 12px;
  color: var(--text-muted);
  margin-top: 6px;
  margin-bottom: 0;
}

/* Spinning animation for sync icon */
@keyframes spin {
  from { transform: rotate(0deg); }
  to { transform: rotate(360deg); }
}

.spinning {
  animation: spin 1s linear infinite;
}

/* ============================================================================
   Data Pipeline Wizard Styles
   ============================================================================ */

.data-pipeline-wizard {
  max-width: 700px;
}

.data-pipeline-wizard .data-pipeline-body.wizard-body {
  display: block;
  padding: 0;
  gap: 0;
  min-height: 400px;
  max-height: 500px;
  overflow-y: auto;
}

/* Wizard Progress Indicator */
.wizard-progress {
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 16px 24px;
  background: var(--bg-secondary, #16162a);
  border-bottom: 1px solid var(--border-color, #2a2a4a);
  gap: 0;
}

.wizard-progress-step {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 6px;
}

.wizard-progress-indicator {
  width: 32px;
  height: 32px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 14px;
  font-weight: 600;
  background: var(--bg-tertiary, #1a1a35);
  color: var(--text-muted, #888);
  border: 2px solid var(--border-color, #2a2a4a);
  transition: all 0.3s ease;
}

.wizard-progress-step.active .wizard-progress-indicator {
  background: var(--primary, #60a5fa);
  color: #fff;
  border-color: var(--primary, #60a5fa);
}

.wizard-progress-step.completed .wizard-progress-indicator {
  background: #22c55e;
  color: #fff;
  border-color: #22c55e;
}

.wizard-progress-label {
  font-size: 12px;
  color: var(--text-muted, #888);
  font-weight: 500;
}

.wizard-progress-step.active .wizard-progress-label {
  color: var(--text-primary, #fff);
}

.wizard-progress-step.completed .wizard-progress-label {
  color: #22c55e;
}

.wizard-progress-line {
  width: 60px;
  height: 2px;
  background: var(--border-color, #2a2a4a);
  margin: 0 8px;
  margin-bottom: 22px;
}

.wizard-progress-step.completed + .wizard-progress-line {
  background: #22c55e;
}

/* Wizard Step Content */
.wizard-step {
  padding: 24px;
}

.wizard-step-title {
  display: flex;
  align-items: center;
  gap: 10px;
  font-size: 18px;
  font-weight: 600;
  color: var(--text-primary, #fff);
  margin: 0 0 20px 0;
}

.wizard-step-title i {
  color: var(--primary, #60a5fa);
  font-size: 20px;
}

.wizard-step-content {
  display: flex;
  flex-direction: column;
  gap: 20px;
}

/* Step 1: Source Overview */
.wizard-source-info {
  background: var(--bg-secondary, #16162a);
  border-radius: 10px;
  padding: 16px;
}

.wizard-source-card {
  display: flex;
  align-items: center;
  gap: 14px;
}

.wizard-source-card .source-icon {
  width: 48px;
  height: 48px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: rgba(96, 165, 250, 0.1);
  border-radius: 10px;
}

.wizard-source-card .source-icon i {
  font-size: 24px;
  color: var(--primary, #60a5fa);
}

.wizard-source-card .source-details {
  display: flex;
  flex-direction: column;
  gap: 4px;
}

.wizard-source-card .source-name {
  font-size: 16px;
  font-weight: 600;
  color: var(--text-primary, #fff);
}

.wizard-source-card .source-stats {
  font-size: 13px;
  color: var(--text-muted, #888);
}

.wizard-source-card .source-more {
  margin-left: auto;
  font-size: 12px;
  color: var(--primary, #60a5fa);
  padding: 4px 10px;
  background: rgba(96, 165, 250, 0.1);
  border-radius: 12px;
}

.wizard-empty-state {
  text-align: center;
  padding: 24px;
  color: var(--text-muted, #888);
}

.wizard-empty-state i {
  font-size: 32px;
  margin-bottom: 8px;
  opacity: 0.5;
}

/* Data Preview Table */
.wizard-data-preview h4,
.wizard-type-overview h4,
.wizard-summary h4,
.wizard-will-create h4 {
  display: flex;
  align-items: center;
  gap: 8px;
  font-size: 14px;
  font-weight: 600;
  color: var(--text-primary, #fff);
  margin: 0 0 12px 0;
}

.wizard-data-preview h4 i,
.wizard-type-overview h4 i,
.wizard-summary h4 i,
.wizard-will-create h4 i {
  color: var(--primary, #60a5fa);
}

.wizard-preview-table-wrapper {
  overflow-x: auto;
  border-radius: 8px;
  border: 1px solid var(--border-color, #2a2a4a);
}

.wizard-preview-table {
  width: 100%;
  border-collapse: collapse;
  font-size: 13px;
}

.wizard-preview-table th {
  background: var(--bg-secondary, #16162a);
  color: var(--text-secondary, #c8c8d8);
  font-weight: 500;
  padding: 10px 12px;
  text-align: left;
  white-space: nowrap;
  border-bottom: 1px solid var(--border-color, #2a2a4a);
}

.wizard-preview-table td {
  padding: 10px 12px;
  color: var(--text-primary, #fff);
  border-bottom: 1px solid var(--border-color, #2a2a4a);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  max-width: 200px;
}

.wizard-preview-table tr:last-child td {
  border-bottom: none;
}

.wizard-preview-table .more-cols {
  color: var(--text-muted, #888);
  font-style: italic;
}

.wizard-preview-more {
  font-size: 12px;
  color: var(--text-muted, #888);
  text-align: center;
  padding: 10px;
  border-top: 1px solid var(--border-color, #2a2a4a);
}

/* Type Overview in Step 1 */
.wizard-type-overview {
  background: var(--bg-secondary, #16162a);
  border-radius: 10px;
  padding: 16px;
}

.wizard-type-info {
  font-size: 13px;
  color: var(--text-muted, #888);
  margin-bottom: 12px;
}

.wizard-type-info code {
  background: var(--bg-tertiary, #1a1a35);
  padding: 2px 8px;
  border-radius: 4px;
  color: var(--primary, #60a5fa);
  font-family: monospace;
}

.wizard-type-distribution {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.wizard-type-distribution .type-bar-row {
  display: flex;
  align-items: center;
  gap: 12px;
}

.wizard-type-distribution .type-bar-label {
  width: 120px;
  display: flex;
  align-items: center;
  gap: 8px;
  font-size: 13px;
  font-weight: 500;
  color: var(--text-primary, #fff);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.wizard-type-distribution .type-bar-label i {
  color: var(--primary, #60a5fa);
  flex-shrink: 0;
}

.wizard-type-distribution .type-bar-track {
  flex: 1;
  height: 8px;
  background: var(--bg-tertiary, #1a1a35);
  border-radius: 4px;
  overflow: hidden;
}

.wizard-type-distribution .type-bar-fill {
  height: 100%;
  background: linear-gradient(90deg, var(--primary, #60a5fa), #a855f7);
  border-radius: 4px;
}

.wizard-type-distribution .type-bar-count {
  width: 50px;
  text-align: right;
  font-size: 13px;
  font-weight: 500;
  color: var(--text-muted, #888);
}

.wizard-type-distribution .type-bar-more {
  font-size: 12px;
  color: var(--text-muted, #888);
  text-align: center;
  padding-top: 8px;
  border-top: 1px solid var(--border-color, #2a2a4a);
}

.wizard-type-hint {
  display: flex;
  align-items: center;
  gap: 8px;
  margin-top: 12px;
  padding: 10px 12px;
  background: rgba(96, 165, 250, 0.1);
  border-radius: 6px;
  font-size: 13px;
  color: var(--primary, #60a5fa);
}

/* Step 2: Record Types Configuration */
.wizard-mode-selector {
  display: flex;
  gap: 12px;
  margin-bottom: 20px;
}

.wizard-mode-option {
  flex: 1;
  display: flex;
  cursor: pointer;
  padding: 16px;
  background: var(--bg-secondary, #16162a);
  border: 2px solid var(--border-color, #2a2a4a);
  border-radius: 10px;
  transition: all 0.2s;
}

.wizard-mode-option:hover {
  border-color: rgba(96, 165, 250, 0.5);
}

.wizard-mode-option.selected {
  border-color: var(--primary, #60a5fa);
  background: rgba(96, 165, 250, 0.08);
}

.wizard-mode-option input[type="radio"] {
  display: none;
}

.wizard-mode-option .mode-content {
  display: flex;
  flex-direction: column;
  gap: 4px;
}

.wizard-mode-option .mode-content i {
  font-size: 24px;
  color: var(--text-muted, #888);
  margin-bottom: 4px;
}

.wizard-mode-option.selected .mode-content i.ph-circles-three {
  color: #a855f7;
}

.wizard-mode-option.selected .mode-content i.ph-eye {
  color: var(--primary, #60a5fa);
}

.wizard-mode-option.selected .mode-content i.ph-minus-circle {
  color: var(--text-muted, #888);
}

.wizard-mode-option .mode-title {
  font-size: 14px;
  font-weight: 600;
  color: var(--text-primary, #fff);
}

.wizard-mode-option .mode-desc {
  font-size: 12px;
  color: var(--text-muted, #888);
}

/* Type Cards in Step 2 */
.wizard-type-cards {
  display: flex;
  flex-direction: column;
  gap: 10px;
  max-height: 280px;
  overflow-y: auto;
}

.wizard-type-card {
  background: var(--bg-secondary, #16162a);
  border: 1px solid var(--border-color, #2a2a4a);
  border-radius: 10px;
  transition: all 0.2s;
}

.wizard-type-card.enabled {
  border-color: rgba(96, 165, 250, 0.3);
  background: rgba(96, 165, 250, 0.05);
}

.wizard-type-card.disabled {
  opacity: 0.6;
}

.type-card-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 14px 16px;
}

.type-card-toggle {
  display: flex;
  align-items: center;
  gap: 10px;
  cursor: pointer;
}

.type-card-toggle input[type="checkbox"] {
  width: 18px;
  height: 18px;
  accent-color: var(--primary, #60a5fa);
}

.type-card-toggle i {
  font-size: 18px;
  color: var(--primary, #60a5fa);
}

.type-card-name {
  font-size: 15px;
  font-weight: 600;
  color: var(--text-primary, #fff);
}

.type-card-count {
  font-size: 13px;
  color: var(--text-muted, #888);
}

.type-card-body {
  padding: 0 16px 14px 16px;
  border-top: 1px solid var(--border-color, #2a2a4a);
  padding-top: 12px;
}

.type-card-config {
  display: flex;
  align-items: center;
  gap: 16px;
}

.type-card-config .config-item {
  display: flex;
  align-items: center;
  gap: 6px;
  font-size: 13px;
  color: var(--text-secondary, #c8c8d8);
}

.type-card-config .config-item i {
  color: var(--primary, #60a5fa);
}

.type-card-configure-btn {
  display: flex;
  align-items: center;
  gap: 6px;
  margin-left: auto;
  padding: 6px 12px;
  background: var(--bg-tertiary, #1a1a35);
  border: 1px solid var(--border-color, #2a2a4a);
  border-radius: 6px;
  color: var(--text-secondary, #c8c8d8);
  font-size: 13px;
  cursor: pointer;
  transition: all 0.2s;
}

.type-card-configure-btn:hover {
  background: var(--primary, #60a5fa);
  border-color: var(--primary, #60a5fa);
  color: #fff;
}

.wizard-types-summary {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 12px 16px;
  background: var(--bg-secondary, #16162a);
  border-radius: 8px;
  font-size: 13px;
  color: var(--text-muted, #888);
}

.wizard-types-summary i.ph-circles-three {
  color: #a855f7;
}

.wizard-types-summary i.ph-eye {
  color: var(--primary, #60a5fa);
}

.wizard-skip-notice {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 20px;
  background: var(--bg-secondary, #16162a);
  border-radius: 10px;
  color: var(--text-muted, #888);
}

.wizard-skip-notice i {
  font-size: 24px;
  color: var(--text-secondary, #c8c8d8);
}

.wizard-skip-notice p {
  margin: 0;
  font-size: 14px;
}

/* Step 3: Create Set */
.wizard-name-section {
  background: var(--bg-secondary, #16162a);
  padding: 16px;
  border-radius: 10px;
}

.wizard-name-section label {
  display: block;
  font-size: 13px;
  font-weight: 500;
  color: var(--text-secondary, #c8c8d8);
  margin-bottom: 8px;
}

.wizard-name-input {
  width: 100%;
  padding: 12px 14px;
  background: var(--bg-tertiary, #1a1a35);
  border: 1px solid var(--border-color, #2a2a4a);
  border-radius: 8px;
  color: var(--text-primary, #fff);
  font-size: 16px;
  font-weight: 500;
}

.wizard-name-input:focus {
  outline: none;
  border-color: var(--primary, #60a5fa);
}

.wizard-name-input::placeholder {
  color: var(--text-muted, #888);
}

.wizard-summary {
  background: var(--bg-secondary, #16162a);
  padding: 16px;
  border-radius: 10px;
}

.wizard-summary-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
  gap: 16px;
}

.summary-item {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 4px;
  padding: 12px;
  background: var(--bg-tertiary, #1a1a35);
  border-radius: 8px;
}

.summary-label {
  font-size: 12px;
  color: var(--text-muted, #888);
}

.summary-value {
  font-size: 24px;
  font-weight: 700;
  color: var(--primary, #60a5fa);
}

.wizard-will-create {
  background: var(--bg-secondary, #16162a);
  padding: 16px;
  border-radius: 10px;
}

.will-create-list {
  list-style: none;
  padding: 0;
  margin: 0;
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.will-create-list li {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 10px 12px;
  background: var(--bg-tertiary, #1a1a35);
  border-radius: 6px;
  font-size: 13px;
  color: var(--text-primary, #fff);
}

.will-create-list li i {
  color: var(--primary, #60a5fa);
  font-size: 16px;
}

/* Wizard Footer */
.wizard-footer {
  border-top: 1px solid var(--border-color, #2a2a4a);
}

.wizard-footer .footer-actions {
  display: flex;
  gap: 10px;
}

.wizard-footer .btn {
  display: flex;
  align-items: center;
  gap: 6px;
}

/* =============================================================================
   Definition API Search Modal
   ============================================================================= */

/* API Source Selector */
.api-source-selector {
  margin-bottom: 16px;
}

.api-source-group {
  margin-bottom: 12px;
}

.api-source-label {
  display: block;
  font-size: 11px;
  font-weight: 600;
  color: var(--text-secondary);
  text-transform: uppercase;
  letter-spacing: 0.5px;
  margin-bottom: 8px;
}

.api-source-pills {
  display: flex;
  flex-wrap: wrap;
  gap: 6px;
}

.api-pill {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  padding: 6px 12px;
  background: var(--bg-secondary);
  border: 1px solid var(--border-color);
  border-radius: 16px;
  font-size: 12px;
  color: var(--text-secondary);
  cursor: pointer;
  transition: all 0.15s;
}

.api-pill:hover {
  border-color: var(--primary-500);
  color: var(--text-primary);
}

.api-pill.active {
  background: var(--primary-500);
  border-color: var(--primary-500);
  color: white;
}

.api-status {
  display: inline-block;
  width: 6px;
  height: 6px;
  border-radius: 50%;
}

.api-status.live {
  background: #22c55e;
}

.api-status.static {
  background: #f59e0b;
}

.api-status.link {
  background: #8b5cf6;
}

/* Search Input Row */
.search-input-row {
  display: flex;
  gap: 8px;
}

.search-input-row .form-input {
  flex: 1;
}

.search-input-row .btn {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  padding: 8px 16px;
  white-space: nowrap;
}

/* Definition Search Results */
.definition-search-results {
  max-height: 250px;
  overflow-y: auto;
  border: 1px solid var(--border-color);
  border-radius: 8px;
  margin-bottom: 16px;
}

.search-empty-state {
  display: flex;
  flex-direction: column;
  align-items: center;
  padding: 32px 16px;
  color: var(--text-muted);
  text-align: center;
}

.search-empty-state i {
  font-size: 32px;
  opacity: 0.5;
  margin-bottom: 8px;
}

.search-empty-state p {
  margin: 0;
  font-size: 13px;
}

.search-loading {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
  padding: 32px 16px;
  color: var(--text-secondary);
  font-size: 13px;
}

.search-loading i {
  animation: spin 1s linear infinite;
}

@keyframes spin {
  from { transform: rotate(0deg); }
  to { transform: rotate(360deg); }
}

.search-error {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 16px;
  color: var(--error-color, #ef4444);
  font-size: 13px;
}

/* Search Result Items */
.search-result-item {
  padding: 12px;
  border-bottom: 1px solid var(--border-color);
  cursor: pointer;
  transition: background 0.1s;
}

.search-result-item:hover {
  background: var(--bg-hover);
}

.search-result-item:last-child {
  border-bottom: none;
}

.search-result-item.selected {
  background: var(--primary-bg, rgba(59, 130, 246, 0.1));
  border-left: 3px solid var(--primary-500);
}

.search-result-header {
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  gap: 8px;
  margin-bottom: 4px;
}

.search-result-label {
  font-weight: 500;
  color: var(--primary-500);
  font-size: 14px;
}

.search-result-source {
  font-size: 10px;
  background: var(--bg-tertiary);
  color: var(--text-secondary);
  padding: 2px 6px;
  border-radius: 4px;
  flex-shrink: 0;
}

.search-result-citation {
  font-size: 12px;
  font-weight: 500;
  color: var(--text-primary);
  margin-bottom: 4px;
}

.search-result-desc {
  font-size: 12px;
  color: var(--text-secondary);
  margin-bottom: 4px;
  line-height: 1.4;
}

.search-result-uri {
  font-size: 10px;
  color: var(--text-muted);
  font-family: var(--font-mono, monospace);
  word-break: break-all;
}

/* Selected Definition */
.definition-selected-item {
  margin-bottom: 16px;
}

.selected-definition {
  background: var(--primary-bg, rgba(59, 130, 246, 0.1));
  border: 1px solid var(--primary-500);
  border-radius: 8px;
  padding: 12px;
}

.selected-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 8px;
}

.selected-label {
  font-weight: 600;
  color: var(--primary-600, #3b82f6);
  font-size: 14px;
}

.btn-clear-selection {
  background: none;
  border: none;
  color: var(--text-muted);
  cursor: pointer;
  padding: 4px;
  border-radius: 4px;
  display: flex;
  align-items: center;
  justify-content: center;
}

.btn-clear-selection:hover {
  background: var(--bg-hover);
  color: var(--text-primary);
}

.selected-meta {
  display: flex;
  flex-wrap: wrap;
  gap: 6px;
  margin-bottom: 8px;
}

.meta-tag {
  font-size: 10px;
  background: var(--bg-secondary);
  padding: 2px 8px;
  border-radius: 4px;
  color: var(--text-secondary);
}

.meta-tag.source {
  background: var(--primary-500);
  color: white;
}

.selected-uri {
  font-size: 11px;
  color: var(--text-muted);
  font-family: var(--font-mono, monospace);
  word-break: break-all;
  margin-bottom: 8px;
}

.selected-desc {
  font-size: 12px;
  color: var(--text-secondary);
  line-height: 1.4;
}

/* ============================================================================
   Panel Tab System - Browser-like tabs for dashboard panels
   ============================================================================ */

/* Panel Tab Bar Container */
.panel-tab-bar {
  display: flex;
  align-items: center;
  background: var(--bg-secondary, #f9fafb);
  border-bottom: 1px solid var(--border-color, #e5e7eb);
  padding: 0 8px;
  min-height: 40px;
  position: relative;
  gap: 4px;
}

.panel-tabs-scroll {
  display: flex;
  flex: 1;
  overflow-x: auto;
  gap: 2px;
  align-items: flex-end;
  padding-bottom: 0;
  scrollbar-width: none;
  -ms-overflow-style: none;
}

.panel-tabs-scroll::-webkit-scrollbar {
  display: none;
}

.panel-tabs-actions {
  display: flex;
  align-items: center;
  gap: 4px;
  padding-left: 8px;
  border-left: 1px solid var(--border-color, #e5e7eb);
  margin-left: 8px;
}

/* Individual Panel Tab */
.panel-tab {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 8px 12px;
  background: var(--bg-tertiary, #f3f4f6);
  border: 1px solid transparent;
  border-bottom: none;
  border-radius: 8px 8px 0 0;
  cursor: pointer;
  transition: all 0.15s ease;
  min-width: 100px;
  max-width: 200px;
  position: relative;
  user-select: none;
  font-size: 13px;
  color: var(--text-secondary, #6b7280);
  margin-bottom: -1px;
}

.panel-tab:hover {
  background: var(--bg-hover, #e5e7eb);
  color: var(--text-primary, #111827);
}

.panel-tab.active {
  background: var(--bg-primary, white);
  border-color: var(--border-color, #e5e7eb);
  color: var(--text-primary, #111827);
  font-weight: 500;
  z-index: 1;
}

.panel-tab.pinned {
  min-width: 40px;
  max-width: 40px;
  padding: 8px;
  justify-content: center;
}

.panel-tab.pinned::before {
  content: '';
  position: absolute;
  top: 4px;
  right: 4px;
  width: 6px;
  height: 6px;
  background: var(--primary-500, #3b82f6);
  border-radius: 50%;
}

.panel-tab-icon {
  display: flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
}

.panel-tab-icon i {
  font-size: 16px;
}

.panel-tab-title {
  flex: 1;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.panel-tab-close {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 18px;
  height: 18px;
  border: none;
  background: transparent;
  border-radius: 4px;
  cursor: pointer;
  opacity: 0;
  transition: all 0.15s ease;
  flex-shrink: 0;
  color: var(--text-secondary, #6b7280);
}

.panel-tab:hover .panel-tab-close {
  opacity: 0.7;
}

.panel-tab-close:hover {
  opacity: 1 !important;
  background: var(--danger-bg, rgba(239, 68, 68, 0.1));
  color: var(--danger-500, #ef4444);
}

/* Panel Tab Actions */
.panel-tab-add,
.panel-tab-close-all {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 28px;
  height: 28px;
  border: none;
  background: transparent;
  border-radius: 6px;
  cursor: pointer;
  transition: all 0.15s ease;
  color: var(--text-secondary, #6b7280);
}

.panel-tab-add:hover {
  background: var(--primary-bg, rgba(59, 130, 246, 0.1));
  color: var(--primary-500, #3b82f6);
}

.panel-tab-close-all:hover {
  background: var(--danger-bg, rgba(239, 68, 68, 0.1));
  color: var(--danger-500, #ef4444);
}

/* Panel Tab Menu (dropdown for adding tabs) */
.panel-tab-menu {
  position: absolute;
  top: 100%;
  right: 8px;
  background: var(--bg-primary, white);
  border: 1px solid var(--border-color, #e5e7eb);
  border-radius: 8px;
  box-shadow: 0 10px 40px rgba(0, 0, 0, 0.15);
  padding: 8px;
  min-width: 180px;
  z-index: 1000;
}

.panel-tab-menu-item {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 10px 12px;
  border-radius: 6px;
  cursor: pointer;
  transition: background 0.15s ease;
  font-size: 13px;
  color: var(--text-primary, #111827);
}

.panel-tab-menu-item:hover {
  background: var(--bg-secondary, #f9fafb);
}

.panel-tab-menu-item i {
  font-size: 16px;
  color: var(--text-secondary, #6b7280);
}

.panel-tab-menu-empty {
  padding: 12px;
  text-align: center;
  color: var(--text-muted, #9ca3af);
  font-size: 13px;
}

/* Panel Tab Content Area */
.panel-tab-content {
  flex: 1;
  overflow: auto;
  background: var(--bg-primary, white);
  padding: 20px;
}

/* Empty State */
.panel-tab-empty {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  height: 100%;
  min-height: 400px;
  text-align: center;
  color: var(--text-secondary, #6b7280);
}

.panel-tab-empty i {
  font-size: 48px;
  margin-bottom: 16px;
  opacity: 0.5;
}

.panel-tab-empty h3 {
  font-size: 18px;
  font-weight: 600;
  color: var(--text-primary, #111827);
  margin: 0 0 8px 0;
}

.panel-tab-empty p {
  margin: 0 0 24px 0;
  max-width: 400px;
}

.panel-tab-quick-actions {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
  justify-content: center;
}

.panel-tab-quick-action {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 10px 16px;
  background: var(--bg-secondary, #f9fafb);
  border: 1px solid var(--border-color, #e5e7eb);
  border-radius: 8px;
  cursor: pointer;
  transition: all 0.15s ease;
  font-size: 13px;
  color: var(--text-primary, #111827);
}

.panel-tab-quick-action:hover {
  background: var(--primary-bg, rgba(59, 130, 246, 0.1));
  border-color: var(--primary-500, #3b82f6);
  color: var(--primary-600, #2563eb);
}

.panel-tab-quick-action i {
  font-size: 16px;
}

/* Panel Content Styles */
.panel-content {
  max-width: 900px;
  margin: 0 auto;
}

.panel-content-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 20px;
  padding-bottom: 16px;
  border-bottom: 1px solid var(--border-color, #e5e7eb);
}

.panel-content-header h3 {
  display: flex;
  align-items: center;
  gap: 10px;
  margin: 0;
  font-size: 18px;
  font-weight: 600;
  color: var(--text-primary, #111827);
}

.panel-content-header h3 i {
  font-size: 20px;
  color: var(--primary-500, #3b82f6);
}

.panel-content-body {
  display: flex;
  flex-direction: column;
  gap: 16px;
}

.panel-action-btn {
  padding: 8px 16px;
  background: var(--bg-secondary, #f9fafb);
  border: 1px solid var(--border-color, #e5e7eb);
  border-radius: 6px;
  cursor: pointer;
  font-size: 13px;
  font-weight: 500;
  color: var(--text-primary, #111827);
  transition: all 0.15s ease;
}

.panel-action-btn:hover {
  background: var(--primary-bg, rgba(59, 130, 246, 0.1));
  border-color: var(--primary-500, #3b82f6);
  color: var(--primary-600, #2563eb);
}

.panel-add-btn {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
  padding: 12px;
  background: var(--bg-secondary, #f9fafb);
  border: 1px dashed var(--border-color, #e5e7eb);
  border-radius: 8px;
  cursor: pointer;
  font-size: 13px;
  color: var(--text-secondary, #6b7280);
  transition: all 0.15s ease;
  width: 100%;
  margin-top: 8px;
}

.panel-add-btn:hover {
  background: var(--primary-bg, rgba(59, 130, 246, 0.1));
  border-color: var(--primary-500, #3b82f6);
  color: var(--primary-600, #2563eb);
}

.panel-empty-state {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 40px 20px;
  text-align: center;
  color: var(--text-muted, #9ca3af);
}

.panel-empty-state i {
  font-size: 32px;
  margin-bottom: 12px;
  opacity: 0.5;
}

.panel-empty-state small {
  display: block;
  margin-top: 4px;
  font-size: 12px;
}

/* Overview Panel */
.overview-stats-grid {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  gap: 16px;
}

.overview-stat-card {
  background: var(--bg-secondary, #f9fafb);
  border-radius: 12px;
  padding: 20px;
  text-align: center;
}

.overview-stat-card.highlight {
  background: var(--primary-bg, rgba(59, 130, 246, 0.1));
  border: 1px solid var(--primary-200, #bfdbfe);
}

.overview-stat-value {
  font-size: 32px;
  font-weight: 700;
  color: var(--text-primary, #111827);
  line-height: 1;
  margin-bottom: 8px;
}

.overview-stat-label {
  font-size: 13px;
  color: var(--text-secondary, #6b7280);
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.overview-completeness {
  background: var(--bg-secondary, #f9fafb);
  border-radius: 12px;
  padding: 16px 20px;
}

.overview-completeness-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 12px;
  font-size: 14px;
}

.overview-completeness-value {
  font-weight: 600;
  color: var(--success-600, #16a34a);
}

.overview-completeness-bar {
  height: 8px;
  background: var(--bg-tertiary, #e5e7eb);
  border-radius: 4px;
  overflow: hidden;
}

.overview-completeness-fill {
  height: 100%;
  background: linear-gradient(90deg, var(--success-400, #4ade80), var(--success-500, #22c55e));
  border-radius: 4px;
  transition: width 0.3s ease;
}

/* Source Panel */
.source-item {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 16px;
  background: var(--bg-secondary, #f9fafb);
  border-radius: 10px;
  cursor: pointer;
  transition: all 0.15s ease;
}

.source-item:hover {
  background: var(--bg-hover, #e5e7eb);
}

.source-item-icon {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 40px;
  height: 40px;
  background: var(--primary-bg, rgba(59, 130, 246, 0.1));
  border-radius: 8px;
  flex-shrink: 0;
}

.source-item-icon i {
  font-size: 20px;
  color: var(--primary-500, #3b82f6);
}

.source-item-details {
  flex: 1;
  min-width: 0;
}

.source-item-name {
  font-weight: 500;
  color: var(--text-primary, #111827);
  margin-bottom: 4px;
}

.source-item-meta {
  display: flex;
  align-items: center;
  gap: 8px;
  font-size: 12px;
  color: var(--text-secondary, #6b7280);
}

.source-badge {
  padding: 2px 6px;
  background: var(--bg-tertiary, #e5e7eb);
  border-radius: 4px;
  font-size: 10px;
  font-weight: 600;
  text-transform: uppercase;
}

/* Transforms Panel */
.transforms-list {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.transform-item {
  display: flex;
  align-items: flex-start;
  gap: 12px;
  padding: 16px;
  background: var(--bg-secondary, #f9fafb);
  border-radius: 10px;
}

.transform-text {
  flex: 1;
}

.transform-text strong {
  display: block;
  color: var(--text-primary, #111827);
  margin-bottom: 4px;
}

.transform-text small {
  color: var(--text-secondary, #6b7280);
  font-size: 12px;
}

.transforms-schema-link {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 16px;
  background: var(--bg-secondary, #f9fafb);
  border-radius: 10px;
  margin-top: 8px;
}

/* Fields Panel */
.fields-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
  gap: 12px;
}

.field-item {
  background: var(--bg-secondary, #f9fafb);
  border-radius: 10px;
  padding: 16px;
  cursor: pointer;
  transition: all 0.15s ease;
}

.field-item:hover {
  background: var(--bg-hover, #e5e7eb);
}

.field-name {
  font-weight: 500;
  color: var(--text-primary, #111827);
  margin-bottom: 8px;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.field-type {
  display: flex;
  align-items: center;
  gap: 6px;
  font-size: 12px;
  color: var(--text-secondary, #6b7280);
  margin-bottom: 12px;
}

.field-completeness {
  height: 4px;
  background: var(--bg-tertiary, #e5e7eb);
  border-radius: 2px;
  overflow: hidden;
}

.field-completeness-fill {
  height: 100%;
  background: var(--success-500, #22c55e);
  border-radius: 2px;
  transition: width 0.3s ease;
}

.field-completeness-fill.warning {
  background: var(--warning-500, #f59e0b);
}

.field-completeness-fill.danger {
  background: var(--danger-500, #ef4444);
}

/* Exports Panel */
.exports-list {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.export-item {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 14px 16px;
  background: var(--bg-secondary, #f9fafb);
  border-radius: 10px;
}

.export-item i {
  font-size: 20px;
  color: var(--text-secondary, #6b7280);
}

.export-item-info {
  flex: 1;
}

.export-item-name {
  font-weight: 500;
  color: var(--text-primary, #111827);
  margin-bottom: 2px;
}

.export-item-meta {
  font-size: 12px;
  color: var(--text-secondary, #6b7280);
}

/* Lenses Panel */
.lenses-list {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

/* Definitions Panel */
.definitions-panel .panel-content-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
}

.panel-header-stats {
  display: flex;
  align-items: center;
  gap: 8px;
  font-size: 11px;
}

.panel-header-stats .stat-bound {
  color: var(--success-500, #22c55e);
  padding: 2px 6px;
  background: rgba(34, 197, 94, 0.1);
  border-radius: 4px;
}

.panel-header-stats .stat-unbound {
  color: var(--text-muted, #9ca3af);
  padding: 2px 6px;
  background: var(--bg-tertiary, #f3f4f6);
  border-radius: 4px;
}

.key-definitions-list {
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.key-definition-item {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 12px 14px;
  background: var(--bg-secondary, #f9fafb);
  border-radius: 10px;
  cursor: pointer;
  transition: all 0.15s ease;
}

.key-definition-item:hover {
  background: var(--bg-hover, #e5e7eb);
}

.key-definition-item.bound {
  border-left: 3px solid var(--success-500, #22c55e);
}

.key-definition-item.unbound {
  border-left: 3px solid var(--border-color, #e5e7eb);
}

.key-definition-status {
  font-size: 16px;
  width: 20px;
  display: flex;
  align-items: center;
  justify-content: center;
}

.key-definition-item.bound .key-definition-status {
  color: var(--success-500, #22c55e);
}

.key-definition-item.unbound .key-definition-status {
  color: var(--text-muted, #9ca3af);
}

.key-definition-info {
  flex: 1;
  min-width: 0;
}

.key-definition-name {
  font-weight: 500;
  color: var(--text-primary, #111827);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.key-definition-binding {
  display: flex;
  align-items: center;
  gap: 4px;
  font-size: 12px;
  color: var(--success-600, #16a34a);
  margin-top: 2px;
}

.key-definition-binding i {
  font-size: 11px;
}

.key-definition-unbound {
  font-size: 12px;
  color: var(--text-muted, #9ca3af);
  margin-top: 2px;
}

.key-definition-type {
  font-size: 14px;
  color: var(--text-secondary, #6b7280);
}

.panel-import-keys-btn {
  margin-top: 12px;
}

.panel-complete-state {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
  padding: 12px;
  margin-top: 12px;
  background: rgba(34, 197, 94, 0.1);
  border-radius: 8px;
  color: var(--success-600, #16a34a);
  font-size: 13px;
  font-weight: 500;
}

.panel-complete-state i {
  font-size: 16px;
}

.lens-item {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 14px 16px;
  background: var(--bg-secondary, #f9fafb);
  border-radius: 10px;
  cursor: pointer;
  transition: all 0.15s ease;
}

.lens-item:hover {
  background: var(--bg-hover, #e5e7eb);
}

.lens-item i {
  font-size: 20px;
  color: var(--primary-500, #3b82f6);
}

.lens-item-info {
  flex: 1;
}

.lens-item-name {
  font-weight: 500;
  color: var(--text-primary, #111827);
  margin-bottom: 2px;
}

.lens-item-meta {
  font-size: 12px;
  color: var(--text-secondary, #6b7280);
}

/* Record Types Panel */
.record-types-info {
  padding: 16px;
  background: var(--info-bg, rgba(59, 130, 246, 0.1));
  border-radius: 10px;
  font-size: 14px;
  color: var(--text-primary, #111827);
}

.record-types-info code {
  padding: 2px 6px;
  background: var(--bg-secondary, #f9fafb);
  border-radius: 4px;
  font-size: 13px;
}

.record-types-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
  gap: 12px;
}

.record-type-item {
  background: var(--bg-secondary, #f9fafb);
  border-radius: 10px;
  padding: 16px;
  cursor: pointer;
  transition: all 0.15s ease;
}

.record-type-item:hover {
  background: var(--bg-hover, #e5e7eb);
}

.record-type-name {
  font-weight: 500;
  color: var(--text-primary, #111827);
  margin-bottom: 4px;
}

.record-type-count {
  font-size: 12px;
  color: var(--text-secondary, #6b7280);
  margin-bottom: 12px;
}

.record-type-view-btn {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 6px;
  padding: 8px 12px;
  background: var(--primary-500, #3b82f6);
  color: white;
  border: none;
  border-radius: 6px;
  cursor: pointer;
  font-size: 12px;
  font-weight: 500;
  transition: background 0.15s ease;
  width: 100%;
}

.record-type-view-btn:hover {
  background: var(--primary-600, #2563eb);
}

/* Panel Tab Context Menu */
.panel-tab-context-menu {
  background: var(--bg-primary, white);
  border: 1px solid var(--border-color, #e5e7eb);
  border-radius: 8px;
  box-shadow: 0 10px 40px rgba(0, 0, 0, 0.15);
  padding: 6px;
  min-width: 180px;
}

.panel-tab-context-menu .context-menu-item {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 10px 12px;
  border-radius: 6px;
  cursor: pointer;
  transition: background 0.15s ease;
  font-size: 13px;
  color: var(--text-primary, #111827);
}

.panel-tab-context-menu .context-menu-item:hover {
  background: var(--bg-secondary, #f9fafb);
}

.panel-tab-context-menu .context-menu-item i {
  font-size: 16px;
  color: var(--text-secondary, #6b7280);
}

.panel-tab-context-menu .context-menu-divider {
  height: 1px;
  background: var(--border-color, #e5e7eb);
  margin: 4px 0;
}

/* Set Dashboard Tabbed Mode */
.set-dashboard.tabbed {
  display: flex;
  flex-direction: column;
  height: 100%;
  overflow: hidden;
}

.set-dashboard.tabbed .set-dashboard-header {
  flex-shrink: 0;
}

.set-dashboard.tabbed .panel-tab-bar {
  flex-shrink: 0;
}

.set-dashboard.tabbed .panel-tab-content {
  flex: 1;
  overflow: auto;
}

/* Responsive adjustments */
@media (max-width: 768px) {
  .overview-stats-grid {
    grid-template-columns: repeat(2, 1fr);
  }

  .fields-grid {
    grid-template-columns: 1fr;
  }

  .record-types-grid {
    grid-template-columns: 1fr;
  }

  .panel-tab {
    min-width: 80px;
    padding: 8px;
  }

  .panel-tab-title {
    display: none;
  }
}

/* ============================================================================
   Browser Tab Close Button
   ============================================================================ */

.browser-tab .tab-close {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 18px;
  height: 18px;
  border: none;
  background: transparent;
  border-radius: 4px;
  cursor: pointer;
  opacity: 0;
  transition: all 0.15s ease;
  flex-shrink: 0;
  color: var(--text-secondary, #6b7280);
  margin-left: 4px;
}

.browser-tab:hover .tab-close {
  opacity: 0.7;
}

.browser-tab .tab-close:hover {
  opacity: 1 !important;
  background: var(--danger-bg, rgba(239, 68, 68, 0.1));
  color: var(--danger-500, #ef4444);
}

.browser-tab.pinned {
  min-width: 44px;
  max-width: 44px;
  padding: 8px 12px;
  justify-content: center;
}

.browser-tab.pinned .tab-title,
.browser-tab.pinned .tab-count,
.browser-tab.pinned .tab-close {
  display: none;
}

/* Tab Context Menu */
.tab-context-menu {
  background: var(--bg-primary, white);
  border: 1px solid var(--border-color, #e5e7eb);
  border-radius: 8px;
  box-shadow: 0 10px 40px rgba(0, 0, 0, 0.15);
  padding: 6px;
  min-width: 200px;
}

.tab-context-menu .context-menu-item {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 10px 12px;
  border-radius: 6px;
  cursor: pointer;
  transition: background 0.15s ease;
  font-size: 13px;
  color: var(--text-primary, #111827);
}

.tab-context-menu .context-menu-item:hover {
  background: var(--bg-secondary, #f9fafb);
}

.tab-context-menu .context-menu-item.disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

.tab-context-menu .context-menu-item.disabled:hover {
  background: transparent;
}

.tab-context-menu .context-menu-item i {
  font-size: 16px;
  color: var(--text-secondary, #6b7280);
}

.tab-context-menu .context-menu-divider {
  height: 1px;
  background: var(--border-color, #e5e7eb);
  margin: 4px 0;
}

/* ============================================================================
   New Tab Page
   ============================================================================ */

.new-tab-page {
  max-width: 900px;
  margin: 0 auto;
  padding: 60px 40px;
}

.new-tab-header {
  text-align: center;
  margin-bottom: 40px;
}

.new-tab-header h1 {
  font-size: 32px;
  font-weight: 300;
  color: var(--text-primary, #111827);
  margin: 0;
}

.new-tab-search {
  margin-bottom: 40px;
}

.new-tab-search-box {
  display: flex;
  align-items: center;
  gap: 12px;
  background: var(--bg-secondary, #f9fafb);
  border: 1px solid var(--border-color, #e5e7eb);
  border-radius: 24px;
  padding: 12px 20px;
  transition: all 0.2s ease;
}

.new-tab-search-box:focus-within {
  border-color: var(--primary-500, #3b82f6);
  box-shadow: 0 0 0 3px var(--primary-100, rgba(59, 130, 246, 0.2));
}

.new-tab-search-box i {
  font-size: 20px;
  color: var(--text-secondary, #6b7280);
}

.new-tab-search-box input {
  flex: 1;
  border: none;
  background: transparent;
  font-size: 16px;
  color: var(--text-primary, #111827);
  outline: none;
}

.new-tab-search-box input::placeholder {
  color: var(--text-muted, #9ca3af);
}

.new-tab-shortcuts {
  display: flex;
  justify-content: center;
  gap: 16px;
  margin-bottom: 48px;
  flex-wrap: wrap;
}

.new-tab-shortcut {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 8px;
  padding: 16px 20px;
  background: transparent;
  border: none;
  border-radius: 12px;
  cursor: pointer;
  transition: all 0.2s ease;
  min-width: 80px;
}

.new-tab-shortcut:hover {
  background: var(--bg-secondary, #f9fafb);
}

.new-tab-shortcut-icon {
  width: 48px;
  height: 48px;
  border-radius: 12px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 24px;
}

.new-tab-shortcut-icon.sources {
  background: var(--primary-100, #dbeafe);
  color: var(--primary-600, #2563eb);
}

.new-tab-shortcut-icon.definitions {
  background: var(--purple-100, #ede9fe);
  color: var(--purple-600, #7c3aed);
}

.new-tab-shortcut-icon.settings {
  background: var(--gray-100, #f3f4f6);
  color: var(--gray-600, #4b5563);
}

.new-tab-shortcut-icon.activity {
  background: var(--orange-100, #ffedd5);
  color: var(--orange-600, #ea580c);
}

.new-tab-shortcut-icon.shortcuts {
  background: var(--green-100, #dcfce7);
  color: var(--green-600, #16a34a);
}

.new-tab-shortcut-icon.import {
  background: var(--success-100, #dcfce7);
  color: var(--success-600, #16a34a);
}

.new-tab-shortcut span {
  font-size: 12px;
  color: var(--text-secondary, #6b7280);
  font-weight: 500;
}

.new-tab-section {
  margin-bottom: 40px;
}

.new-tab-section h2 {
  font-size: 14px;
  font-weight: 600;
  color: var(--text-secondary, #6b7280);
  text-transform: uppercase;
  letter-spacing: 0.5px;
  margin: 0 0 16px 0;
}

.new-tab-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
  gap: 12px;
}

.new-tab-item {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 12px 16px;
  background: var(--bg-secondary, #f9fafb);
  border: 1px solid transparent;
  border-radius: 10px;
  cursor: pointer;
  transition: all 0.15s ease;
  text-align: left;
}

.new-tab-item:hover {
  background: var(--bg-hover, #e5e7eb);
  border-color: var(--border-color, #e5e7eb);
}

.new-tab-item-icon {
  width: 36px;
  height: 36px;
  border-radius: 8px;
  background: var(--primary-100, #dbeafe);
  color: var(--primary-600, #2563eb);
  display: flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
}

.new-tab-item-icon i {
  font-size: 18px;
}

.new-tab-item-info {
  flex: 1;
  min-width: 0;
}

.new-tab-item-title {
  font-size: 14px;
  font-weight: 500;
  color: var(--text-primary, #111827);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.new-tab-item-meta {
  font-size: 12px;
  color: var(--text-secondary, #6b7280);
}

.new-tab-list {
  display: flex;
  flex-direction: column;
  gap: 4px;
}

.new-tab-closed-item {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 10px 14px;
  background: transparent;
  border: none;
  border-radius: 8px;
  cursor: pointer;
  transition: all 0.15s ease;
  text-align: left;
  width: 100%;
}

.new-tab-closed-item:hover {
  background: var(--bg-secondary, #f9fafb);
}

.new-tab-closed-item i {
  font-size: 18px;
  color: var(--text-secondary, #6b7280);
}

.new-tab-closed-item span {
  flex: 1;
  font-size: 14px;
  color: var(--text-primary, #111827);
}

.new-tab-closed-item small {
  font-size: 12px;
  color: var(--text-muted, #9ca3af);
}

/* ============================================================================
   Settings Page
   ============================================================================ */

.settings-page {
  max-width: 700px;
  margin: 0 auto;
  padding: 40px;
}

.settings-header {
  margin-bottom: 32px;
}

.settings-header h1 {
  display: flex;
  align-items: center;
  gap: 12px;
  font-size: 24px;
  font-weight: 600;
  color: var(--text-primary, #111827);
  margin: 0;
}

.settings-header h1 i {
  font-size: 28px;
  color: var(--text-secondary, #6b7280);
}

.settings-content {
  display: flex;
  flex-direction: column;
  gap: 32px;
}

.settings-section h2 {
  font-size: 14px;
  font-weight: 600;
  color: var(--text-secondary, #6b7280);
  text-transform: uppercase;
  letter-spacing: 0.5px;
  margin: 0 0 16px 0;
  padding-bottom: 8px;
  border-bottom: 1px solid var(--border-color, #e5e7eb);
}

.settings-item {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 16px 0;
  border-bottom: 1px solid var(--border-light, #f3f4f6);
}

.settings-item:last-child {
  border-bottom: none;
}

.settings-item-info {
  flex: 1;
}

.settings-item-label {
  font-size: 14px;
  font-weight: 500;
  color: var(--text-primary, #111827);
  margin-bottom: 4px;
}

.settings-item-desc {
  font-size: 13px;
  color: var(--text-secondary, #6b7280);
}

.settings-select {
  padding: 8px 12px;
  border: 1px solid var(--border-color, #e5e7eb);
  border-radius: 6px;
  background: var(--bg-primary, white);
  font-size: 14px;
  color: var(--text-primary, #111827);
  cursor: pointer;
}

.settings-toggle {
  position: relative;
  display: inline-block;
  width: 44px;
  height: 24px;
}

.settings-toggle input {
  opacity: 0;
  width: 0;
  height: 0;
}

.settings-toggle-slider {
  position: absolute;
  cursor: pointer;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background-color: var(--gray-300, #d1d5db);
  transition: 0.3s;
  border-radius: 24px;
}

.settings-toggle-slider:before {
  position: absolute;
  content: "";
  height: 18px;
  width: 18px;
  left: 3px;
  bottom: 3px;
  background-color: white;
  transition: 0.3s;
  border-radius: 50%;
}

.settings-toggle input:checked + .settings-toggle-slider {
  background-color: var(--primary-500, #3b82f6);
}

.settings-toggle input:checked + .settings-toggle-slider:before {
  transform: translateX(20px);
}

.settings-about {
  padding: 16px;
  background: var(--bg-secondary, #f9fafb);
  border-radius: 8px;
}

.settings-about p {
  margin: 0 0 4px 0;
  font-size: 14px;
  color: var(--text-primary, #111827);
}

.settings-about-desc {
  color: var(--text-secondary, #6b7280) !important;
  margin-top: 8px !important;
}

/* ============================================================================
   Activity Page
   ============================================================================ */

.activity-page {
  max-width: 1200px;
  margin: 0 auto;
  padding: 24px 32px;
  display: flex;
  flex-direction: column;
  height: 100%;
}

.activity-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 24px;
  flex-shrink: 0;
}

.activity-header-left {
  display: flex;
  align-items: center;
  gap: 16px;
}

.activity-header-left h1 {
  display: flex;
  align-items: center;
  gap: 12px;
  font-size: 24px;
  font-weight: 600;
  color: var(--text-primary, #111827);
  margin: 0;
}

.activity-header-left h1 i {
  font-size: 28px;
  color: var(--text-secondary, #6b7280);
}

.activity-count-badge {
  font-size: 13px;
  font-weight: 500;
  color: var(--text-secondary, #6b7280);
  background: var(--surface-secondary, #f3f4f6);
  padding: 4px 10px;
  border-radius: 12px;
}

.activity-header-right {
  display: flex;
  align-items: center;
  gap: 16px;
}

.activity-tab-filters {
  display: flex;
  gap: 8px;
}

.activity-view-toggle {
  display: flex;
  background: var(--surface-secondary, #f3f4f6);
  border-radius: 6px;
  padding: 2px;
}

.activity-view-btn {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 32px;
  height: 28px;
  background: transparent;
  border: none;
  border-radius: 4px;
  color: var(--text-secondary, #6b7280);
  cursor: pointer;
  transition: all 0.15s ease;
}

.activity-view-btn:hover {
  color: var(--text-primary, #111827);
  background: var(--surface-primary, #ffffff);
}

.activity-view-btn.active {
  background: var(--surface-primary, #ffffff);
  color: var(--accent-primary, #2563eb);
  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.05);
}

.activity-view-btn i {
  font-size: 16px;
}

.activity-content {
  flex: 1;
  min-height: 300px;
  overflow: auto;
}

.activity-empty-state {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 80px 40px;
  text-align: center;
  color: var(--text-secondary, #6b7280);
}

.activity-empty-state i {
  font-size: 48px;
  margin-bottom: 16px;
  opacity: 0.4;
}

.activity-empty-state h3 {
  font-size: 18px;
  font-weight: 600;
  color: var(--text-primary, #111827);
  margin: 0 0 8px 0;
}

.activity-empty-state p {
  margin: 0;
  font-size: 14px;
}

/* Activity Table in Tab */
.activity-table-wrapper {
  border: 1px solid var(--border-primary, #e5e7eb);
  border-radius: 8px;
  overflow: hidden;
}

.activity-table-wrapper .activity-table {
  width: 100%;
  border-collapse: collapse;
}

.activity-table-wrapper .activity-table thead {
  background: var(--surface-secondary, #f9fafb);
  border-bottom: 1px solid var(--border-primary, #e5e7eb);
}

.activity-table-wrapper .activity-table th {
  padding: 12px 16px;
  text-align: left;
  font-weight: 500;
  font-size: 12px;
  text-transform: uppercase;
  letter-spacing: 0.05em;
  color: var(--text-secondary, #6b7280);
}

.activity-table-wrapper .activity-table td {
  padding: 12px 16px;
  border-bottom: 1px solid var(--border-secondary, #f3f4f6);
}

.activity-table-wrapper .activity-table tbody tr:hover {
  background: var(--surface-secondary, #f9fafb);
}

.activity-table-wrapper .activity-table tbody tr:last-child td {
  border-bottom: none;
}

/* Activity JSON View */
.activity-json-view {
  border: 1px solid var(--border-primary, #e5e7eb);
  border-radius: 8px;
  overflow: hidden;
  display: flex;
  flex-direction: column;
  height: calc(100vh - 200px);
  min-height: 400px;
}

.activity-json-toolbar {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 12px 16px;
  background: var(--surface-secondary, #f9fafb);
  border-bottom: 1px solid var(--border-primary, #e5e7eb);
}

.activity-json-copy-btn {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 6px 12px;
  font-size: 13px;
  font-weight: 500;
  color: var(--text-secondary, #6b7280);
  background: var(--surface-primary, #ffffff);
  border: 1px solid var(--border-primary, #e5e7eb);
  border-radius: 6px;
  cursor: pointer;
  transition: all 0.15s ease;
}

.activity-json-copy-btn:hover {
  color: var(--text-primary, #111827);
  border-color: var(--border-secondary, #d1d5db);
  background: var(--surface-secondary, #f9fafb);
}

.activity-json-copy-btn i {
  font-size: 14px;
}

.activity-json-info {
  font-size: 13px;
  color: var(--text-secondary, #6b7280);
}

.activity-json-content {
  flex: 1;
  margin: 0;
  padding: 16px;
  overflow: auto;
  background: var(--surface-primary, #ffffff);
  font-family: 'SF Mono', 'Monaco', 'Inconsolata', 'Fira Code', monospace;
  font-size: 12px;
  line-height: 1.6;
  color: var(--text-primary, #111827);
}

.activity-json-content code {
  font-family: inherit;
}

/* Legacy activity-empty for backwards compatibility */
.activity-empty {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 80px 40px;
  text-align: center;
  color: var(--text-secondary, #6b7280);
}

.activity-empty i {
  font-size: 48px;
  margin-bottom: 16px;
  opacity: 0.4;
}

.activity-empty h3 {
  font-size: 18px;
  font-weight: 600;
  color: var(--text-primary, #111827);
  margin: 0 0 8px 0;
}

.activity-empty p {
  margin: 0;
  font-size: 14px;
}

/* ============================================================================
   Shortcuts Page
   ============================================================================ */

.shortcuts-page {
  max-width: 700px;
  margin: 0 auto;
  padding: 40px;
}

.shortcuts-header {
  margin-bottom: 32px;
}

.shortcuts-header h1 {
  display: flex;
  align-items: center;
  gap: 12px;
  font-size: 24px;
  font-weight: 600;
  color: var(--text-primary, #111827);
  margin: 0;
}

.shortcuts-header h1 i {
  font-size: 28px;
  color: var(--text-secondary, #6b7280);
}

.shortcuts-content {
  display: flex;
  flex-direction: column;
  gap: 32px;
}

.shortcuts-section h2 {
  font-size: 14px;
  font-weight: 600;
  color: var(--text-secondary, #6b7280);
  text-transform: uppercase;
  letter-spacing: 0.5px;
  margin: 0 0 16px 0;
  padding-bottom: 8px;
  border-bottom: 1px solid var(--border-color, #e5e7eb);
}

.shortcut-item {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 12px 0;
  border-bottom: 1px solid var(--border-light, #f3f4f6);
}

.shortcut-item:last-child {
  border-bottom: none;
}

.shortcut-desc {
  font-size: 14px;
  color: var(--text-primary, #111827);
}

.shortcut-keys {
  display: flex;
  gap: 4px;
  color: var(--text-secondary, #6b7280);
  font-size: 12px;
}

.shortcut-keys kbd {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  min-width: 24px;
  padding: 4px 8px;
  background: var(--bg-secondary, #f9fafb);
  border: 1px solid var(--border-color, #e5e7eb);
  border-radius: 4px;
  font-family: inherit;
  font-size: 11px;
  font-weight: 500;
  color: var(--text-primary, #111827);
  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.05);
}
/* ============================================================================
   CELL HISTORY INDICATOR (Ghost Trail)
   ============================================================================ */

/* Cell with history gets relative positioning for indicator */
td.cell-editable.has-history {
  position: relative;
}

/* History indicator button - improved visibility */
.cell-history-indicator {
  position: absolute;
  top: 4px;
  right: 4px;
  width: 20px;
  height: 20px;
  padding: 0;
  border: none;
  background: transparent;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  opacity: 0.5;
  transition: opacity var(--transition-fast);
  z-index: 5;
  border-radius: 50%;
}

/* Show indicator fully on cell hover */
td.cell-editable.has-history:hover .cell-history-indicator {
  opacity: 1;
  background: var(--bg-hover);
}

/* The dot itself - increased size for visibility */
.cell-history-indicator .history-dot {
  width: 10px;
  height: 10px;
  border-radius: 50%;
  background: var(--primary-400);
  transition: all var(--transition-fast);
}

/* Multiple changes - larger dot with ring */
.cell-history-indicator .history-dot.multiple {
  width: 12px;
  height: 12px;
  background: var(--primary-500);
  box-shadow: 0 0 0 2px var(--primary-200);
}

/* Hover state for indicator */
.cell-history-indicator:hover .history-dot {
  transform: scale(1.2);
  background: var(--primary-600);
}

/* Dark theme adjustments */
:root.dark-theme .cell-history-indicator .history-dot,
.dark-theme .cell-history-indicator .history-dot {
  background: var(--primary-400);
}

:root.dark-theme .cell-history-indicator .history-dot.multiple,
.dark-theme .cell-history-indicator .history-dot.multiple {
  box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.3);
}

/* ============================================================================
   FIELD HISTORY EVENT - Enhanced with Restore Button
   ============================================================================ */

.field-history-event .event-footer {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 8px;
  margin-top: 4px;
}

.field-history-event .event-actor {
  margin-top: 0;
}

/* Restore button in history events */
.event-restore-btn {
  display: inline-flex;
  align-items: center;
  gap: 4px;
  padding: 3px 8px;
  font-size: 11px;
  font-weight: 500;
  color: var(--primary-600);
  background: var(--primary-50);
  border: 1px solid var(--primary-200);
  border-radius: 4px;
  cursor: pointer;
  transition: all var(--transition-fast);
  opacity: 0;
}

.field-history-event:hover .event-restore-btn {
  opacity: 1;
}

.event-restore-btn:hover {
  background: var(--primary-100);
  border-color: var(--primary-300);
  color: var(--primary-700);
}

.event-restore-btn i {
  font-size: 12px;
}

/* Dark theme for restore button */
:root.dark-theme .event-restore-btn,
.dark-theme .event-restore-btn {
  color: var(--primary-400);
  background: rgba(59, 130, 246, 0.1);
  border-color: rgba(59, 130, 246, 0.3);
}

:root.dark-theme .event-restore-btn:hover,
.dark-theme .event-restore-btn:hover {
  background: rgba(59, 130, 246, 0.2);
  border-color: rgba(59, 130, 246, 0.5);
  color: var(--primary-300);
}

/* ============================================================================
   RECORD HISTORY DRAWER
   ============================================================================ */

.record-history-drawer {
  position: fixed;
  top: 0;
  right: 0;
  width: 420px;
  max-width: 90vw;
  height: 100vh;
  background: var(--bg-primary);
  border-left: 1px solid var(--border-color);
  box-shadow: -4px 0 24px rgba(0, 0, 0, 0.15);
  z-index: 1000;
  display: flex;
  flex-direction: column;
  transform: translateX(100%);
  transition: transform var(--transition-normal);
}

.record-history-drawer.open {
  transform: translateX(0);
}

.record-history-drawer-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 16px 20px;
  border-bottom: 1px solid var(--border-color);
  background: var(--bg-secondary);
}

.record-history-drawer-title {
  display: flex;
  align-items: center;
  gap: 10px;
  font-size: 15px;
  font-weight: 600;
  color: var(--text-primary);
}

.record-history-drawer-title i {
  color: var(--primary-500);
  font-size: 18px;
}

.record-history-drawer-close {
  width: 32px;
  height: 32px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: none;
  border: none;
  color: var(--text-secondary);
  cursor: pointer;
  border-radius: 6px;
  transition: all var(--transition-fast);
}

.record-history-drawer-close:hover {
  background: var(--bg-hover);
  color: var(--text-primary);
}

.record-history-drawer-filters {
  display: flex;
  gap: 8px;
  padding: 12px 20px;
  border-bottom: 1px solid var(--border-color);
  background: var(--bg-tertiary);
  flex-wrap: wrap;
}

.record-history-filter {
  display: inline-flex;
  align-items: center;
  gap: 4px;
  padding: 5px 10px;
  font-size: 12px;
  color: var(--text-secondary);
  background: var(--bg-primary);
  border: 1px solid var(--border-color);
  border-radius: 6px;
  cursor: pointer;
  transition: all var(--transition-fast);
}

.record-history-filter:hover {
  border-color: var(--primary-300);
  color: var(--text-primary);
}

.record-history-filter.active {
  background: var(--primary-50);
  border-color: var(--primary-300);
  color: var(--primary-700);
}

.record-history-drawer-content {
  flex: 1;
  overflow-y: auto;
  padding: 16px 20px;
}

.record-history-date-group {
  margin-bottom: 20px;
}

.record-history-date-label {
  font-size: 11px;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  color: var(--text-muted);
  margin-bottom: 10px;
  padding-bottom: 6px;
  border-bottom: 1px solid var(--border-light);
}

.record-history-event {
  display: flex;
  gap: 12px;
  padding: 12px;
  margin-bottom: 8px;
  background: var(--bg-secondary);
  border: 1px solid var(--border-light);
  border-radius: 8px;
  transition: all var(--transition-fast);
}

.record-history-event:hover {
  border-color: var(--border-color);
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.06);
}

.record-history-event-icon {
  width: 32px;
  height: 32px;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 8px;
  font-size: 14px;
  flex-shrink: 0;
}

.record-history-event-icon.created {
  background: var(--success-50);
  color: var(--success-600);
}

.record-history-event-icon.modified {
  background: var(--primary-50);
  color: var(--primary-600);
}

.record-history-event-icon.deleted {
  background: var(--danger-50);
  color: var(--danger-600);
}

.record-history-event-content {
  flex: 1;
  min-width: 0;
}

.record-history-event-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 8px;
  margin-bottom: 4px;
}

.record-history-event-field {
  font-size: 13px;
  font-weight: 600;
  color: var(--text-primary);
}

.record-history-event-time {
  font-size: 11px;
  color: var(--text-muted);
}

.record-history-event-change {
  display: flex;
  align-items: center;
  gap: 6px;
  font-size: 12px;
  margin-bottom: 6px;
}

.record-history-event-change .old-val {
  color: var(--text-muted);
  text-decoration: line-through;
  max-width: 120px;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.record-history-event-change .arrow {
  color: var(--text-muted);
  font-size: 10px;
}

.record-history-event-change .new-val {
  color: var(--text-primary);
  font-weight: 500;
  max-width: 120px;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.record-history-event-actor {
  font-size: 11px;
  color: var(--text-muted);
  display: flex;
  align-items: center;
  gap: 4px;
}

.record-history-event-actor i {
  font-size: 12px;
}

.record-history-empty {
  text-align: center;
  padding: 40px 20px;
  color: var(--text-muted);
}

.record-history-empty i {
  font-size: 40px;
  margin-bottom: 12px;
  opacity: 0.4;
}

.record-history-empty-title {
  font-size: 14px;
  font-weight: 500;
  color: var(--text-secondary);
  margin-bottom: 4px;
}

.record-history-empty-hint {
  font-size: 12px;
}

/* Drawer overlay */
.record-history-overlay {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(0, 0, 0, 0.3);
  z-index: 999;
  opacity: 0;
  visibility: hidden;
  transition: all var(--transition-normal);
}

.record-history-overlay.visible {
  opacity: 1;
  visibility: visible;
}

/* Dark theme for drawer */
:root.dark-theme .record-history-drawer,
.dark-theme .record-history-drawer {
  box-shadow: -4px 0 24px rgba(0, 0, 0, 0.4);
}

:root.dark-theme .record-history-filter.active,
.dark-theme .record-history-filter.active {
  background: rgba(59, 130, 246, 0.15);
  color: var(--primary-400);
}

:root.dark-theme .record-history-event-icon.created,
.dark-theme .record-history-event-icon.created {
  background: rgba(34, 197, 94, 0.15);
}

:root.dark-theme .record-history-event-icon.modified,
.dark-theme .record-history-event-icon.modified {
  background: rgba(59, 130, 246, 0.15);
}

:root.dark-theme .record-history-event-icon.deleted,
.dark-theme .record-history-event-icon.deleted {
  background: rgba(239, 68, 68, 0.15);
}

/* ============================================================================
   FIELD HISTORY POPOVER FOOTER
   ============================================================================ */

.field-history-footer {
  padding: 12px 16px;
  border-top: 1px solid var(--border-light);
  background: var(--bg-tertiary);
}

.field-history-view-all-btn {
  width: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 6px;
  padding: 8px 12px;
  font-size: 12px;
  font-weight: 500;
  color: var(--primary-600);
  background: var(--primary-50);
  border: 1px solid var(--primary-200);
  border-radius: 6px;
  cursor: pointer;
  transition: all var(--transition-fast);
}

.field-history-view-all-btn:hover {
  background: var(--primary-100);
  border-color: var(--primary-300);
}

.field-history-view-all-btn i {
  font-size: 14px;
}

:root.dark-theme .field-history-view-all-btn,
.dark-theme .field-history-view-all-btn {
  color: var(--primary-400);
  background: rgba(59, 130, 246, 0.1);
  border-color: rgba(59, 130, 246, 0.3);
}

:root.dark-theme .field-history-view-all-btn:hover,
.dark-theme .field-history-view-all-btn:hover {
  background: rgba(59, 130, 246, 0.2);
  border-color: rgba(59, 130, 246, 0.5);
}

/* ===== Key Suggestion Panel Overlay ===== */
.key-suggestion-overlay {
  position: fixed;
  top: 0;
  right: 0;
  bottom: 0;
  left: 0;
  background: rgba(0, 0, 0, 0.5);
  z-index: 1000;
  display: flex;
  align-items: center;
  justify-content: center;
  animation: fadeIn 0.2s ease;
}

.key-suggestion-overlay[style*="display: none"] {
  display: none !important;
}

.key-suggestion-container {
  width: 90%;
  max-width: 600px;
  max-height: 80vh;
  overflow: hidden;
}

/* ===== Semantic Engine - Definition Detail Enhancements ===== */

/* Back Navigation */
.definition-back-nav {
  margin-bottom: 16px;
}

.definition-back-nav .btn-link {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  color: var(--primary-500);
  font-size: 13px;
  font-weight: 500;
  text-decoration: none;
  padding: 4px 0;
  background: none;
  border: none;
  cursor: pointer;
  transition: color var(--transition-fast);
}

.definition-back-nav .btn-link:hover {
  color: var(--primary-600);
  text-decoration: underline;
}

/* Semantic Philosophy Tagline */
.semantic-tagline {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 10px 14px;
  margin-bottom: 20px;
  background: linear-gradient(135deg, rgba(139, 92, 246, 0.08), rgba(59, 130, 246, 0.08));
  border: 1px solid rgba(139, 92, 246, 0.2);
  border-radius: var(--radius-lg);
  font-size: 13px;
  color: var(--text-secondary);
  font-style: italic;
}

.semantic-tagline i {
  color: var(--accent-purple, #8B5CF6);
  font-size: 16px;
}

/* Glossary Title Row with Grounding Badge */
.glossary-title-row {
  display: flex;
  align-items: center;
  gap: 12px;
  flex-wrap: wrap;
}

.glossary-title-row h2 {
  margin: 0;
}

.glossary-title-row h2 .source-label {
  font-size: 0.65em;
  font-weight: 400;
  color: var(--text-muted);
}

/* External Grounding Badge */
.grounding-badge {
  display: inline-flex;
  align-items: center;
  gap: 5px;
  padding: 4px 10px;
  background: linear-gradient(135deg, rgba(16, 185, 129, 0.15), rgba(59, 130, 246, 0.15));
  border: 1px solid rgba(16, 185, 129, 0.3);
  border-radius: 20px;
  font-size: 11px;
  font-weight: 500;
  color: var(--success-600);
  white-space: nowrap;
}

.grounding-badge i {
  font-size: 12px;
}

/* Externally Grounded Icon */
.glossary-icon.externally-grounded {
  background: linear-gradient(135deg, rgba(16, 185, 129, 0.15), rgba(59, 130, 246, 0.15));
  border-color: rgba(16, 185, 129, 0.3);
}

.glossary-icon.externally-grounded i {
  color: var(--success-600);
}

/* Wikidata ID Badge */
.wikidata-id {
  display: inline-flex;
  align-items: center;
  padding: 2px 8px;
  background: var(--bg-tertiary);
  border: 1px solid var(--border-secondary);
  border-radius: 4px;
  font-family: var(--font-mono);
  font-size: 12px;
  font-weight: 600;
  color: var(--primary-500);
  margin-right: 8px;
}

/* Grounding Hint */
.grounding-hint {
  font-size: 11px;
  color: var(--text-muted);
  margin-top: 4px;
  font-style: italic;
}

/* ===== Meaning Footprint Section ===== */
.meaning-footprint-section {
  background: var(--bg-secondary);
}

.footprint-currently-used,
.footprint-not-used {
  margin-bottom: 16px;
}

.footprint-label {
  display: block;
  font-size: 12px;
  font-weight: 500;
  color: var(--text-muted);
  text-transform: uppercase;
  letter-spacing: 0.5px;
  margin-bottom: 8px;
}

.footprint-none {
  font-size: 13px;
  color: var(--text-muted);
  font-style: italic;
}

.footprint-benefits {
  padding-top: 12px;
  border-top: 1px solid var(--border-subtle);
}

.footprint-benefit-list {
  list-style: none;
  margin: 0;
  padding: 0;
}

.footprint-benefit-list li {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 6px 0;
  font-size: 13px;
  color: var(--text-secondary);
}

.footprint-benefit-list li i {
  color: var(--success-500);
  font-size: 14px;
}

/* ===== Impact Preview Section ===== */
.impact-preview-section {
  background: var(--bg-secondary);
}

.impact-preview-section.collapsed .impact-preview-content {
  display: none;
}

.impact-preview-section.collapsed .toggle-icon {
  transform: rotate(-90deg);
}

.collapsible-header {
  cursor: pointer;
  user-select: none;
  display: flex;
  align-items: center;
  gap: 8px;
}

.collapsible-header .toggle-icon {
  margin-left: auto;
  transition: transform var(--transition-fast);
  color: var(--text-muted);
}

.impact-preview-content {
  padding-top: 12px;
}

.impact-intro {
  font-size: 13px;
  color: var(--text-secondary);
  margin: 0 0 12px 0;
}

.impact-list {
  list-style: none;
  margin: 0;
  padding: 0;
}

.impact-list li {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 8px 12px;
  background: var(--bg-tertiary);
  border-radius: var(--radius);
  margin-bottom: 8px;
  font-size: 13px;
  color: var(--text-secondary);
}

.impact-list li i {
  color: var(--primary-500);
  font-size: 16px;
  width: 20px;
  flex-shrink: 0;
}

.impact-list li strong {
  color: var(--text-primary);
}

/* Operator Trace */
.operator-trace {
  margin-top: 12px;
}

.operator-trace summary {
  display: flex;
  align-items: center;
  gap: 6px;
  font-size: 12px;
  color: var(--text-muted);
  cursor: pointer;
  padding: 6px 0;
}

.operator-trace summary:hover {
  color: var(--text-secondary);
}

.operator-trace-content {
  padding: 12px;
  background: var(--bg-primary);
  border: 1px solid var(--border-subtle);
  border-radius: var(--radius);
  font-size: 12px;
  color: var(--text-muted);
  line-height: 1.8;
  margin-top: 8px;
}

.operator-trace-content code {
  display: inline-block;
  padding: 2px 6px;
  background: var(--accent-purple, rgba(139, 92, 246, 0.15));
  color: var(--accent-purple, #8B5CF6);
  border-radius: 4px;
  font-family: var(--font-mono);
  font-size: 11px;
  font-weight: 600;
  min-width: 32px;
  text-align: center;
  margin-right: 4px;
}

/* ===== Semantic Actions Section ===== */
.semantic-actions-section {
  background: var(--bg-secondary);
}

.semantic-actions-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
  gap: 10px;
}

.semantic-action-btn {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 8px;
  padding: 16px 12px;
  background: var(--bg-tertiary);
  border: 1px solid var(--border-secondary);
  border-radius: var(--radius-lg);
  cursor: pointer;
  transition: all var(--transition-fast);
  text-align: center;
}

.semantic-action-btn:hover {
  background: var(--bg-hover);
  border-color: var(--primary-400);
  transform: translateY(-2px);
  box-shadow: var(--shadow-md);
}

.semantic-action-btn i {
  font-size: 24px;
  color: var(--primary-500);
}

.semantic-action-btn span {
  font-size: 12px;
  font-weight: 500;
  color: var(--text-secondary);
}

.semantic-action-btn:hover span {
  color: var(--text-primary);
}

/* ===== Interpretation Notes Section ===== */
.interpretation-notes-section {
  background: var(--bg-secondary);
}

.interpretation-notes-section.collapsed .interpretation-notes-content {
  display: none;
}

.interpretation-notes-section.collapsed .toggle-icon {
  transform: rotate(-90deg);
}

.optional-badge {
  font-size: 10px;
  font-weight: 400;
  color: var(--text-muted);
  padding: 2px 6px;
  background: var(--bg-tertiary);
  border-radius: 10px;
  margin-left: 8px;
}

.interpretation-notes-content {
  padding-top: 12px;
}

.scope-selector {
  margin-bottom: 16px;
}

.scope-label {
  display: block;
  font-size: 12px;
  font-weight: 500;
  color: var(--text-muted);
  margin-bottom: 8px;
}

.scope-options {
  display: flex;
  flex-wrap: wrap;
  gap: 12px;
}

.scope-option {
  display: flex;
  align-items: center;
  gap: 6px;
  font-size: 13px;
  color: var(--text-secondary);
  cursor: pointer;
}

.scope-option input[type="checkbox"] {
  accent-color: var(--primary-500);
}

.notes-input-group {
  margin-bottom: 12px;
}

.notes-input-group label {
  display: block;
  font-size: 12px;
  font-weight: 500;
  color: var(--text-muted);
  margin-bottom: 6px;
}

.notes-input-group textarea {
  width: 100%;
  min-height: 80px;
  padding: 10px 12px;
  background: var(--bg-tertiary);
  border: 1px solid var(--border-secondary);
  border-radius: var(--radius);
  font-size: 13px;
  color: var(--text-primary);
  resize: vertical;
}

.notes-input-group textarea:focus {
  outline: none;
  border-color: var(--primary-400);
  box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
}

.btn-sm {
  padding: 6px 12px;
  font-size: 12px;
}

/* ===== Apply to Fields Modal ===== */
.apply-to-fields-modal {
  max-height: 60vh;
  overflow-y: auto;
}

.apply-modal-header {
  margin-bottom: 16px;
}

.apply-modal-header p {
  margin: 0 0 8px 0;
}

.apply-modal-hint {
  font-size: 13px;
  color: var(--text-muted);
}

.apply-field-section {
  margin-bottom: 20px;
}

.apply-field-section .section-label {
  display: flex;
  align-items: center;
  gap: 6px;
  font-size: 12px;
  font-weight: 600;
  color: var(--text-muted);
  text-transform: uppercase;
  letter-spacing: 0.5px;
  margin-bottom: 10px;
}

.apply-field-section .section-label i {
  font-size: 14px;
  color: var(--accent-purple, #8B5CF6);
}

.apply-field-list {
  display: flex;
  flex-direction: column;
  gap: 6px;
  max-height: 200px;
  overflow-y: auto;
  padding: 4px;
}

.apply-field-option {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 10px 12px;
  background: var(--bg-secondary);
  border: 1px solid var(--border-secondary);
  border-radius: var(--radius);
  cursor: pointer;
  transition: all var(--transition-fast);
}

.apply-field-option:hover {
  background: var(--bg-tertiary);
  border-color: var(--primary-400);
}

.apply-field-option.already-linked {
  background: rgba(16, 185, 129, 0.08);
  border-color: rgba(16, 185, 129, 0.3);
}

.apply-field-option input[type="checkbox"] {
  accent-color: var(--primary-500);
  width: 16px;
  height: 16px;
}

.apply-field-option .field-info {
  flex: 1;
  display: flex;
  flex-direction: column;
  gap: 2px;
}

.apply-field-option .field-name {
  font-weight: 500;
  color: var(--text-primary);
  font-size: 13px;
}

.apply-field-option .set-name {
  font-size: 11px;
  color: var(--text-muted);
}

.apply-field-option .match-reason {
  font-size: 11px;
  color: var(--success-600);
  font-style: italic;
}

.apply-field-option .linked-badge {
  display: inline-flex;
  align-items: center;
  gap: 4px;
  padding: 3px 8px;
  background: var(--success-100);
  color: var(--success-700);
  border-radius: 10px;
  font-size: 10px;
  font-weight: 500;
}

.apply-modal-info {
  display: flex;
  align-items: flex-start;
  gap: 8px;
  padding: 10px 12px;
  background: var(--info-50);
  border: 1px solid var(--info-100);
  border-radius: var(--radius);
  font-size: 12px;
  color: var(--info-700);
}

.apply-modal-info i {
  font-size: 14px;
  margin-top: 1px;
}

/* Dark theme adjustments for apply modal */
:root.dark-theme .apply-modal-info,
.dark-theme .apply-modal-info {
  background: rgba(59, 130, 246, 0.1);
  border-color: rgba(59, 130, 246, 0.2);
  color: var(--primary-400);
}

:root.dark-theme .apply-field-option .linked-badge,
.dark-theme .apply-field-option .linked-badge {
  background: rgba(16, 185, 129, 0.15);
  color: var(--success-500);
}

/* ===== Definition Comparison Modal ===== */
.definition-comparison {
  text-align: center;
}

.comparison-header {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 16px;
  margin-bottom: 24px;
}

.comparison-header .def-name {
  font-weight: 600;
  font-size: 16px;
  color: var(--text-primary);
}

.comparison-header .vs {
  font-size: 12px;
  color: var(--text-muted);
  text-transform: uppercase;
  letter-spacing: 1px;
}

.comparison-stats {
  display: flex;
  justify-content: center;
  gap: 24px;
  margin-bottom: 24px;
}

.comparison-stats .stat-item {
  text-align: center;
  padding: 16px 24px;
  background: var(--bg-secondary);
  border-radius: var(--radius-lg);
}

.comparison-stats .stat-item.overlap {
  background: rgba(16, 185, 129, 0.1);
  border: 1px solid rgba(16, 185, 129, 0.2);
}

.comparison-stats .stat-value {
  display: block;
  font-size: 28px;
  font-weight: 700;
  color: var(--text-primary);
}

.comparison-stats .stat-label {
  font-size: 11px;
  color: var(--text-muted);
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.comparison-section {
  text-align: left;
  margin-top: 16px;
}

.comparison-section h4 {
  font-size: 12px;
  font-weight: 600;
  color: var(--text-muted);
  text-transform: uppercase;
  letter-spacing: 0.5px;
  margin-bottom: 8px;
}

.term-list {
  display: flex;
  flex-wrap: wrap;
  gap: 6px;
}

.term-tag {
  display: inline-block;
  padding: 4px 10px;
  background: var(--bg-tertiary);
  border: 1px solid var(--border-secondary);
  border-radius: 12px;
  font-size: 12px;
  color: var(--text-secondary);
}

/* ===== Find Related & Radio Options ===== */
.find-related-form,
.compare-definitions-form,
.create-refinement-form {
  min-width: 400px;
}

.related-search-options {
  display: flex;
  flex-direction: column;
  gap: 10px;
  margin-top: 8px;
}

.radio-option {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 10px 12px;
  background: var(--bg-secondary);
  border: 1px solid var(--border-secondary);
  border-radius: var(--radius);
  cursor: pointer;
  transition: all var(--transition-fast);
}

.radio-option:hover {
  background: var(--bg-tertiary);
  border-color: var(--primary-400);
}

.radio-option input[type="radio"] {
  accent-color: var(--primary-500);
}

.hint-text {
  font-size: 12px;
  color: var(--text-muted);
  font-style: italic;
  margin-top: 12px;
}

/* ===== Semantic Engine Dark Theme Adjustments ===== */
:root.dark-theme .semantic-tagline,
.dark-theme .semantic-tagline {
  background: linear-gradient(135deg, rgba(139, 92, 246, 0.12), rgba(59, 130, 246, 0.12));
  border-color: rgba(139, 92, 246, 0.25);
}

:root.dark-theme .grounding-badge,
.dark-theme .grounding-badge {
  background: linear-gradient(135deg, rgba(16, 185, 129, 0.2), rgba(59, 130, 246, 0.2));
  border-color: rgba(16, 185, 129, 0.4);
  color: var(--success-500);
}

:root.dark-theme .footprint-benefit-list li i,
.dark-theme .footprint-benefit-list li i {
  color: var(--success-400);
}

:root.dark-theme .operator-trace-content code,
.dark-theme .operator-trace-content code {
  background: rgba(139, 92, 246, 0.2);
  color: #a78bfa;
}

:root.dark-theme .semantic-action-btn:hover,
.dark-theme .semantic-action-btn:hover {
  background: rgba(59, 130, 246, 0.15);
  border-color: var(--primary-500);
}

:root.dark-theme .comparison-stats .stat-item.overlap,
.dark-theme .comparison-stats .stat-item.overlap {
  background: rgba(16, 185, 129, 0.15);
  border-color: rgba(16, 185, 129, 0.3);
}

/* ============================================================================
   Relational Merge UI Styles
   Phase-Space Mode - Recognition, Boundary Handling, Decision Timing
   ============================================================================ */

.relational-merge-overlay {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(0, 0, 0, 0.5);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 1000;
  padding: 20px;
}

.relational-merge-modal {
  background: var(--bg-primary);
  border-radius: 12px;
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
  width: 100%;
  max-width: 1000px;
  max-height: 90vh;
  display: flex;
  flex-direction: column;
  overflow: hidden;
}

.relational-merge-header {
  padding: 20px 24px;
  border-bottom: 1px solid var(--border-color);
  position: relative;
}

.relational-merge-header h2 {
  font-size: 18px;
  font-weight: 600;
  display: flex;
  align-items: center;
  gap: 10px;
  margin: 0 0 4px 0;
}

.relational-merge-header h2 i {
  color: var(--accent-color);
}

.relational-merge-subtitle {
  font-size: 13px;
  color: var(--text-muted);
  margin: 0;
  font-style: italic;
}

.relational-merge-close {
  position: absolute;
  top: 16px;
  right: 16px;
  background: none;
  border: none;
  font-size: 20px;
  color: var(--text-muted);
  cursor: pointer;
  padding: 4px;
  border-radius: 4px;
}

.relational-merge-close:hover {
  background: var(--bg-hover);
  color: var(--text-primary);
}

.relational-merge-body {
  flex: 1;
  overflow-y: auto;
  padding: 24px;
  display: flex;
  flex-direction: column;
  gap: 24px;
}

/* Step Indicator */
.rm-step-indicator {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
  padding-bottom: 16px;
  border-bottom: 1px solid var(--border-color);
  margin-bottom: 8px;
}

.rm-step {
  display: flex;
  align-items: center;
  gap: 8px;
  opacity: 0.5;
}

.rm-step.active {
  opacity: 1;
}

.rm-step.completed {
  opacity: 0.8;
}

.rm-step-icon {
  width: 28px;
  height: 28px;
  border-radius: 50%;
  background: var(--bg-secondary);
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 14px;
  color: var(--text-muted);
}

.rm-step.active .rm-step-icon {
  background: var(--accent-color);
  color: white;
}

.rm-step.completed .rm-step-icon {
  background: var(--success-color, #22c55e);
  color: white;
}

.rm-step-label {
  font-size: 12px;
  color: var(--text-secondary);
  display: none;
}

@media (min-width: 600px) {
  .rm-step-label {
    display: block;
  }
}

.rm-step.active .rm-step-label {
  color: var(--text-primary);
  font-weight: 500;
}

.rm-step-line {
  width: 40px;
  height: 2px;
  background: var(--border-color);
}

/* Source Selection */
.rm-sources-section {
  display: grid;
  grid-template-columns: 1fr auto 1fr;
  gap: 24px;
  align-items: start;
}

.rm-source-picker {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.rm-source-picker label {
  font-size: 12px;
  font-weight: 600;
  color: var(--text-muted);
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.rm-source-select {
  padding: 10px 12px;
  border: 1px solid var(--border-color);
  border-radius: 6px;
  background: var(--bg-primary);
  font-size: 14px;
  color: var(--text-primary);
  cursor: pointer;
}

.rm-source-select:focus {
  outline: none;
  border-color: var(--accent-color);
  box-shadow: 0 0 0 2px rgba(0, 112, 243, 0.1);
}

.rm-source-connector {
  display: flex;
  align-items: center;
  justify-content: center;
  padding-top: 28px;
}

.rm-connector-icon {
  width: 40px;
  height: 40px;
  border-radius: 50%;
  background: var(--bg-secondary);
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 18px;
  color: var(--accent-color);
}

.rm-source-preview {
  background: var(--bg-secondary);
  border-radius: 6px;
  padding: 12px;
  margin-top: 8px;
}

.rm-source-stats {
  display: flex;
  gap: 16px;
  font-size: 12px;
  color: var(--text-muted);
  margin-bottom: 8px;
}

.rm-source-stats span {
  display: flex;
  align-items: center;
  gap: 4px;
}

.rm-field-list {
  display: flex;
  flex-wrap: wrap;
  gap: 6px;
}

.rm-field-chip {
  display: inline-flex;
  align-items: center;
  gap: 4px;
  padding: 4px 10px;
  background: var(--bg-primary);
  border-radius: 12px;
  font-size: 11px;
  color: var(--text-secondary);
}

.rm-field-chip i {
  font-size: 10px;
  color: var(--text-muted);
}

.rm-field-more {
  font-size: 11px;
  color: var(--text-muted);
  padding: 4px 8px;
}

/* Purpose Banner */
.rm-purpose-banner {
  background: linear-gradient(135deg, rgba(0, 112, 243, 0.08) 0%, rgba(139, 92, 246, 0.08) 100%);
  border: 1px solid rgba(0, 112, 243, 0.2);
  border-radius: 8px;
  padding: 12px 16px;
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 12px;
}

.rm-purpose-banner p {
  margin: 0;
  font-size: 13px;
  color: var(--text-secondary);
}

.rm-purpose-dismiss {
  background: none;
  border: none;
  color: var(--text-muted);
  cursor: pointer;
  padding: 4px;
  border-radius: 4px;
}

.rm-purpose-dismiss:hover {
  background: rgba(0, 0, 0, 0.1);
}

/* Panels (Recognition, Boundary, Decision) */
.rm-panels {
  display: flex;
  flex-direction: column;
  gap: 20px;
}

.rm-panel {
  background: var(--bg-secondary);
  border: 1px solid var(--border-color);
  border-radius: 10px;
  padding: 16px;
  transition: border-color 0.2s ease;
}

.rm-panel.rm-panel-set {
  border-color: var(--accent-color);
  background: linear-gradient(135deg, rgba(0, 112, 243, 0.03) 0%, var(--bg-secondary) 100%);
}

.rm-panel-header {
  display: flex;
  align-items: baseline;
  gap: 12px;
  margin-bottom: 6px;
}

.rm-panel-header h3 {
  font-size: 15px;
  font-weight: 600;
  margin: 0;
  display: flex;
  align-items: center;
  gap: 8px;
}

.rm-panel-header h3 i {
  color: var(--accent-color);
}

.rm-panel-question {
  font-size: 13px;
  color: var(--text-muted);
  font-style: italic;
}

.rm-panel-sql-hint {
  font-size: 11px;
  color: var(--text-muted);
  background: var(--bg-tertiary, rgba(0,0,0,0.05));
  padding: 6px 10px;
  border-radius: 6px;
  margin: 8px 0 12px 0;
  display: flex;
  align-items: center;
  gap: 6px;
}

.rm-panel-sql-hint i {
  color: var(--accent-color);
  opacity: 0.7;
}

.rm-option-sql-hint {
  margin-top: 6px;
  display: none;
}

.rm-option-sql-hint code {
  font-family: var(--font-mono, monospace);
  font-size: 10px;
  background: var(--bg-secondary);
  padding: 2px 6px;
  border-radius: 3px;
  color: var(--accent-color);
}

.rm-option.selected .rm-option-sql-hint,
.rm-option:hover .rm-option-sql-hint {
  display: block;
}

.rm-panel-prompt {
  font-size: 12px;
  color: var(--text-secondary);
  margin: 0 0 12px 0;
}

/* Panel Options */
.rm-options {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.rm-option {
  display: flex;
  align-items: flex-start;
  gap: 12px;
  padding: 12px;
  border: 1px solid var(--border-color);
  border-radius: 8px;
  background: var(--bg-primary);
  cursor: pointer;
  transition: all 0.15s ease;
  text-align: left;
}

.rm-option:hover {
  border-color: var(--accent-color);
  background: rgba(0, 112, 243, 0.02);
}

.rm-option.selected {
  border-color: var(--accent-color);
  background: rgba(0, 112, 243, 0.06);
}

.rm-option-icon {
  width: 36px;
  height: 36px;
  border-radius: 8px;
  background: var(--bg-secondary);
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 16px;
  color: var(--text-muted);
  flex-shrink: 0;
}

.rm-option.selected .rm-option-icon {
  background: var(--accent-color);
  color: white;
}

.rm-option-content {
  flex: 1;
  display: flex;
  flex-direction: column;
  gap: 2px;
}

.rm-option-title {
  font-size: 14px;
  font-weight: 600;
  color: var(--text-primary);
}

.rm-option-desc {
  font-size: 12px;
  color: var(--text-secondary);
  font-style: italic;
}

.rm-option-details {
  font-size: 11px;
  color: var(--text-muted);
  margin-top: 4px;
  line-height: 1.4;
  display: none;
}

.rm-option.selected .rm-option-details,
.rm-option:hover .rm-option-details {
  display: block;
}

.rm-option-tag {
  font-size: 10px;
  color: var(--text-muted);
  background: var(--bg-secondary);
  padding: 3px 8px;
  border-radius: 10px;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  flex-shrink: 0;
}

.rm-option.selected .rm-option-tag {
  background: var(--accent-color);
  color: white;
}

/* Direction Picker (for one-sided recognition) */
.rm-direction-picker {
  margin-top: 12px;
  padding-top: 12px;
  border-top: 1px solid var(--border-color);
}

.rm-direction-picker label {
  font-size: 12px;
  color: var(--text-muted);
  display: block;
  margin-bottom: 8px;
}

.rm-direction-options {
  display: flex;
  gap: 8px;
}

.rm-direction-btn {
  flex: 1;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
  padding: 10px;
  border: 1px solid var(--border-color);
  border-radius: 6px;
  background: var(--bg-primary);
  cursor: pointer;
  font-size: 12px;
  color: var(--text-secondary);
  transition: all 0.15s ease;
}

.rm-direction-btn:hover {
  border-color: var(--accent-color);
}

.rm-direction-btn.selected {
  border-color: var(--accent-color);
  background: rgba(0, 112, 243, 0.06);
  color: var(--accent-color);
}

/* Panel Status and Notes */
.rm-panel-status {
  margin-top: 12px;
  font-size: 12px;
  color: var(--success-color, #22c55e);
  display: flex;
  align-items: center;
  gap: 6px;
}

.rm-panel-note {
  margin-top: 10px;
  padding: 8px 12px;
  background: rgba(234, 179, 8, 0.1);
  border-radius: 6px;
  font-size: 12px;
  color: var(--warning-color, #d97706);
  display: flex;
  align-items: center;
  gap: 8px;
}

/* Phase Summary */
.rm-phase-summary {
  background: var(--bg-secondary);
  border: 1px solid var(--border-color);
  border-radius: 10px;
  padding: 16px;
  margin-top: 8px;
}

.rm-phase-incomplete {
  text-align: center;
  padding: 24px;
}

.rm-phase-header {
  display: flex;
  align-items: center;
  gap: 10px;
  margin-bottom: 12px;
  font-size: 14px;
  font-weight: 600;
  color: var(--text-primary);
}

.rm-phase-header i {
  color: var(--text-muted);
}

.rm-phase-complete .rm-phase-header i {
  color: var(--success-color, #22c55e);
}

.rm-mode-code {
  margin-left: auto;
  font-size: 11px;
  font-family: monospace;
  background: var(--bg-primary);
  padding: 2px 8px;
  border-radius: 4px;
  color: var(--text-muted);
}

.rm-mode-name {
  font-size: 15px;
  font-weight: 600;
  color: var(--accent-color);
  margin-bottom: 12px;
}

.rm-phase-message {
  font-size: 13px;
  color: var(--text-muted);
  margin: 0;
}

.rm-phase-values {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 12px;
  margin-bottom: 12px;
}

.rm-phase-value {
  display: flex;
  flex-direction: column;
  gap: 2px;
}

.rm-phase-value label {
  font-size: 10px;
  color: var(--text-muted);
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.rm-phase-value span {
  font-size: 13px;
  color: var(--text-primary);
  font-weight: 500;
}

.rm-phase-description {
  font-size: 12px;
  color: var(--text-secondary);
  margin: 0 0 12px 0;
  font-style: italic;
  line-height: 1.5;
}

.rm-phase-recommendations {
  margin-bottom: 12px;
}

.rm-recommendation {
  display: flex;
  align-items: flex-start;
  gap: 8px;
  padding: 8px 12px;
  background: rgba(34, 197, 94, 0.1);
  border-radius: 6px;
  font-size: 12px;
  color: var(--success-color, #22c55e);
}

.rm-phase-warnings {
  display: flex;
  flex-direction: column;
  gap: 8px;
  margin-bottom: 12px;
}

.rm-warning {
  display: flex;
  align-items: flex-start;
  gap: 8px;
  padding: 8px 12px;
  background: rgba(234, 179, 8, 0.08);
  border-radius: 6px;
  font-size: 12px;
  color: var(--warning-color, #d97706);
}

/* Derived Operation Details */
.rm-derived-operation {
  border-top: 1px solid var(--border-color);
  padding-top: 12px;
}

.rm-derived-operation summary {
  cursor: pointer;
  font-size: 12px;
  color: var(--text-muted);
  display: flex;
  align-items: center;
  gap: 6px;
}

.rm-derived-operation summary:hover {
  color: var(--text-primary);
}

.rm-derived-content {
  margin-top: 12px;
  padding: 12px;
  background: var(--bg-primary);
  border-radius: 6px;
  font-size: 12px;
}

.rm-derived-behavior {
  margin-bottom: 12px;
}

.rm-derived-behavior strong {
  display: block;
  margin-bottom: 6px;
  color: var(--text-primary);
}

.rm-derived-behavior ul {
  margin: 0;
  padding-left: 20px;
  color: var(--text-secondary);
}

.rm-derived-behavior li {
  margin-bottom: 4px;
}

.rm-derived-sql {
  margin-bottom: 8px;
}

.rm-derived-sql strong {
  color: var(--text-primary);
}

.rm-derived-sql code {
  display: block;
  margin-top: 6px;
  padding: 8px 12px;
  background: var(--bg-secondary);
  border-radius: 4px;
  font-family: monospace;
  font-size: 11px;
  color: var(--accent-color);
}

.rm-derived-note {
  font-size: 11px;
  color: var(--text-muted);
  font-style: italic;
  margin: 8px 0 0 0;
}

/* Conditions Section */
.rm-conditions-section,
.rm-output-section {
  background: var(--bg-secondary);
  border-radius: 10px;
  padding: 16px;
}

.rm-conditions-section h3,
.rm-output-section h3 {
  font-size: 15px;
  font-weight: 600;
  margin: 0 0 4px 0;
  display: flex;
  align-items: center;
  gap: 8px;
}

.rm-conditions-section h3 i,
.rm-output-section h3 i {
  color: var(--accent-color);
}

.rm-section-desc {
  font-size: 12px;
  color: var(--text-muted);
  margin: 0 0 12px 0;
}

.rm-conditions-list {
  display: flex;
  flex-direction: column;
  gap: 8px;
  margin-bottom: 12px;
}

.rm-condition-empty {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
  padding: 24px;
  background: var(--bg-primary);
  border-radius: 6px;
  color: var(--text-muted);
  font-size: 13px;
}

.rm-condition {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 8px;
  background: var(--bg-primary);
  border-radius: 6px;
}

.rm-condition select {
  flex: 1;
  padding: 8px;
  border: 1px solid var(--border-color);
  border-radius: 4px;
  background: var(--bg-primary);
  font-size: 13px;
  color: var(--text-primary);
}

.rm-condition-operator {
  flex: 0 0 100px !important;
}

.rm-condition-remove {
  background: none;
  border: none;
  color: var(--text-muted);
  cursor: pointer;
  padding: 6px;
  border-radius: 4px;
}

.rm-condition-remove:hover {
  background: var(--bg-hover);
  color: var(--error-color, #ef4444);
}

.rm-add-condition-btn {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 8px 12px;
  border: 1px dashed var(--border-color);
  border-radius: 6px;
  background: transparent;
  color: var(--text-muted);
  cursor: pointer;
  font-size: 12px;
  transition: all 0.15s ease;
}

.rm-add-condition-btn:hover {
  border-color: var(--accent-color);
  color: var(--accent-color);
}

/* Output Fields */
.rm-output-controls {
  display: flex;
  gap: 8px;
  margin-bottom: 12px;
}

.rm-output-btn {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 8px 12px;
  border: 1px solid var(--border-color);
  border-radius: 6px;
  background: var(--bg-primary);
  color: var(--text-secondary);
  cursor: pointer;
  font-size: 12px;
  transition: all 0.15s ease;
}

.rm-output-btn:hover {
  border-color: var(--accent-color);
  color: var(--accent-color);
}

.rm-output-list {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
}

.rm-output-empty {
  color: var(--text-muted);
  font-size: 12px;
}

.rm-output-field {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 6px 10px;
  background: var(--bg-primary);
  border: 1px solid var(--border-color);
  border-radius: 6px;
  font-size: 12px;
}

.rm-output-source {
  width: 18px;
  height: 18px;
  border-radius: 4px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 10px;
  font-weight: 600;
}

.rm-output-source.left {
  background: rgba(0, 112, 243, 0.15);
  color: var(--accent-color);
}

.rm-output-source.right {
  background: rgba(139, 92, 246, 0.15);
  color: #8b5cf6;
}

.rm-output-name {
  color: var(--text-primary);
}

.rm-output-remove {
  background: none;
  border: none;
  color: var(--text-muted);
  cursor: pointer;
  padding: 2px;
  border-radius: 2px;
  font-size: 10px;
}

.rm-output-remove:hover {
  color: var(--error-color, #ef4444);
}

/* Name Section */
.rm-name-section {
  background: var(--bg-secondary);
  border-radius: 10px;
  padding: 16px;
}

.rm-name-section label {
  font-size: 12px;
  font-weight: 600;
  color: var(--text-muted);
  text-transform: uppercase;
  letter-spacing: 0.5px;
  display: block;
  margin-bottom: 8px;
}

.rm-set-name-input {
  width: 100%;
  padding: 10px 12px;
  border: 1px solid var(--border-color);
  border-radius: 6px;
  background: var(--bg-primary);
  font-size: 14px;
  color: var(--text-primary);
}

.rm-set-name-input:focus {
  outline: none;
  border-color: var(--accent-color);
}

/* Review Section */
.rm-review-section {
  background: var(--bg-secondary);
  border-radius: 10px;
  padding: 16px;
}

.rm-review-section h3 {
  font-size: 15px;
  font-weight: 600;
  margin: 0 0 16px 0;
  display: flex;
  align-items: center;
  gap: 8px;
}

.rm-review-section h3 i {
  color: var(--accent-color);
}

.rm-review-grid {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 16px;
}

.rm-review-item {
  display: flex;
  flex-direction: column;
  gap: 4px;
}

.rm-review-item label {
  font-size: 10px;
  color: var(--text-muted);
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.rm-review-sources {
  display: flex;
  align-items: center;
  gap: 8px;
  font-size: 13px;
  color: var(--text-primary);
}

.rm-review-sources i {
  color: var(--accent-color);
}

.rm-review-position {
  display: flex;
  flex-direction: column;
  gap: 2px;
  font-size: 12px;
  color: var(--text-secondary);
}

.rm-review-position strong {
  color: var(--text-primary);
}

.rm-review-operation {
  font-size: 12px;
  padding: 6px 10px;
  background: var(--bg-primary);
  border-radius: 4px;
  color: var(--accent-color);
  display: inline-block;
}

.rm-review-conditions {
  display: flex;
  flex-direction: column;
  gap: 4px;
  font-size: 12px;
  color: var(--text-secondary);
}

.rm-review-empty {
  color: var(--text-muted);
  font-style: italic;
}

/* Preview */
.rm-review-preview {
  margin-top: 16px;
}

.rm-preview-btn {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 10px 16px;
  border: 1px solid var(--border-color);
  border-radius: 6px;
  background: var(--bg-secondary);
  color: var(--text-secondary);
  cursor: pointer;
  font-size: 13px;
  transition: all 0.15s ease;
}

.rm-preview-btn:hover {
  border-color: var(--accent-color);
  color: var(--accent-color);
}

.rm-preview-results {
  margin-top: 12px;
}

.rm-preview-error {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 12px;
  background: rgba(239, 68, 68, 0.1);
  border-radius: 6px;
  color: var(--error-color, #ef4444);
  font-size: 13px;
}

.rm-preview-table-wrapper {
  overflow-x: auto;
  border-radius: 6px;
  border: 1px solid var(--border-color);
}

.rm-preview-table {
  width: 100%;
  border-collapse: collapse;
  font-size: 12px;
}

.rm-preview-table th,
.rm-preview-table td {
  padding: 8px 12px;
  text-align: left;
  border-bottom: 1px solid var(--border-color);
}

.rm-preview-table th {
  background: var(--bg-secondary);
  font-weight: 600;
  color: var(--text-muted);
}

.rm-preview-table td {
  color: var(--text-primary);
}

.rm-preview-info {
  margin-top: 8px;
  font-size: 11px;
  color: var(--text-muted);
  text-align: right;
}

/* Review Warning */
.rm-review-warning {
  display: flex;
  align-items: center;
  gap: 8px;
  margin-top: 16px;
  padding: 10px 14px;
  background: rgba(234, 179, 8, 0.1);
  border-radius: 6px;
  font-size: 12px;
  color: var(--warning-color, #d97706);
}

/* Footer */
.relational-merge-footer {
  padding: 16px 24px;
  border-top: 1px solid var(--border-color);
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.rm-footer-left,
.rm-footer-right {
  display: flex;
  gap: 8px;
}

.rm-btn {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 10px 16px;
  border-radius: 6px;
  font-size: 13px;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.15s ease;
}

.rm-btn-secondary {
  background: var(--bg-secondary);
  border: 1px solid var(--border-color);
  color: var(--text-secondary);
}

.rm-btn-secondary:hover {
  background: var(--bg-hover);
  color: var(--text-primary);
}

.rm-btn-primary {
  background: var(--accent-color);
  border: 1px solid var(--accent-color);
  color: white;
}

.rm-btn-primary:hover {
  background: var(--accent-color-dark, #0060df);
}

.rm-btn-primary:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

.rm-btn-primary:disabled:hover {
  background: var(--accent-color);
}

/* =============================================================================
   DEFINITIONS VIEW - ENHANCED UX BRANDING
   Polished, on-brand styling for the Definitions detail view
   ============================================================================= */

/* Enhanced Semantic Tagline Banner */
.semantic-tagline {
  background: linear-gradient(135deg,
    rgba(139, 92, 246, 0.12) 0%,
    rgba(59, 130, 246, 0.12) 50%,
    rgba(139, 92, 246, 0.08) 100%);
  border: 1px solid rgba(139, 92, 246, 0.25);
  border-radius: 12px;
  padding: 12px 18px;
  margin-bottom: 24px;
  box-shadow: 0 2px 8px rgba(139, 92, 246, 0.08);
  position: relative;
  overflow: hidden;
}

.semantic-tagline::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 2px;
  background: linear-gradient(90deg, var(--primary-500), #8b5cf6, var(--primary-500));
  opacity: 0.6;
}

.semantic-tagline i {
  color: #a78bfa;
  font-size: 18px;
  filter: drop-shadow(0 0 4px rgba(167, 139, 250, 0.4));
}

.semantic-tagline span {
  font-weight: 500;
  letter-spacing: 0.01em;
}

/* Enhanced Definition Header */
.definition-glossary-header {
  background: linear-gradient(180deg, var(--bg-secondary) 0%, transparent 100%);
  padding: 24px;
  margin: -20px -20px 24px -20px;
  border-radius: 12px 12px 0 0;
  border-bottom: 1px solid var(--border-color);
}

.glossary-icon {
  width: 56px;
  height: 56px;
  border-radius: 14px;
  background: linear-gradient(135deg, rgba(139, 92, 246, 0.2), rgba(168, 85, 247, 0.3));
  border: 1px solid rgba(168, 85, 247, 0.3);
  box-shadow:
    0 4px 12px rgba(139, 92, 246, 0.15),
    inset 0 1px 0 rgba(255, 255, 255, 0.1);
  font-size: 26px;
  color: #a78bfa;
  transition: all 0.2s ease;
}

.glossary-icon:hover {
  transform: scale(1.05);
  box-shadow:
    0 6px 16px rgba(139, 92, 246, 0.25),
    inset 0 1px 0 rgba(255, 255, 255, 0.1);
}

.glossary-icon.externally-grounded {
  background: linear-gradient(135deg, rgba(16, 185, 129, 0.2), rgba(59, 130, 246, 0.2));
  border-color: rgba(16, 185, 129, 0.4);
  box-shadow:
    0 4px 12px rgba(16, 185, 129, 0.15),
    inset 0 1px 0 rgba(255, 255, 255, 0.1);
}

.glossary-icon.externally-grounded i {
  color: #34d399;
}

.glossary-title-area h2 {
  font-size: 1.625rem;
  font-weight: 700;
  background: linear-gradient(135deg, var(--text-primary) 0%, var(--text-secondary) 100%);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  margin-bottom: 10px;
}

.glossary-title-row h2 .source-label {
  -webkit-text-fill-color: var(--text-muted);
  font-weight: 500;
}

/* Enhanced Grounding Badge */
.grounding-badge {
  background: linear-gradient(135deg, rgba(16, 185, 129, 0.18), rgba(59, 130, 246, 0.18));
  border: 1px solid rgba(16, 185, 129, 0.35);
  padding: 5px 12px;
  border-radius: 20px;
  font-size: 11px;
  font-weight: 600;
  color: #34d399;
  box-shadow: 0 2px 6px rgba(16, 185, 129, 0.12);
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.grounding-badge i {
  font-size: 13px;
  filter: drop-shadow(0 0 3px rgba(52, 211, 153, 0.4));
}

/* Enhanced Local Warning */
.glossary-uri.local-warning {
  background: linear-gradient(135deg, rgba(249, 115, 22, 0.08), rgba(249, 115, 22, 0.04));
  padding: 12px 14px;
  border-radius: 10px;
  border: 1px solid rgba(249, 115, 22, 0.25);
  margin-top: 8px;
}

.glossary-uri.local-warning i {
  color: #fb923c;
  font-size: 16px;
}

.glossary-uri.local-warning .local-only-text {
  color: #fb923c;
  font-weight: 600;
}

.glossary-uri.local-warning .local-hint {
  color: var(--text-muted);
  font-size: 12px;
  padding-left: 24px;
  margin-top: 6px;
  opacity: 0.9;
}

/* Enhanced Action Buttons */
.glossary-actions {
  display: flex;
  gap: 10px;
}

.glossary-actions .btn-primary {
  background: linear-gradient(135deg, var(--primary-500), var(--primary-600));
  border: none;
  box-shadow: 0 4px 12px rgba(59, 130, 246, 0.3);
  padding: 10px 18px;
  font-weight: 600;
  transition: all 0.2s ease;
}

.glossary-actions .btn-primary:hover {
  background: linear-gradient(135deg, var(--primary-400), var(--primary-500));
  box-shadow: 0 6px 16px rgba(59, 130, 246, 0.4);
  transform: translateY(-1px);
}

.glossary-actions .btn-secondary {
  background: var(--bg-tertiary);
  border: 1px solid var(--border-secondary);
  transition: all 0.2s ease;
}

.glossary-actions .btn-secondary:hover:not(:disabled) {
  background: var(--bg-hover);
  border-color: var(--primary-400);
  color: var(--primary-400);
}

.glossary-actions .btn-danger {
  background: rgba(239, 68, 68, 0.1);
  border-color: rgba(239, 68, 68, 0.3);
  color: var(--danger-500);
}

.glossary-actions .btn-danger:hover {
  background: rgba(239, 68, 68, 0.2);
  border-color: rgba(239, 68, 68, 0.5);
}

/* Enhanced Glossary Sections */
.glossary-section {
  margin-bottom: 20px;
  padding: 20px 24px;
  background: var(--bg-secondary);
  border-radius: 14px;
  border: 1px solid var(--border-color);
  transition: all 0.2s ease;
  position: relative;
}

.glossary-section:hover {
  border-color: var(--border-secondary);
  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.08);
}

.glossary-section h3 {
  font-size: 14px;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  margin-bottom: 14px;
  color: var(--text-secondary);
}

.glossary-section h3 i {
  font-size: 18px;
  color: var(--primary-400);
}

/* Purpose Section Enhancement */
.purpose-section {
  background: linear-gradient(135deg, var(--bg-secondary) 0%, rgba(139, 92, 246, 0.03) 100%);
  border-left: 3px solid var(--primary-500);
}

.purpose-section h3 i {
  color: var(--primary-500);
}

.purpose-text {
  font-size: 15px;
  line-height: 1.65;
  color: var(--text-secondary);
}

/* Meaning Footprint Section Enhancement */
.meaning-footprint-section {
  background: linear-gradient(135deg, var(--bg-secondary) 0%, rgba(16, 185, 129, 0.03) 100%);
}

.meaning-footprint-section h3 i {
  color: var(--success-500);
}

.meaning-footprint-section.unused {
  background: linear-gradient(135deg, var(--bg-secondary) 0%, rgba(148, 163, 184, 0.03) 100%);
}

.meaning-footprint-section.unused h3 i {
  color: var(--text-muted);
}

.footprint-label {
  font-size: 11px;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 0.8px;
  color: var(--text-muted);
  margin-bottom: 10px;
}

.used-by-item {
  background: linear-gradient(135deg, var(--bg-tertiary), rgba(16, 185, 129, 0.08));
  border: 1px solid rgba(16, 185, 129, 0.2);
  padding: 8px 12px;
  border-radius: 8px;
  font-size: 13px;
  transition: all 0.15s ease;
}

.used-by-item:hover {
  border-color: rgba(16, 185, 129, 0.4);
  box-shadow: 0 2px 8px rgba(16, 185, 129, 0.15);
  transform: translateY(-1px);
}

.used-by-item i {
  color: var(--success-500);
  font-size: 14px;
}

.used-by-item .set-name {
  font-weight: 600;
  color: var(--text-primary);
}

.used-by-item .field-name {
  color: #a78bfa;
  font-weight: 500;
}

.footprint-benefit-list li {
  padding: 10px 14px;
  background: var(--bg-tertiary);
  border-radius: 8px;
  margin-bottom: 8px;
  border: 1px solid transparent;
  transition: all 0.15s ease;
}

.footprint-benefit-list li:hover {
  border-color: var(--border-secondary);
  background: var(--bg-hover);
}

.footprint-benefit-list li i {
  color: var(--success-500);
  font-size: 16px;
}

/* Impact Preview Section Enhancement */
.impact-preview-section {
  background: linear-gradient(135deg, var(--bg-secondary) 0%, rgba(59, 130, 246, 0.03) 100%);
}

.impact-preview-section h3 i:first-child {
  color: #facc15;
  filter: drop-shadow(0 0 3px rgba(250, 204, 21, 0.4));
}

.collapsible-header {
  padding: 4px 0;
  border-radius: 8px;
  transition: all 0.15s ease;
}

.collapsible-header:hover {
  color: var(--primary-500);
}

.collapsible-header .toggle-icon {
  width: 24px;
  height: 24px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: var(--bg-tertiary);
  border-radius: 6px;
  font-size: 14px;
}

.impact-list li {
  background: linear-gradient(135deg, var(--bg-tertiary) 0%, rgba(59, 130, 246, 0.05) 100%);
  border: 1px solid var(--border-subtle);
  padding: 12px 16px;
  border-radius: 10px;
  transition: all 0.15s ease;
}

.impact-list li:hover {
  border-color: var(--primary-400);
  box-shadow: 0 2px 8px rgba(59, 130, 246, 0.12);
}

.impact-list li i {
  width: 32px;
  height: 32px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: rgba(59, 130, 246, 0.12);
  border-radius: 8px;
  color: var(--primary-400);
  font-size: 16px;
}

/* Enhanced Semantic Actions Section */
.semantic-actions-section {
  background: linear-gradient(135deg, var(--bg-secondary) 0%, rgba(139, 92, 246, 0.04) 100%);
  border: 1px solid rgba(139, 92, 246, 0.15);
}

.semantic-actions-section h3 i {
  color: #a78bfa;
  animation: sparkle 2s ease-in-out infinite;
}

@keyframes sparkle {
  0%, 100% { opacity: 1; transform: scale(1); }
  50% { opacity: 0.8; transform: scale(1.1); }
}

.semantic-actions-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
  gap: 14px;
}

.semantic-action-btn {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 12px;
  padding: 24px 16px;
  background: linear-gradient(180deg, var(--bg-tertiary) 0%, var(--bg-secondary) 100%);
  border: 1px solid var(--border-secondary);
  border-radius: 16px;
  cursor: pointer;
  transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);
  text-align: center;
  position: relative;
  overflow: hidden;
}

.semantic-action-btn::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: linear-gradient(135deg, transparent 0%, rgba(139, 92, 246, 0.08) 100%);
  opacity: 0;
  transition: opacity 0.25s ease;
}

.semantic-action-btn:hover::before {
  opacity: 1;
}

.semantic-action-btn:hover {
  border-color: rgba(139, 92, 246, 0.4);
  transform: translateY(-4px);
  box-shadow:
    0 8px 24px rgba(139, 92, 246, 0.2),
    0 4px 8px rgba(0, 0, 0, 0.1);
}

.semantic-action-btn:active {
  transform: translateY(-2px);
}

.semantic-action-btn i {
  font-size: 28px;
  color: var(--primary-400);
  transition: all 0.25s ease;
  position: relative;
  z-index: 1;
}

.semantic-action-btn:hover i {
  color: #a78bfa;
  transform: scale(1.1);
}

.semantic-action-btn span {
  font-size: 13px;
  font-weight: 600;
  color: var(--text-secondary);
  position: relative;
  z-index: 1;
  transition: color 0.2s ease;
}

.semantic-action-btn:hover span {
  color: var(--text-primary);
}

/* Enhanced Interpretation Notes Section */
.interpretation-notes-section {
  background: linear-gradient(135deg, var(--bg-secondary) 0%, rgba(249, 115, 22, 0.03) 100%);
}

.interpretation-notes-section h3 i:first-child {
  color: #fb923c;
}

.optional-badge {
  background: linear-gradient(135deg, var(--bg-tertiary), rgba(148, 163, 184, 0.15));
  border: 1px solid var(--border-subtle);
  padding: 3px 10px;
  border-radius: 12px;
  font-size: 10px;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.scope-options {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
}

.scope-option {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 8px 14px;
  background: var(--bg-tertiary);
  border: 1px solid var(--border-secondary);
  border-radius: 8px;
  cursor: pointer;
  transition: all 0.15s ease;
}

.scope-option:hover {
  border-color: var(--primary-400);
  background: var(--bg-hover);
}

.scope-option:has(input:checked) {
  border-color: var(--primary-500);
  background: rgba(59, 130, 246, 0.08);
}

.notes-input-group textarea {
  background: var(--bg-tertiary);
  border: 1px solid var(--border-secondary);
  border-radius: 10px;
  padding: 14px 16px;
  font-size: 14px;
  transition: all 0.2s ease;
}

.notes-input-group textarea:focus {
  border-color: var(--primary-500);
  box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.15);
}

/* Enhanced Definition Source Cards */
.definition-source-section {
  margin-bottom: 20px;
}

.definition-source-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
  gap: 16px;
}

.definition-source-card {
  background: linear-gradient(180deg, var(--bg-secondary) 0%, var(--bg-tertiary) 100%);
  border: 1px solid var(--border-color);
  border-radius: 14px;
  overflow: hidden;
  transition: all 0.2s ease;
}

.definition-source-card:hover {
  border-color: var(--border-secondary);
  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.08);
}

.definition-source-card-header {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 14px 18px;
  background: linear-gradient(135deg, rgba(139, 92, 246, 0.08), rgba(59, 130, 246, 0.08));
  border-bottom: 1px solid var(--border-subtle);
  font-weight: 700;
  font-size: 12px;
  text-transform: uppercase;
  letter-spacing: 0.6px;
  color: var(--text-secondary);
}

.definition-source-card-header i {
  font-size: 18px;
  color: var(--primary-400);
}

.definition-source-card-content {
  padding: 16px 18px;
}

.definition-source-field {
  display: flex;
  flex-direction: column;
  gap: 4px;
  padding: 10px 0;
  border-bottom: 1px solid var(--border-subtle);
}

.definition-source-field:last-child {
  border-bottom: none;
  padding-bottom: 0;
}

.definition-source-field .field-label {
  font-size: 11px;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 0.6px;
  color: var(--text-muted);
}

.definition-source-field .field-value {
  font-size: 14px;
  color: var(--text-primary);
}

.definition-source-badge {
  display: inline-flex;
  align-items: center;
  gap: 4px;
  padding: 4px 10px;
  background: linear-gradient(135deg, rgba(139, 92, 246, 0.12), rgba(59, 130, 246, 0.12));
  border: 1px solid rgba(139, 92, 246, 0.2);
  border-radius: 6px;
  font-size: 12px;
  font-weight: 600;
  color: #a78bfa;
}

.definition-source-link {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  color: var(--primary-500);
  font-weight: 500;
  transition: all 0.15s ease;
}

.definition-source-link:hover {
  color: var(--primary-400);
  text-decoration: underline;
}

.definition-source-status {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  padding: 6px 12px;
  border-radius: 20px;
  font-size: 12px;
  font-weight: 600;
}

.definition-source-status.status-current {
  background: linear-gradient(135deg, rgba(16, 185, 129, 0.15), rgba(16, 185, 129, 0.08));
  border: 1px solid rgba(16, 185, 129, 0.3);
  color: var(--success-500);
}

.definition-source-status.status-superseded {
  background: linear-gradient(135deg, rgba(249, 115, 22, 0.15), rgba(249, 115, 22, 0.08));
  border: 1px solid rgba(249, 115, 22, 0.3);
  color: #fb923c;
}

/* Enhanced Terms & Properties Section */
.definition-terms-section {
  background: var(--bg-secondary);
  border: 1px solid var(--border-color);
  border-radius: 14px;
  padding: 20px 24px;
  margin-bottom: 20px;
}

.definition-terms-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 18px;
  padding-bottom: 14px;
  border-bottom: 1px solid var(--border-subtle);
}

.definition-terms-header h3 {
  display: flex;
  align-items: center;
  gap: 10px;
  font-size: 15px;
  font-weight: 700;
  margin: 0;
  color: var(--text-primary);
}

.definition-terms-header h3 i {
  color: var(--primary-400);
  font-size: 20px;
}

.terms-count {
  display: inline-flex;
  align-items: center;
  padding: 4px 12px;
  background: linear-gradient(135deg, rgba(139, 92, 246, 0.12), rgba(59, 130, 246, 0.12));
  border: 1px solid rgba(139, 92, 246, 0.2);
  border-radius: 20px;
  font-size: 12px;
  font-weight: 600;
  color: #a78bfa;
}

/* Terms Toolbar */
.terms-toolbar {
  display: flex;
  flex-wrap: wrap;
  gap: 12px;
  margin-bottom: 16px;
  padding: 14px 16px;
  background: var(--bg-tertiary);
  border-radius: 10px;
  border: 1px solid var(--border-subtle);
}

.terms-search-box {
  display: flex;
  align-items: center;
  gap: 10px;
  flex: 1;
  min-width: 220px;
  padding: 10px 14px;
  background: var(--bg-secondary);
  border: 1px solid var(--border-secondary);
  border-radius: 8px;
  transition: all 0.2s ease;
}

.terms-search-box:focus-within {
  border-color: var(--primary-500);
  box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.15);
}

.terms-search-box i {
  color: var(--text-muted);
  font-size: 16px;
}

.terms-search-box input {
  flex: 1;
  border: none;
  background: transparent;
  font-size: 14px;
  color: var(--text-primary);
  outline: none;
}

.terms-search-box input::placeholder {
  color: var(--text-muted);
}

.terms-filters {
  display: flex;
  flex-wrap: wrap;
  gap: 12px;
  align-items: center;
}

.filter-group {
  display: flex;
  align-items: center;
  gap: 8px;
}

.filter-group label {
  font-size: 12px;
  font-weight: 600;
  color: var(--text-muted);
  text-transform: uppercase;
  letter-spacing: 0.4px;
}

.filter-group select {
  padding: 8px 12px;
  background: var(--bg-secondary);
  border: 1px solid var(--border-secondary);
  border-radius: 8px;
  font-size: 13px;
  color: var(--text-primary);
  cursor: pointer;
  transition: all 0.15s ease;
}

.filter-group select:hover {
  border-color: var(--primary-400);
}

.filter-group select:focus {
  border-color: var(--primary-500);
  box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.15);
  outline: none;
}

.terms-results-info {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 12px;
  font-size: 13px;
  color: var(--text-muted);
}

.terms-results-info .btn-link {
  color: var(--primary-500);
  font-size: 12px;
}

/* Enhanced Terms Table */
.definition-terms-table.enhanced {
  border: 1px solid var(--border-color);
  border-radius: 12px;
  overflow: hidden;
}

.definition-terms-table.enhanced .data-table {
  margin: 0;
}

.definition-terms-table.enhanced th {
  background: linear-gradient(180deg, var(--bg-tertiary) 0%, var(--bg-secondary) 100%);
  padding: 14px 16px;
  font-size: 11px;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 0.6px;
  color: var(--text-muted);
  border-bottom: 1px solid var(--border-color);
}

.definition-terms-table.enhanced .th-content {
  display: flex;
  align-items: center;
  gap: 8px;
}

.definition-terms-table.enhanced .th-sort-btn {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 24px;
  height: 24px;
  padding: 0;
  background: transparent;
  border: none;
  border-radius: 6px;
  color: var(--text-muted);
  cursor: pointer;
  transition: all 0.15s ease;
}

.definition-terms-table.enhanced .th-sort-btn:hover {
  background: var(--bg-hover);
  color: var(--primary-500);
}

.definition-terms-table.enhanced td {
  padding: 14px 16px;
  font-size: 14px;
  border-bottom: 1px solid var(--border-subtle);
  vertical-align: middle;
}

.definition-terms-table.enhanced tbody tr {
  transition: all 0.15s ease;
}

.definition-terms-table.enhanced tbody tr:hover {
  background: linear-gradient(90deg, rgba(139, 92, 246, 0.04), transparent);
}

.definition-terms-table.enhanced tbody tr:last-child td {
  border-bottom: none;
}

.term-name {
  display: flex;
  align-items: center;
  gap: 8px;
  font-weight: 600;
  color: var(--text-primary);
}

.term-name i {
  width: 28px;
  height: 28px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: linear-gradient(135deg, rgba(168, 85, 247, 0.15), rgba(139, 92, 246, 0.15));
  border-radius: 6px;
  color: #a78bfa;
  font-size: 14px;
}

.type-badge {
  display: inline-flex;
  align-items: center;
  padding: 4px 10px;
  background: var(--bg-tertiary);
  border: 1px solid var(--border-secondary);
  border-radius: 6px;
  font-size: 12px;
  font-family: var(--font-mono);
  color: var(--text-secondary);
}

.term-description {
  color: var(--text-secondary);
  font-size: 13px;
  line-height: 1.5;
}

.term-uri-link {
  display: inline-flex;
  align-items: center;
  gap: 4px;
  padding: 4px 8px;
  background: rgba(59, 130, 246, 0.08);
  border-radius: 4px;
  font-size: 12px;
  font-family: var(--font-mono);
  color: var(--primary-500);
  text-decoration: none;
  transition: all 0.15s ease;
}

.term-uri-link:hover {
  background: rgba(59, 130, 246, 0.15);
  color: var(--primary-400);
}

/* Empty State Enhancement */
.definition-empty-terms {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 12px;
  padding: 48px 24px;
  background: var(--bg-tertiary);
  border: 2px dashed var(--border-secondary);
  border-radius: 12px;
  text-align: center;
}

.definition-empty-terms i {
  font-size: 32px;
  color: var(--text-muted);
  opacity: 0.6;
}

.definition-empty-terms span {
  font-size: 14px;
  color: var(--text-muted);
}

/* Add Term Button Enhancement */
.definition-add-term-section {
  margin-top: 20px;
}

.definition-add-term-section .btn {
  display: inline-flex;
  align-items: center;
  gap: 8px;
  padding: 12px 20px;
  background: linear-gradient(180deg, var(--bg-tertiary) 0%, var(--bg-secondary) 100%);
  border: 1px dashed var(--border-secondary);
  border-radius: 10px;
  font-weight: 600;
  color: var(--text-secondary);
  transition: all 0.2s ease;
}

.definition-add-term-section .btn:hover {
  border-style: solid;
  border-color: var(--primary-400);
  color: var(--primary-500);
  background: rgba(59, 130, 246, 0.08);
}

.definition-add-term-section .btn i {
  font-size: 18px;
}

/* Light Theme Adjustments for Enhanced Definitions */
:root.light-theme .semantic-tagline,
.light-theme .semantic-tagline {
  background: linear-gradient(135deg,
    rgba(139, 92, 246, 0.08) 0%,
    rgba(59, 130, 246, 0.08) 50%,
    rgba(139, 92, 246, 0.05) 100%);
  border-color: rgba(139, 92, 246, 0.2);
}

:root.light-theme .glossary-icon,
.light-theme .glossary-icon {
  background: linear-gradient(135deg, rgba(139, 92, 246, 0.12), rgba(168, 85, 247, 0.18));
  box-shadow: 0 4px 12px rgba(139, 92, 246, 0.1);
}

:root.light-theme .grounding-badge,
.light-theme .grounding-badge {
  background: linear-gradient(135deg, rgba(16, 185, 129, 0.12), rgba(59, 130, 246, 0.12));
  color: var(--success-600);
}

:root.light-theme .glossary-section:hover,
.light-theme .glossary-section:hover {
  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.04);
}

:root.light-theme .semantic-action-btn:hover,
.light-theme .semantic-action-btn:hover {
  box-shadow:
    0 8px 24px rgba(139, 92, 246, 0.12),
    0 4px 8px rgba(0, 0, 0, 0.06);
}

:root.light-theme .definition-source-card-header,
.light-theme .definition-source-card-header {
  background: linear-gradient(135deg, rgba(139, 92, 246, 0.05), rgba(59, 130, 246, 0.05));
}

/* ============================================================================
   DEFINITIONS HIERARCHY REDESIGN
   Information hierarchy: Identity â†’ Meaning Contract â†’ Impact â†’ Structure â†’ Provenance â†’ Notes
   ============================================================================ */

/* Definition Profile - Identity Header */
.definition-detail-view.hierarchy-redesign .definition-identity-header {
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  gap: 24px;
  padding: 24px;
  background: linear-gradient(135deg, rgba(99, 102, 241, 0.04), rgba(139, 92, 246, 0.04));
  border-radius: 12px;
  border: 1px solid rgba(99, 102, 241, 0.15);
  margin-bottom: 20px;
}

.definition-identity-header .identity-main {
  display: flex;
  gap: 16px;
  flex: 1;
}

.definition-identity-header .identity-icon {
  width: 56px;
  height: 56px;
  border-radius: 12px;
  display: flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
  border: 2px solid;
}

.definition-identity-header .identity-icon i {
  font-size: 24px;
}

.definition-identity-header .identity-icon.externally-grounded {
  box-shadow: 0 0 0 3px rgba(16, 185, 129, 0.2);
}

.definition-identity-header .identity-content {
  flex: 1;
  min-width: 0;
}

.definition-identity-header .identity-title-row {
  display: flex;
  align-items: center;
  gap: 12px;
  flex-wrap: wrap;
  margin-bottom: 8px;
}

.definition-identity-header .identity-name {
  font-size: 22px;
  font-weight: 600;
  color: var(--text-100);
  margin: 0;
}

.definition-identity-header .identity-badges {
  display: flex;
  gap: 8px;
  flex-wrap: wrap;
}

.definition-identity-header .kind-badge,
.definition-identity-header .stability-badge,
.definition-identity-header .scope-badge {
  display: inline-flex;
  align-items: center;
  gap: 4px;
  padding: 4px 10px;
  border-radius: 20px;
  font-size: 12px;
  font-weight: 500;
}

.definition-identity-header .scope-badge {
  background: var(--bg-300);
  color: var(--text-200);
}

.definition-identity-header .identity-purpose {
  color: var(--text-200);
  font-size: 14px;
  margin: 0 0 8px 0;
  line-height: 1.5;
}

.definition-identity-header .identity-uri {
  display: flex;
  align-items: center;
  gap: 6px;
  font-size: 12px;
  color: var(--text-300);
}

.definition-identity-header .identity-uri a {
  color: var(--primary-400);
  text-decoration: none;
}

.definition-identity-header .identity-uri a:hover {
  text-decoration: underline;
}

.definition-identity-header .identity-uri.local-warning {
  color: var(--warning-500);
}

.definition-identity-header .identity-uri .wikidata-id {
  background: var(--primary-500);
  color: white;
  padding: 2px 6px;
  border-radius: 4px;
  font-size: 10px;
  font-weight: 600;
}

.definition-identity-header .identity-actions {
  display: flex;
  gap: 8px;
  flex-shrink: 0;
}

.definition-identity-header .identity-actions .btn-icon {
  padding: 8px;
  min-width: auto;
}

/* Meaning Contract Section */
.meaning-contract-section {
  background: linear-gradient(135deg, rgba(168, 85, 247, 0.04), rgba(99, 102, 241, 0.04));
  border-color: rgba(168, 85, 247, 0.15);
}

.meaning-contract-section .section-header {
  margin-bottom: 16px;
}

.meaning-contract-section .section-header h3 {
  margin: 0;
  display: flex;
  align-items: center;
  gap: 8px;
  font-size: 15px;
  font-weight: 600;
  color: var(--text-100);
}

.meaning-contract-section .section-header h3 i {
  color: var(--primary-400);
}

.meaning-contract-content {
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  gap: 24px;
}

.contract-assertions .contract-label {
  display: block;
  font-size: 13px;
  color: var(--text-300);
  margin-bottom: 8px;
}

.contract-list {
  list-style: none;
  padding: 0;
  margin: 0;
}

.contract-list li {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 6px 0;
  font-size: 13px;
  color: var(--text-200);
}

.contract-list li i {
  color: var(--primary-400);
  font-size: 14px;
}

.contract-list li strong {
  color: var(--text-100);
  font-weight: 500;
}

.contract-stance {
  flex-shrink: 0;
}

.stance-badge {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  padding: 8px 14px;
  border-radius: 20px;
  font-size: 12px;
  font-weight: 500;
  background: var(--bg-300);
  color: var(--text-200);
}

.stance-badge.authoritative {
  background: rgba(16, 185, 129, 0.1);
  color: var(--success-500);
}

.stance-badge.interpretive {
  background: rgba(245, 158, 11, 0.1);
  color: var(--warning-600);
}

/* Impact & Usage Section */
.impact-usage-section .section-header {
  margin-bottom: 16px;
}

.impact-usage-section .section-header h3 {
  margin: 0;
  display: flex;
  align-items: center;
  gap: 8px;
  font-size: 15px;
  font-weight: 600;
  color: var(--text-100);
}

.impact-usage-section .section-header h3 i {
  color: var(--warning-500);
}

.impact-usage-content {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 24px;
  margin-bottom: 16px;
}

.impact-column-label {
  display: block;
  font-size: 12px;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  color: var(--text-300);
  margin-bottom: 12px;
}

.usage-stats {
  display: flex;
  gap: 16px;
  margin-bottom: 12px;
}

.usage-stat {
  display: flex;
  flex-direction: column;
  align-items: center;
  padding: 12px 16px;
  background: var(--bg-300);
  border-radius: 8px;
  min-width: 70px;
}

.usage-stat i {
  font-size: 18px;
  color: var(--text-300);
  margin-bottom: 4px;
}

.usage-stat .usage-count {
  font-size: 20px;
  font-weight: 600;
  color: var(--text-100);
}

.usage-stat .usage-label {
  font-size: 11px;
  color: var(--text-300);
  text-transform: uppercase;
}

.usage-details {
  padding: 12px;
  background: var(--bg-200);
  border-radius: 8px;
}

.usage-details-label {
  font-size: 12px;
  color: var(--text-300);
  display: block;
  margin-bottom: 8px;
}

.usage-details .used-by-list {
  display: flex;
  flex-direction: column;
  gap: 4px;
}

.usage-details .used-by-item {
  display: flex;
  align-items: center;
  gap: 6px;
  font-size: 13px;
  color: var(--text-200);
}

.usage-details .used-by-item i {
  color: var(--primary-400);
}

.usage-details .field-count {
  color: var(--text-300);
  font-size: 12px;
}

.usage-details .used-by-more {
  font-size: 12px;
  color: var(--primary-400);
  cursor: pointer;
}

.usage-empty {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 16px;
  background: var(--bg-200);
  border-radius: 8px;
  color: var(--text-300);
  font-size: 13px;
}

.effects-list {
  list-style: none;
  padding: 0;
  margin: 0;
}

.effects-list li {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 8px 0;
  font-size: 13px;
  color: var(--text-200);
  border-bottom: 1px solid var(--bg-300);
}

.effects-list li:last-child {
  border-bottom: none;
}

.effects-list li i {
  color: var(--success-500);
}

.semantic-actions-bar {
  display: flex;
  gap: 8px;
  padding-top: 16px;
  border-top: 1px solid var(--bg-300);
}

.semantic-actions-bar .semantic-action-btn {
  flex: 1;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 6px;
  padding: 10px 16px;
  background: var(--bg-300);
  border: 1px solid var(--border-200);
  border-radius: 8px;
  color: var(--text-200);
  font-size: 13px;
  cursor: pointer;
  transition: all 0.2s;
}

.semantic-actions-bar .semantic-action-btn:hover {
  background: var(--bg-400);
  color: var(--text-100);
  border-color: var(--primary-400);
}

.semantic-actions-bar .semantic-action-btn i {
  font-size: 16px;
}

/* Structure Section */
.definition-structure-section .section-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 16px;
}

.definition-structure-section .section-header h3 {
  margin: 0;
  display: flex;
  align-items: center;
  gap: 8px;
  font-size: 15px;
  font-weight: 600;
  color: var(--text-100);
}

.definition-structure-section .section-header h3 i {
  color: var(--primary-400);
}

.definition-structure-section .terms-count {
  background: var(--primary-500);
  color: white;
  padding: 4px 10px;
  border-radius: 12px;
  font-size: 12px;
  font-weight: 500;
}

/* Provenance Section */
.provenance-section {
  border-color: var(--border-200);
}

.provenance-section .collapsible-header {
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 8px;
  margin: 0;
  font-size: 15px;
  font-weight: 600;
  color: var(--text-100);
}

.provenance-section .collapsible-header i:first-child {
  color: var(--text-300);
}

.provenance-section .toggle-icon {
  margin-left: auto;
  transition: transform 0.2s;
}

.provenance-section.collapsed .toggle-icon {
  transform: rotate(-90deg);
}

.provenance-section.collapsed .provenance-content {
  display: none;
}

.provenance-content {
  margin-top: 16px;
}

.provenance-empty {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 16px;
  background: var(--bg-200);
  border-radius: 8px;
  color: var(--text-300);
  font-size: 13px;
}

/* Notes & Rationale Section */
.notes-rationale-section {
  border-color: var(--border-200);
}

.notes-rationale-section .collapsible-header {
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 8px;
  margin: 0;
  font-size: 15px;
  font-weight: 600;
  color: var(--text-100);
}

.notes-rationale-section .collapsible-header i:first-child {
  color: var(--text-300);
}

.notes-rationale-section .optional-badge {
  font-size: 10px;
  font-weight: 500;
  text-transform: uppercase;
  padding: 2px 6px;
  background: var(--bg-300);
  border-radius: 4px;
  color: var(--text-300);
}

.notes-rationale-section .toggle-icon {
  margin-left: auto;
  transition: transform 0.2s;
}

.notes-rationale-section.collapsed .toggle-icon {
  transform: rotate(-90deg);
}

.notes-rationale-section.collapsed .notes-rationale-content {
  display: none;
}

.notes-rationale-content {
  margin-top: 16px;
}

/* ============================================================================
   DEFINITIONS PANEL - HIERARCHY REDESIGN
   ============================================================================ */

.definitions-panel-view.hierarchy-redesign .definitions-panel-toolbar {
  display: flex;
  align-items: center;
  gap: 12px;
  flex-wrap: wrap;
}

.definitions-panel-view-toggle {
  display: flex;
  background: var(--bg-300);
  border-radius: 6px;
  padding: 2px;
}

.view-toggle-btn {
  padding: 6px 10px;
  background: transparent;
  border: none;
  border-radius: 4px;
  color: var(--text-300);
  cursor: pointer;
  transition: all 0.2s;
}

.view-toggle-btn:hover {
  color: var(--text-200);
}

.view-toggle-btn.active {
  background: var(--bg-100);
  color: var(--primary-500);
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
}

.view-toggle-btn i {
  font-size: 16px;
}

.definitions-count {
  font-size: 13px;
  color: var(--text-300);
  margin-left: auto;
}

/* Grouped View */
.definitions-grouped-view {
  display: flex;
  flex-direction: column;
  gap: 20px;
}

.definitions-kind-group {
  background: var(--bg-200);
  border-radius: 12px;
  border: 1px solid var(--border-200);
  overflow: hidden;
}

.kind-group-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 12px 16px;
  background: var(--bg-300);
  border-bottom: 1px solid var(--border-200);
}

.kind-group-title {
  display: flex;
  align-items: center;
  gap: 8px;
}

.kind-group-title i {
  font-size: 18px;
}

.kind-group-title .kind-name {
  font-weight: 600;
  color: var(--text-100);
  font-size: 14px;
}

.kind-group-title .kind-count {
  background: var(--bg-400);
  padding: 2px 8px;
  border-radius: 10px;
  font-size: 12px;
  color: var(--text-200);
}

.kind-description {
  font-size: 12px;
  color: var(--text-300);
}

.kind-group-items {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
  gap: 12px;
  padding: 12px;
}

.definition-grouped-item {
  display: flex;
  flex-direction: column;
  gap: 8px;
  padding: 12px;
  background: var(--bg-100);
  border-radius: 8px;
  border: 1px solid var(--border-200);
  cursor: pointer;
  transition: all 0.2s;
}

.definition-grouped-item:hover {
  border-color: var(--primary-400);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
  transform: translateY(-1px);
}

.grouped-item-main {
  display: flex;
  gap: 10px;
}

.grouped-item-icon {
  width: 36px;
  height: 36px;
  border-radius: 8px;
  background: var(--bg-200);
  display: flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
}

.grouped-item-icon i {
  font-size: 18px;
}

.grouped-item-content {
  flex: 1;
  min-width: 0;
}

.grouped-item-header {
  display: flex;
  align-items: center;
  gap: 8px;
  margin-bottom: 4px;
}

.grouped-item-name {
  font-weight: 500;
  color: var(--text-100);
  font-size: 14px;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.stability-pill {
  font-size: 10px;
  font-weight: 500;
  padding: 2px 6px;
  border-radius: 10px;
  flex-shrink: 0;
}

.grouped-item-terms {
  display: flex;
  flex-wrap: wrap;
  gap: 4px;
}

.term-chip {
  font-size: 11px;
  padding: 2px 6px;
  background: var(--bg-300);
  border-radius: 4px;
  color: var(--text-200);
}

.term-more {
  font-size: 11px;
  color: var(--primary-400);
}

.grouped-item-meta {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding-top: 8px;
  border-top: 1px solid var(--border-200);
}

.scope-indicator {
  display: flex;
  align-items: center;
  gap: 4px;
  font-size: 11px;
  color: var(--text-300);
}

.scope-indicator i {
  font-size: 12px;
}

.grouped-item-meta .usage-indicator {
  font-size: 12px;
  font-weight: 500;
  color: var(--text-200);
  background: var(--bg-300);
  padding: 2px 8px;
  border-radius: 10px;
}

/* Table View - New Hierarchy Columns */
.definitions-panel-table.new-hierarchy {
  width: 100%;
  border-collapse: separate;
  border-spacing: 0;
}

.definitions-panel-table.new-hierarchy th {
  text-align: left;
  padding: 12px 16px;
  font-size: 12px;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  color: var(--text-300);
  background: var(--bg-200);
  border-bottom: 1px solid var(--border-200);
}

.definitions-panel-table.new-hierarchy .definition-row {
  cursor: pointer;
  transition: background 0.2s;
}

.definitions-panel-table.new-hierarchy .definition-row:hover {
  background: var(--bg-200);
}

.definitions-panel-table.new-hierarchy .definition-row td {
  padding: 12px 16px;
  border-bottom: 1px solid var(--border-200);
  vertical-align: middle;
}

.definitions-panel-table.new-hierarchy .col-expand {
  width: 40px;
}

.definitions-panel-table.new-hierarchy .col-name {
  min-width: 200px;
}

.definitions-panel-table.new-hierarchy .col-kind,
.definitions-panel-table.new-hierarchy .col-status,
.definitions-panel-table.new-hierarchy .col-scope {
  width: 120px;
}

.definitions-panel-table.new-hierarchy .col-usage {
  width: 80px;
  text-align: center;
}

.definitions-panel-table.new-hierarchy .col-actions {
  width: 140px;
}

.definitions-panel-table.new-hierarchy .def-name-cell {
  display: flex;
  align-items: center;
  gap: 10px;
}

.definitions-panel-table.new-hierarchy .def-icon {
  font-size: 18px;
}

.definitions-panel-table.new-hierarchy .def-name-content {
  display: flex;
  flex-direction: column;
  gap: 2px;
}

.definitions-panel-table.new-hierarchy .def-name-text {
  font-weight: 500;
  color: var(--text-100);
}

.definitions-panel-table.new-hierarchy .def-term-count {
  font-size: 11px;
  color: var(--text-300);
}

.definitions-panel-table.new-hierarchy .kind-badge,
.definitions-panel-table.new-hierarchy .stability-badge,
.definitions-panel-table.new-hierarchy .scope-badge {
  display: inline-flex;
  align-items: center;
  gap: 4px;
  padding: 4px 10px;
  border-radius: 16px;
  font-size: 12px;
  font-weight: 500;
}

.definitions-panel-table.new-hierarchy .scope-badge {
  background: var(--bg-300);
  color: var(--text-200);
}

.definitions-panel-table.new-hierarchy .usage-badge {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  min-width: 28px;
  height: 28px;
  border-radius: 14px;
  font-size: 13px;
  font-weight: 600;
}

.definitions-panel-table.new-hierarchy .usage-badge.has-usage {
  background: var(--success-500);
  color: white;
}

.definitions-panel-table.new-hierarchy .usage-badge.no-usage {
  background: var(--bg-300);
  color: var(--text-300);
}

/* Expanded Row */
.definition-expanded-row {
  background: var(--bg-200);
}

.definition-expanded-row td {
  padding: 0 !important;
}

.def-expanded-content {
  padding: 16px 24px;
  display: flex;
  flex-wrap: wrap;
  gap: 20px;
  align-items: flex-start;
}

.expanded-section {
  display: flex;
  align-items: flex-start;
  gap: 8px;
}

.expanded-label {
  font-size: 12px;
  font-weight: 600;
  color: var(--text-300);
  white-space: nowrap;
}

.contract-text,
.impact-text {
  font-size: 13px;
  color: var(--text-200);
}

.expanded-actions {
  display: flex;
  gap: 8px;
  margin-left: auto;
}

.expanded-action-btn {
  display: flex;
  align-items: center;
  gap: 4px;
  padding: 6px 12px;
  background: var(--bg-300);
  border: 1px solid var(--border-200);
  border-radius: 6px;
  color: var(--text-200);
  font-size: 12px;
  cursor: pointer;
  transition: all 0.2s;
}

.expanded-action-btn:hover {
  background: var(--bg-400);
  border-color: var(--primary-400);
  color: var(--primary-400);
}

.expanded-action-btn i {
  font-size: 14px;
}

.terms-preview {
  width: 100%;
  margin-top: 8px;
  padding-top: 12px;
  border-top: 1px solid var(--border-200);
}

.terms-chips {
  display: flex;
  flex-wrap: wrap;
  gap: 6px;
  margin-top: 6px;
}

/* Light Theme Adjustments for Hierarchy Redesign */
:root.light-theme .definition-identity-header,
.light-theme .definition-identity-header {
  background: linear-gradient(135deg, rgba(99, 102, 241, 0.06), rgba(139, 92, 246, 0.06));
}

:root.light-theme .definitions-kind-group,
.light-theme .definitions-kind-group {
  background: white;
}

:root.light-theme .definition-grouped-item,
.light-theme .definition-grouped-item {
  background: white;
}

:root.light-theme .definition-grouped-item:hover,
.light-theme .definition-grouped-item:hover {
  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.08);
}

/* ===== EO Formula Decomposition Visualization ===== */

/* EO Pipeline Visualization Container */
.eo-decomposition {
  background: var(--bg-secondary, #1e293b);
  border-radius: 8px;
  padding: 12px;
  margin-top: 12px;
  font-size: 13px;
  border: 1px solid var(--border-100, rgba(255,255,255,0.08));
}

.eo-decomposition h4 {
  font-size: 11px;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  color: var(--text-muted, #94a3b8);
  margin: 0 0 8px 0;
}

.eo-decomposition h4:not(:first-child) {
  margin-top: 12px;
}

/* Pipeline Step */
.eo-pipeline-step {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 6px 8px;
  background: var(--bg-tertiary, #334155);
  border-radius: 4px;
  margin-bottom: 4px;
  font-family: 'SF Mono', 'Fira Code', monospace;
}

.eo-pipeline-step:last-child {
  margin-bottom: 0;
}

/* EO Operator Badge */
.eo-operator {
  font-weight: 600;
  font-size: 11px;
  font-family: 'SF Mono', 'Fira Code', monospace;
  padding: 2px 8px;
  border-radius: 3px;
  min-width: 36px;
  text-align: center;
}

/* Operator-specific colors */
.eo-operator.eo-op-con,
.eo-badge-con {
  background: rgba(236, 72, 153, 0.15);
  color: #ec4899;
  border: 1px solid rgba(236, 72, 153, 0.3);
}

.eo-operator.eo-op-seg,
.eo-badge-seg {
  background: rgba(245, 158, 11, 0.15);
  color: #f59e0b;
  border: 1px solid rgba(245, 158, 11, 0.3);
}

.eo-operator.eo-op-des,
.eo-badge-des {
  background: rgba(59, 130, 246, 0.15);
  color: #3b82f6;
  border: 1px solid rgba(59, 130, 246, 0.3);
}

.eo-operator.eo-op-syn,
.eo-badge-syn {
  background: rgba(16, 185, 129, 0.15);
  color: #10b981;
  border: 1px solid rgba(16, 185, 129, 0.3);
}

.eo-operator.eo-op-alt,
.eo-badge-alt {
  background: rgba(139, 92, 246, 0.15);
  color: #8b5cf6;
  border: 1px solid rgba(139, 92, 246, 0.3);
}

.eo-operator.eo-op-nul,
.eo-badge-nul {
  background: rgba(107, 114, 128, 0.15);
  color: #9ca3af;
  border: 1px solid rgba(107, 114, 128, 0.3);
}

.eo-operator.eo-op-ins,
.eo-badge-ins {
  background: rgba(6, 182, 212, 0.15);
  color: #06b6d4;
  border: 1px solid rgba(6, 182, 212, 0.3);
}

.eo-operator.eo-op-sup,
.eo-badge-sup {
  background: rgba(249, 115, 22, 0.15);
  color: #f97316;
  border: 1px solid rgba(249, 115, 22, 0.3);
}

/* Pipeline Step Description */
.eo-step-desc {
  color: var(--text-secondary, #cbd5e1);
  font-size: 12px;
  flex: 1;
}

.eo-params {
  color: var(--text-muted, #94a3b8);
  font-family: 'SF Mono', 'Fira Code', monospace;
  font-size: 11px;
}

/* Dependencies Section */
.eo-dependencies {
  color: var(--text-muted, #94a3b8);
  font-size: 12px;
  display: flex;
  flex-direction: column;
  gap: 4px;
}

.eo-dependencies div {
  display: flex;
  align-items: center;
  gap: 6px;
}

.eo-dependencies strong {
  color: var(--text-secondary, #cbd5e1);
  font-weight: 500;
  min-width: 80px;
}

/* EO Badge for Function Browser */
.eo-badge {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  font-size: 9px;
  font-weight: 600;
  font-family: 'SF Mono', 'Fira Code', monospace;
  padding: 2px 5px;
  border-radius: 3px;
  margin-right: 3px;
}

/* Function Browser with EO */
.formula-fn-item .formula-fn-operators {
  display: flex;
  flex-wrap: wrap;
  gap: 3px;
  margin-top: 6px;
}

.formula-fn-eo-explanation {
  font-size: 11px;
  color: var(--text-muted, #94a3b8);
  font-style: italic;
  margin-top: 4px;
  padding-top: 4px;
  border-top: 1px dashed var(--border-100, rgba(255,255,255,0.08));
}

/* Error State */
.eo-error {
  color: var(--danger-500, #ef4444);
  background: var(--danger-50, rgba(239, 68, 68, 0.1));
  padding: 8px 12px;
  border-radius: 6px;
  font-size: 12px;
  border: 1px solid rgba(239, 68, 68, 0.2);
}

/* Pipeline Flow Arrow */
.eo-pipeline-step::before {
  content: '';
  width: 0;
  height: 0;
  border-left: 4px solid transparent;
  border-right: 4px solid transparent;
  border-top: 4px solid var(--text-muted, #94a3b8);
  position: absolute;
  left: 50%;
  top: -6px;
  transform: translateX(-50%);
  display: none;
}

.eo-pipeline-step:not(:first-child)::before {
  display: block;
}

/* Compact Pipeline View */
.eo-pipeline-compact {
  display: flex;
  flex-wrap: wrap;
  gap: 4px;
  align-items: center;
}

.eo-pipeline-compact .eo-badge {
  margin-right: 0;
}

.eo-pipeline-compact .eo-arrow {
  color: var(--text-muted, #94a3b8);
  font-size: 10px;
}

/* Light Theme Adjustments for EO Decomposition */
:root.light-theme .eo-decomposition,
.light-theme .eo-decomposition {
  background: var(--gray-50, #f9fafb);
  border-color: var(--gray-200, #e5e7eb);
}

:root.light-theme .eo-pipeline-step,
.light-theme .eo-pipeline-step {
  background: white;
  border: 1px solid var(--gray-200, #e5e7eb);
}

:root.light-theme .eo-step-desc,
.light-theme .eo-step-desc {
  color: var(--gray-700, #374151);
}

:root.light-theme .eo-params,
.light-theme .eo-params {
  color: var(--gray-500, #6b7280);
}

:root.light-theme .eo-dependencies,
.light-theme .eo-dependencies {
  color: var(--gray-500, #6b7280);
}

:root.light-theme .eo-dependencies strong,
.light-theme .eo-dependencies strong {
  color: var(--gray-700, #374151);
}
