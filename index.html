<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>EO Lake - Data Workbench</title>

  <!-- Phosphor Icons -->
  <script src="https://unpkg.com/@phosphor-icons/web"></script>

  <link rel="stylesheet" href="eo_styles.css">
</head>
<body>
  <div class="app-container">
    <!-- Sidebar -->
    <aside class="sidebar" id="app-sidebar">
      <div class="sidebar-header">
        <div class="logo">
          <div class="logo-icon">
            <i class="ph ph-database"></i>
          </div>
          <span class="logo-text">EO Lake</span>
        </div>
        <button class="sidebar-collapse-btn" id="sidebar-collapse">
          <i class="ph ph-caret-left"></i>
        </button>
      </div>

      <!-- Search -->
      <div class="sidebar-search">
        <div class="search-input-wrapper">
          <i class="ph ph-magnifying-glass"></i>
          <input type="text" placeholder="Search..." id="global-search">
        </div>
      </div>

      <!-- Sets Navigation -->
      <nav class="sidebar-nav">
        <div class="nav-section">
          <div class="nav-section-header">
            <span class="nav-section-title">Sets</span>
            <button class="nav-section-action" id="btn-new-set" title="Add Set">
              <i class="ph ph-plus"></i>
            </button>
          </div>
          <div class="nav-items" id="sets-nav">
            <!-- Sets rendered dynamically -->
          </div>
        </div>

        <div class="nav-section">
          <div class="nav-section-header">
            <span class="nav-section-title">Views</span>
            <button class="nav-section-action" id="btn-new-view" title="Add View">
              <i class="ph ph-plus"></i>
            </button>
          </div>
          <div class="nav-items" id="views-nav">
            <!-- Views rendered dynamically -->
          </div>
        </div>
      </nav>

      <!-- Sidebar Footer -->
      <div class="sidebar-footer">
        <div class="nav-item" id="nav-settings">
          <i class="ph ph-gear"></i>
          <span>Settings</span>
        </div>
        <div class="nav-item" id="nav-sync">
          <i class="ph ph-cloud-check"></i>
          <span>Sync Status</span>
          <span class="sync-badge synced" id="sync-status-badge">
            <i class="ph ph-check-circle"></i>
          </span>
        </div>
      </div>
    </aside>

    <!-- Main Content -->
    <main class="main-content">
      <!-- Top Toolbar -->
      <header class="header">
        <div class="header-left">
          <button class="header-btn mobile-menu" id="mobile-menu-btn">
            <i class="ph ph-list"></i>
          </button>
          <div class="breadcrumb">
            <span class="breadcrumb-item" id="current-set-name">All Records</span>
            <i class="ph ph-caret-right"></i>
            <span class="breadcrumb-item active" id="current-view-name">Table View</span>
          </div>
        </div>
        <div class="header-center">
          <!-- View Switcher -->
          <div class="view-switcher">
            <button class="view-switch-btn active" data-view="table" title="Table View">
              <i class="ph ph-table"></i>
            </button>
            <button class="view-switch-btn" data-view="cards" title="Card View">
              <i class="ph ph-cards"></i>
            </button>
            <button class="view-switch-btn" data-view="kanban" title="Kanban View">
              <i class="ph ph-kanban"></i>
            </button>
            <button class="view-switch-btn" data-view="calendar" title="Calendar View">
              <i class="ph ph-calendar-blank"></i>
            </button>
            <button class="view-switch-btn" data-view="graph" title="Graph View">
              <i class="ph ph-graph"></i>
            </button>
          </div>
        </div>
        <div class="header-right">
          <div class="header-actions">
            <button class="header-btn" id="btn-filter" title="Filter">
              <i class="ph ph-funnel"></i>
              <span class="btn-label">Filter</span>
            </button>
            <button class="header-btn" id="btn-sort" title="Sort">
              <i class="ph ph-sort-ascending"></i>
              <span class="btn-label">Sort</span>
            </button>
            <button class="header-btn" id="btn-group" title="Group">
              <i class="ph ph-rows"></i>
              <span class="btn-label">Group</span>
            </button>
            <div class="header-divider"></div>
            <button class="header-btn primary" id="btn-add-record">
              <i class="ph ph-plus"></i>
              <span class="btn-label">Add Record</span>
            </button>
          </div>
        </div>
      </header>

      <!-- Content Area -->
      <div class="content-area" id="content-area">
        <!-- Workbench rendered here -->
      </div>

      <!-- Status Bar -->
      <footer class="status-bar">
        <div class="status-left">
          <span class="status-item" id="record-count">
            <i class="ph ph-rows"></i>
            <span>0 records</span>
          </span>
          <span class="status-divider"></span>
          <span class="status-item" id="selected-count">
            <i class="ph ph-check-square"></i>
            <span>0 selected</span>
          </span>
        </div>
        <div class="status-center">
          <span class="status-item eo-indicator" id="eo-status">
            <span class="eo-dot given"></span>
            <span class="eo-dot meant"></span>
            <span>EO Compliant</span>
          </span>
        </div>
        <div class="status-right">
          <span class="status-item" id="last-saved">
            <i class="ph ph-clock"></i>
            <span>Just now</span>
          </span>
        </div>
      </footer>
    </main>

    <!-- Record Detail Panel (Right Sidebar) -->
    <aside class="detail-panel" id="detail-panel">
      <div class="detail-panel-header">
        <h3>Record Details</h3>
        <button class="detail-panel-close" id="detail-panel-close">
          <i class="ph ph-x"></i>
        </button>
      </div>
      <div class="detail-panel-body" id="detail-panel-body">
        <div class="empty-state-small">
          <i class="ph ph-cursor-click"></i>
          <p>Select a record to view details</p>
        </div>
      </div>
    </aside>
  </div>

  <!-- Modal Overlay -->
  <div class="modal-overlay" id="modal-overlay">
    <div class="modal" id="modal">
      <div class="modal-header">
        <h3 class="modal-title">Modal Title</h3>
        <button class="modal-close" id="modal-close">
          <i class="ph ph-x"></i>
        </button>
      </div>
      <div class="modal-body" id="modal-body">
        <!-- Modal content -->
      </div>
      <div class="modal-footer" id="modal-footer">
        <button class="btn btn-secondary" id="modal-cancel">Cancel</button>
        <button class="btn btn-primary" id="modal-confirm">Save</button>
      </div>
    </div>
  </div>

  <!-- Context Menu -->
  <div class="context-menu" id="context-menu">
    <!-- Context menu items rendered dynamically -->
  </div>

  <!-- Field Type Picker -->
  <div class="field-type-picker" id="field-type-picker">
    <div class="field-type-list">
      <div class="field-type-item" data-type="text">
        <i class="ph ph-text-aa"></i>
        <span>Single line text</span>
      </div>
      <div class="field-type-item" data-type="longText">
        <i class="ph ph-text-align-left"></i>
        <span>Long text</span>
      </div>
      <div class="field-type-item" data-type="number">
        <i class="ph ph-hash"></i>
        <span>Number</span>
      </div>
      <div class="field-type-item" data-type="select">
        <i class="ph ph-list-bullets"></i>
        <span>Single select</span>
      </div>
      <div class="field-type-item" data-type="multiSelect">
        <i class="ph ph-list-checks"></i>
        <span>Multiple select</span>
      </div>
      <div class="field-type-item" data-type="date">
        <i class="ph ph-calendar"></i>
        <span>Date</span>
      </div>
      <div class="field-type-item" data-type="checkbox">
        <i class="ph ph-check-square"></i>
        <span>Checkbox</span>
      </div>
      <div class="field-type-item" data-type="link">
        <i class="ph ph-link"></i>
        <span>Link to record</span>
      </div>
      <div class="field-type-item" data-type="attachment">
        <i class="ph ph-paperclip"></i>
        <span>Attachment</span>
      </div>
      <div class="field-type-item" data-type="url">
        <i class="ph ph-globe"></i>
        <span>URL</span>
      </div>
      <div class="field-type-item" data-type="email">
        <i class="ph ph-envelope"></i>
        <span>Email</span>
      </div>
      <div class="field-type-item" data-type="phone">
        <i class="ph ph-phone"></i>
        <span>Phone</span>
      </div>
      <div class="field-type-item" data-type="formula">
        <i class="ph ph-function"></i>
        <span>Formula</span>
      </div>
      <div class="field-type-item" data-type="rollup">
        <i class="ph ph-sigma"></i>
        <span>Rollup</span>
      </div>
      <div class="field-type-item" data-type="count">
        <i class="ph ph-number-circle-one"></i>
        <span>Count</span>
      </div>
      <div class="field-type-item" data-type="autonumber">
        <i class="ph ph-number-square-one"></i>
        <span>Autonumber</span>
      </div>
    </div>
  </div>

  <!-- Principles Transparency Panel Container -->
  <div id="principles-panel" class="principles-panel"></div>

  <!-- Scripts - Core EO Modules -->
  <script src="eo_event_store.js"></script>
  <script src="eo_horizon.js"></script>
  <script src="eo_compliance.js"></script>
  <script src="eo_state_derivation.js"></script>
  <script src="eo_persistence.js"></script>
  <script src="eo_sync.js"></script>

  <!-- Scripts - Feature Modules -->
  <script src="eo_event_bus.js"></script>
  <script src="eo_views.js"></script>
  <script src="eo_graph.js"></script>
  <script src="eo_data_workbench.js"></script>

  <!-- Scripts - Transparency -->
  <script src="eo_principles_transparency.js"></script>

  <!-- Scripts - UI Controllers -->
  <script src="eo_app.js"></script>
  <script src="eo_workbench.js"></script>

  <!-- Initialize Application -->
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      // Initialize the data workbench
      if (window.initApp) {
        window.initApp();
      }

      // Initialize the transparency panel
      if (window.initTransparencyPanel) {
        const transparency = window.initTransparencyPanel({
          eventBus: window.getEventBus ? window.getEventBus() : null
        });
        transparency.init('principles-panel');

        // Connect to app if available
        if (window.EOApp) {
          transparency.connect(window.EOApp);
        }
      }
    });
  </script>
</body>
</html>
